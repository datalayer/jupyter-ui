import{l as t}from"./JupyterReactTheme-CX3WbnDJ.js";const e=16895,a="/api/drive.v1";new TextEncoder,new TextDecoder("utf-8");class n{contentsManager;constructor(t){this.contentsManager=t.contentsManager}async processDriveRequest(t){switch(t.method){case"readdir":return this.readdir(t);case"rmdir":return this.rmdir(t);case"rename":return this.rename(t);case"getmode":return this.getmode(t);case"lookup":return this.lookup(t);case"mknod":return this.mknod(t);case"getattr":return this.getattr(t);case"get":return this.get(t);case"put":return this.put(t)}throw`Drive request ${t.method} does not exist.`}async readdir(t){const e=await this.contentsManager.get(t.path,{content:!0});let a=[];return"directory"===e.type&&e.content&&(a=e.content.map(t=>t.name)),a}async rmdir(t){return await this.contentsManager.delete(t.path),null}async rename(t){return await this.contentsManager.rename(t.path,t.data.newPath),null}async getmode(t){let a;return a="directory"===(await this.contentsManager.get(t.path)).type?e:33206,a}async lookup(t){let a;try{a={ok:!0,mode:"directory"===(await this.contentsManager.get(t.path)).type?e:33206}}catch(n){a={ok:!1}}return a}async mknod(a){const n=await this.contentsManager.newUntitled({path:t.PathExt.dirname(a.path),type:a.data.mode===e?"directory":"file",ext:t.PathExt.extname(a.path)});return await this.contentsManager.rename(n.path,a.path),null}async getattr(t){const e=await this.contentsManager.get(t.path),a=/* @__PURE__ */new Date(0).toISOString();return{dev:1,nlink:1,uid:0,gid:0,rdev:0,size:e.size||0,blksize:4096,blocks:Math.ceil(e.size||0),atime:e.last_modified||a,mtime:e.last_modified||a,ctime:e.created||a,timestamp:0}}async get(t){const e=await this.contentsManager.get(t.path,{content:!0});let a;return"directory"!==e.type&&(a={content:"json"===e.format?JSON.stringify(e.content):e.content,format:e.format}),a}async put(t){return await this.contentsManager.save(t.path,{content:"json"===t.data.format?JSON.parse(t.data.data):t.data.data,type:"file",format:t.data.format}),null}}export{n as D,a};
//# sourceMappingURL=drivecontents-BJnbG0Iq.js.map
