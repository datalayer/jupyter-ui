{"version":3,"file":"CellChunk-DNBlmMXN.js","sources":["../../../../node_modules/@jupyterlab/statusbar/lib/components/text.js","../../../../node_modules/@jupyterlab/statusbar/lib/statusbar.js","../../../../node_modules/@jupyterlab/apputils/lib/kernelstatuses.js","../../../../node_modules/@jupyterlab/apputils/lib/toolbar/widget.js","../../../../node_modules/@jupyterlab/apputils/lib/index.js","../../../react/lib/components/cell/CellCommands.js","../../../react/lib/components/cell/CellAdapter.js","../../../react/lib/components/cell/Cell.js","../../src/chunks/CellChunk.tsx"],"sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport * as React from 'react';\n/**\n * A functional tsx component for a text item.\n */\nexport function TextItem(props) {\n    const { title, source, className, ...rest } = props;\n    return (React.createElement(\"span\", { className: className\n            ? `jp-StatusBar-TextItem ${className}`\n            : 'jp-StatusBar-TextItem', title: title, ...rest }, source));\n}\n//# sourceMappingURL=text.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { ArrayExt } from '@lumino/algorithm';\nimport { DisposableDelegate, DisposableSet } from '@lumino/disposable';\nimport { Panel, PanelLayout, Widget } from '@lumino/widgets';\n/**\n * Main status bar object which contains all items.\n */\nexport class StatusBar extends Widget {\n    constructor() {\n        super();\n        this._isWindowNarrow = () => {\n            // The value for 630px was chosen by trial and error.\n            // When the screen width drops below 630px, there is no\n            // longer enough space for all the items in the status bar\n            // (with notebook open), and items become clipped.\n            return window.innerWidth <= 630;\n        };\n        this._leftRankItems = [];\n        this._rightRankItems = [];\n        this._statusItems = {};\n        this._disposables = new DisposableSet();\n        this.addClass('jp-StatusBar-Widget');\n        const rootLayout = (this.layout = new PanelLayout());\n        const leftPanel = (this._leftSide = new Panel());\n        const middlePanel = (this._middlePanel = new Panel());\n        const rightPanel = (this._rightSide = new Panel());\n        leftPanel.addClass('jp-StatusBar-Left');\n        middlePanel.addClass('jp-StatusBar-Middle');\n        rightPanel.addClass('jp-StatusBar-Right');\n        rightPanel.node.style.flexDirection = 'row';\n        rootLayout.addWidget(leftPanel);\n        rootLayout.addWidget(middlePanel);\n        rootLayout.addWidget(rightPanel);\n    }\n    /**\n     * Register a new status item.\n     *\n     * @param id - a unique id for the status item.\n     * @param statusItem - The item to add to the status bar.\n     *\n     * @returns Disposable status bar item\n     */\n    registerStatusItem(id, statusItem) {\n        if (id in this._statusItems) {\n            throw new Error(`Status item ${id} already registered.`);\n        }\n        // Populate defaults for the optional properties of the status item.\n        const fullStatusItem = {\n            ...Private.statusItemDefaults,\n            ...statusItem\n        };\n        const { align, item, rank, priority } = fullStatusItem;\n        // Connect the activeStateChanged signal to refreshing the status item,\n        // if the signal was provided.\n        const onActiveStateChanged = () => {\n            this._refreshItem(id);\n        };\n        if (fullStatusItem.activeStateChanged) {\n            fullStatusItem.activeStateChanged.connect(onActiveStateChanged);\n        }\n        const rankItem = { id, rank, priority };\n        fullStatusItem.item.addClass('jp-StatusBar-Item');\n        this._statusItems[id] = fullStatusItem;\n        if (align === 'left') {\n            const insertIndex = this._findInsertIndex(this._leftRankItems, rankItem);\n            if (insertIndex === -1) {\n                this._leftSide.addWidget(item);\n                this._leftRankItems.push(rankItem);\n            }\n            else {\n                ArrayExt.insert(this._leftRankItems, insertIndex, rankItem);\n                this._leftSide.insertWidget(insertIndex, item);\n            }\n        }\n        else if (align === 'right') {\n            const insertIndex = ArrayExt.findFirstIndex(this._rightRankItems, item => item.rank < rankItem.rank);\n            if (insertIndex === -1) {\n                this._rightSide.addWidget(item);\n                this._rightRankItems.push(rankItem);\n            }\n            else {\n                ArrayExt.insert(this._rightRankItems, insertIndex, rankItem);\n                this._rightSide.insertWidget(insertIndex, item);\n            }\n        }\n        else {\n            this._middlePanel.addWidget(item);\n        }\n        this._refreshItem(id); // Initially refresh the status item.\n        const disposable = new DisposableDelegate(() => {\n            delete this._statusItems[id];\n            if (fullStatusItem.activeStateChanged) {\n                fullStatusItem.activeStateChanged.disconnect(onActiveStateChanged);\n            }\n            item.parent = null;\n            item.dispose();\n        });\n        this._disposables.add(disposable);\n        return disposable;\n    }\n    /**\n     * Dispose of the status bar.\n     */\n    dispose() {\n        this._leftRankItems.length = 0;\n        this._rightRankItems.length = 0;\n        this._disposables.dispose();\n        super.dispose();\n    }\n    /**\n     * Handle an 'update-request' message to the status bar.\n     */\n    onUpdateRequest(msg) {\n        this._refreshAll();\n        super.onUpdateRequest(msg);\n    }\n    _findInsertIndex(side, newItem) {\n        return ArrayExt.findFirstIndex(side, item => item.rank > newItem.rank);\n    }\n    _refreshItem(id) {\n        const statusItem = this._statusItems[id];\n        if (statusItem.isActive() &&\n            !(statusItem.priority === 0 && this._isWindowNarrow())) {\n            statusItem.item.show();\n            statusItem.item.update();\n        }\n        else {\n            statusItem.item.hide();\n        }\n    }\n    _refreshAll() {\n        Object.keys(this._statusItems).forEach(id => {\n            this._refreshItem(id);\n        });\n    }\n}\n/**\n * A namespace for private functionality.\n */\nvar Private;\n(function (Private) {\n    /**\n     * Default options for a status item, less the item itself.\n     */\n    Private.statusItemDefaults = {\n        align: 'left',\n        rank: 0,\n        priority: 0,\n        isActive: () => true,\n        activeStateChanged: undefined\n    };\n})(Private || (Private = {}));\n//# sourceMappingURL=statusbar.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { TextItem } from '@jupyterlab/statusbar';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { VDomModel, VDomRenderer } from '@jupyterlab/ui-components';\nimport { JSONExt } from '@lumino/coreutils';\nimport React from 'react';\n/**\n * Helper function to translate kernel statuses mapping by using\n * input translator.\n *\n * @param translator - Language translator.\n * @return The translated kernel status mapping.\n */\nexport function translateKernelStatuses(translator) {\n    translator = translator || nullTranslator;\n    const trans = translator.load('jupyterlab');\n    const translated = {\n        unknown: trans.__('Unknown'),\n        starting: trans.__('Starting'),\n        idle: trans.__('Idle'),\n        busy: trans.__('Busy'),\n        terminating: trans.__('Terminating'),\n        restarting: trans.__('Restarting'),\n        autorestarting: trans.__('Autorestarting'),\n        dead: trans.__('Dead'),\n        connected: trans.__('Connected'),\n        connecting: trans.__('Connecting'),\n        disconnected: trans.__('Disconnected'),\n        initializing: trans.__('Initializing'),\n        '': ''\n    };\n    return translated;\n}\n/**\n * A pure functional component for rendering kernel status.\n */\nfunction KernelStatusComponent(props) {\n    const translator = props.translator || nullTranslator;\n    const trans = translator.load('jupyterlab');\n    let statusText = '';\n    if (props.status) {\n        statusText = ` | ${props.status}`;\n    }\n    return (React.createElement(TextItem, { role: \"button\", \"aria-haspopup\": true, onClick: props.handleClick, onKeyDown: props.handleKeyDown, source: `${props.kernelName}${statusText}`, title: trans.__('Change kernel for %1', props.activityName), tabIndex: 0 }));\n}\n/**\n * A VDomRenderer widget for displaying the status of a kernel.\n */\nexport class KernelStatus extends VDomRenderer {\n    /**\n     * Construct the kernel status widget.\n     */\n    constructor(opts, translator) {\n        super(new KernelStatus.Model(translator));\n        this.translator = translator || nullTranslator;\n        this._handleClick = opts.onClick;\n        this._handleKeyDown = opts.onKeyDown;\n        this.addClass('jp-mod-highlighted');\n    }\n    /**\n     * Render the kernel status item.\n     */\n    render() {\n        if (this.model === null) {\n            return null;\n        }\n        else {\n            return (React.createElement(KernelStatusComponent, { status: this.model.status, kernelName: this.model.kernelName, activityName: this.model.activityName, handleClick: this._handleClick, handleKeyDown: this._handleKeyDown, translator: this.translator }));\n        }\n    }\n}\n/**\n * A namespace for KernelStatus statics.\n */\n(function (KernelStatus) {\n    /**\n     * A VDomModel for the kernel status indicator.\n     */\n    class Model extends VDomModel {\n        constructor(translator) {\n            super();\n            this._activityName = '';\n            this._kernelName = '';\n            this._kernelStatus = '';\n            this._sessionContext = null;\n            translator = translator !== null && translator !== void 0 ? translator : nullTranslator;\n            this._trans = translator.load('jupyterlab');\n            this._statusNames = translateKernelStatuses(translator);\n        }\n        /**\n         * The name of the kernel.\n         */\n        get kernelName() {\n            return this._kernelName;\n        }\n        /**\n         * The current status of the kernel.\n         */\n        get status() {\n            return this._kernelStatus\n                ? this._statusNames[this._kernelStatus]\n                : undefined;\n        }\n        /**\n         * A display name for the activity.\n         */\n        get activityName() {\n            return this._activityName;\n        }\n        set activityName(val) {\n            const oldVal = this._activityName;\n            if (oldVal === val) {\n                return;\n            }\n            this._activityName = val;\n            this.stateChanged.emit();\n        }\n        /**\n         * The current client session associated with the kernel status indicator.\n         */\n        get sessionContext() {\n            return this._sessionContext;\n        }\n        set sessionContext(sessionContext) {\n            var _a, _b, _c, _d;\n            (_a = this._sessionContext) === null || _a === void 0 ? void 0 : _a.statusChanged.disconnect(this._onKernelStatusChanged, this);\n            (_b = this._sessionContext) === null || _b === void 0 ? void 0 : _b.connectionStatusChanged.disconnect(this._onKernelStatusChanged, this);\n            (_c = this._sessionContext) === null || _c === void 0 ? void 0 : _c.kernelChanged.disconnect(this._onKernelChanged, this);\n            const oldState = this._getAllState();\n            this._sessionContext = sessionContext;\n            this._kernelStatus = sessionContext === null || sessionContext === void 0 ? void 0 : sessionContext.kernelDisplayStatus;\n            this._kernelName =\n                (_d = sessionContext === null || sessionContext === void 0 ? void 0 : sessionContext.kernelDisplayName) !== null && _d !== void 0 ? _d : this._trans.__('No Kernel');\n            sessionContext === null || sessionContext === void 0 ? void 0 : sessionContext.statusChanged.connect(this._onKernelStatusChanged, this);\n            sessionContext === null || sessionContext === void 0 ? void 0 : sessionContext.connectionStatusChanged.connect(this._onKernelStatusChanged, this);\n            sessionContext === null || sessionContext === void 0 ? void 0 : sessionContext.kernelChanged.connect(this._onKernelChanged, this);\n            this._triggerChange(oldState, this._getAllState());\n        }\n        /**\n         * React to changes to the kernel status.\n         */\n        _onKernelStatusChanged() {\n            var _a;\n            this._kernelStatus = (_a = this._sessionContext) === null || _a === void 0 ? void 0 : _a.kernelDisplayStatus;\n            this.stateChanged.emit(void 0);\n        }\n        /**\n         * React to changes in the kernel.\n         */\n        _onKernelChanged(_sessionContext, change) {\n            var _a;\n            const oldState = this._getAllState();\n            // sync setting of status and display name\n            this._kernelStatus = (_a = this._sessionContext) === null || _a === void 0 ? void 0 : _a.kernelDisplayStatus;\n            this._kernelName = _sessionContext.kernelDisplayName;\n            this._triggerChange(oldState, this._getAllState());\n        }\n        _getAllState() {\n            return [this._kernelName, this._kernelStatus, this._activityName];\n        }\n        _triggerChange(oldState, newState) {\n            if (JSONExt.deepEqual(oldState, newState)) {\n                this.stateChanged.emit(void 0);\n            }\n        }\n    }\n    KernelStatus.Model = Model;\n})(KernelStatus || (KernelStatus = {}));\n//# sourceMappingURL=kernelstatuses.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { circleEmptyIcon, circleIcon, LabIcon, offlineBoltIcon, ReactWidget, refreshIcon, stopIcon, ToolbarButton, ToolbarButtonComponent, UseSignal } from '@jupyterlab/ui-components';\nimport { Widget } from '@lumino/widgets';\nimport * as React from 'react';\nimport { SessionContextDialogs } from '../sessioncontext';\nimport { translateKernelStatuses } from '../kernelstatuses';\n/**\n * The class name added to toolbar kernel name text.\n */\nconst TOOLBAR_KERNEL_NAME_CLASS = 'jp-Toolbar-kernelName';\n/**\n * The class name added to toolbar kernel status icon.\n */\nconst TOOLBAR_KERNEL_STATUS_CLASS = 'jp-Toolbar-kernelStatus';\n/**\n * The namespace for Toolbar class statics.\n */\nexport var Toolbar;\n(function (Toolbar) {\n    /**\n     * Create an interrupt toolbar item.\n     *\n     * @deprecated since version v3.2\n     * This is dead code now.\n     */\n    function createInterruptButton(sessionContext, translator) {\n        translator = translator || nullTranslator;\n        const trans = translator.load('jupyterlab');\n        return new ToolbarButton({\n            icon: stopIcon,\n            onClick: () => {\n                var _a, _b;\n                void ((_b = (_a = sessionContext.session) === null || _a === void 0 ? void 0 : _a.kernel) === null || _b === void 0 ? void 0 : _b.interrupt());\n            },\n            tooltip: trans.__('Interrupt the kernel')\n        });\n    }\n    Toolbar.createInterruptButton = createInterruptButton;\n    /**\n     * Create a restart toolbar item.\n     *\n     * @deprecated since v3.2\n     * This is dead code now.\n     */\n    function createRestartButton(sessionContext, dialogs, translator) {\n        translator = translator !== null && translator !== void 0 ? translator : nullTranslator;\n        const trans = translator.load('jupyterlab');\n        return new ToolbarButton({\n            icon: refreshIcon,\n            onClick: () => {\n                void (dialogs !== null && dialogs !== void 0 ? dialogs : new SessionContextDialogs({ translator })).restart(sessionContext);\n            },\n            tooltip: trans.__('Restart the kernel')\n        });\n    }\n    Toolbar.createRestartButton = createRestartButton;\n    /**\n     * Create a kernel name indicator item.\n     *\n     * #### Notes\n     * It will display the `'display_name`' of the session context. It can\n     * handle a change in context or kernel.\n     */\n    function createKernelNameItem(sessionContext, dialogs, translator) {\n        const el = ReactWidget.create(React.createElement(Private.KernelNameComponent, { sessionContext: sessionContext, dialogs: dialogs !== null && dialogs !== void 0 ? dialogs : new SessionContextDialogs({ translator }), translator: translator }));\n        el.addClass('jp-KernelName');\n        return el;\n    }\n    Toolbar.createKernelNameItem = createKernelNameItem;\n    /**\n     * Create a kernel status indicator item.\n     *\n     * @deprecated since v3.5\n     * The kernel status indicator is now replaced by the execution status indicator.\n     *\n     * #### Notes\n     * It will show a busy status if the kernel status is busy.\n     * It will show the current status in the node title.\n     * It can handle a change to the context or the kernel.\n     */\n    function createKernelStatusItem(sessionContext, translator) {\n        return new Private.KernelStatus(sessionContext, translator);\n    }\n    Toolbar.createKernelStatusItem = createKernelStatusItem;\n})(Toolbar || (Toolbar = {}));\n/**\n * A namespace for private data.\n */\nvar Private;\n(function (Private) {\n    /**\n     * React component for a kernel name button.\n     *\n     * This wraps the ToolbarButtonComponent and watches the kernel\n     * session for changes.\n     */\n    function KernelNameComponent(props) {\n        const translator = props.translator || nullTranslator;\n        const trans = translator.load('jupyterlab');\n        const callback = () => {\n            void props.dialogs.selectKernel(props.sessionContext);\n        };\n        return (React.createElement(UseSignal, { signal: props.sessionContext.kernelChanged, initialSender: props.sessionContext }, sessionContext => (React.createElement(ToolbarButtonComponent, { className: TOOLBAR_KERNEL_NAME_CLASS, onClick: callback, tooltip: trans.__('Switch kernel'), label: sessionContext === null || sessionContext === void 0 ? void 0 : sessionContext.kernelDisplayName }))));\n    }\n    Private.KernelNameComponent = KernelNameComponent;\n    /**\n     * A toolbar item that displays kernel status.\n     *\n     * @deprecated This code is not use any longer and will be removed in JupyterLab 5\n     */\n    class KernelStatus extends Widget {\n        /**\n         * Construct a new kernel status widget.\n         */\n        constructor(sessionContext, translator) {\n            super();\n            this.translator = translator || nullTranslator;\n            this._trans = this.translator.load('jupyterlab');\n            this.addClass(TOOLBAR_KERNEL_STATUS_CLASS);\n            this._statusNames = translateKernelStatuses(this.translator);\n            this._onStatusChanged(sessionContext);\n            sessionContext.statusChanged.connect(this._onStatusChanged, this);\n            sessionContext.connectionStatusChanged.connect(this._onStatusChanged, this);\n        }\n        /**\n         * Handle a status on a kernel.\n         */\n        _onStatusChanged(sessionContext) {\n            if (this.isDisposed) {\n                return;\n            }\n            const status = sessionContext.kernelDisplayStatus;\n            const circleIconProps = {\n                container: this.node,\n                title: this._trans.__('Kernel %1', this._statusNames[status] || status),\n                stylesheet: 'toolbarButton',\n                alignSelf: 'normal',\n                height: '24px'\n            };\n            // set the icon\n            LabIcon.remove(this.node);\n            if (status === 'busy' ||\n                status === 'starting' ||\n                status === 'terminating' ||\n                status === 'restarting' ||\n                status === 'initializing') {\n                circleIcon.element(circleIconProps);\n            }\n            else if (status === 'connecting' ||\n                status === 'disconnected' ||\n                status === 'unknown') {\n                offlineBoltIcon.element(circleIconProps);\n            }\n            else {\n                circleEmptyIcon.element(circleIconProps);\n            }\n        }\n    }\n    Private.KernelStatus = KernelStatus;\n})(Private || (Private = {}));\n//# sourceMappingURL=widget.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n/**\n * @packageDocumentation\n * @module apputils\n */\nimport { Toolbar as UIToolbar } from '@jupyterlab/ui-components';\nimport { Toolbar as ApputilsToolbar } from './toolbar';\n/**\n * @deprecated since v4\n * These widgets are now in @jupyterlab/ui-components\n */\nexport { addCommandToolbarButtonClass, addToolbarButtonClass, Collapser as Collapse, CommandToolbarButton, CommandToolbarButtonComponent, IFrame, HoverBox, ReactWidget, Spinner, Styling, ToolbarButton, ToolbarButtonComponent, UseSignal, VDomModel, VDomRenderer } from '@jupyterlab/ui-components';\nexport * from './clipboard';\nexport * from './commandlinker';\nexport * from './commandpalette';\nexport * from './dialog';\nexport * from './domutils';\nexport * from './inputdialog';\nexport * from './kernelstatuses';\nexport * from './licenses';\nexport * from './mainareawidget';\nexport * from './menufactory';\nexport * from './notification';\nexport * from './printing';\nexport * from './runningSessions';\nexport * from './sanitizer';\nexport * from './semanticCommand';\nexport * from './sessioncontext';\nexport * from './thememanager';\nexport * from './tokens';\nexport { ToolbarWidgetRegistry, createDefaultFactory, createToolbarFactory, setToolbar } from './toolbar';\nexport * from './widgettracker';\nexport * from './windowresolver';\n// Merge Toolbar namespace to preserve API\n/**\n * @deprecated since v4\n * This class is in @jupyterlab/ui-components\n */\nexport class Toolbar extends UIToolbar {\n}\n(function (Toolbar) {\n    Toolbar.createInterruptButton = ApputilsToolbar.createInterruptButton;\n    Toolbar.createKernelNameItem = ApputilsToolbar.createKernelNameItem;\n    Toolbar.createKernelStatusItem = ApputilsToolbar.createKernelStatusItem;\n    Toolbar.createRestartButton = ApputilsToolbar.createRestartButton;\n    /**\n     * @deprecated since v4\n     * This helper function is in @jupyterlab/ui-components\n     */\n    Toolbar.createSpacerItem = UIToolbar.createSpacerItem;\n})(Toolbar || (Toolbar = {}));\n//# sourceMappingURL=index.js.map","/*\n * Copyright (c) 2021-2023 Datalayer, Inc.\n *\n * MIT License\n */\nimport { CodeCell, MarkdownCell } from '@jupyterlab/cells';\nconst cmdIds = {\n    invoke: 'completer:invoke',\n    select: 'completer:select',\n};\nexport const CellCommands = (commands, cell, completerHandler, cellAdapter) => {\n    commands.addCommand(cmdIds.invoke, {\n        label: 'Completer: Invoke',\n        execute: () => completerHandler.invoke(),\n    });\n    commands.addCommand(cmdIds.select, {\n        label: 'Completer: Select',\n        execute: () => completerHandler.completer.selectActive(),\n    });\n    commands.addCommand('run:cell', {\n        execute: () => {\n            if (cell instanceof CodeCell) {\n                cellAdapter.execute();\n            }\n            else if (cell instanceof MarkdownCell) {\n                cell.rendered = true;\n            }\n        },\n    });\n    commands.addKeyBinding({\n        selector: '.jp-InputArea-editor.jp-mod-completer-enabled',\n        keys: ['Tab'],\n        command: cmdIds.invoke,\n    });\n    commands.addKeyBinding({\n        selector: '.jp-InputArea-editor',\n        keys: ['Shift Enter'],\n        command: 'run:cell',\n    });\n    const bindings = [\n        {\n            selector: '.jp-InputArea-editor.jp-mod-completer-active',\n            keys: ['Enter'],\n            command: cmdIds.select,\n        },\n    ];\n    bindings.map(binding => commands.addKeyBinding(binding));\n};\nexport default CellCommands;\n//# sourceMappingURL=CellCommands.js.map","/*\n * Copyright (c) 2021-2023 Datalayer, Inc.\n *\n * MIT License\n */\nimport { BoxPanel, Widget } from '@lumino/widgets';\nimport { find } from '@lumino/algorithm';\nimport { CommandRegistry } from '@lumino/commands';\nimport { SessionContext, Toolbar, ToolbarButton, } from '@jupyterlab/apputils';\nimport { CodeCellModel, CodeCell, Cell, MarkdownCell, MarkdownCellModel, } from '@jupyterlab/cells';\nimport { ybinding, CodeMirrorMimeTypeService, EditorLanguageRegistry, CodeMirrorEditorFactory, EditorExtensionRegistry, EditorThemeRegistry, } from '@jupyterlab/codemirror';\nimport { MathJaxTypesetter } from '@jupyterlab/mathjax-extension';\nimport { Completer, CompleterModel, CompletionHandler, ProviderReconciliator, KernelCompleterProvider, } from '@jupyterlab/completer';\nimport { RenderMimeRegistry, standardRendererFactories as initialFactories, } from '@jupyterlab/rendermime';\nimport { runIcon } from '@jupyterlab/ui-components';\nimport { createStandaloneCell, } from '@jupyter/ydoc';\nimport { execute as executeOutput } from './../output/OutputExecutor';\nimport { ClassicWidgetManager, WIDGET_MIMETYPE, WidgetRenderer, } from '../../jupyter/ipywidgets/classic';\nimport { requireLoader as loader } from '../../jupyter/ipywidgets/libembed-amd';\nimport getMarked from '../notebook/marked/marked';\nimport CellCommands from './CellCommands';\nimport { cellsStore } from './CellState';\nexport class CellAdapter {\n    _id;\n    _outputs;\n    _cell;\n    _kernel;\n    _panel;\n    _sessionContext;\n    _type;\n    _iPyWidgetsClassicManager;\n    constructor(options) {\n        const { id, type, source, outputs, kernel, boxOptions } = options;\n        this._id = id;\n        this._outputs = outputs;\n        this._kernel = kernel;\n        this._type = type;\n        this.setupCell(type, source, kernel, boxOptions);\n    }\n    setupCell(type = 'code', source, kernel, boxOptions) {\n        const sessionManager = kernel.sessionManager;\n        const specsManager = kernel.kernelSpecManager;\n        const kernelPreference = kernel\n            ? {\n                id: kernel.id,\n                shouldStart: false,\n                autoStartDefault: false,\n                shutdownOnDispose: false,\n            }\n            : {\n                name: 'python',\n                shouldStart: true,\n                autoStartDefault: true,\n                shutdownOnDispose: true,\n            };\n        this._sessionContext = new SessionContext({\n            name: kernel?.path,\n            path: kernel?.path,\n            sessionManager,\n            specsManager,\n            type: 'python',\n            kernelPreference,\n        });\n        // These are fixes to have more control on the kernel launch.\n        this._sessionContext._initialize = async () => {\n            const manager = this._sessionContext\n                .sessionManager;\n            await manager.ready;\n            await manager.refreshRunning();\n            const model = find(manager.running(), item => {\n                //          return (item as any).path === (this._sessionContext as any)._path;\n                return item.kernel?.id === this._kernel.id;\n            });\n            if (model) {\n                try {\n                    const session = manager.connectTo({\n                        model,\n                        kernelConnectionOptions: {\n                            handleComms: true,\n                        },\n                    });\n                    // Force handleComms to true as we know the kernel supports it\n                    if (session.kernel && !session.kernel.handleComms) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        session.kernel.handleComms = true;\n                    }\n                    this._sessionContext._handleNewSession(session);\n                }\n                catch (err) {\n                    void this._sessionContext._handleSessionError(err);\n                    return Promise.reject(err);\n                }\n            }\n            return await this._sessionContext._startIfNecessary();\n        };\n        const themes = new EditorThemeRegistry();\n        for (const theme of EditorThemeRegistry.getDefaultThemes()) {\n            themes.addTheme(theme);\n        }\n        const editorExtensions = () => {\n            const registry = new EditorExtensionRegistry();\n            for (const extensionFactory of EditorExtensionRegistry.getDefaultExtensions({ themes })) {\n                registry.addExtension(extensionFactory);\n            }\n            registry.addExtension({\n                name: 'shared-model-binding',\n                factory: options => {\n                    const sharedModel = options.model.sharedModel;\n                    return EditorExtensionRegistry.createImmutableExtension(ybinding({\n                        ytext: sharedModel.ysource,\n                        undoManager: sharedModel.undoManager ?? undefined,\n                    }));\n                },\n            });\n            return registry;\n        };\n        const languages = new EditorLanguageRegistry();\n        for (const language of EditorLanguageRegistry.getDefaultLanguages()) {\n            languages.addLanguage(language);\n        }\n        languages.addLanguage({\n            name: 'ipythongfm',\n            mime: 'text/x-ipythongfm',\n            load: async () => {\n                // TODO: add support for LaTeX.\n                const m = await import('@codemirror/lang-markdown');\n                return m.markdown({\n                    codeLanguages: (info) => languages.findBest(info),\n                });\n            },\n        });\n        const mimeService = new CodeMirrorMimeTypeService(languages);\n        const commands = new CommandRegistry();\n        const useCapture = true;\n        document.addEventListener('keydown', event => {\n            // Trigger and process event only in current focused cell\n            const activeElement = document.activeElement;\n            if (activeElement &&\n                activeElement.closest('.dla-Jupyter-Cell') === this._cell.node) {\n                commands.processKeydownEvent(event);\n            }\n        }, useCapture);\n        const rendermime = new RenderMimeRegistry({\n            initialFactories,\n            latexTypesetter: new MathJaxTypesetter(),\n            markdownParser: getMarked(languages),\n        });\n        this._iPyWidgetsClassicManager = new ClassicWidgetManager({ loader });\n        rendermime.addFactory({\n            safe: false,\n            mimeTypes: [WIDGET_MIMETYPE],\n            createRenderer: options => new WidgetRenderer(options, this._iPyWidgetsClassicManager),\n        }, 0);\n        // Don't register immediately - wait for session context to be ready\n        const factoryService = new CodeMirrorEditorFactory({\n            extensions: editorExtensions(),\n            languages,\n        });\n        //\n        const cellModel = createStandaloneCell({\n            cell_type: type,\n            source: source,\n            outputs: this._outputs,\n            metadata: {},\n        });\n        const contentFactory = new Cell.ContentFactory({\n            editorFactory: factoryService.newInlineEditor.bind(factoryService),\n        });\n        if (type === 'code') {\n            this._cell = new CodeCell({\n                rendermime,\n                model: new CodeCellModel({ sharedModel: cellModel }),\n                contentFactory: contentFactory,\n            });\n        }\n        else if (type === 'markdown') {\n            this._cell = new MarkdownCell({\n                rendermime,\n                model: new MarkdownCellModel({\n                    sharedModel: cellModel,\n                }),\n                contentFactory: contentFactory,\n            });\n        }\n        this._cell.addClass('dla-Jupyter-Cell');\n        this._cell.initializeState();\n        if (this._type === 'markdown') {\n            this._cell.rendered = false;\n        }\n        //\n        let widgetManagerRegistered = false;\n        let registeredKernelId = null;\n        const registerWidgetManager = async (kernelConnection) => {\n            if (kernelConnection &&\n                (!widgetManagerRegistered || registeredKernelId !== kernelConnection.id)) {\n                try {\n                    // Ensure handleComms is enabled before registering\n                    if (!kernelConnection.handleComms) {\n                        console.warn('Kernel connection does not handle Comms, enabling it', kernelConnection.id);\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        kernelConnection.handleComms = true;\n                    }\n                    widgetManagerRegistered = true;\n                    registeredKernelId = kernelConnection.id;\n                    // Wait for kernel info to ensure it's fully ready\n                    await kernelConnection.info;\n                    // Double-check that kernel is still connected after waiting for info.\n                    if (kernelConnection.connectionStatus === 'connected') {\n                        // Register the widget manager with the properly configured kernel.\n                        this._iPyWidgetsClassicManager?.registerWithKernel(kernelConnection);\n                    }\n                    else {\n                        console.log('Kernel disconnected while waiting for info, will retry on next connection...');\n                    }\n                }\n                catch (error) {\n                    console.error('Error getting kernel info or registering widget manager:', error);\n                    widgetManagerRegistered = false;\n                    registeredKernelId = null;\n                    // Fallback: try registering anyway after a delay\n                    setTimeout(() => {\n                        if (kernelConnection.connectionStatus === 'connected' &&\n                            registeredKernelId !== kernelConnection.id) {\n                            this._iPyWidgetsClassicManager?.registerWithKernel(kernelConnection);\n                            widgetManagerRegistered = true;\n                            registeredKernelId = kernelConnection.id;\n                        }\n                    }, 1000);\n                }\n            }\n            else if (!kernelConnection && widgetManagerRegistered) {\n                // Unregister if kernel is null\n                this._iPyWidgetsClassicManager?.registerWithKernel(null);\n                widgetManagerRegistered = false;\n                registeredKernelId = null;\n            }\n        };\n        this._sessionContext.kernelChanged.connect((_, arg) => {\n            const kernelConnection = arg.newValue;\n            widgetManagerRegistered = false; // Reset flag on kernel change\n            registeredKernelId = null; // Reset kernel ID\n            registerWidgetManager(kernelConnection);\n        });\n        this._sessionContext.kernelChanged.connect(() => {\n            void this._sessionContext.session?.kernel?.info.then(info => {\n                if (this._type === 'code') {\n                    const lang = info.language_info;\n                    const mimeType = mimeService.getMimeTypeByLanguage(lang);\n                    if (this._cell.model) {\n                        this._cell.model.mimeType = mimeType;\n                    }\n                }\n            });\n        });\n        // Initial registration when session context is ready\n        this._sessionContext.ready.then(() => {\n            const kernelConnection = this._sessionContext.session?.kernel;\n            registerWidgetManager(kernelConnection || null);\n        });\n        // Completer.\n        const editor = this._cell.editor;\n        const model = new CompleterModel();\n        const completer = new Completer({ editor, model });\n        const timeout = 1000;\n        const provider = new KernelCompleterProvider();\n        const reconciliator = new ProviderReconciliator({\n            context: {\n                widget: this._cell,\n                editor,\n                session: this._sessionContext.session,\n            },\n            providers: [provider],\n            timeout,\n        });\n        const handler = new CompletionHandler({ completer, reconciliator });\n        void this._sessionContext.ready.then(() => {\n            const provider = new KernelCompleterProvider();\n            handler.reconciliator = new ProviderReconciliator({\n                context: {\n                    widget: this._cell,\n                    editor,\n                    session: this._sessionContext.session,\n                },\n                providers: [provider],\n                timeout,\n            });\n        });\n        this._cell.ready.then(() => {\n            handler.editor = this._cell && this._cell.editor;\n        });\n        //\n        CellCommands(commands, this._cell, handler, this);\n        completer.hide();\n        completer.addClass('jp-Completer-Cell');\n        Widget.attach(completer, document.body);\n        const toolbar = new Toolbar();\n        toolbar.addItem('spacer', Toolbar.createSpacerItem());\n        const runButton = new ToolbarButton({\n            icon: runIcon,\n            onClick: () => {\n                if (this._type === 'code') {\n                    this.execute();\n                }\n                else if (this._type === 'markdown') {\n                    this._cell.rendered = true;\n                }\n            },\n            tooltip: 'Run',\n        });\n        toolbar.addItem('run', runButton);\n        toolbar.addItem('interrupt', Toolbar.createInterruptButton(this._sessionContext));\n        toolbar.addItem('restart', Toolbar.createRestartButton(this._sessionContext));\n        // toolbar.addItem('name', Toolbar.createKernelNameItem(this._sessionContext));\n        toolbar.addItem('status', Toolbar.createKernelStatusItem(this._sessionContext));\n        if (this._type === 'code') {\n            this._cell.outputsScrolled = false;\n        }\n        this._cell.activate();\n        this._panel = new BoxPanel();\n        this._panel.direction = 'top-to-bottom';\n        this._panel.spacing = 0;\n        if (boxOptions?.showToolbar !== false) {\n            this._panel.addWidget(toolbar);\n        }\n        this._panel.addWidget(this._cell);\n        if (boxOptions?.showToolbar !== false) {\n            BoxPanel.setStretch(toolbar, 0);\n        }\n        BoxPanel.setStretch(this._cell, 1);\n        window.addEventListener('resize', () => {\n            this._panel.update();\n        });\n        this._panel.update();\n    }\n    get panel() {\n        return this._panel;\n    }\n    get cell() {\n        return this._cell;\n    }\n    get sessionContext() {\n        return this._sessionContext;\n    }\n    get kernel() {\n        return this._kernel;\n    }\n    execute = () => {\n        if (this._type === 'code') {\n            this._iPyWidgetsClassicManager?.registerWithKernel(this._kernel.connection);\n            this._execute(this._cell);\n        }\n        else if (this._type === 'markdown') {\n            this._cell.rendered = true;\n        }\n    };\n    async _execute(cell, metadata) {\n        cellsStore.getState().setIsExecuting(this._id, true);\n        const model = cell.model;\n        const code = model.sharedModel.getSource();\n        if (!code.trim() || !this.kernel) {\n            model.sharedModel.transact(() => {\n                model.clearExecution();\n            }, false);\n            cellsStore.getState().setIsExecuting(this._id, false);\n            return new Promise(() => { });\n        }\n        const cellId = { cellId: model.sharedModel.getId() };\n        metadata = {\n            ...model.metadata,\n            ...metadata,\n            ...cellId,\n        };\n        const { recordTiming } = metadata;\n        model.sharedModel.transact(() => {\n            model.clearExecution();\n            cell.outputHidden = false;\n        }, false);\n        cell.setPrompt('*');\n        model.trusted = true;\n        let future;\n        try {\n            const kernelMessagePromise = executeOutput(this._id, code, cell.outputArea, this._kernel, metadata);\n            // cell.outputArea.future assigned synchronously in `execute`.\n            if (recordTiming) {\n                const recordTimingHook = (msg) => {\n                    let label;\n                    switch (msg.header.msg_type) {\n                        case 'status':\n                            label = `status.${msg.content.execution_state}`;\n                            break;\n                        case 'execute_input':\n                            label = 'execute_input';\n                            break;\n                        default:\n                            return true;\n                    }\n                    // If the data is missing, estimate it to now\n                    // Date was added in 5.1: https://jupyter-client.readthedocs.io/en/stable/messaging.html#message-header\n                    const value = msg.header.date || new Date().toISOString();\n                    const timingInfo = Object.assign({}, model.getMetadata('execution'));\n                    timingInfo[`iopub.${label}`] = value;\n                    model.setMetadata('execution', timingInfo);\n                    return true;\n                };\n                cell.outputArea.future.registerMessageHook(recordTimingHook);\n            }\n            else {\n                model.deleteMetadata('execution');\n            }\n            // Save this execution's future so we can compare in the catch below.\n            future = cell.outputArea.future;\n            const executeReplyMessage = (await kernelMessagePromise);\n            model.executionCount = executeReplyMessage.content.execution_count;\n            if (recordTiming) {\n                const timingInfo = Object.assign({}, model.getMetadata('execution'));\n                const started = executeReplyMessage.metadata.started;\n                // Started is not in the API, but metadata IPyKernel sends\n                if (started) {\n                    timingInfo['shell.execute_reply.started'] = started;\n                }\n                // Per above, the 5.0 spec does not assume date, so we estimate is required\n                const finished = executeReplyMessage.header.date;\n                timingInfo['shell.execute_reply'] =\n                    finished || new Date().toISOString();\n                model.setMetadata('execution', timingInfo);\n            }\n            cellsStore.getState().setIsExecuting(this._id, false);\n            return executeReplyMessage;\n        }\n        catch (e) {\n            cellsStore.getState().setIsExecuting(this._id, false);\n            // If we started executing, and the cell is still indicating this execution, clear the prompt.\n            if (future && !cell.isDisposed && cell.outputArea.future === future) {\n                cell.setPrompt('');\n                if (recordTiming && future.isDisposed) {\n                    // Record the time when the cell execution was aborted\n                    const timingInfo = Object.assign({}, model.getMetadata('execution'));\n                    timingInfo['execution_failed'] = new Date().toISOString();\n                    model.setMetadata('execution', timingInfo);\n                }\n            }\n            throw e;\n        }\n    }\n}\nexport default CellAdapter;\n//# sourceMappingURL=CellAdapter.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\n/*\n * Copyright (c) 2021-2023 Datalayer, Inc.\n *\n * MIT License\n */\nimport { useState, useEffect, useRef } from 'react';\nimport { CodeCell } from '@jupyterlab/cells';\nimport { Box } from '@datalayer/primer-addons';\nimport { newUuid } from '../../utils';\nimport { Lumino } from '../lumino';\nimport { CellAdapter } from './CellAdapter';\nimport { useCellsStore } from './CellState';\nexport const Cell = ({ autoStart = true, id: providedId, kernel, outputs = [], showToolbar = true, source = '', type = 'code', }) => {\n    const [id] = useState(providedId || newUuid());\n    const [adapter, setAdapter] = useState();\n    const cellsStore = useCellsStore();\n    // Use refs to prevent multiple adapter creations\n    const adapterCreatingRef = useRef(false);\n    const handleCellInitEvents = (adapter) => {\n        adapter.cell.model.contentChanged.connect((cellModel, _) => {\n            cellsStore.setSource(id, cellModel.sharedModel.getSource());\n        });\n        if (adapter.cell instanceof CodeCell) {\n            adapter.cell.outputArea.outputLengthChanged?.connect((outputArea, outputsCount) => {\n                cellsStore.setOutputsCount(id, outputsCount);\n            });\n        }\n        adapter.sessionContext.initialize().then(() => {\n            if (autoStart && adapter.cell.model) {\n                // Perform auto-start for code or markdown cells.\n                adapter.execute();\n            }\n        });\n        adapter.sessionContext.kernelChanged.connect(() => {\n            void adapter.sessionContext.session?.kernel?.info.then(info => {\n                // Set that session/kernel is ready for this cell when the kernel is guaranteed to be connected\n                cellsStore.setKernelSessionAvailable(id, true);\n            });\n        });\n    };\n    useEffect(() => {\n        // Guard against multiple adapter creations using a ref\n        if (!adapter && !adapterCreatingRef.current && kernel) {\n            adapterCreatingRef.current = true;\n            kernel.ready.then(() => {\n                const adapter = new CellAdapter({\n                    id,\n                    type,\n                    source,\n                    outputs,\n                    kernel,\n                    boxOptions: { showToolbar },\n                });\n                setAdapter(adapter);\n                cellsStore.setAdapter(id, adapter);\n                cellsStore.setSource(id, source);\n                handleCellInitEvents(adapter);\n                const handleDblClick = (event) => {\n                    let target = event.target;\n                    /**\n                     * Find the DOM searching by the markdown output class (since child elements can be clicked also)\n                     * If a rendered markdown was found, then back cell to editor mode\n                     */\n                    while (target && !target.classList.contains('jp-MarkdownOutput')) {\n                        target = target.parentElement;\n                    }\n                    if (target && target.classList.contains('jp-MarkdownOutput')) {\n                        adapter.cell.rendered = false;\n                    }\n                };\n                // Adds the event for double click and the removal on component's destroy\n                document.addEventListener('dblclick', handleDblClick);\n                return () => {\n                    document.removeEventListener('dblclick', handleDblClick);\n                };\n            });\n        }\n    }, [source, kernel]);\n    return adapter ? (_jsx(Box, { sx: {\n            '& .dla-Jupyter-Cell': {\n                position: 'relative !important',\n                contain: 'content !important',\n            },\n            '& .jp-Toolbar': {\n                height: 'auto !important',\n                position: 'relative',\n            },\n            '& .lm-BoxPanel': {\n                position: 'relative',\n            },\n            '& .jp-Cell': {\n                position: 'relative',\n            },\n            '& .jp-CodeCell': {\n                height: 'auto !important',\n                position: 'relative',\n            },\n            '& .jp-MarkdownCell': {\n                height: 'auto !important',\n                minHeight: '65px',\n                position: 'relative',\n            },\n            '& .jp-Cell-outputArea': {\n                paddingBottom: '30px',\n            },\n            '& .jp-CodeMirrorEditor': {\n                cursor: 'text !important',\n            },\n        }, children: _jsx(Lumino, { children: adapter.panel }) })) : (_jsx(Box, { children: \"Loading Jupyter Cell...\" }));\n};\nexport default Cell;\n//# sourceMappingURL=Cell.js.map","/*\n * Copyright (c) 2021-2023 Datalayer, Inc.\n *\n * MIT License\n */\n\n/**\n * Cell Chunk - Contains all Cell-related dependencies\n * This chunk is loaded on-demand when a Cell component is needed\n */\n\nimport React from 'react';\nimport {\n  JupyterReactTheme,\n  Cell,\n  useJupyter,\n} from '@datalayer/jupyter-react';\nimport { getJupyterEmbedConfig } from '../config';\nimport type { ICellEmbedOptions } from '../types';\n\n/**\n * Hook to get Jupyter context from embed config\n */\nconst useJupyterEmbed = () => {\n  const config = getJupyterEmbedConfig();\n  return useJupyter({\n    jupyterServerUrl: config.serverUrl || '',\n    jupyterServerToken: config.token || '',\n    startDefaultKernel: config.autoStartKernel,\n    defaultKernelName: config.defaultKernel,\n    terminals: true,\n  });\n};\n\ninterface ICellChunkProps {\n  options: ICellEmbedOptions;\n}\n\nconst CellInner: React.FC<ICellChunkProps> = ({ options }) => {\n  const { defaultKernel } = useJupyterEmbed();\n\n  return (\n    <div style={{ height: options.height || '200px' }}>\n      <Cell\n        id={options.id}\n        source={options.source || ''}\n        type={options.cellType || 'code'}\n        autoStart={options.autoExecute}\n        showToolbar={options.showToolbar}\n        kernel={defaultKernel}\n      />\n    </div>\n  );\n};\n\nexport const CellChunk: React.FC<ICellChunkProps> = ({ options }) => {\n  return (\n    <JupyterReactTheme>\n      <CellInner options={options} />\n    </JupyterReactTheme>\n  );\n};\n\nexport default CellChunk;\n"],"names":["TextItem","props","title","source","className","rest","React.createElement","Private","translateKernelStatuses","translator","trans","nullTranslator","load","unknown","__","starting","idle","busy","terminating","restarting","autorestarting","dead","connected","connecting","disconnected","initializing","KernelStatusComponent","statusText","status","React","createElement","role","onClick","handleClick","onKeyDown","handleKeyDown","kernelName","activityName","tabIndex","statusItemDefaults","align","rank","priority","isActive","activeStateChanged","KernelStatus","VDomRenderer","constructor","opts","super","Model","this","_handleClick","_handleKeyDown","addClass","render","model","VDomModel","_activityName","_kernelName","_kernelStatus","_sessionContext","_trans","_statusNames","val","stateChanged","emit","sessionContext","_a","_b","_c","_d","statusChanged","disconnect","_onKernelStatusChanged","connectionStatusChanged","kernelChanged","_onKernelChanged","oldState","_getAllState","kernelDisplayStatus","kernelDisplayName","connect","_triggerChange","change","newState","JSONExt","deepEqual","Toolbar","createInterruptButton","ToolbarButton","icon","stopIcon","session","kernel","interrupt","tooltip","createRestartButton","dialogs","refreshIcon","SessionContextDialogs","restart","createKernelNameItem","el","ReactWidget","create","KernelNameComponent","createKernelStatusItem","callback","selectKernel","UseSignal","signal","initialSender","ToolbarButtonComponent","label","Widget","_onStatusChanged","isDisposed","circleIconProps","container","node","stylesheet","alignSelf","height","LabIcon","remove","circleIcon","element","offlineBoltIcon","circleEmptyIcon","UIToolbar","ApputilsToolbar","createSpacerItem","cmdIds","CellAdapter","_id","_outputs","_cell","_kernel","_panel","_type","_iPyWidgetsClassicManager","options","id","type","outputs","boxOptions","setupCell","sessionManager","specsManager","kernelSpecManager","kernelPreference","shouldStart","autoStartDefault","shutdownOnDispose","name","SessionContext","path","_initialize","async","manager","ready","refreshRunning","find","running","item","connectTo","kernelConnectionOptions","handleComms","_handleNewSession","err","_handleSessionError","Promise","reject","_startIfNecessary","themes","EditorThemeRegistry","theme","getDefaultThemes","addTheme","languages","EditorLanguageRegistry","language","getDefaultLanguages","addLanguage","mime","import","then","n","ap","markdown","codeLanguages","info","findBest","mimeService","CodeMirrorMimeTypeService","commands","CommandRegistry","document","addEventListener","event","activeElement","closest","processKeydownEvent","rendermime","RenderMimeRegistry","initialFactories","latexTypesetter","MathJaxTypesetter","markdownParser","getMarked","ClassicWidgetManager","loader","addFactory","safe","mimeTypes","WIDGET_MIMETYPE","createRenderer","WidgetRenderer","factoryService","CodeMirrorEditorFactory","extensions","registry","EditorExtensionRegistry","extensionFactory","getDefaultExtensions","addExtension","factory","sharedModel","createImmutableExtension","ybinding","ytext","ysource","undoManager","editorExtensions","cellModel","createStandaloneCell","cell_type","metadata","contentFactory","Cell","ContentFactory","editorFactory","newInlineEditor","bind","CodeCell","CodeCellModel","MarkdownCell","MarkdownCellModel","initializeState","rendered","widgetManagerRegistered","registeredKernelId","registerWidgetManager","kernelConnection","registerWithKernel","console","warn","connectionStatus","log","error","setTimeout","_","arg","newValue","lang","language_info","mimeType","getMimeTypeByLanguage","editor","CompleterModel","completer","Completer","provider","KernelCompleterProvider","reconciliator","ProviderReconciliator","context","widget","providers","timeout","handler","CompletionHandler","cell","completerHandler","cellAdapter","addCommand","execute","invoke","selectActive","addKeyBinding","selector","keys","command","map","binding","CellCommands","hide","attach","body","toolbar","addItem","runButton","runIcon","outputsScrolled","activate","BoxPanel","direction","spacing","showToolbar","addWidget","setStretch","window","update","panel","connection","_execute","cellsStore","getState","setIsExecuting","code","getSource","trim","transact","clearExecution","cellId","getId","recordTiming","future","outputHidden","setPrompt","trusted","kernelMessagePromise","executeOutput","outputArea","recordTimingHook","msg","header","msg_type","content","execution_state","value","date","Date","toISOString","timingInfo","Object","assign","getMetadata","setMetadata","registerMessageHook","deleteMetadata","executeReplyMessage","executionCount","execution_count","started","finished","e","autoStart","providedId","useState","newUuid","adapter","setAdapter","useCellsStore","adapterCreatingRef","useRef","useEffect","current","setSource","contentChanged","outputLengthChanged","outputsCount","setOutputsCount","initialize","setKernelSessionAvailable","handleCellInitEvents","handleDblClick","target","classList","contains","parentElement","removeEventListener","_jsx","Box","sx","position","contain","minHeight","paddingBottom","cursor","children","Lumino","CellInner","defaultKernel","config","getJupyterEmbedConfig","useJupyter","jupyterServerUrl","serverUrl","jupyterServerToken","token","startDefaultKernel","autoStartKernel","defaultKernelName","terminals","useJupyterEmbed","jsx","style","cellType","autoExecute","CellChunk","JupyterReactTheme"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}