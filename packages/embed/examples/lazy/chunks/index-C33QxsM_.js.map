{"version":3,"file":"index-C33QxsM_.js","sources":["../../../../node_modules/@jupyterlab/javascript-extension/lib/index.js","../../../../node_modules/@jupyterlab/json-extension/lib/index.js"],"sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n/**\n * @packageDocumentation\n * @module javascript-extension\n */\nimport { RenderedJavaScript } from '@jupyterlab/rendermime';\nexport const TEXT_JAVASCRIPT_MIMETYPE = 'text/javascript';\nexport const APPLICATION_JAVASCRIPT_MIMETYPE = 'application/javascript';\nfunction evalInContext(code, element, document, window) {\n    // eslint-disable-next-line\n    return eval(code);\n}\nexport class ExperimentalRenderedJavascript extends RenderedJavaScript {\n    render(model) {\n        const trans = this.translator.load('jupyterlab');\n        const renderJavascript = () => {\n            try {\n                const data = model.data[this.mimeType];\n                if (data) {\n                    evalInContext(data, this.node, document, window);\n                }\n                return Promise.resolve();\n            }\n            catch (error) {\n                return Promise.reject(error);\n            }\n        };\n        if (!model.trusted) {\n            // If output is not trusted or if arbitrary Javascript execution is not enabled, render an informative error message\n            const pre = document.createElement('pre');\n            pre.textContent = trans.__('Are you sure that you want to run arbitrary Javascript within your JupyterLab session?');\n            const button = document.createElement('button');\n            button.textContent = trans.__('Run');\n            this.node.appendChild(pre);\n            this.node.appendChild(button);\n            button.onclick = event => {\n                this.node.textContent = '';\n                void renderJavascript();\n            };\n            return Promise.resolve();\n        }\n        return renderJavascript();\n    }\n}\n/**\n * A mime renderer factory for text/javascript data.\n */\nexport const rendererFactory = {\n    safe: false,\n    mimeTypes: [TEXT_JAVASCRIPT_MIMETYPE, APPLICATION_JAVASCRIPT_MIMETYPE],\n    createRenderer: options => new ExperimentalRenderedJavascript(options)\n};\nconst extension = {\n    id: '@jupyterlab/javascript-extension:factory',\n    description: 'Adds renderer for JavaScript content.',\n    rendererFactory,\n    rank: 0,\n    dataType: 'string'\n};\nexport default extension;\n//# sourceMappingURL=index.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n/**\n * @packageDocumentation\n * @module json-extension\n */\nimport { Printing } from '@jupyterlab/apputils';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { Widget } from '@lumino/widgets';\nimport * as React from 'react';\nimport { createRoot } from 'react-dom/client';\n/**\n * The CSS class to add to the JSON Widget.\n */\nconst CSS_CLASS = 'jp-RenderedJSON';\n/**\n * The MIME type for JSON.\n */\nexport const MIME_TYPE = 'application/json';\n// NOTE: not standardized yet\nexport const MIME_TYPES_JSONL = [\n    'text/jsonl',\n    'application/jsonl',\n    'application/json-lines'\n];\n/**\n * A renderer for JSON data.\n */\nexport class RenderedJSON extends Widget {\n    /**\n     * Create a new widget for rendering JSON.\n     */\n    constructor(options) {\n        super();\n        this._rootDOM = null;\n        this.addClass(CSS_CLASS);\n        this.addClass('CodeMirror');\n        this._mimeType = options.mimeType;\n        this.translator = options.translator || nullTranslator;\n    }\n    [Printing.symbol]() {\n        return () => Printing.printWidget(this);\n    }\n    /**\n     * Render JSON into this widget's node.\n     */\n    async renderModel(model) {\n        const { Component } = await import('./component');\n        let data;\n        // handle if json-lines format\n        if (MIME_TYPES_JSONL.indexOf(this._mimeType) >= 0) {\n            // convert into proper json\n            const lines = (model.data[this._mimeType] || '')\n                .trim()\n                .split(/\\n/);\n            data = JSON.parse(`[${lines.join(',')}]`);\n        }\n        else {\n            data = (model.data[this._mimeType] || {});\n        }\n        const metadata = (model.metadata[this._mimeType] || {});\n        if (this._rootDOM === null) {\n            this._rootDOM = createRoot(this.node);\n        }\n        return new Promise((resolve, reject) => {\n            this._rootDOM.render(React.createElement(Component, { data: data, metadata: metadata, translator: this.translator, forwardedRef: () => resolve() }));\n        });\n    }\n    /**\n     * Called before the widget is detached from the DOM.\n     */\n    onBeforeDetach(msg) {\n        // Unmount the component so it can tear down.\n        if (this._rootDOM) {\n            this._rootDOM.unmount();\n            this._rootDOM = null;\n        }\n    }\n}\n/**\n * A mime renderer factory for JSON data.\n */\nexport const rendererFactory = {\n    safe: true,\n    mimeTypes: [MIME_TYPE, ...MIME_TYPES_JSONL],\n    createRenderer: options => new RenderedJSON(options)\n};\nconst extensions = [\n    {\n        id: '@jupyterlab/json-extension:factory',\n        description: 'Adds renderer for JSON content.',\n        rendererFactory,\n        rank: 0,\n        dataType: 'json',\n        documentWidgetFactoryOptions: {\n            name: 'JSON',\n            // TODO: how to translate label of the factory?\n            primaryFileType: 'json',\n            fileTypes: ['json', 'notebook', 'geojson'],\n            defaultFor: ['json']\n        }\n    },\n    {\n        id: '@jupyterlab/json-lines-extension:factory',\n        description: 'Adds renderer for JSONLines content.',\n        rendererFactory,\n        rank: 0,\n        dataType: 'string',\n        documentWidgetFactoryOptions: {\n            name: 'JSONLines',\n            primaryFileType: 'jsonl',\n            fileTypes: ['jsonl', 'ndjson'],\n            defaultFor: ['jsonl', 'ndjson']\n        }\n    }\n];\nexport default extensions;\n//# sourceMappingURL=index.js.map"],"names":["TEXT_JAVASCRIPT_MIMETYPE","APPLICATION_JAVASCRIPT_MIMETYPE","evalInContext","code","element","document","window","eval","ExperimentalRenderedJavascript","RenderedJavaScript","render","model","trans","this","translator","load","renderJavascript","data","mimeType","node","Promise","resolve","error","reject","trusted","pre","createElement","textContent","__","button","appendChild","onclick","event","rendererFactory","safe","mimeTypes","createRenderer","options","CSS_CLASS","MIME_TYPE","MIME_TYPES_JSONL","RenderedJSON","Widget","constructor","super","_rootDOM","addClass","_mimeType","nullTranslator","Printing","symbol","printWidget","renderModel","Component","import","indexOf","lines","trim","split","JSON","parse","join","metadata","createRoot","React.createElement","forwardedRef","onBeforeDetach","msg","unmount"],"mappings":"gMAOO,MAAMA,yBAA2B,kBAC3BC,gCAAkC,yBAC/C,SAASC,cAAcC,KAAMC,QAASC,SAAUC,QAE5C,OAAOC,KAAKJ,KAChB,CACO,MAAMK,uCAAuCC,mBAChD,MAAAC,CAAOC,GACH,MAAMC,EAAQC,KAAKC,WAAWC,KAAK,cAC7BC,EAAmB,KACrB,IACI,MAAMC,EAAON,EAAMM,KAAKJ,KAAKK,UAI7B,OAHID,GACAf,cAAce,EAAMJ,KAAKM,KAAMd,SAAUC,QAEtCc,QAAQC,SACnB,OACOC,GACH,OAAOF,QAAQG,OAAOD,EAC1B,GAEJ,IAAKX,EAAMa,QAAS,CAEhB,MAAMC,EAAMpB,SAASqB,cAAc,OACnCD,EAAIE,YAAcf,EAAMgB,GAAG,0FAC3B,MAAMC,EAASxB,SAASqB,cAAc,UAQtC,OAPAG,EAAOF,YAAcf,EAAMgB,GAAG,OAC9Bf,KAAKM,KAAKW,YAAYL,GACtBZ,KAAKM,KAAKW,YAAYD,GACtBA,EAAOE,QAAUC,IACbnB,KAAKM,KAAKQ,YAAc,GACnBX,KAEFI,QAAQC,SACnB,CACA,OAAOL,GACX,EAKQ,MAACiB,kBAAkB,CAC3BC,MAAM,EACNC,UAAW,CAACnC,yBAA0BC,iCACtCmC,eAAgBC,GAAW,IAAI7B,+BAA+B6B,ICrC5DC,UAAY,kBAILC,UAAY,mBAEZC,iBAAmB,CAC5B,aACA,oBACA,0BAKG,MAAMC,qBAAqBC,OAI9B,WAAAC,CAAYN,GACRO,QACA/B,KAAKgC,SAAW,KAChBhC,KAAKiC,SAASR,WACdzB,KAAKiC,SAAS,cACdjC,KAAKkC,UAAYV,EAAQnB,SACzBL,KAAKC,WAAauB,EAAQvB,YAAckC,cAC5C,CACA,CAACC,SAASC,UACN,MAAO,IAAMD,SAASE,YAAYtC,KACtC,CAIA,iBAAMuC,CAAYzC,GACd,MAAM0C,UAAEA,SAAoBC,OAAO,2BACnC,IAAIrC,EAEJ,GAAIuB,iBAAiBe,QAAQ1C,KAAKkC,YAAc,EAAG,CAE/C,MAAMS,GAAS7C,EAAMM,KAAKJ,KAAKkC,YAAc,IACxCU,OACAC,MAAM,MACXzC,EAAO0C,KAAKC,MAAM,IAAIJ,EAAMK,KAAK,QACrC,MAEI5C,EAAQN,EAAMM,KAAKJ,KAAKkC,YAAc,CAAA,EAE1C,MAAMe,EAAYnD,EAAMmD,SAASjD,KAAKkC,YAAc,GAIpD,OAHsB,OAAlBlC,KAAKgC,WACLhC,KAAKgC,SAAWkB,yBAAWlD,KAAKM,OAE7B,IAAIC,QAAQ,CAACC,EAASE,KACzBV,KAAKgC,SAASnC,OAAOsD,aAAAA,cAAoBX,EAAW,CAAEpC,OAAY6C,WAAoBhD,WAAYD,KAAKC,WAAYmD,aAAc,IAAM5C,QAE/I,CAIA,cAAA6C,CAAeC,GAEPtD,KAAKgC,WACLhC,KAAKgC,SAASuB,UACdvD,KAAKgC,SAAW,KAExB,EAKQ,MAACZ,gBAAkB,CAC3BC,MAAM,EACNC,UAAW,CAACI,aAAcC,kBAC1BJ,eAAgBC,GAAW,IAAII,aAAaJ","x_google_ignoreList":[0,1]}