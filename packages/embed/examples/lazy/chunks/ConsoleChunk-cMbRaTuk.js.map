{"version":3,"file":"ConsoleChunk-cMbRaTuk.js","sources":["../../../../node_modules/@jupyterlab/cells/lib/celldragutils.js","../../../../node_modules/@jupyterlab/console/lib/history.js","../../../../node_modules/@jupyterlab/console/lib/cellexecutor.js","../../../../node_modules/@jupyterlab/console/lib/widget.js","../../../../node_modules/@jupyterlab/console/lib/panel.js","../../../react/lib/components/console/ConsoleAdapter.js","../../../react/lib/components/console/Console.js","../../src/chunks/ConsoleChunk.tsx"],"sourcesContent":["/* -----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\nimport { h, VirtualDOM } from '@lumino/virtualdom';\n/**\n * Constants for drag\n */\n/**\n * The threshold in pixels to start a drag event.\n */\nconst DRAG_THRESHOLD = 5;\n/**\n * The class name added to drag images.\n */\nconst DRAG_IMAGE_CLASS = 'jp-dragImage';\n/**\n * The class name added to singular drag images\n */\nconst SINGLE_DRAG_IMAGE_CLASS = 'jp-dragImage-singlePrompt';\n/**\n * The class name added to the drag image cell content.\n */\nconst CELL_DRAG_CONTENT_CLASS = 'jp-dragImage-content';\n/**\n * The class name added to the drag image cell content.\n */\nconst CELL_DRAG_PROMPT_CLASS = 'jp-dragImage-prompt';\n/**\n * The class name added to the drag image cell content.\n */\nconst CELL_DRAG_MULTIPLE_BACK = 'jp-dragImage-multipleBack';\nexport var CellDragUtils;\n(function (CellDragUtils) {\n    /**\n     * Find the cell index containing the target html element.\n     * This function traces up the DOM hierarchy to find the root cell\n     * node. Then find the corresponding child and select it.\n     *\n     * @param node - the cell node or a child of the cell node.\n     * @param cells - an iterable of Cells\n     * @param isCellNode - a function that takes in a node and checks if\n     * it is a cell node.\n     *\n     * @returns index of the cell we're looking for. Returns -1 if\n     * the cell is not founds\n     */\n    function findCell(node, cells, isCellNode) {\n        let cellIndex = -1;\n        while (node && node.parentElement) {\n            if (isCellNode(node)) {\n                let index = -1;\n                for (const cell of cells) {\n                    if (cell.node === node) {\n                        cellIndex = ++index;\n                        break;\n                    }\n                }\n                break;\n            }\n            node = node.parentElement;\n        }\n        return cellIndex;\n    }\n    CellDragUtils.findCell = findCell;\n    /**\n     * Detect which part of the cell triggered the MouseEvent\n     *\n     * @param cell - The cell which contains the MouseEvent's target\n     * @param target - The DOM node which triggered the MouseEvent\n     */\n    function detectTargetArea(cell, target) {\n        var _a, _b;\n        let targetArea;\n        if (cell) {\n            if ((_a = cell.editorWidget) === null || _a === void 0 ? void 0 : _a.node.contains(target)) {\n                targetArea = 'input';\n            }\n            else if ((_b = cell.promptNode) === null || _b === void 0 ? void 0 : _b.contains(target)) {\n                targetArea = 'prompt';\n            }\n            else {\n                targetArea = 'cell';\n            }\n        }\n        else {\n            targetArea = 'unknown';\n        }\n        return targetArea;\n    }\n    CellDragUtils.detectTargetArea = detectTargetArea;\n    /**\n     * Detect if a drag event should be started. This is down if the\n     * mouse is moved beyond a certain distance (DRAG_THRESHOLD).\n     *\n     * @param prevX - X Coordinate of the mouse pointer during the mousedown event\n     * @param prevY - Y Coordinate of the mouse pointer during the mousedown event\n     * @param nextX - Current X Coordinate of the mouse pointer\n     * @param nextY - Current Y Coordinate of the mouse pointer\n     */\n    function shouldStartDrag(prevX, prevY, nextX, nextY) {\n        const dx = Math.abs(nextX - prevX);\n        const dy = Math.abs(nextY - prevY);\n        return dx >= DRAG_THRESHOLD || dy >= DRAG_THRESHOLD;\n    }\n    CellDragUtils.shouldStartDrag = shouldStartDrag;\n    /**\n     * Create an image for the cell(s) to be dragged\n     *\n     * @param activeCell - The cell from where the drag event is triggered\n     * @param selectedCells - The cells to be dragged\n     */\n    function createCellDragImage(activeCell, selectedCells) {\n        const count = selectedCells.length;\n        let promptNumber;\n        if (activeCell.model.type === 'code') {\n            const executionCount = activeCell.model\n                .executionCount;\n            promptNumber = ' ';\n            if (executionCount) {\n                promptNumber = executionCount.toString();\n            }\n        }\n        else {\n            promptNumber = '';\n        }\n        const cellContent = activeCell.model.sharedModel\n            .getSource()\n            .split('\\n')[0]\n            .slice(0, 26);\n        if (count > 1) {\n            if (promptNumber !== '') {\n                return VirtualDOM.realize(h.div(h.div({ className: DRAG_IMAGE_CLASS }, h.span({ className: CELL_DRAG_PROMPT_CLASS }, '[' + promptNumber + ']:'), h.span({ className: CELL_DRAG_CONTENT_CLASS }, cellContent)), h.div({ className: CELL_DRAG_MULTIPLE_BACK }, '')));\n            }\n            else {\n                return VirtualDOM.realize(h.div(h.div({ className: DRAG_IMAGE_CLASS }, h.span({ className: CELL_DRAG_PROMPT_CLASS }), h.span({ className: CELL_DRAG_CONTENT_CLASS }, cellContent)), h.div({ className: CELL_DRAG_MULTIPLE_BACK }, '')));\n            }\n        }\n        else {\n            if (promptNumber !== '') {\n                return VirtualDOM.realize(h.div(h.div({ className: `${DRAG_IMAGE_CLASS} ${SINGLE_DRAG_IMAGE_CLASS}` }, h.span({ className: CELL_DRAG_PROMPT_CLASS }, '[' + promptNumber + ']:'), h.span({ className: CELL_DRAG_CONTENT_CLASS }, cellContent))));\n            }\n            else {\n                return VirtualDOM.realize(h.div(h.div({ className: `${DRAG_IMAGE_CLASS} ${SINGLE_DRAG_IMAGE_CLASS}` }, h.span({ className: CELL_DRAG_PROMPT_CLASS }), h.span({ className: CELL_DRAG_CONTENT_CLASS }, cellContent))));\n            }\n        }\n    }\n    CellDragUtils.createCellDragImage = createCellDragImage;\n})(CellDragUtils || (CellDragUtils = {}));\n//# sourceMappingURL=celldragutils.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { Signal } from '@lumino/signaling';\n/**\n * A console history manager object.\n */\nexport class ConsoleHistory {\n    /**\n     * Construct a new console history object.\n     */\n    constructor(options) {\n        this._cursor = 0;\n        this._hasSession = false;\n        this._history = [];\n        this._placeholder = '';\n        this._setByHistory = false;\n        this._isDisposed = false;\n        this._editor = null;\n        this._filtered = [];\n        const { sessionContext } = options;\n        if (sessionContext) {\n            this.sessionContext = sessionContext;\n            void this._handleKernel();\n            this.sessionContext.kernelChanged.connect(this._handleKernel, this);\n        }\n    }\n    /**\n     * The current editor used by the history manager.\n     */\n    get editor() {\n        return this._editor;\n    }\n    set editor(value) {\n        if (this._editor === value) {\n            return;\n        }\n        const prev = this._editor;\n        if (prev) {\n            prev.edgeRequested.disconnect(this.onEdgeRequest, this);\n            prev.model.sharedModel.changed.disconnect(this.onTextChange, this);\n        }\n        this._editor = value;\n        if (value) {\n            value.edgeRequested.connect(this.onEdgeRequest, this);\n            value.model.sharedModel.changed.connect(this.onTextChange, this);\n        }\n    }\n    /**\n     * The placeholder text that a history session began with.\n     */\n    get placeholder() {\n        return this._placeholder;\n    }\n    /**\n     * Get whether the console history manager is disposed.\n     */\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    /**\n     * Dispose of the resources held by the console history manager.\n     */\n    dispose() {\n        this._isDisposed = true;\n        this._history.length = 0;\n        Signal.clearData(this);\n    }\n    /**\n     * Get the previous item in the console history.\n     *\n     * @param placeholder - The placeholder string that gets temporarily added\n     * to the history only for the duration of one history session. If multiple\n     * placeholders are sent within a session, only the first one is accepted.\n     *\n     * @returns A Promise for console command text or `undefined` if unavailable.\n     */\n    back(placeholder) {\n        if (!this._hasSession) {\n            this._hasSession = true;\n            this._placeholder = placeholder;\n            // Filter the history with the placeholder string.\n            this.setFilter(placeholder);\n            this._cursor = this._filtered.length - 1;\n        }\n        --this._cursor;\n        this._cursor = Math.max(0, this._cursor);\n        const content = this._filtered[this._cursor];\n        return Promise.resolve(content);\n    }\n    /**\n     * Get the next item in the console history.\n     *\n     * @param placeholder - The placeholder string that gets temporarily added\n     * to the history only for the duration of one history session. If multiple\n     * placeholders are sent within a session, only the first one is accepted.\n     *\n     * @returns A Promise for console command text or `undefined` if unavailable.\n     */\n    forward(placeholder) {\n        if (!this._hasSession) {\n            this._hasSession = true;\n            this._placeholder = placeholder;\n            // Filter the history with the placeholder string.\n            this.setFilter(placeholder);\n            this._cursor = this._filtered.length;\n        }\n        ++this._cursor;\n        this._cursor = Math.min(this._filtered.length - 1, this._cursor);\n        const content = this._filtered[this._cursor];\n        return Promise.resolve(content);\n    }\n    /**\n     * Add a new item to the bottom of history.\n     *\n     * @param item The item being added to the bottom of history.\n     *\n     * #### Notes\n     * If the item being added is undefined or empty, it is ignored. If the item\n     * being added is the same as the last item in history, it is ignored as well\n     * so that the console's history will consist of no contiguous repetitions.\n     */\n    push(item) {\n        if (item && item !== this._history[this._history.length - 1]) {\n            this._history.push(item);\n        }\n        this.reset();\n    }\n    /**\n     * Reset the history navigation state, i.e., start a new history session.\n     */\n    reset() {\n        this._cursor = this._history.length;\n        this._hasSession = false;\n        this._placeholder = '';\n    }\n    /**\n     * Populate the history collection on history reply from a kernel.\n     *\n     * @param value The kernel message history reply.\n     *\n     * #### Notes\n     * History entries have the shape:\n     * [session: number, line: number, input: string]\n     * Contiguous duplicates are stripped out of the API response.\n     */\n    onHistory(value) {\n        this._history.length = 0;\n        let last = '';\n        let current = '';\n        if (value.content.status === 'ok') {\n            for (let i = 0; i < value.content.history.length; i++) {\n                current = value.content.history[i][2];\n                if (current !== last) {\n                    this._history.push((last = current));\n                }\n            }\n        }\n        // Reset the history navigation cursor back to the bottom.\n        this._cursor = this._history.length;\n    }\n    /**\n     * Handle a text change signal from the editor.\n     */\n    onTextChange() {\n        if (this._setByHistory) {\n            this._setByHistory = false;\n            return;\n        }\n        this.reset();\n    }\n    /**\n     * Handle an edge requested signal.\n     */\n    onEdgeRequest(editor, location) {\n        const sharedModel = editor.model.sharedModel;\n        const source = sharedModel.getSource();\n        if (location === 'top' || location === 'topLine') {\n            void this.back(source).then(value => {\n                if (this.isDisposed || !value) {\n                    return;\n                }\n                if (sharedModel.getSource() === value) {\n                    return;\n                }\n                this._setByHistory = true;\n                sharedModel.setSource(value);\n                let columnPos = 0;\n                columnPos = value.indexOf('\\n');\n                if (columnPos < 0) {\n                    columnPos = value.length;\n                }\n                editor.setCursorPosition({ line: 0, column: columnPos });\n            });\n        }\n        else {\n            void this.forward(source).then(value => {\n                if (this.isDisposed) {\n                    return;\n                }\n                const text = value || this.placeholder;\n                if (sharedModel.getSource() === text) {\n                    return;\n                }\n                this._setByHistory = true;\n                sharedModel.setSource(text);\n                const pos = editor.getPositionAt(text.length);\n                if (pos) {\n                    editor.setCursorPosition(pos);\n                }\n            });\n        }\n    }\n    /**\n     * Handle the current kernel changing.\n     */\n    async _handleKernel() {\n        var _a, _b;\n        const kernel = (_b = (_a = this.sessionContext) === null || _a === void 0 ? void 0 : _a.session) === null || _b === void 0 ? void 0 : _b.kernel;\n        if (!kernel) {\n            this._history.length = 0;\n            return;\n        }\n        return kernel.requestHistory(Private.initialRequest).then(v => {\n            this.onHistory(v);\n        });\n    }\n    /**\n     * Set the filter data.\n     *\n     * @param filterStr - The string to use when filtering the data.\n     */\n    setFilter(filterStr = '') {\n        // Apply the new filter and remove contiguous duplicates.\n        this._filtered.length = 0;\n        let last = '';\n        let current = '';\n        for (let i = 0; i < this._history.length; i++) {\n            current = this._history[i];\n            if (current !== last &&\n                filterStr === current.slice(0, filterStr.length)) {\n                this._filtered.push((last = current));\n            }\n        }\n        this._filtered.push(filterStr);\n    }\n}\n/**\n * A namespace for private data.\n */\nvar Private;\n(function (Private) {\n    Private.initialRequest = {\n        output: false,\n        raw: true,\n        hist_access_type: 'tail',\n        n: 500\n    };\n})(Private || (Private = {}));\n//# sourceMappingURL=history.js.map","/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\nimport { CodeCell } from '@jupyterlab/cells';\n/**\n * Run a console cell.\n *\n * @param options Cell execution options\n * @returns Execution status\n */\nexport async function runCell({ cell, onCellExecuted, sessionContext }) {\n    const onSuccess = (value) => {\n        if (value && value.content.status === 'ok') {\n            const content = value.content;\n            // Use deprecated payloads for backwards compatibility.\n            if (content.payload && content.payload.length) {\n                const setNextInput = content.payload.filter(i => {\n                    return i.source === 'set_next_input';\n                })[0];\n                if (setNextInput) {\n                    const text = setNextInput.text;\n                    // Ignore the `replace` value and always set the next cell.\n                    cell.model.sharedModel.setSource(text);\n                }\n            }\n            onCellExecuted({\n                cell,\n                executionDate: new Date(),\n                success: true\n            });\n            return true;\n        }\n        else if (value && value.content.status === 'error') {\n            const errorName = value.content.ename;\n            const errorValue = value.content.evalue;\n            onCellExecuted({\n                cell,\n                executionDate: new Date(),\n                success: false,\n                error: new Error(`KernelReplyNotOK: ${errorName} ${errorValue}`)\n            });\n            return false;\n        }\n        onCellExecuted({\n            cell,\n            executionDate: new Date(),\n            success: false\n        });\n        return false;\n    };\n    const onFailure = (reason) => {\n        onCellExecuted({\n            cell,\n            executionDate: new Date(),\n            success: false,\n            error: new Error(reason)\n        });\n        return false;\n    };\n    return CodeCell.execute(cell, sessionContext).then(onSuccess, onFailure);\n}\n//# sourceMappingURL=cellexecutor.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { createStandaloneCell } from '@jupyter/ydoc';\nimport { DOMUtils } from '@jupyterlab/apputils';\nimport { Cell, CellDragUtils, CodeCell, CodeCellModel, isCodeCellModel, RawCell, RawCellModel } from '@jupyterlab/cells';\nimport { ObservableList } from '@jupyterlab/observables';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { MimeData } from '@lumino/coreutils';\nimport { Drag } from '@lumino/dragdrop';\nimport { Signal } from '@lumino/signaling';\nimport { Panel, PanelLayout, SplitPanel, Widget } from '@lumino/widgets';\nimport { runCell } from './cellexecutor';\nimport { ConsoleHistory } from './history';\n/**\n * The data attribute added to a widget that has an active kernel.\n */\nconst KERNEL_USER = 'jpKernelUser';\n/**\n * The data attribute added to a widget can run code.\n */\nconst CODE_RUNNER = 'jpCodeRunner';\n/**\n * The class name added to console widgets.\n */\nconst CONSOLE_CLASS = 'jp-CodeConsole';\n/**\n * The class added to console cells\n */\nconst CONSOLE_CELL_CLASS = 'jp-Console-cell';\n/**\n * The class name added to the console banner.\n */\nconst BANNER_CLASS = 'jp-CodeConsole-banner';\n/**\n * The class name of the active prompt cell.\n */\nconst PROMPT_CLASS = 'jp-CodeConsole-promptCell';\n/**\n * The class name of the panel that holds cell content.\n */\nconst CONTENT_CLASS = 'jp-CodeConsole-content';\n/**\n * The class name of the panel that holds prompts.\n */\nconst INPUT_CLASS = 'jp-CodeConsole-input';\n/**\n * The class name added to the console when an element within it is focused\n * and takes keyboard input, such as <input> and <div contenteditable>\n *\n * This class is also effective when the focused element is in shadow DOM.\n */\nconst READ_WRITE_CLASS = 'jp-mod-readWrite';\n/**\n * The timeout in ms for execution requests to the kernel.\n */\nconst EXECUTION_TIMEOUT = 250;\n/**\n * The mimetype used for Jupyter cell data.\n */\nconst JUPYTER_CELL_MIME = 'application/vnd.jupyter.cells';\n/**\n * The data attribute added to a widget that can undo.\n */\nconst UNDOER = 'jpUndoer';\n/**\n * A widget containing a Jupyter console.\n *\n * #### Notes\n * The CodeConsole class is intended to be used within a ConsolePanel\n * instance. Under most circumstances, it is not instantiated by user code.\n */\nexport class CodeConsole extends Widget {\n    /**\n     * Construct a console widget.\n     */\n    constructor(options) {\n        var _a, _b, _c;\n        super();\n        /**\n         * The configuration options for the text editor widget.\n         */\n        this.editorConfig = CodeConsole.defaultEditorConfig;\n        this._banner = null;\n        this._executed = new Signal(this);\n        this._config = {};\n        this._mimetype = 'text/x-ipython';\n        this._msgIds = new Map();\n        this._msgIdCells = new Map();\n        this._promptCellCreated = new Signal(this);\n        this._dragData = null;\n        this._drag = null;\n        this._focusedCell = null;\n        this._promptResizeObserver = null;\n        this._hasManualResize = false;\n        this._resizeAnimationFrameId = null;\n        this._translator = (_a = options.translator) !== null && _a !== void 0 ? _a : nullTranslator;\n        this._executor = (_b = options.executor) !== null && _b !== void 0 ? _b : Object.freeze({ runCell });\n        this.addClass(CONSOLE_CLASS);\n        this.node.dataset[KERNEL_USER] = 'true';\n        this.node.dataset[CODE_RUNNER] = 'true';\n        this.node.dataset[UNDOER] = 'true';\n        this.node.tabIndex = -1; // Allow the widget to take focus.\n        // Create the panels that hold the content and input.\n        const layout = (this.layout = new PanelLayout());\n        this._cells = new ObservableList();\n        this._content = new Panel();\n        this._input = new Panel();\n        this._splitPanel = new SplitPanel({ spacing: 0 });\n        this._splitPanel.addClass('jp-CodeConsole-split');\n        this.contentFactory = options.contentFactory;\n        this.modelFactory = (_c = options.modelFactory) !== null && _c !== void 0 ? _c : CodeConsole.defaultModelFactory;\n        this.rendermime = options.rendermime;\n        this.sessionContext = options.sessionContext;\n        this._mimeTypeService = options.mimeTypeService;\n        // Add top-level CSS classes.\n        this._content.addClass(CONTENT_CLASS);\n        this._input.addClass(INPUT_CLASS);\n        layout.addWidget(this._splitPanel);\n        // Listen for manual split panel resizing.\n        this._splitPanel.handleMoved.connect(() => {\n            this._setManualResize();\n        }, this);\n        // Listen for pointerdown to detect when user starts dragging the split\n        // handle. We need to catch this early to prevent the ResizeObserver from\n        // fighting with the user during the first drag.\n        this._splitPanel.node.addEventListener('pointerdown', event => {\n            const target = event.target;\n            if (target.classList.contains('lm-SplitPanel-handle')) {\n                this._setManualResize();\n            }\n        }, true);\n        // initialize the console with defaults\n        this.setConfig({\n            clearCellsOnExecute: false,\n            clearCodeContentOnExecute: true,\n            hideCodeInput: false,\n            promptCellPosition: 'bottom',\n            showBanner: true\n        });\n        this._history = new ConsoleHistory({\n            sessionContext: this.sessionContext\n        });\n        void this._onKernelChanged();\n        this.sessionContext.kernelChanged.connect(this._onKernelChanged, this);\n        this.sessionContext.statusChanged.connect(this._onKernelStatusChanged, this);\n    }\n    /**\n     * A signal emitted when the console finished executing its prompt cell.\n     */\n    get executed() {\n        return this._executed;\n    }\n    /**\n     * A signal emitted when a new prompt cell is created.\n     */\n    get promptCellCreated() {\n        return this._promptCellCreated;\n    }\n    /**\n     * The list of content cells in the console.\n     *\n     * #### Notes\n     * This list does not include the current banner or the prompt for a console.\n     * It may include previous banners as raw cells.\n     */\n    get cells() {\n        return this._cells;\n    }\n    /*\n     * The console input prompt cell.\n     */\n    get promptCell() {\n        const inputLayout = this._input.layout;\n        if (!inputLayout) {\n            return null;\n        }\n        return inputLayout.widgets[0] || null;\n    }\n    /**\n     * Add a new cell to the content panel.\n     *\n     * @param cell - The code cell widget being added to the content panel.\n     *\n     * @param msgId - The optional execution message id for the cell.\n     *\n     * #### Notes\n     * This method is meant for use by outside classes that want to add cells to a\n     * console. It is distinct from the `inject` method in that it requires\n     * rendered code cell widgets and does not execute them (though it can store\n     * the execution message id).\n     */\n    addCell(cell, msgId) {\n        if (this._config.clearCellsOnExecute) {\n            this.clear();\n        }\n        cell.addClass(CONSOLE_CELL_CLASS);\n        this._content.addWidget(cell);\n        this._cells.push(cell);\n        if (msgId) {\n            this._msgIds.set(msgId, cell);\n            this._msgIdCells.set(cell, msgId);\n        }\n        cell.disposed.connect(this._onCellDisposed, this);\n        this.update();\n    }\n    /**\n     * Add a banner cell.\n     */\n    addBanner() {\n        if (this._banner) {\n            // An old banner just becomes a normal cell now.\n            const cell = this._banner;\n            this._cells.push(this._banner);\n            cell.disposed.connect(this._onCellDisposed, this);\n        }\n        // Create the banner.\n        const model = this.modelFactory.createRawCell({\n            sharedModel: createStandaloneCell({\n                cell_type: 'raw',\n                source: '...'\n            })\n        });\n        const banner = (this._banner = new RawCell({\n            model,\n            contentFactory: this.contentFactory,\n            placeholder: false,\n            editorConfig: {\n                autoClosingBrackets: false,\n                codeFolding: false,\n                highlightActiveLine: false,\n                highlightTrailingWhitespace: false,\n                highlightWhitespace: false,\n                indentUnit: '4',\n                lineNumbers: false,\n                lineWrap: true,\n                matchBrackets: false,\n                readOnly: true,\n                rulers: [],\n                scrollPastEnd: false,\n                smartIndent: false,\n                tabSize: 4,\n                theme: 'jupyter'\n            }\n        })).initializeState();\n        banner.addClass(BANNER_CLASS);\n        banner.readOnly = true;\n        this._content.addWidget(banner);\n    }\n    /**\n     * Clear the code cells.\n     */\n    clear() {\n        // Dispose all the content cells\n        const cells = this._cells;\n        while (cells.length > 0) {\n            cells.get(0).dispose();\n        }\n    }\n    /**\n     * Create a new cell with the built-in factory.\n     */\n    createCodeCell() {\n        const factory = this.contentFactory;\n        const options = this._createCodeCellOptions();\n        const cell = factory.createCodeCell(options);\n        cell.readOnly = true;\n        cell.model.mimeType = this._mimetype;\n        return cell;\n    }\n    /**\n     * Dispose of the resources held by the widget.\n     */\n    dispose() {\n        // Do nothing if already disposed.\n        if (this.isDisposed) {\n            return;\n        }\n        // Clean up ResizeObserver and content listener from the current prompt cell\n        const promptCell = this.promptCell;\n        if (promptCell) {\n            if (this._promptResizeObserver) {\n                this._promptResizeObserver.disconnect();\n                this._promptResizeObserver = null;\n            }\n            promptCell.model.sharedModel.changed.disconnect(this._onPromptContentChanged, this);\n        }\n        this._cancelPendingResizeAdjustment();\n        this._msgIdCells = null;\n        this._msgIds = null;\n        this._history.dispose();\n        super.dispose();\n    }\n    /**\n     * Execute the current prompt.\n     *\n     * @param force - Whether to force execution without checking code\n     * completeness.\n     *\n     * @param timeout - The length of time, in milliseconds, that the execution\n     * should wait for the API to determine whether code being submitted is\n     * incomplete before attempting submission anyway. The default value is `250`.\n     */\n    async execute(force = false, timeout = EXECUTION_TIMEOUT) {\n        var _a, _b;\n        if (((_b = (_a = this.sessionContext.session) === null || _a === void 0 ? void 0 : _a.kernel) === null || _b === void 0 ? void 0 : _b.status) === 'dead') {\n            return;\n        }\n        const promptCell = this.promptCell;\n        if (!promptCell) {\n            throw new Error('Cannot execute without a prompt cell');\n        }\n        promptCell.model.trusted = true;\n        if (force) {\n            // Create a new prompt cell before kernel execution to allow typeahead.\n            this.newPromptCell();\n            await this._execute(promptCell);\n            return;\n        }\n        // Check whether we should execute.\n        const shouldExecute = await this._shouldExecute(timeout);\n        if (this.isDisposed) {\n            return;\n        }\n        if (shouldExecute) {\n            // Create a new prompt cell before kernel execution to allow typeahead.\n            this.newPromptCell();\n            this.promptCell.editor.focus();\n            await this._execute(promptCell);\n        }\n        else {\n            // add a newline if we shouldn't execute\n            promptCell.editor.newIndentedLine();\n        }\n    }\n    /**\n     * Get a cell given a message id.\n     *\n     * @param msgId - The message id.\n     */\n    getCell(msgId) {\n        return this._msgIds.get(msgId);\n    }\n    /**\n     * Inject arbitrary code for the console to execute immediately.\n     *\n     * @param code - The code contents of the cell being injected.\n     *\n     * @returns A promise that indicates when the injected cell's execution ends.\n     */\n    inject(code, metadata = {}) {\n        const cell = this.createCodeCell();\n        cell.model.sharedModel.setSource(code);\n        for (const key of Object.keys(metadata)) {\n            cell.model.setMetadata(key, metadata[key]);\n        }\n        this.addCell(cell);\n        return this._execute(cell);\n    }\n    /**\n     * Insert a line break in the prompt cell.\n     */\n    insertLinebreak() {\n        const promptCell = this.promptCell;\n        if (!promptCell) {\n            return;\n        }\n        promptCell.editor.newIndentedLine();\n    }\n    /**\n     * Replaces the selected text in the prompt cell.\n     *\n     * @param text - The text to replace the selection.\n     */\n    replaceSelection(text) {\n        var _a, _b;\n        const promptCell = this.promptCell;\n        if (!promptCell) {\n            return;\n        }\n        (_b = (_a = promptCell.editor).replaceSelection) === null || _b === void 0 ? void 0 : _b.call(_a, text);\n    }\n    /**\n     * Set configuration options for the console.\n     */\n    setConfig(config) {\n        const { clearCellsOnExecute, clearCodeContentOnExecute, hideCodeInput, promptCellPosition, showBanner } = config;\n        this._config = {\n            clearCellsOnExecute: clearCellsOnExecute !== null && clearCellsOnExecute !== void 0 ? clearCellsOnExecute : this._config.clearCellsOnExecute,\n            clearCodeContentOnExecute: clearCodeContentOnExecute !== null && clearCodeContentOnExecute !== void 0 ? clearCodeContentOnExecute : this._config.clearCodeContentOnExecute,\n            hideCodeInput: hideCodeInput !== null && hideCodeInput !== void 0 ? hideCodeInput : this._config.hideCodeInput,\n            promptCellPosition: promptCellPosition !== null && promptCellPosition !== void 0 ? promptCellPosition : this._config.promptCellPosition,\n            showBanner: showBanner !== null && showBanner !== void 0 ? showBanner : this._config.showBanner\n        };\n        this._updateLayout();\n    }\n    /**\n     * Serialize the output.\n     *\n     * #### Notes\n     * This only serializes the code cells and the prompt cell if it exists, and\n     * skips any old banner cells.\n     */\n    serialize() {\n        const cells = [];\n        for (const cell of this._cells) {\n            const model = cell.model;\n            if (isCodeCellModel(model)) {\n                cells.push(model.toJSON());\n            }\n        }\n        if (this.promptCell) {\n            cells.push(this.promptCell.model.toJSON());\n        }\n        return cells;\n    }\n    /**\n     * Handle `mousedown` events for the widget.\n     */\n    _evtMouseDown(event) {\n        const { button, shiftKey } = event;\n        // We only handle main or secondary button actions.\n        if (!(button === 0 || button === 2) ||\n            // Shift right-click gives the browser default behavior.\n            (shiftKey && button === 2)) {\n            return;\n        }\n        let target = event.target;\n        const cellFilter = (node) => node.classList.contains(CONSOLE_CELL_CLASS);\n        let cellIndex = CellDragUtils.findCell(target, this._cells, cellFilter);\n        if (cellIndex === -1) {\n            // `event.target` sometimes gives an orphaned node in\n            // Firefox 57, which can have `null` anywhere in its parent line. If we fail\n            // to find a cell using `event.target`, try again using a target\n            // reconstructed from the position of the click event.\n            target = document.elementFromPoint(event.clientX, event.clientY);\n            cellIndex = CellDragUtils.findCell(target, this._cells, cellFilter);\n        }\n        if (cellIndex === -1) {\n            return;\n        }\n        const cell = this._cells.get(cellIndex);\n        const targetArea = CellDragUtils.detectTargetArea(cell, event.target);\n        if (targetArea === 'prompt') {\n            this._dragData = {\n                pressX: event.clientX,\n                pressY: event.clientY,\n                index: cellIndex\n            };\n            this._focusedCell = cell;\n            document.addEventListener('mouseup', this, true);\n            document.addEventListener('mousemove', this, true);\n            event.preventDefault();\n        }\n    }\n    /**\n     * Handle `mousemove` event of widget\n     */\n    _evtMouseMove(event) {\n        const data = this._dragData;\n        if (data &&\n            CellDragUtils.shouldStartDrag(data.pressX, data.pressY, event.clientX, event.clientY)) {\n            void this._startDrag(data.index, event.clientX, event.clientY);\n        }\n    }\n    /**\n     * Start a drag event\n     */\n    _startDrag(index, clientX, clientY) {\n        const cellModel = this._focusedCell.model;\n        const selected = [cellModel.toJSON()];\n        const dragImage = CellDragUtils.createCellDragImage(this._focusedCell, selected);\n        this._drag = new Drag({\n            mimeData: new MimeData(),\n            dragImage,\n            proposedAction: 'copy',\n            supportedActions: 'copy',\n            source: this\n        });\n        this._drag.mimeData.setData(JUPYTER_CELL_MIME, selected);\n        const textContent = cellModel.sharedModel.getSource();\n        this._drag.mimeData.setData('text/plain', textContent);\n        this._focusedCell = null;\n        document.removeEventListener('mousemove', this, true);\n        document.removeEventListener('mouseup', this, true);\n        return this._drag.start(clientX, clientY).then(() => {\n            if (this.isDisposed) {\n                return;\n            }\n            this._drag = null;\n            this._dragData = null;\n        });\n    }\n    /**\n     * Handle the DOM events for the widget.\n     *\n     * @param event -The DOM event sent to the widget.\n     *\n     * #### Notes\n     * This method implements the DOM `EventListener` interface and is\n     * called in response to events on the notebook panel's node. It should\n     * not be called directly by user code.\n     */\n    handleEvent(event) {\n        switch (event.type) {\n            case 'keydown':\n                this._evtKeyDown(event);\n                break;\n            case 'mousedown':\n                this._evtMouseDown(event);\n                break;\n            case 'mousemove':\n                this._evtMouseMove(event);\n                break;\n            case 'mouseup':\n                this._evtMouseUp(event);\n                break;\n            case 'resize':\n                this._splitPanel.fit();\n                break;\n            case 'focusin':\n                this._evtFocusIn(event);\n                break;\n            case 'focusout':\n                this._evtFocusOut(event);\n                break;\n            default:\n                break;\n        }\n    }\n    /**\n     * Handle `after_attach` messages for the widget.\n     */\n    onAfterAttach(msg) {\n        const node = this.node;\n        node.addEventListener('keydown', this, true);\n        node.addEventListener('click', this);\n        node.addEventListener('mousedown', this);\n        node.addEventListener('focusin', this);\n        node.addEventListener('focusout', this);\n        // Create a prompt if necessary.\n        if (!this.promptCell) {\n            this.newPromptCell();\n        }\n        else {\n            this.promptCell.editor.focus();\n            this.update();\n        }\n    }\n    /**\n     * Handle `before-detach` messages for the widget.\n     */\n    onBeforeDetach(msg) {\n        const node = this.node;\n        node.removeEventListener('keydown', this, true);\n        node.removeEventListener('click', this);\n        node.removeEventListener('focusin', this);\n        node.removeEventListener('focusout', this);\n    }\n    /**\n     * Handle `'activate-request'` messages.\n     */\n    onActivateRequest(msg) {\n        const editor = this.promptCell && this.promptCell.editor;\n        if (editor) {\n            editor.focus();\n        }\n        this.update();\n    }\n    /**\n     * Make a new prompt cell.\n     */\n    newPromptCell() {\n        var _a, _b, _c, _d, _e;\n        let promptCell = this.promptCell;\n        const input = this._input;\n        const previousContent = (_a = promptCell === null || promptCell === void 0 ? void 0 : promptCell.model.sharedModel.getSource()) !== null && _a !== void 0 ? _a : '';\n        const previousCursorPosition = (_b = promptCell === null || promptCell === void 0 ? void 0 : promptCell.editor) === null || _b === void 0 ? void 0 : _b.getCursorPosition();\n        // Make the last prompt read-only, clear its signals, and move to content.\n        if (promptCell) {\n            promptCell.readOnly = true;\n            promptCell.removeClass(PROMPT_CLASS);\n            // Disconnect the content change listener\n            promptCell.model.sharedModel.changed.disconnect(this._onPromptContentChanged, this);\n            // Schedule execution of signal clearance to happen later so that\n            // the `readOnly` configuration gets updated before editor signals\n            // get disconnected (see `Cell.onUpdateRequest`).\n            const oldCell = promptCell;\n            const promptResizeObserver = this._promptResizeObserver;\n            requestIdleCallback(() => {\n                // Clear the signals to avoid memory leaks\n                Signal.clearData(oldCell.editor);\n                if (promptResizeObserver) {\n                    promptResizeObserver.disconnect();\n                }\n            });\n            // Ensure to clear the cursor\n            (_c = promptCell.editor) === null || _c === void 0 ? void 0 : _c.blur();\n            const child = input.widgets[0];\n            child.parent = null;\n            if (this._config.hideCodeInput) {\n                (_d = promptCell.inputArea) === null || _d === void 0 ? void 0 : _d.setHidden(true);\n            }\n            this.addCell(promptCell);\n        }\n        // Create the new prompt cell.\n        const factory = this.contentFactory;\n        const options = this._createCodeCellOptions();\n        promptCell = factory.createCodeCell(options);\n        promptCell.model.mimeType = this._mimetype;\n        promptCell.addClass(PROMPT_CLASS);\n        // Add the prompt cell to the DOM, making `this.promptCell` valid again.\n        this._input.addWidget(promptCell);\n        this._history.editor = promptCell.editor;\n        // Detect height changes via ResizeObserver for when the cell grows\n        if (promptCell.node) {\n            this._promptResizeObserver = new ResizeObserver(() => {\n                this._scheduleInputSizeAdjustment();\n            });\n            this._promptResizeObserver.observe(promptCell.node);\n        }\n        // Also listen for content changes to handle shrinking when content is removed (e.g. line deletes)\n        promptCell.model.sharedModel.changed.connect(this._onPromptContentChanged, this);\n        if (!this._config.clearCodeContentOnExecute) {\n            promptCell.model.sharedModel.setSource(previousContent);\n            if (previousCursorPosition) {\n                (_e = promptCell.editor) === null || _e === void 0 ? void 0 : _e.setCursorPosition(previousCursorPosition);\n            }\n        }\n        this._promptCellCreated.emit(promptCell);\n    }\n    /**\n     * Handle `update-request` messages.\n     */\n    onUpdateRequest(msg) {\n        Private.scrollToBottom(this._content.node);\n    }\n    /**\n     * Handle the `'keydown'` event for the widget.\n     */\n    _evtKeyDown(event) {\n        const editor = this.promptCell && this.promptCell.editor;\n        if (!editor) {\n            return;\n        }\n        if (event.keyCode === 13 && !editor.hasFocus()) {\n            event.preventDefault();\n            editor.focus();\n        }\n        else if (event.keyCode === 27 && editor.hasFocus()) {\n            // Set to command mode\n            event.preventDefault();\n            event.stopPropagation();\n            this.node.focus();\n        }\n    }\n    /**\n     * Handle the `'mouseup'` event for the widget.\n     */\n    _evtMouseUp(event) {\n        if (this.promptCell &&\n            this.promptCell.node.contains(event.target)) {\n            this.promptCell.editor.focus();\n        }\n    }\n    /**\n     * Handle `focus` events for the widget.\n     */\n    _evtFocusIn(event) {\n        // Update read-write class state.\n        this._updateReadWrite();\n    }\n    /**\n     * Handle `focusout` events for the widget.\n     */\n    _evtFocusOut(event) {\n        // Update read-write class state.\n        this._updateReadWrite();\n    }\n    /**\n     * Execute the code in the current prompt cell.\n     */\n    async _execute(cell) {\n        const source = cell.model.sharedModel.getSource();\n        this._history.push(source);\n        // If the source of the console is just \"clear\", clear the console as we\n        // do in IPython or QtConsole.\n        if (source === 'clear' || source === '%clear') {\n            this.clear();\n            return Promise.resolve(void 0);\n        }\n        cell.model.contentChanged.connect(this.update, this);\n        const options = {\n            cell,\n            sessionContext: this.sessionContext,\n            onCellExecuted: (args) => {\n                this._executed.emit(args.executionDate);\n                if (args.error) {\n                    for (const cell of this._cells) {\n                        if (cell.model.executionCount === null) {\n                            cell.model.executionState = 'idle';\n                        }\n                    }\n                }\n            }\n        };\n        try {\n            await this._executor.runCell(options);\n        }\n        finally {\n            if (!this.isDisposed) {\n                cell.model.contentChanged.disconnect(this.update, this);\n                this.update();\n            }\n        }\n    }\n    /**\n     * Update the console based on the kernel info.\n     */\n    _handleInfo(info) {\n        if (info.status !== 'ok') {\n            if (this._banner) {\n                this._banner.model.sharedModel.setSource('Error in getting kernel banner');\n            }\n            return;\n        }\n        if (this._banner) {\n            this._banner.model.sharedModel.setSource(info.banner);\n        }\n        const lang = info.language_info;\n        this._mimetype = this._mimeTypeService.getMimeTypeByLanguage(lang);\n        if (this.promptCell) {\n            this.promptCell.model.mimeType = this._mimetype;\n        }\n    }\n    /**\n     * Create the options used to initialize a code cell widget.\n     */\n    _createCodeCellOptions() {\n        const contentFactory = this.contentFactory;\n        const modelFactory = this.modelFactory;\n        const model = modelFactory.createCodeCell({});\n        const rendermime = this.rendermime;\n        const editorConfig = this.editorConfig;\n        return {\n            model,\n            rendermime,\n            contentFactory,\n            editorConfig,\n            placeholder: false,\n            translator: this._translator\n        };\n    }\n    /**\n     * Handle cell disposed signals.\n     */\n    _onCellDisposed(sender, args) {\n        if (!this.isDisposed) {\n            this._cells.removeValue(sender);\n            const msgId = this._msgIdCells.get(sender);\n            if (msgId) {\n                this._msgIdCells.delete(sender);\n                this._msgIds.delete(msgId);\n            }\n        }\n    }\n    /**\n     * Test whether we should execute the prompt cell.\n     */\n    _shouldExecute(timeout) {\n        const promptCell = this.promptCell;\n        if (!promptCell) {\n            return Promise.resolve(false);\n        }\n        const model = promptCell.model;\n        const code = model.sharedModel.getSource();\n        return new Promise((resolve, reject) => {\n            var _a;\n            const timer = setTimeout(() => {\n                resolve(true);\n            }, timeout);\n            const kernel = (_a = this.sessionContext.session) === null || _a === void 0 ? void 0 : _a.kernel;\n            if (!kernel) {\n                resolve(false);\n                return;\n            }\n            kernel\n                .requestIsComplete({ code })\n                .then(isComplete => {\n                clearTimeout(timer);\n                if (this.isDisposed) {\n                    resolve(false);\n                }\n                if (isComplete.content.status !== 'incomplete') {\n                    resolve(true);\n                    return;\n                }\n                resolve(false);\n            })\n                .catch(() => {\n                resolve(true);\n            });\n        });\n    }\n    /**\n     * Handle a change to the kernel.\n     */\n    async _onKernelChanged() {\n        var _a;\n        this.clear();\n        if (this._banner) {\n            this._banner.dispose();\n            this._banner = null;\n        }\n        if (this._config.showBanner) {\n            this.addBanner();\n        }\n        if ((_a = this.sessionContext.session) === null || _a === void 0 ? void 0 : _a.kernel) {\n            this._handleInfo(await this.sessionContext.session.kernel.info);\n        }\n    }\n    /**\n     * Handle a change to the kernel status.\n     */\n    async _onKernelStatusChanged() {\n        var _a;\n        const kernel = (_a = this.sessionContext.session) === null || _a === void 0 ? void 0 : _a.kernel;\n        if ((kernel === null || kernel === void 0 ? void 0 : kernel.status) === 'restarting') {\n            if (this._config.showBanner) {\n                this.addBanner();\n            }\n            this._handleInfo(await (kernel === null || kernel === void 0 ? void 0 : kernel.info));\n        }\n    }\n    /**\n     * Update the console node with class indicating read-write state.\n     */\n    _updateReadWrite() {\n        // TODO: de-duplicate with code in notebook/src/widget.ts\n        const inReadWrite = DOMUtils.hasActiveEditableElement(this.node);\n        this.node.classList.toggle(READ_WRITE_CLASS, inReadWrite);\n    }\n    /**\n     * Calculate relative sizes for split panel based on prompt cell position.\n     */\n    _calculateRelativeSizes() {\n        const { promptCellPosition = 'bottom' } = this._config;\n        let sizes = [1, 1];\n        if (promptCellPosition === 'top') {\n            sizes = [1, 100];\n        }\n        else if (promptCellPosition === 'bottom') {\n            sizes = [100, 1];\n        }\n        return sizes;\n    }\n    /**\n     * Set the manual resize flag and cancel any pending auto-resize.\n     */\n    _setManualResize() {\n        this._hasManualResize = true;\n        this._cancelPendingResizeAdjustment();\n    }\n    /**\n     * Cancel any pending resize adjustment animation frame.\n     */\n    _cancelPendingResizeAdjustment() {\n        if (this._resizeAnimationFrameId !== null) {\n            cancelAnimationFrame(this._resizeAnimationFrameId);\n            this._resizeAnimationFrameId = null;\n        }\n    }\n    /**\n     * Schedule an input size adjustment using requestAnimationFrame to coalesce\n     * multiple rapid events into a single layout update.\n     */\n    _scheduleInputSizeAdjustment() {\n        // Don't schedule if manual resize is active\n        if (this._hasManualResize) {\n            return;\n        }\n        if (this._resizeAnimationFrameId === null) {\n            this._resizeAnimationFrameId = requestAnimationFrame(() => {\n                this._resizeAnimationFrameId = null;\n                this._adjustSplitPanelForInputGrowth();\n            });\n        }\n    }\n    /**\n     * Handle changes to the prompt cell content.\n     */\n    _onPromptContentChanged() {\n        this._scheduleInputSizeAdjustment();\n    }\n    /**\n     * Adjust split panel sizes when the input cell grows or shrinks.\n     */\n    _adjustSplitPanelForInputGrowth() {\n        if (this.isDisposed ||\n            !this._input.node ||\n            !this._content.node ||\n            this._hasManualResize) {\n            return;\n        }\n        const { promptCellPosition = 'bottom' } = this._config;\n        // Only adjust for vertical layouts (top/bottom positions)\n        if (promptCellPosition === 'left' || promptCellPosition === 'right') {\n            return;\n        }\n        const promptCell = this.promptCell;\n        if (!promptCell || !promptCell.editor) {\n            return;\n        }\n        // Get the editor's content height directly from CodeMirror.\n        // This gives us the intrinsic height needed regardless of container size.\n        const cmEditor = promptCell.editor;\n        const editorContentHeight = cmEditor.editor.contentHeight;\n        // Get additional padding from the input area and cell\n        const cellPadding = this._getInputCellPadding();\n        const inputHeight = editorContentHeight + cellPadding;\n        const totalHeight = this._splitPanel.node.clientHeight;\n        if (totalHeight <= 0 || inputHeight <= 0) {\n            this._splitPanel.fit();\n            return;\n        }\n        const remainingHeight = totalHeight - inputHeight;\n        let contentRatio;\n        let inputRatio;\n        if (promptCellPosition === 'bottom') {\n            contentRatio = remainingHeight / totalHeight;\n            inputRatio = inputHeight / totalHeight;\n        }\n        else {\n            inputRatio = inputHeight / totalHeight;\n            contentRatio = remainingHeight / totalHeight;\n        }\n        // Convert to the format expected by setRelativeSizes\n        const totalRatio = contentRatio + inputRatio;\n        if (totalRatio > 0) {\n            const normalizedSizes = promptCellPosition === 'bottom'\n                ? [contentRatio / totalRatio, inputRatio / totalRatio]\n                : [inputRatio / totalRatio, contentRatio / totalRatio];\n            this._splitPanel.setRelativeSizes(normalizedSizes);\n        }\n    }\n    /**\n     * Get the total vertical padding for the input cell (excluding editor content).\n     */\n    _getInputCellPadding() {\n        var _a;\n        const inputPanelNode = this._input.node;\n        const inputPanelStyle = window.getComputedStyle(inputPanelNode);\n        const inputPanelPadding = parseFloat(inputPanelStyle.paddingTop) +\n            parseFloat(inputPanelStyle.paddingBottom);\n        const promptCell = this.promptCell;\n        if (!promptCell) {\n            return inputPanelPadding;\n        }\n        const cellStyle = window.getComputedStyle(promptCell.node);\n        const cellPadding = parseFloat(cellStyle.paddingTop) + parseFloat(cellStyle.paddingBottom);\n        // Account for editor wrapper border (CodeMirror's contentHeight includes its own padding)\n        const editorWrapper = (_a = promptCell.editorWidget) === null || _a === void 0 ? void 0 : _a.node;\n        let editorBorder = 0;\n        if (editorWrapper) {\n            const editorStyle = window.getComputedStyle(editorWrapper);\n            editorBorder =\n                parseFloat(editorStyle.borderTopWidth) +\n                    parseFloat(editorStyle.borderBottomWidth);\n        }\n        return inputPanelPadding + cellPadding + editorBorder;\n    }\n    /**\n     * Update the layout of the code console.\n     */\n    _updateLayout() {\n        const { promptCellPosition = 'bottom' } = this._config;\n        // Reset manual resize flag when layout changes\n        this._hasManualResize = false;\n        this._splitPanel.orientation = ['left', 'right'].includes(promptCellPosition)\n            ? 'horizontal'\n            : 'vertical';\n        // Insert the content and input panes into the widget.\n        SplitPanel.setStretch(this._content, 1);\n        SplitPanel.setStretch(this._input, 1);\n        if (promptCellPosition === 'bottom' || promptCellPosition === 'right') {\n            this._splitPanel.insertWidget(0, this._content);\n            this._splitPanel.insertWidget(1, this._input);\n        }\n        else {\n            this._splitPanel.insertWidget(0, this._input);\n            this._splitPanel.insertWidget(1, this._content);\n        }\n        this._splitPanel.setRelativeSizes(this._calculateRelativeSizes());\n        requestAnimationFrame(() => {\n            // adjust the sizes if the prompt cell is moved with code in it\n            this._adjustSplitPanelForInputGrowth();\n        });\n    }\n}\n/**\n * A namespace for CodeConsole statics.\n */\n(function (CodeConsole) {\n    /**\n     * Default console editor configuration\n     */\n    CodeConsole.defaultEditorConfig = {\n        codeFolding: false,\n        lineNumbers: false\n    };\n    /**\n     * Default implementation of `IContentFactory`.\n     */\n    class ContentFactory extends Cell.ContentFactory {\n        /**\n         * Create a new code cell widget.\n         *\n         * #### Notes\n         * If no cell content factory is passed in with the options, the one on the\n         * notebook content factory is used.\n         */\n        createCodeCell(options) {\n            return new CodeCell(options).initializeState();\n        }\n        /**\n         * Create a new raw cell widget.\n         *\n         * #### Notes\n         * If no cell content factory is passed in with the options, the one on the\n         * notebook content factory is used.\n         */\n        createRawCell(options) {\n            return new RawCell(options).initializeState();\n        }\n    }\n    CodeConsole.ContentFactory = ContentFactory;\n    /**\n     * The default implementation of an `IModelFactory`.\n     */\n    class ModelFactory {\n        /**\n         * Create a new cell model factory.\n         */\n        constructor(options = {}) {\n            this.codeCellContentFactory =\n                options.codeCellContentFactory || CodeCellModel.defaultContentFactory;\n        }\n        /**\n         * Create a new code cell.\n         * @param options - The data to use for the original source data.\n         * @returns A new code cell. If a source cell is provided, the\n        new cell will be initialized with the data from the source.\n        If the contentFactory is not provided, the instance\n        `codeCellContentFactory` will be used.\n         */\n        createCodeCell(options = {}) {\n            if (!options.contentFactory) {\n                options.contentFactory = this.codeCellContentFactory;\n            }\n            return new CodeCellModel(options);\n        }\n        /**\n         * Create a new raw cell.\n         * @param options - The data to use for the original source data.\n         * @returns A new raw cell. If a source cell is provided, the\n        new cell will be initialized with the data from the source.\n         */\n        createRawCell(options) {\n            return new RawCellModel(options);\n        }\n    }\n    CodeConsole.ModelFactory = ModelFactory;\n    /**\n     * The default `ModelFactory` instance.\n     */\n    CodeConsole.defaultModelFactory = new ModelFactory({});\n})(CodeConsole || (CodeConsole = {}));\n/**\n * A namespace for console widget private data.\n */\nvar Private;\n(function (Private) {\n    /**\n     * Jump to the bottom of a node.\n     *\n     * @param node - The scrollable element.\n     */\n    function scrollToBottom(node) {\n        node.scrollTop = node.scrollHeight - node.clientHeight;\n    }\n    Private.scrollToBottom = scrollToBottom;\n})(Private || (Private = {}));\n//# sourceMappingURL=widget.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { MainAreaWidget, SessionContext, SessionContextDialogs } from '@jupyterlab/apputils';\nimport { PathExt, Time } from '@jupyterlab/coreutils';\nimport { RenderMimeRegistry } from '@jupyterlab/rendermime';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { consoleIcon } from '@jupyterlab/ui-components';\nimport { Token, UUID } from '@lumino/coreutils';\nimport { Panel } from '@lumino/widgets';\nimport { CodeConsole } from './widget';\n/**\n * The class name added to console panels.\n */\nconst PANEL_CLASS = 'jp-ConsolePanel';\n/**\n * A panel which contains a console and the ability to add other children.\n */\nexport class ConsolePanel extends MainAreaWidget {\n    /**\n     * Construct a console panel.\n     */\n    constructor(options) {\n        super({ content: new Panel() });\n        this._executed = null;\n        this._connected = null;\n        this.addClass(PANEL_CLASS);\n        let { executor, rendermime, mimeTypeService, path, basePath, name, manager, modelFactory, sessionContext, translator } = options;\n        this.translator = translator !== null && translator !== void 0 ? translator : nullTranslator;\n        const trans = this.translator.load('jupyterlab');\n        const contentFactory = (this.contentFactory = options.contentFactory);\n        const count = Private.count++;\n        if (!path) {\n            path = PathExt.join(basePath || '', `console-${count}-${UUID.uuid4()}`);\n        }\n        sessionContext = this._sessionContext =\n            sessionContext !== null && sessionContext !== void 0 ? sessionContext : new SessionContext({\n                kernelManager: manager.kernels,\n                sessionManager: manager.sessions,\n                specsManager: manager.kernelspecs,\n                path: manager.contents.localPath(path),\n                name: name || trans.__('Console %1', count),\n                type: 'console',\n                kernelPreference: options.kernelPreference,\n                setBusy: options.setBusy\n            });\n        const resolver = new RenderMimeRegistry.UrlResolver({\n            path,\n            contents: manager.contents\n        });\n        rendermime = rendermime.clone({ resolver });\n        this.console = contentFactory.createConsole({\n            executor,\n            rendermime,\n            sessionContext: sessionContext,\n            mimeTypeService,\n            contentFactory,\n            modelFactory,\n            translator\n        });\n        this.content.addWidget(this.console);\n        void sessionContext.initialize().then(async (value) => {\n            var _a;\n            if (value) {\n                await ((_a = options.sessionDialogs) !== null && _a !== void 0 ? _a : new SessionContextDialogs({ translator })).selectKernel(sessionContext);\n            }\n            this._connected = new Date();\n            this._updateTitlePanel();\n        });\n        this.console.executed.connect(this._onExecuted, this);\n        this._updateTitlePanel();\n        sessionContext.kernelChanged.connect(this._updateTitlePanel, this);\n        sessionContext.propertyChanged.connect(this._updateTitlePanel, this);\n        this.title.icon = consoleIcon;\n        this.title.closable = true;\n        this.id = `console-${count}`;\n    }\n    /**\n     * The session used by the panel.\n     */\n    get sessionContext() {\n        return this._sessionContext;\n    }\n    /**\n     * Dispose of the resources held by the widget.\n     */\n    dispose() {\n        this.sessionContext.dispose();\n        this.console.dispose();\n        super.dispose();\n    }\n    /**\n     * Handle `'activate-request'` messages.\n     */\n    onActivateRequest(msg) {\n        const prompt = this.console.promptCell;\n        if (prompt) {\n            prompt.editor.focus();\n        }\n    }\n    /**\n     * Handle `'close-request'` messages.\n     */\n    onCloseRequest(msg) {\n        super.onCloseRequest(msg);\n        this.dispose();\n    }\n    /**\n     * Handle a console execution.\n     */\n    _onExecuted(sender, args) {\n        this._executed = args;\n        this._updateTitlePanel();\n    }\n    /**\n     * Update the console panel title.\n     */\n    _updateTitlePanel() {\n        Private.updateTitle(this, this._connected, this._executed, this.translator);\n    }\n}\n/**\n * A namespace for ConsolePanel statics.\n */\n(function (ConsolePanel) {\n    /**\n     * Default implementation of `IContentFactory`.\n     */\n    class ContentFactory extends CodeConsole.ContentFactory {\n        /**\n         * Create a new console panel.\n         */\n        createConsole(options) {\n            return new CodeConsole(options);\n        }\n    }\n    ConsolePanel.ContentFactory = ContentFactory;\n    /**\n     * The console renderer token.\n     */\n    ConsolePanel.IContentFactory = new Token('@jupyterlab/console:IContentFactory', 'A factory object that creates new code consoles. Use this if you want to create and host code consoles in your own UI elements.');\n})(ConsolePanel || (ConsolePanel = {}));\n/**\n * A namespace for private data.\n */\nvar Private;\n(function (Private) {\n    /**\n     * The counter for new consoles.\n     */\n    Private.count = 1;\n    /**\n     * Update the title of a console panel.\n     */\n    function updateTitle(panel, connected, executed, translator) {\n        translator = translator || nullTranslator;\n        const trans = translator.load('jupyterlab');\n        const sessionContext = panel.console.sessionContext.session;\n        if (sessionContext) {\n            // FIXME:\n            let caption = trans.__('Name: %1\\n', sessionContext.name) +\n                trans.__('Directory: %1\\n', PathExt.dirname(sessionContext.path)) +\n                trans.__('Kernel: %1', panel.console.sessionContext.kernelDisplayName);\n            if (connected) {\n                caption += trans.__('\\nConnected: %1', Time.format(connected.toISOString()));\n            }\n            if (executed) {\n                caption += trans.__('\\nLast Execution: %1');\n            }\n            panel.title.label = sessionContext.name;\n            panel.title.caption = caption;\n        }\n        else {\n            panel.title.label = trans.__('Console');\n            panel.title.caption = '';\n        }\n    }\n    Private.updateTitle = updateTitle;\n})(Private || (Private = {}));\n//# sourceMappingURL=panel.js.map","/*\n * Copyright (c) 2021-2023 Datalayer, Inc.\n *\n * MIT License\n */\nimport { CommandRegistry } from '@lumino/commands';\nimport { BoxPanel } from '@lumino/widgets';\nimport { RenderMimeRegistry, standardRendererFactories as initialFactories, } from '@jupyterlab/rendermime';\nimport { ybinding, CodeMirrorEditorFactory, CodeMirrorMimeTypeService, EditorLanguageRegistry, EditorExtensionRegistry, EditorThemeRegistry, } from '@jupyterlab/codemirror';\nimport { ConsolePanel } from '@jupyterlab/console';\nconst DEFAULT_CONSOLE_PATH = 'console-path';\nexport class ConsoleAdapter {\n    _panel;\n    _code;\n    constructor(options) {\n        const { kernel, serviceManager, code } = options;\n        this._code = code;\n        this._panel = new BoxPanel();\n        this._panel.direction = 'top-to-bottom';\n        this._panel.spacing = 0;\n        this._panel.addClass('dla-JupyterLab-Console');\n        Promise.all([serviceManager.ready, kernel?.ready]).then(() => {\n            this.setupConsole(serviceManager, kernel);\n        });\n    }\n    setupConsole(serviceManager, kernel) {\n        // Set up a command registry.\n        const commands = new CommandRegistry();\n        this._panel.node.addEventListener('keydown', event => {\n            commands.processKeydownEvent(event);\n        });\n        // Set up the text editor\n        const themes = new EditorThemeRegistry();\n        for (const theme of EditorThemeRegistry.getDefaultThemes()) {\n            themes.addTheme(theme);\n        }\n        const editorExtensions = () => {\n            const registry = new EditorExtensionRegistry();\n            for (const extensionFactory of EditorExtensionRegistry.getDefaultExtensions({ themes })) {\n                registry.addExtension(extensionFactory);\n            }\n            registry.addExtension({\n                name: 'shared-model-binding',\n                factory: options => {\n                    const sharedModel = options.model.sharedModel;\n                    return EditorExtensionRegistry.createImmutableExtension(ybinding({\n                        ytext: sharedModel.ysource,\n                        undoManager: sharedModel.undoManager ?? undefined,\n                    }));\n                },\n            });\n            return registry;\n        };\n        const languages = new EditorLanguageRegistry();\n        // Register default languages.\n        for (const language of EditorLanguageRegistry.getDefaultLanguages()) {\n            languages.addLanguage(language);\n        }\n        // Add Jupyter Markdown flavor here to support code block highlighting.\n        languages.addLanguage({\n            name: 'ipythongfm',\n            mime: 'text/x-ipythongfm',\n            load: async () => {\n                // TODO: add support for LaTeX.\n                const m = await import('@codemirror/lang-markdown');\n                return m.markdown({\n                    codeLanguages: (info) => languages.findBest(info),\n                });\n            },\n        });\n        const factoryService = new CodeMirrorEditorFactory({\n            extensions: editorExtensions(),\n            languages,\n        });\n        const rendermime = new RenderMimeRegistry({ initialFactories });\n        const mimeTypeService = new CodeMirrorMimeTypeService(languages);\n        const editorFactory = factoryService.newInlineEditor;\n        const contentFactory = new ConsolePanel.ContentFactory({ editorFactory });\n        const consolePanel = new ConsolePanel({\n            name: kernel?.session.name,\n            manager: serviceManager,\n            rendermime,\n            path: kernel?.session.path ?? DEFAULT_CONSOLE_PATH,\n            contentFactory,\n            mimeTypeService,\n            kernelPreference: {\n                shouldStart: true,\n                name: kernel?.connection?.name ?? 'python',\n                id: kernel?.id,\n                language: kernel?.info?.language_info.name,\n            },\n        });\n        consolePanel.title.label = 'Console';\n        BoxPanel.setStretch(consolePanel, 1);\n        this._panel.addWidget(consolePanel);\n        window.addEventListener('resize', () => {\n            this._panel.update();\n        });\n        const selector = '.jp-ConsolePanel';\n        // Add Console commands.\n        let command;\n        command = 'console:clear';\n        commands.addCommand(command, {\n            label: 'Clear',\n            execute: () => {\n                consolePanel.console.clear();\n            },\n        });\n        command = 'console:execute';\n        commands.addCommand(command, {\n            label: 'Execute Prompt',\n            execute: () => {\n                return consolePanel.console.execute();\n            },\n        });\n        commands.addKeyBinding({ command, selector, keys: ['Enter'] });\n        command = 'console:execute-forced';\n        commands.addCommand(command, {\n            label: 'Execute Cell (forced)',\n            execute: () => {\n                return consolePanel.console.execute(true);\n            },\n        });\n        commands.addKeyBinding({ command, selector, keys: ['Shift Enter'] });\n        command = 'console:linebreak';\n        commands.addCommand(command, {\n            label: 'Insert Line Break',\n            execute: () => {\n                consolePanel.console.insertLinebreak();\n            },\n        });\n        commands.addKeyBinding({ command, selector, keys: ['Ctrl Enter'] });\n        if (this._code) {\n            consolePanel.console.sessionContext.ready.then(() => {\n                consolePanel.console.inject(this._code ?? '');\n            });\n        }\n    }\n    get panel() {\n        return this._panel;\n    }\n}\nexport default ConsoleAdapter;\n//# sourceMappingURL=ConsoleAdapter.js.map","import { jsx as _jsx, Fragment as _Fragment } from \"react/jsx-runtime\";\n/*\n * Copyright (c) 2021-2023 Datalayer, Inc.\n *\n * MIT License\n */\nimport { useState, useEffect } from 'react';\nimport { useJupyter } from './../../jupyter/JupyterUse';\nimport Lumino from '../lumino/Lumino';\nimport ConsoleAdapter from './ConsoleAdapter';\nimport useConsoleStore from './ConsoleState';\nimport './Console.css';\nexport const Console = (options) => {\n    const { defaultKernel, serviceManager } = useJupyter();\n    const [adapter, setAdapter] = useState();\n    const store = useConsoleStore();\n    useEffect(() => {\n        if (serviceManager) {\n            const adapter = new ConsoleAdapter({\n                kernel: defaultKernel,\n                serviceManager,\n                code: options.code,\n            });\n            setAdapter(adapter);\n            store.setAdapter(adapter);\n        }\n    }, [defaultKernel, serviceManager]);\n    return adapter ? (_jsx(Lumino, { children: adapter.panel })) : (_jsx(_Fragment, { children: \"Loading Jupyter Console...\" }));\n};\nexport default Console;\n//# sourceMappingURL=Console.js.map","/*\n * Copyright (c) 2021-2023 Datalayer, Inc.\n *\n * MIT License\n */\n\n/**\n * Console Chunk - Contains all Console-related dependencies\n * This chunk is loaded on-demand when a Console component is needed\n */\n\nimport React from 'react';\nimport {\n  JupyterReactTheme,\n  Console,\n  useJupyter,\n} from '@datalayer/jupyter-react';\nimport { getJupyterEmbedConfig } from '../config';\nimport type { IConsoleEmbedOptions } from '../types';\n\n/**\n * Hook to get Jupyter context from embed config\n */\nconst useJupyterEmbed = () => {\n  const config = getJupyterEmbedConfig();\n  return useJupyter({\n    jupyterServerUrl: config.serverUrl || '',\n    jupyterServerToken: config.token || '',\n    startDefaultKernel: config.autoStartKernel,\n    defaultKernelName: config.defaultKernel,\n    terminals: true,\n  });\n};\n\ninterface IConsoleChunkProps {\n  options: IConsoleEmbedOptions;\n}\n\nconst ConsoleInner: React.FC<IConsoleChunkProps> = ({ options }) => {\n  useJupyterEmbed();\n\n  return (\n    <div style={{ height: options.height || '400px' }}>\n      <Console code={options.initCode} />\n    </div>\n  );\n};\n\nexport const ConsoleChunk: React.FC<IConsoleChunkProps> = ({ options }) => {\n  return (\n    <JupyterReactTheme>\n      <ConsoleInner options={options} />\n    </JupyterReactTheme>\n  );\n};\n\nexport default ConsoleChunk;\n"],"names":["DRAG_IMAGE_CLASS","SINGLE_DRAG_IMAGE_CLASS","CELL_DRAG_CONTENT_CLASS","CELL_DRAG_PROMPT_CLASS","CELL_DRAG_MULTIPLE_BACK","CellDragUtils","Private","async","runCell","cell","onCellExecuted","sessionContext","CodeCell","execute","then","value","content","status","payload","length","setNextInput","filter","i","source","text","model","sharedModel","setSource","executionDate","Date","success","errorName","ename","errorValue","evalue","error","Error","reason","findCell","node","cells","isCellNode","cellIndex","parentElement","index","detectTargetArea","target","_a","_b","targetArea","editorWidget","contains","promptNode","shouldStartDrag","prevX","prevY","nextX","nextY","dx","Math","abs","dy","createCellDragImage","activeCell","selectedCells","count","promptNumber","type","executionCount","toString","cellContent","getSource","split","slice","VirtualDOM","realize","h","div","className","span","ConsoleHistory","constructor","options","this","_cursor","_hasSession","_history","_placeholder","_setByHistory","_isDisposed","_editor","_filtered","_handleKernel","kernelChanged","connect","editor","prev","edgeRequested","disconnect","onEdgeRequest","changed","onTextChange","placeholder","isDisposed","dispose","Signal","clearData","back","setFilter","max","Promise","resolve","forward","min","push","item","reset","onHistory","last","current","history","location","columnPos","indexOf","setCursorPosition","line","column","pos","getPositionAt","kernel","session","requestHistory","initialRequest","v","filterStr","output","raw","hist_access_type","n","CONSOLE_CELL_CLASS","PROMPT_CLASS","CodeConsole","Widget","_c","super","editorConfig","defaultEditorConfig","_banner","_executed","_config","_mimetype","_msgIds","Map","_msgIdCells","_promptCellCreated","_dragData","_drag","_focusedCell","_promptResizeObserver","_hasManualResize","_resizeAnimationFrameId","_translator","translator","nullTranslator","_executor","executor","Object","freeze","addClass","dataset","tabIndex","layout","PanelLayout","_cells","ObservableList","_content","Panel","_input","_splitPanel","SplitPanel","spacing","contentFactory","modelFactory","defaultModelFactory","rendermime","_mimeTypeService","mimeTypeService","addWidget","handleMoved","_setManualResize","addEventListener","event","classList","setConfig","clearCellsOnExecute","clearCodeContentOnExecute","hideCodeInput","promptCellPosition","showBanner","_onKernelChanged","statusChanged","_onKernelStatusChanged","executed","promptCellCreated","promptCell","inputLayout","widgets","addCell","msgId","clear","set","disposed","_onCellDisposed","update","addBanner","createRawCell","createStandaloneCell","cell_type","banner","RawCell","autoClosingBrackets","codeFolding","highlightActiveLine","highlightTrailingWhitespace","highlightWhitespace","indentUnit","lineNumbers","lineWrap","matchBrackets","readOnly","rulers","scrollPastEnd","smartIndent","tabSize","theme","initializeState","get","createCodeCell","factory","_createCodeCellOptions","mimeType","_onPromptContentChanged","_cancelPendingResizeAdjustment","force","timeout","trusted","newPromptCell","_execute","shouldExecute","_shouldExecute","focus","newIndentedLine","getCell","inject","code","metadata","key","keys","setMetadata","insertLinebreak","replaceSelection","call","config","_updateLayout","serialize","isCodeCellModel","toJSON","_evtMouseDown","button","shiftKey","cellFilter","document","elementFromPoint","clientX","clientY","pressX","pressY","preventDefault","_evtMouseMove","data","_startDrag","cellModel","selected","dragImage","Drag","mimeData","MimeData","proposedAction","supportedActions","setData","textContent","removeEventListener","start","handleEvent","_evtKeyDown","_evtMouseUp","fit","_evtFocusIn","_evtFocusOut","onAfterAttach","msg","onBeforeDetach","onActivateRequest","_d","_e","input","previousContent","previousCursorPosition","getCursorPosition","removeClass","oldCell","promptResizeObserver","requestIdleCallback","blur","parent","inputArea","setHidden","ResizeObserver","_scheduleInputSizeAdjustment","observe","emit","onUpdateRequest","scrollToBottom","keyCode","hasFocus","stopPropagation","_updateReadWrite","contentChanged","args","executionState","_handleInfo","info","lang","language_info","getMimeTypeByLanguage","sender","removeValue","delete","reject","timer","setTimeout","requestIsComplete","isComplete","clearTimeout","catch","inReadWrite","DOMUtils","hasActiveEditableElement","toggle","_calculateRelativeSizes","sizes","cancelAnimationFrame","requestAnimationFrame","_adjustSplitPanelForInputGrowth","inputHeight","contentHeight","_getInputCellPadding","totalHeight","clientHeight","remainingHeight","contentRatio","inputRatio","totalRatio","normalizedSizes","setRelativeSizes","inputPanelNode","inputPanelStyle","window","getComputedStyle","inputPanelPadding","parseFloat","paddingTop","paddingBottom","cellStyle","cellPadding","editorWrapper","editorBorder","editorStyle","borderTopWidth","borderBottomWidth","orientation","includes","setStretch","insertWidget","ContentFactory","Cell","ModelFactory","codeCellContentFactory","CodeCellModel","defaultContentFactory","RawCellModel","scrollTop","scrollHeight","ConsolePanel","MainAreaWidget","_connected","path","basePath","name","manager","trans","load","PathExt","join","UUID","uuid4","_sessionContext","SessionContext","kernelManager","kernels","sessionManager","sessions","specsManager","kernelspecs","contents","localPath","__","kernelPreference","setBusy","resolver","RenderMimeRegistry","UrlResolver","clone","console","createConsole","initialize","sessionDialogs","SessionContextDialogs","selectKernel","_updateTitlePanel","_onExecuted","propertyChanged","title","icon","consoleIcon","closable","id","prompt","onCloseRequest","updateTitle","IContentFactory","Token","panel","connected","caption","dirname","kernelDisplayName","Time","format","toISOString","label","ConsoleAdapter","_panel","_code","serviceManager","BoxPanel","direction","all","ready","setupConsole","commands","CommandRegistry","processKeydownEvent","themes","EditorThemeRegistry","getDefaultThemes","addTheme","languages","EditorLanguageRegistry","language","getDefaultLanguages","addLanguage","mime","import","ap","markdown","codeLanguages","findBest","factoryService","CodeMirrorEditorFactory","extensions","registry","EditorExtensionRegistry","extensionFactory","getDefaultExtensions","addExtension","createImmutableExtension","ybinding","ytext","ysource","undoManager","editorExtensions","initialFactories","CodeMirrorMimeTypeService","editorFactory","newInlineEditor","consolePanel","shouldStart","connection","selector","command","addCommand","addKeyBinding","Console","defaultKernel","useJupyter","adapter","setAdapter","useState","store","useConsoleStore","useEffect","_jsx","Lumino","children","_Fragment","ConsoleInner","getJupyterEmbedConfig","jupyterServerUrl","serverUrl","jupyterServerToken","token","startDefaultKernel","autoStartKernel","defaultKernelName","terminals","useJupyterEmbed","jsx","style","height","initCode","ConsoleChunk","JupyterReactTheme"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}