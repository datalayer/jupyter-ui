import{n as e,S as t,M as r,l as n,W as i}from"./JupyterReactTheme-CX3WbnDJ.js";import{a as s,j as o}from"./vendor-react-Bc3S_DuI.js";class a{constructor(r={}){var n,i,s,o,a,l;if(this._id=0,this._ranks={},this._types=null,this._factories={},this.translator=null!==(n=r.translator)&&void 0!==n?n:e,this.resolver=null!==(i=r.resolver)&&void 0!==i?i:null,this.linkHandler=null!==(s=r.linkHandler)&&void 0!==s?s:null,this.latexTypesetter=null!==(o=r.latexTypesetter)&&void 0!==o?o:null,this.markdownParser=null!==(a=r.markdownParser)&&void 0!==a?a:null,this.sanitizer=null!==(l=r.sanitizer)&&void 0!==l?l:new t,r.initialFactories)for(const e of r.initialFactories)this.addFactory(e)}get mimeTypes(){return this._types||(this._types=l.sortedTypes(this._ranks))}preferredMimeType(e,t="ensure"){if("ensure"===t||"prefer"===t)for(const r of this.mimeTypes)if(r in e&&this._factories[r].safe)return r;if("ensure"!==t)for(const r of this.mimeTypes)if(r in e)return r}createRenderer(e){if(!(e in this._factories))throw new Error(`No factory for mime type: '${e}'`);return this._factories[e].createRenderer({mimeType:e,resolver:this.resolver,sanitizer:this.sanitizer,linkHandler:this.linkHandler,latexTypesetter:this.latexTypesetter,markdownParser:this.markdownParser,translator:this.translator})}createModel(e={}){return new r(e)}clone(e={}){var t,r,n,i,s,o,l,c,d,h;const u=new a({resolver:null!==(r=null!==(t=e.resolver)&&void 0!==t?t:this.resolver)&&void 0!==r?r:void 0,sanitizer:null!==(i=null!==(n=e.sanitizer)&&void 0!==n?n:this.sanitizer)&&void 0!==i?i:void 0,linkHandler:null!==(o=null!==(s=e.linkHandler)&&void 0!==s?s:this.linkHandler)&&void 0!==o?o:void 0,latexTypesetter:null!==(c=null!==(l=e.latexTypesetter)&&void 0!==l?l:this.latexTypesetter)&&void 0!==c?c:void 0,markdownParser:null!==(h=null!==(d=e.markdownParser)&&void 0!==d?d:this.markdownParser)&&void 0!==h?h:void 0,translator:this.translator});return u._factories={...this._factories},u._ranks={...this._ranks},u._id=this._id,u}getFactory(e){return this._factories[e]}addFactory(e,t){void 0===t&&void 0===(t=e.defaultRank)&&(t=100);for(const r of e.mimeTypes)this._factories[r]=e,this._ranks[r]={rank:t,id:this._id++};this._types=null}removeMimeType(e){delete this._factories[e],delete this._ranks[e],this._types=null}getRank(e){const t=this._ranks[e];return t&&t.rank}setRank(e,t){if(!this._ranks[e])return;const r=this._id++;this._ranks[e]={rank:t,id:r},this._types=null}}var l;(a||(a={})).UrlResolver=class{constructor(e){this._path=e.path,this._contents=e.contents}get path(){return this._path}set path(e){this._path=e}async resolveUrl(e){if(this.isLocal(e)){const t=encodeURI(n.PathExt.dirname(this.path));e=n.PathExt.resolve(t,e)}return e}async getDownloadUrl(e){return this.isLocal(e)?this._contents.getDownloadUrl(decodeURIComponent(e)):e}isLocal(e,t=!1){return!this.isMalformed(e)&&(n.URLExt.isLocal(e,t)||!!this._contents.driveName(decodeURI(e)))}async resolvePath(e){const t=n.PageConfig.getOption("rootUri").replace("file://","");if(e.startsWith("~/")&&t.startsWith("/home/")&&(e=t.split("/").slice(0,3).join("/")+e.substring(1)),e.startsWith(t)||e.startsWith("./"))try{const r=e.replace(t,"");return{path:(await this._contents.get(r,{content:!1})).path,scope:"server"}}catch(r){return console.warn(`Could not resolve location of ${e} on server`),null}return{path:e,scope:"kernel"}}isMalformed(e){try{return decodeURI(e),!1}catch(t){if(t instanceof URIError)return!0;throw t}}},(l||(l={})).sortedTypes=function(e){return Object.keys(e).sort((t,r)=>{const n=e[t],i=e[r];return n.rank!==i.rank?n.rank-i.rank:n.id-i.id})};const c=({id:e="lumino-id",height:t="100%",children:r})=>{const n=s.useRef(null);return s.useEffect(()=>{if(console.log("Lumino useEffect - ref.current:",n.current,"children:",r,"children.isAttached:",r?.isAttached),n&&n.current&&r){try{r.isAttached?(console.log("Widget already attached"),console.log("Widget node:",r.node),console.log("Widget node parent:",r.node.parentElement),n.current.contains(r.node)||(console.log("Widget node not in container, re-attaching"),i.attach(r,n.current))):(console.log("Attaching widget to DOM"),i.attach(r,n.current),console.log("Widget attached successfully"),console.log("Widget node:",r.node),console.log("Widget node parent:",r.node.parentElement),console.log("Container children after attach:",n.current.children.length),console.log("Widget is visible:",r.isVisible),r.isVisible||(console.log("Making widget visible"),r.show()),r.update())}catch(e){console.warn("Exception while attaching Lumino widget.",e)}return()=>{console.log("Lumino cleanup - detaching widget");try{r&&(r.isAttached||r.node.isConnected)&&(console.log("Detaching widget from DOM"),i.detach(r))}catch(e){console.warn("Exception while detaching Lumino widget.",e)}}}},[n,r]),o.jsx("div",{id:e,ref:n,style:{height:t,minHeight:t}})};export{c as L,a as R};
//# sourceMappingURL=Lumino-D6-gHQxh.js.map
