import{a as reactExports,j as jsxRuntimeExports,r as requireReact,t,c as clientExports}from"./vendor-react-Bc3S_DuI.js";import{t as theme,$ as $e,r as requireCjs,g as ForwardRef,h as ForwardRef$1,i as ForwardRef$2,j as ForwardRef$3,k as ForwardRef$4,l as ForwardRef$5,m as ForwardRef$6,n as ForwardRef$7,o as ForwardRef$8,p as ForwardRef$9,q as ForwardRef$a,s as setupPrimerPortals,T as ThemeProvider,v as BaseStyles}from"./vendor-primer-BmSALTY4.js";import{e as getAugmentedNamespace,g as getDefaultExportFromCjs}from"./vendor-mathjax-Bog1Ynz5.js";import{N as indentMore,O as insertTab,Q as insertNewlineAndIndent,T as insertBlankLine,U as simplifySelection,X as indentLess,F as Facet,Y as combineConfig,E as EditorView,V as ViewPlugin,A as Annotation,a as EditorSelection,b as StateEffect,o as closeBrackets,f as foldGutter,g as drawSelection,u as highlightActiveLine,d as highlightSpecialChars,Z as highlightTrailingWhitespace,_ as highlightWhitespace,$ as indentUnit,y as defaultKeymap,w as keymap,c as lineNumbers,i as dropCursor,n as bracketMatching,P as Prec,x as closeBracketsKeymap,r as rectangularSelection,q as crosshairCursor,j as EditorState,a0 as selectSelectionMatches,a1 as openSearchPanel,a2 as findPrevious,a3 as findNext,a4 as closeSearchPanel,a5 as scrollPastEnd,k as indentOnInput,t as tooltips,J as Compartment,m as syntaxHighlighting,a6 as HighlightStyle,M as tags,I as defaultHighlightStyle,a7 as syntaxTree,D as Decoration,a8 as RangeSetBuilder,a9 as NodeProp,aa as LanguageSupport,ab as LRLanguage,ac as buildParser,ad as highlightTree,ae as LanguageDescription,af as StreamLanguage,ag as ensureSyntaxTree,S as StateField}from"./vendor-codemirror-OzOnFEf0.js";var lib$9={},basemanager={},ArrayExt,Private$v,StringExt;function*chain(...e){for(const t of e)yield*t}function*empty(){}function*enumerate(e,t=0){for(const r of e)yield[t++,r]}function*filter(e,t){let r=0;for(const s of e)t(s,r++)&&(yield s)}function find$1(e,t){let r=0;for(const s of e)if(t(s,r++))return s}function findIndex(e,t){let r=0;for(const s of e)if(t(s,r++))return r-1;return-1}function min$1(e,t){let r;for(const s of e)void 0!==r?t(s,r)<0&&(r=s):r=s;return r}function max$1(e,t){let r;for(const s of e)void 0!==r?t(s,r)>0&&(r=s):r=s;return r}function minmax(e,t){let r,s,n=!0;for(const i of e)n?(r=i,s=i,n=!1):t(i,r)<0?r=i:t(i,s)>0&&(s=i);return n?void 0:[r,s]}function toArray(e){return Array.from(e)}function toObject(e){const t={};for(const[r,s]of e)t[r]=s;return t}function each(e,t){let r=0;for(const s of e)if(!1===t(s,r++))return}function every$2(e,t){let r=0;for(const s of e)if(!1===t(s,r++))return!1;return!0}function some$1(e,t){let r=0;for(const s of e)if(t(s,r++))return!0;return!1}function*map$1(e,t){let r=0;for(const s of e)yield t(s,r++)}function*range$1(e,t,r){void 0===t?(t=e,e=0,r=1):void 0===r&&(r=1);const s=Private$v.rangeLength(e,t,r);for(let n=0;n<s;n++)yield e+r*n}function reduce(e,t,r){const s=e[Symbol.iterator]();let n=0,i=s.next();if(i.done&&void 0===r)throw new TypeError("Reduce of empty iterable with no initial value.");if(i.done)return r;let o,a,l=s.next();if(l.done&&void 0===r)return i.value;if(l.done)return t(r,i.value,n++);for(o=t(void 0===r?i.value:t(r,i.value,n++),l.value,n++);!(a=s.next()).done;)o=t(o,a.value,n++);return o}function*repeat$1(e,t){for(;0<t--;)yield e}function*once(e){yield e}function*retro(e){if("function"==typeof e.retro)yield*e.retro();else for(let t=e.length-1;t>-1;t--)yield e[t]}function topologicSort(e){let t=[],r=/* @__PURE__ */new Set,s=/* @__PURE__ */new Map;for(const o of e)n(o);for(const[o]of s)i(o);return t;function n(e){let[t,r]=e,n=s.get(r);n?n.push(t):s.set(r,[t])}function i(e){if(r.has(e))return;r.add(e);let n=s.get(e);if(n)for(const t of n)i(t);t.push(e)}}function*stride(e,t){let r=0;for(const s of e)0===r++%t&&(yield s)}function*take(e,t){if(t<1)return;const r=e[Symbol.iterator]();let s;for(;0<t--&&!(s=r.next()).done;)yield s.value}function*zip(...e){const t=e.map(e=>e[Symbol.iterator]());let r=t.map(e=>e.next());for(;every$2(r,e=>!e.done);r=t.map(e=>e.next()))yield r.map(e=>e.value)}!function(e){function t(e,t,r=0,s=-1){let n,i=e.length;if(0===i)return-1;r=r<0?Math.max(0,r+i):Math.min(r,i-1),n=(s=s<0?Math.max(0,s+i):Math.min(s,i-1))<r?s+1+(i-r):s-r+1;for(let o=0;o<n;++o){let s=(r+o)%i;if(e[s]===t)return s}return-1}function r(e,t,r=-1,s=0){let n,i=e.length;if(0===i)return-1;n=(r=r<0?Math.max(0,r+i):Math.min(r,i-1))<(s=s<0?Math.max(0,s+i):Math.min(s,i-1))?r+1+(i-s):r-s+1;for(let o=0;o<n;++o){let s=(r-o+i)%i;if(e[s]===t)return s}return-1}function s(e,t,r=0,s=-1){let n,i=e.length;if(0===i)return-1;r=r<0?Math.max(0,r+i):Math.min(r,i-1),n=(s=s<0?Math.max(0,s+i):Math.min(s,i-1))<r?s+1+(i-r):s-r+1;for(let o=0;o<n;++o){let s=(r+o)%i;if(t(e[s],s))return s}return-1}function n(e,t,r=-1,s=0){let n,i=e.length;if(0===i)return-1;n=(r=r<0?Math.max(0,r+i):Math.min(r,i-1))<(s=s<0?Math.max(0,s+i):Math.min(s,i-1))?r+1+(i-s):r-s+1;for(let o=0;o<n;++o){let s=(r-o+i)%i;if(t(e[s],s))return s}return-1}function i(e,t=0,r=-1){let s=e.length;if(!(s<=1))for(t=t<0?Math.max(0,t+s):Math.min(t,s-1),r=r<0?Math.max(0,r+s):Math.min(r,s-1);t<r;){let s=e[t],n=e[r];e[t++]=n,e[r--]=s}}function o(e,t){let r=e.length;if(t<0&&(t+=r),t<0||t>=r)return;let s=e[t];for(let n=t+1;n<r;++n)e[n-1]=e[n];return e.length=r-1,s}e.firstIndexOf=t,e.lastIndexOf=r,e.findFirstIndex=s,e.findLastIndex=n,e.findFirstValue=function(e,t,r=0,n=-1){let i=s(e,t,r,n);return-1!==i?e[i]:void 0},e.findLastValue=function(e,t,r=-1,s=0){let i=n(e,t,r,s);return-1!==i?e[i]:void 0},e.lowerBound=function(e,t,r,s=0,n=-1){let i=e.length;if(0===i)return 0;let o=s=s<0?Math.max(0,s+i):Math.min(s,i-1),a=(n=n<0?Math.max(0,n+i):Math.min(n,i-1))-s+1;for(;a>0;){let s=a>>1,n=o+s;r(e[n],t)<0?(o=n+1,a-=s+1):a=s}return o},e.upperBound=function(e,t,r,s=0,n=-1){let i=e.length;if(0===i)return 0;let o=s=s<0?Math.max(0,s+i):Math.min(s,i-1),a=(n=n<0?Math.max(0,n+i):Math.min(n,i-1))-s+1;for(;a>0;){let s=a>>1,n=o+s;r(e[n],t)>0?a=s:(o=n+1,a-=s+1)}return o},e.shallowEqual=function(e,t,r){if(e===t)return!0;if(e.length!==t.length)return!1;for(let s=0,n=e.length;s<n;++s)if(r?!r(e[s],t[s]):e[s]!==t[s])return!1;return!0},e.slice=function(e,t={}){let{start:r,stop:s,step:n}=t;if(void 0===n&&(n=1),0===n)throw new Error("Slice `step` cannot be zero.");let i,o=e.length;void 0===r?r=n<0?o-1:0:r<0?r=Math.max(r+o,n<0?-1:0):r>=o&&(r=n<0?o-1:o),void 0===s?s=n<0?-1:o:s<0?s=Math.max(s+o,n<0?-1:0):s>=o&&(s=n<0?o-1:o),i=n<0&&s>=r||n>0&&r>=s?0:n<0?Math.floor((s-r+1)/n+1):Math.floor((s-r-1)/n+1);let a=[];for(let l=0;l<i;++l)a[l]=e[r+l*n];return a},e.move=function(e,t,r){let s=e.length;if(s<=1)return;if((t=t<0?Math.max(0,t+s):Math.min(t,s-1))===(r=r<0?Math.max(0,r+s):Math.min(r,s-1)))return;let n=e[t],i=t<r?1:-1;for(let o=t;o!==r;o+=i)e[o]=e[o+i];e[r]=n},e.reverse=i,e.rotate=function(e,t,r=0,s=-1){let n=e.length;if(n<=1)return;if((r=r<0?Math.max(0,r+n):Math.min(r,n-1))>=(s=s<0?Math.max(0,s+n):Math.min(s,n-1)))return;let o=s-r+1;if(t>0?t%=o:t<0&&(t=(t%o+o)%o),0===t)return;let a=r+t;i(e,r,a-1),i(e,a,s),i(e,r,s)},e.fill=function(e,t,r=0,s=-1){let n,i=e.length;if(0!==i){r=r<0?Math.max(0,r+i):Math.min(r,i-1),n=(s=s<0?Math.max(0,s+i):Math.min(s,i-1))<r?s+1+(i-r):s-r+1;for(let s=0;s<n;++s)e[(r+s)%i]=t}},e.insert=function(e,t,r){let s=e.length;t=t<0?Math.max(0,t+s):Math.min(t,s);for(let n=s;n>t;--n)e[n]=e[n-1];e[t]=r},e.removeAt=o,e.removeFirstOf=function(e,r,s=0,n=-1){let i=t(e,r,s,n);return-1!==i&&o(e,i),i},e.removeLastOf=function(e,t,s=-1,n=0){let i=r(e,t,s,n);return-1!==i&&o(e,i),i},e.removeAllOf=function(e,t,r=0,s=-1){let n=e.length;if(0===n)return 0;r=r<0?Math.max(0,r+n):Math.min(r,n-1),s=s<0?Math.max(0,s+n):Math.min(s,n-1);let i=0;for(let o=0;o<n;++o)r<=s&&o>=r&&o<=s&&e[o]===t||s<r&&(o<=s||o>=r)&&e[o]===t?i++:i>0&&(e[o-i]=e[o]);return i>0&&(e.length=n-i),i},e.removeFirstWhere=function(e,t,r=0,n=-1){let i,a=s(e,t,r,n);return-1!==a&&(i=o(e,a)),{index:a,value:i}},e.removeLastWhere=function(e,t,r=-1,s=0){let i,a=n(e,t,r,s);return-1!==a&&(i=o(e,a)),{index:a,value:i}},e.removeAllWhere=function(e,t,r=0,s=-1){let n=e.length;if(0===n)return 0;r=r<0?Math.max(0,r+n):Math.min(r,n-1),s=s<0?Math.max(0,s+n):Math.min(s,n-1);let i=0;for(let o=0;o<n;++o)r<=s&&o>=r&&o<=s&&t(e[o],o)||s<r&&(o<=s||o>=r)&&t(e[o],o)?i++:i>0&&(e[o-i]=e[o]);return i>0&&(e.length=n-i),i}}(ArrayExt||(ArrayExt={})),(Private$v||(Private$v={})).rangeLength=function(e,t,r){return 0===r?1/0:e>t&&r>0||e<t&&r<0?0:Math.ceil((t-e)/r)},function(e){function t(e,t,r=0){let s=new Array(t.length);for(let n=0,i=r,o=t.length;n<o;++n,++i){if(i=e.indexOf(t[n],i),-1===i)return null;s[n]=i}return s}e.findIndices=t,e.matchSumOfSquares=function(e,r,s=0){let n=t(e,r,s);if(!n)return null;let i=0;for(let t=0,o=n.length;t<o;++t){let e=n[t]-s;i+=e*e}return{score:i,indices:n}},e.matchSumOfDeltas=function(e,r,s=0){let n=t(e,r,s);if(!n)return null;let i=0,o=s-1;for(let t=0,a=n.length;t<a;++t){let e=n[t];i+=e-o-1,o=e}return{score:i,indices:n}},e.highlight=function(e,t,r){let s=[],n=0,i=0,o=t.length;for(;n<o;){let a=t[n],l=t[n];for(;++n<o&&t[n]===l+1;)l++;i<a&&s.push(e.slice(i,a)),a<l+1&&s.push(r(e.slice(a,l+1))),i=l+1}return i<e.length&&s.push(e.slice(i)),s},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(StringExt||(StringExt={}));const index_es6$4=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,get ArrayExt(){return ArrayExt},get StringExt(){return StringExt},chain:chain,each:each,empty:empty,enumerate:enumerate,every:every$2,filter:filter,find:find$1,findIndex:findIndex,map:map$1,max:max$1,min:min$1,minmax:minmax,once:once,range:range$1,reduce:reduce,repeat:repeat$1,retro:retro,some:some$1,stride:stride,take:take,toArray:toArray,toObject:toObject,topologicSort:topologicSort,zip:zip},Symbol.toStringTag,{value:"Module"}));var JSONExt,Private$u,Random,UUID,Signal2,Private$t;!function(e){function t(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function r(e){return Array.isArray(e)}function s(e,n){if(e===n)return!0;if(t(e)||t(n))return!1;let i=r(e),o=r(n);return i===o&&(i&&o?function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;++r)if(!s(e[r],t[r]))return!1;return!0}(e,n):function(e,t){if(e===t)return!0;for(let r in e)if(void 0!==e[r]&&!(r in t))return!1;for(let r in t)if(void 0!==t[r]&&!(r in e))return!1;for(let r in e){let n=e[r],i=t[r];if(void 0!==n||void 0!==i){if(void 0===n||void 0===i)return!1;if(!s(n,i))return!1}}return!0}(e,n))}function n(e){return t(e)?e:r(e)?function(e){let t=new Array(e.length);for(let r=0,s=e.length;r<s;++r)t[r]=n(e[r]);return t}(e):function(e){let t={};for(let r in e){let s=e[r];void 0!==s&&(t[r]=n(s))}return t}(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=r,e.isObject=function(e){return!t(e)&&!r(e)},e.deepEqual=s,e.deepCopy=n}(JSONExt||(JSONExt={}));class MimeData{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(e){return-1!==this._types.indexOf(e)}getData(e){let t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0}setData(e,t){this.clearData(e),this._types.push(e),this._values.push(t)}clearData(e){let t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))}clear(){this._types.length=0,this._values.length=0}}class PluginRegistry{constructor(e={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=/* @__PURE__ */new Map,this._services=/* @__PURE__ */new Map,e.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=e.validatePlugin)}get application(){return this._application}set application(e){if(null!==this._application)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=e}get deferredPlugins(){return Array.from(this._plugins).filter(([e,t])=>"defer"===t.autoStart).map(([e,t])=>e)}getPluginDescription(e){var t,r;return null!==(r=null===(t=this._plugins.get(e))||void 0===t?void 0:t.description)&&void 0!==r?r:""}hasPlugin(e){return this._plugins.has(e)}isPluginActivated(e){var t,r;return null!==(r=null===(t=this._plugins.get(e))||void 0===t?void 0:t.activated)&&void 0!==r&&r}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(e){if(this._plugins.has(e.id))throw new TypeError(`Plugin '${e.id}' is already registered.`);if(!this._validatePlugin(e))throw new Error(`Plugin '${e.id}' is not valid.`);const t=Private$u.createPluginData(e);Private$u.ensureNoCycle(t,this._plugins,this._services),t.provides&&this._services.set(t.provides,t.id),this._plugins.set(t.id,t)}registerPlugins(e){for(const t of e)this.registerPlugin(t)}deregisterPlugin(e,t){const r=this._plugins.get(e);if(r){if(r.activated&&!t)throw new Error(`Plugin '${e}' is still active.`);this._plugins.delete(e)}}async activatePlugin(e){const t=this._plugins.get(e);if(!t)throw new ReferenceError(`Plugin '${e}' is not registered.`);if(t.activated)return;if(t.promise)return t.promise;const r=t.requires.map(e=>this.resolveRequiredService(e)),s=t.optional.map(e=>this.resolveOptionalService(e));return t.promise=Promise.all([...r,...s]).then(e=>t.activate.apply(void 0,[this.application,...e])).then(e=>{t.service=e,t.activated=!0,t.promise=null}).catch(e=>{throw t.promise=null,e}),t.promise}async activatePlugins(e,t={}){switch(e){case"defer":{const e=this.deferredPlugins.filter(e=>this._plugins.get(e).autoStart).map(e=>this.activatePlugin(e));await Promise.all(e);break}case"startUp":{const e=Private$u.collectStartupPlugins(this._plugins,t).map(async e=>{try{return await this.activatePlugin(e)}catch(t){console.error(`Plugin '${e}' failed to activate.`,t)}});await Promise.all(e);break}}}async deactivatePlugin(e){const t=this._plugins.get(e);if(!t)throw new ReferenceError(`Plugin '${e}' is not registered.`);if(!t.activated)return[];if(!t.deactivate)throw new TypeError(`Plugin '${e}'#deactivate() method missing`);const r=Private$u.findDependents(e,this._plugins,this._services),s=r.map(e=>this._plugins.get(e));for(const n of s)if(!n.deactivate)throw new TypeError(`Plugin ${n.id}#deactivate() method missing (depends on ${e})`);for(const n of s){const e=[...n.requires,...n.optional].map(e=>{const t=this._services.get(e);return t?this._plugins.get(t).service:null});await n.deactivate(this.application,...e),n.service=null,n.activated=!1}return r.pop(),r}async resolveRequiredService(e){const t=this._services.get(e);if(!t)throw new TypeError(`No provider for: ${e.name}.`);const r=this._plugins.get(t);return r.activated||await this.activatePlugin(t),r.service}async resolveOptionalService(e){const t=this._services.get(e);if(!t)return null;const r=this._plugins.get(t);if(!r.activated)try{await this.activatePlugin(t)}catch(s){return console.error(s),null}return r.service}}!function(e){class t{constructor(e){var t,r,s,n;this._activated=!1,this._promise=null,this._service=null,this.id=e.id,this.description=null!==(t=e.description)&&void 0!==t?t:"",this.activate=e.activate,this.deactivate=null!==(r=e.deactivate)&&void 0!==r?r:null,this.provides=null!==(s=e.provides)&&void 0!==s?s:null,this.autoStart=null!==(n=e.autoStart)&&void 0!==n&&n,this.requires=e.requires?e.requires.slice():[],this.optional=e.optional?e.optional.slice():[]}get activated(){return this._activated}set activated(e){this._activated=e}get service(){return this._service}set service(e){this._service=e}get promise(){return this._promise}set promise(e){this._promise=e}}e.createPluginData=function(e){return new t(e)},e.ensureNoCycle=function(e,t,r){const s=[...e.requires,...e.optional],n=s=>{if(s===e.provides)return!0;const o=r.get(s);if(!o)return!1;const a=t.get(o),l=[...a.requires,...a.optional];return 0!==l.length&&(i.push(o),!!l.some(n)||(i.pop(),!1))};if(!e.provides||0===s.length)return;const i=[e.id];if(s.some(n))throw new ReferenceError(`Cycle detected: ${i.join(" -> ")}.`)},e.findDependents=function(e,t,r){const s=new Array,n=e=>{const n=t.get(e),i=[...n.requires,...n.optional];s.push(...i.reduce((t,s)=>{const n=r.get(s);return n&&t.push([e,n]),t},[]))};for(const c of t.keys())n(c);const i=s.filter(t=>t[1]===e);let o=0;for(;i.length>o;){const e=i.length,t=new Set(i.map(e=>e[0]));for(const r of t)s.filter(e=>e[1]===r).forEach(e=>{i.includes(e)||i.push(e)});o=e}const a=topologicSort(i),l=a.findIndex(t=>t===e);return-1===l?[e]:a.slice(0,l+1)},e.collectStartupPlugins=function(e,t){const r=/* @__PURE__ */new Set;for(const s of e.keys())!0===e.get(s).autoStart&&r.add(s);if(t.startPlugins)for(const s of t.startPlugins)r.add(s);if(t.ignorePlugins)for(const s of t.ignorePlugins)r.delete(s);return Array.from(r)}}(Private$u||(Private$u={}));class PromiseDelegate{constructor(){this.promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){(0,this._resolve)(e)}reject(e){(0,this._reject)(e)}}class Token{constructor(e,t){this.name=e,this.description=null!=t?t:"",this._tokenStructuralPropertyT=null}}function fallbackRandomValues(e){let t=0;for(let r=0,s=e.length;r<s;++r)r%4==0&&(t=4294967295*Math.random()>>>0),e[r]=255&t,t>>>=8}function uuid4Factory(e){const t=new Uint8Array(16),r=new Array(256);for(let s=0;s<16;++s)r[s]="0"+s.toString(16);for(let s=16;s<256;++s)r[s]=s.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],r[t[0]]+r[t[1]]+r[t[2]]+r[t[3]]+"-"+r[t[4]]+r[t[5]]+"-"+r[t[6]]+r[t[7]]+"-"+r[t[8]]+r[t[9]]+"-"+r[t[10]]+r[t[11]]+r[t[12]]+r[t[13]]+r[t[14]]+r[t[15]]}}(Random||(Random={})).getRandomValues=(()=>{const e="undefined"!=typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"==typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:fallbackRandomValues})(),(UUID||(UUID={})).uuid4=uuid4Factory(Random.getRandomValues);class Signal{constructor(e){this.sender=e}connect(e,t){return Private$t.connect(this,e,t)}disconnect(e,t){return Private$t.disconnect(this,e,t)}emit(e){Private$t.emit(this,e)}}Signal2=Signal||(Signal={}),Signal2.disconnectBetween=function(e,t){Private$t.disconnectBetween(e,t)},Signal2.disconnectSender=function(e){Private$t.disconnectSender(e)},Signal2.disconnectReceiver=function(e){Private$t.disconnectReceiver(e)},Signal2.disconnectAll=function(e){Private$t.disconnectAll(e)},Signal2.clearData=function(e){Private$t.disconnectAll(e)},Signal2.getExceptionHandler=function(){return Private$t.exceptionHandler},Signal2.setExceptionHandler=function(e){let t=Private$t.exceptionHandler;return Private$t.exceptionHandler=e,t};class Stream extends Signal{constructor(){super(...arguments),this._pending=new PromiseDelegate}async*[Symbol.asyncIterator](){let e=this._pending;for(;;)try{const{args:t,next:r}=await e.promise;e=r,yield t}catch(t){return}}emit(e){const t=this._pending,r=this._pending=new PromiseDelegate;t.resolve({args:e,next:r}),super.emit(e)}stop(){this._pending.promise.catch(()=>{}),this._pending.reject("stop"),this._pending=new PromiseDelegate}}!function(e){function t(e){let t=s.get(e);if(t&&0!==t.length){for(const e of t){if(!e.signal)continue;let t=e.thisArg||e.slot;e.signal=null,c(n.get(t))}c(t)}}function r(e){let t=n.get(e);if(t&&0!==t.length){for(const e of t){if(!e.signal)continue;let t=e.signal.sender;e.signal=null,c(s.get(t))}c(t)}}e.exceptionHandler=e=>{console.error(e)},e.connect=function(e,t,r){r=r||void 0;let i=s.get(e.sender);if(i||(i=[],s.set(e.sender,i)),a(i,e,t,r))return!1;let o=r||t,l=n.get(o);l||(l=[],n.set(o,l));let c={signal:e,slot:t,thisArg:r};return i.push(c),l.push(c),!0},e.disconnect=function(e,t,r){r=r||void 0;let i=s.get(e.sender);if(!i||0===i.length)return!1;let o=a(i,e,t,r);if(!o)return!1;let l=r||t,d=n.get(l);return o.signal=null,c(i),c(d),!0},e.disconnectBetween=function(e,t){let r=s.get(e);if(!r||0===r.length)return;let i=n.get(t);if(i&&0!==i.length){for(const t of i)t.signal&&t.signal.sender===e&&(t.signal=null);c(r),c(i)}},e.disconnectSender=t,e.disconnectReceiver=r,e.disconnectAll=function(e){t(e),r(e)},e.emit=function(e,t){let r=s.get(e.sender);if(r&&0!==r.length)for(let s=0,n=r.length;s<n;++s){let n=r[s];n.signal===e&&l(n,t)}};const s=/* @__PURE__ */new WeakMap,n=/* @__PURE__ */new WeakMap,i=/* @__PURE__ */new Set,o="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function a(e,t,r,s){return find$1(e,e=>e.signal===t&&e.slot===r&&e.thisArg===s)}function l(t,r){let{signal:s,slot:n,thisArg:i}=t;try{n.call(i,s.sender,r)}catch(o){e.exceptionHandler(o)}}function c(e){0===i.size&&o(d),i.add(e)}function d(){i.forEach(h),i.clear()}function h(e){ArrayExt.removeAllWhere(e,u)}function u(e){return null===e.signal}}(Private$t||(Private$t={}));const index_es6$3=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,get Signal(){return Signal},Stream:Stream},Symbol.toStringTag,{value:"Module"})),require$$0$2=/* @__PURE__ */getAugmentedNamespace(index_es6$3);var serverconnection={},lib$8={},activitymonitor={},hasRequiredActivitymonitor;function requireActivitymonitor(){if(hasRequiredActivitymonitor)return activitymonitor;hasRequiredActivitymonitor=1,Object.defineProperty(activitymonitor,"__esModule",{value:!0}),activitymonitor.ActivityMonitor=void 0;const e=require$$0$2;return activitymonitor.ActivityMonitor=class{constructor(t){this._timer=-1,this._timeout=-1,this._isDisposed=!1,this._activityStopped=new e.Signal(this),t.signal.connect(this._onSignalFired,this),this._timeout=t.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,e.Signal.clearData(this))}_onSignalFired(e,t){clearTimeout(this._timer),this._sender=e,this._args=t,this._timer=setTimeout(()=>{this._activityStopped.emit({sender:this._sender,args:this._args})},this._timeout)}},activitymonitor}var interfaces$1={},hasRequiredInterfaces$1;function requireInterfaces$1(){return hasRequiredInterfaces$1||(hasRequiredInterfaces$1=1,Object.defineProperty(interfaces$1,"__esModule",{value:!0})),interfaces$1}var lru={},hasRequiredLru;function requireLru(){if(hasRequiredLru)return lru;hasRequiredLru=1,Object.defineProperty(lru,"__esModule",{value:!0}),lru.LruCache=void 0;return lru.LruCache=class{constructor(e={}){this._map=/* @__PURE__ */new Map,this._maxSize=(null==e?void 0:e.maxSize)||128}get size(){return this._map.size}clear(){this._map.clear()}get(e){const t=this._map.get(e)||null;return null!=t&&(this._map.delete(e),this._map.set(e,t)),t}set(e,t){this._map.size>=this._maxSize&&this._map.delete(this._map.keys().next().value),this._map.set(e,t)}},lru}var markdowncodeblocks={},hasRequiredMarkdowncodeblocks;function requireMarkdowncodeblocks(){return hasRequiredMarkdowncodeblocks||(hasRequiredMarkdowncodeblocks=1,Object.defineProperty(markdowncodeblocks,"__esModule",{value:!0}),markdowncodeblocks.MarkdownCodeBlocks=void 0,function(e){e.CODE_BLOCK_MARKER="```";const t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class r{constructor(e){this.startLine=e,this.code="",this.endLine=-1}}e.MarkdownCodeBlock=r,e.isMarkdown=function(e){return t.indexOf(e)>-1},e.findMarkdownCodeBlocks=function(t){if(!t||""===t)return[];const s=t.split("\n"),n=[];let i=null;for(let o=0;o<s.length;o++){const t=s[o],a=0===t.indexOf(e.CODE_BLOCK_MARKER),l=null!=i;if(a||l)if(l)i&&(a?(i.endLine=o-1,n.push(i),i=null):i.code+=t+"\n");else{i=new r(o);const s=t.indexOf(e.CODE_BLOCK_MARKER),a=t.lastIndexOf(e.CODE_BLOCK_MARKER);s!==a&&(i.code=t.substring(s+e.CODE_BLOCK_MARKER.length,a),i.endLine=o,n.push(i),i=null)}}return n}}(e||(markdowncodeblocks.MarkdownCodeBlocks=e={}))),markdowncodeblocks;var e}var pageconfig={},dist$1={exports:{}};const require$$0$1=/* @__PURE__ */getAugmentedNamespace(index_es6$4);var dist=dist$1.exports,hasRequiredDist,minimist,hasRequiredMinimist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(e,t){e.JSONExt=void 0,function(e){function t(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function r(e){return Array.isArray(e)}function s(e){return!t(e)&&!r(e)}function n(e,s){if(e===s)return!0;if(t(e)||t(s))return!1;let n=r(e),i=r(s);return n===i&&(n&&i?o(e,s):a(e,s))}function i(e){return t(e)?e:r(e)?l(e):c(e)}function o(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,s=e.length;r<s;++r)if(!n(e[r],t[r]))return!1;return!0}function a(e,t){if(e===t)return!0;for(let r in e)if(void 0!==e[r]&&!(r in t))return!1;for(let r in t)if(void 0!==t[r]&&!(r in e))return!1;for(let r in e){let s=e[r],i=t[r];if(void 0!==s||void 0!==i){if(void 0===s||void 0===i)return!1;if(!n(s,i))return!1}}return!0}function l(e){let t=new Array(e.length);for(let r=0,s=e.length;r<s;++r)t[r]=i(e[r]);return t}function c(e){let t={};for(let r in e){let s=e[r];void 0!==s&&(t[r]=i(s))}return t}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=r,e.isObject=s,e.deepEqual=n,e.deepCopy=i}(e.JSONExt||(e.JSONExt={}));class r{constructor(){this._types=[],this._values=[]}types(){return this._types.slice()}hasData(e){return-1!==this._types.indexOf(e)}getData(e){let t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0}setData(e,t){this.clearData(e),this._types.push(e),this._values.push(t)}clearData(e){let t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))}clear(){this._types.length=0,this._values.length=0}}class s{constructor(e={}){this._application=null,this._validatePlugin=()=>!0,this._plugins=/* @__PURE__ */new Map,this._services=/* @__PURE__ */new Map,e.validatePlugin&&(console.info("Plugins may be rejected by the custom validation plugin method."),this._validatePlugin=e.validatePlugin)}get application(){return this._application}set application(e){if(null!==this._application)throw Error("PluginRegistry.application is already set. It cannot be overridden.");this._application=e}get deferredPlugins(){return Array.from(this._plugins).filter(([e,t])=>"defer"===t.autoStart).map(([e,t])=>e)}getPluginDescription(e){var t,r;return null!==(r=null===(t=this._plugins.get(e))||void 0===t?void 0:t.description)&&void 0!==r?r:""}hasPlugin(e){return this._plugins.has(e)}isPluginActivated(e){var t,r;return null!==(r=null===(t=this._plugins.get(e))||void 0===t?void 0:t.activated)&&void 0!==r&&r}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(e){if(this._plugins.has(e.id))throw new TypeError(`Plugin '${e.id}' is already registered.`);if(!this._validatePlugin(e))throw new Error(`Plugin '${e.id}' is not valid.`);const t=n.createPluginData(e);n.ensureNoCycle(t,this._plugins,this._services),t.provides&&this._services.set(t.provides,t.id),this._plugins.set(t.id,t)}registerPlugins(e){for(const t of e)this.registerPlugin(t)}deregisterPlugin(e,t){const r=this._plugins.get(e);if(r){if(r.activated&&!t)throw new Error(`Plugin '${e}' is still active.`);this._plugins.delete(e)}}async activatePlugin(e){const t=this._plugins.get(e);if(!t)throw new ReferenceError(`Plugin '${e}' is not registered.`);if(t.activated)return;if(t.promise)return t.promise;const r=t.requires.map(e=>this.resolveRequiredService(e)),s=t.optional.map(e=>this.resolveOptionalService(e));return t.promise=Promise.all([...r,...s]).then(e=>t.activate.apply(void 0,[this.application,...e])).then(e=>{t.service=e,t.activated=!0,t.promise=null}).catch(e=>{throw t.promise=null,e}),t.promise}async activatePlugins(e,t={}){switch(e){case"defer":{const e=this.deferredPlugins.filter(e=>this._plugins.get(e).autoStart).map(e=>this.activatePlugin(e));await Promise.all(e);break}case"startUp":{const e=n.collectStartupPlugins(this._plugins,t).map(async e=>{try{return await this.activatePlugin(e)}catch(t){console.error(`Plugin '${e}' failed to activate.`,t)}});await Promise.all(e);break}}}async deactivatePlugin(e){const t=this._plugins.get(e);if(!t)throw new ReferenceError(`Plugin '${e}' is not registered.`);if(!t.activated)return[];if(!t.deactivate)throw new TypeError(`Plugin '${e}'#deactivate() method missing`);const r=n.findDependents(e,this._plugins,this._services),s=r.map(e=>this._plugins.get(e));for(const n of s)if(!n.deactivate)throw new TypeError(`Plugin ${n.id}#deactivate() method missing (depends on ${e})`);for(const n of s){const e=[...n.requires,...n.optional].map(e=>{const t=this._services.get(e);return t?this._plugins.get(t).service:null});await n.deactivate(this.application,...e),n.service=null,n.activated=!1}return r.pop(),r}async resolveRequiredService(e){const t=this._services.get(e);if(!t)throw new TypeError(`No provider for: ${e.name}.`);const r=this._plugins.get(t);return r.activated||await this.activatePlugin(t),r.service}async resolveOptionalService(e){const t=this._services.get(e);if(!t)return null;const r=this._plugins.get(t);if(!r.activated)try{await this.activatePlugin(t)}catch(s){return console.error(s),null}return r.service}}var n;!function(e){class r{constructor(e){var t,r,s,n;this._activated=!1,this._promise=null,this._service=null,this.id=e.id,this.description=null!==(t=e.description)&&void 0!==t?t:"",this.activate=e.activate,this.deactivate=null!==(r=e.deactivate)&&void 0!==r?r:null,this.provides=null!==(s=e.provides)&&void 0!==s?s:null,this.autoStart=null!==(n=e.autoStart)&&void 0!==n&&n,this.requires=e.requires?e.requires.slice():[],this.optional=e.optional?e.optional.slice():[]}get activated(){return this._activated}set activated(e){this._activated=e}get service(){return this._service}set service(e){this._service=e}get promise(){return this._promise}set promise(e){this._promise=e}}function s(e){return new r(e)}function n(e,t,r){const s=[...e.requires,...e.optional],n=s=>{if(s===e.provides)return!0;const o=r.get(s);if(!o)return!1;const a=t.get(o),l=[...a.requires,...a.optional];return 0!==l.length&&(i.push(o),!!l.some(n)||(i.pop(),!1))};if(!e.provides||0===s.length)return;const i=[e.id];if(s.some(n))throw new ReferenceError(`Cycle detected: ${i.join(" -> ")}.`)}function i(e,r,s){const n=new Array,i=e=>{const t=r.get(e),i=[...t.requires,...t.optional];n.push(...i.reduce((t,r)=>{const n=s.get(r);return n&&t.push([e,n]),t},[]))};for(const t of r.keys())i(t);const o=n.filter(t=>t[1]===e);let a=0;for(;o.length>a;){const e=o.length,t=new Set(o.map(e=>e[0]));for(const r of t)n.filter(e=>e[1]===r).forEach(e=>{o.includes(e)||o.push(e)});a=e}const l=t.topologicSort(o),c=l.findIndex(t=>t===e);return-1===c?[e]:l.slice(0,c+1)}function o(e,t){const r=/* @__PURE__ */new Set;for(const s of e.keys())!0===e.get(s).autoStart&&r.add(s);if(t.startPlugins)for(const s of t.startPlugins)r.add(s);if(t.ignorePlugins)for(const s of t.ignorePlugins)r.delete(s);return Array.from(r)}e.createPluginData=s,e.ensureNoCycle=n,e.findDependents=i,e.collectStartupPlugins=o}(n||(n={}));class i{constructor(){this.promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){(0,this._resolve)(e)}reject(e){(0,this._reject)(e)}}class o{constructor(e,t){this.name=e,this.description=null!=t?t:"",this._tokenStructuralPropertyT=null}}function a(e){let t=0;for(let r=0,s=e.length;r<s;++r)r%4==0&&(t=4294967295*Math.random()>>>0),e[r]=255&t,t>>>=8}function l(e){const t=new Uint8Array(16),r=new Array(256);for(let s=0;s<16;++s)r[s]="0"+s.toString(16);for(let s=16;s<256;++s)r[s]=s.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],r[t[0]]+r[t[1]]+r[t[2]]+r[t[3]]+"-"+r[t[4]]+r[t[5]]+"-"+r[t[6]]+r[t[7]]+"-"+r[t[8]]+r[t[9]]+"-"+r[t[10]]+r[t[11]]+r[t[12]]+r[t[13]]+r[t[14]]+r[t[15]]}}e.Random=void 0,(e.Random||(e.Random={})).getRandomValues=(()=>{const e="undefined"!=typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"==typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:a})(),e.UUID=void 0,(e.UUID||(e.UUID={})).uuid4=l(e.Random.getRandomValues),e.MimeData=r,e.PluginRegistry=s,e.PromiseDelegate=i,e.Token=o}(dist$1.exports,require$$0$1)),dist$1.exports}function requireMinimist(){if(hasRequiredMinimist)return minimist;function e(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}function t(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}return hasRequiredMinimist=1,minimist=function(r,s){s||(s={});var n={bools:{},strings:{},unknownFn:null};"function"==typeof s.unknown&&(n.unknownFn=s.unknown),"boolean"==typeof s.boolean&&s.boolean?n.allBools=!0:[].concat(s.boolean).filter(Boolean).forEach(function(e){n.bools[e]=!0});var i={};function o(e){return i[e].some(function(e){return n.bools[e]})}Object.keys(s.alias||{}).forEach(function(e){i[e]=[].concat(s.alias[e]),i[e].forEach(function(t){i[t]=[e].concat(i[e].filter(function(e){return t!==e}))})}),[].concat(s.string).filter(Boolean).forEach(function(e){n.strings[e]=!0,i[e]&&[].concat(i[e]).forEach(function(e){n.strings[e]=!0})});var a=s.default||{},l={_:[]};function c(e,r,s){for(var i=e,o=0;o<r.length-1;o++){var a=r[o];if(t(i,a))return;void 0===i[a]&&(i[a]={}),i[a]!==Object.prototype&&i[a]!==Number.prototype&&i[a]!==String.prototype||(i[a]={}),i[a]===Array.prototype&&(i[a]=[]),i=i[a]}var l=r[r.length-1];t(i,l)||(i!==Object.prototype&&i!==Number.prototype&&i!==String.prototype||(i={}),i===Array.prototype&&(i=[]),void 0===i[l]||n.bools[l]||"boolean"==typeof i[l]?i[l]=s:Array.isArray(i[l])?i[l].push(s):i[l]=[i[l],s])}function d(t,r,s){if(!s||!n.unknownFn||function(e,t){return n.allBools&&/^--[^=]+$/.test(t)||n.strings[e]||n.bools[e]||i[e]}(t,s)||!1!==n.unknownFn(s)){var o=!n.strings[t]&&e(r)?Number(r):r;c(l,t.split("."),o),(i[t]||[]).forEach(function(e){c(l,e.split("."),o)})}}Object.keys(n.bools).forEach(function(e){d(e,void 0!==a[e]&&a[e])});var h=[];-1!==r.indexOf("--")&&(h=r.slice(r.indexOf("--")+1),r=r.slice(0,r.indexOf("--")));for(var u=0;u<r.length;u++){var p,g,m=r[u];if(/^--.+=/.test(m)){var f=m.match(/^--([^=]+)=([\s\S]*)$/);p=f[1];var v=f[2];n.bools[p]&&(v="false"!==v),d(p,v,m)}else if(/^--no-.+/.test(m))d(p=m.match(/^--no-(.+)/)[1],!1,m);else if(/^--.+/.test(m))p=m.match(/^--(.+)/)[1],void 0===(g=r[u+1])||/^(-|--)[^-]/.test(g)||n.bools[p]||n.allBools||i[p]&&o(p)?/^(true|false)$/.test(g)?(d(p,"true"===g,m),u+=1):d(p,!n.strings[p]||"",m):(d(p,g,m),u+=1);else if(/^-[^-]+/.test(m)){for(var _=m.slice(1,-1).split(""),y=!1,b=0;b<_.length;b++)if("-"!==(g=m.slice(b+2))){if(/[A-Za-z]/.test(_[b])&&"="===g[0]){d(_[b],g.slice(1),m),y=!0;break}if(/[A-Za-z]/.test(_[b])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(g)){d(_[b],g,m),y=!0;break}if(_[b+1]&&_[b+1].match(/\W/)){d(_[b],m.slice(b+2),m),y=!0;break}d(_[b],!n.strings[_[b]]||"",m)}else d(_[b],g,m);p=m.slice(-1)[0],y||"-"===p||(!r[u+1]||/^(-|--)[^-]/.test(r[u+1])||n.bools[p]||i[p]&&o(p)?r[u+1]&&/^(true|false)$/.test(r[u+1])?(d(p,"true"===r[u+1],m),u+=1):d(p,!n.strings[p]||"",m):(d(p,r[u+1],m),u+=1))}else if(n.unknownFn&&!1===n.unknownFn(m)||l._.push(n.strings._||!e(m)?m:Number(m)),s.stopEarly){l._.push.apply(l._,r.slice(u+1));break}}return Object.keys(a).forEach(function(e){var t,r,s;t=l,r=e.split("."),s=t,r.slice(0,-1).forEach(function(e){s=s[e]||{}}),r[r.length-1]in s||(c(l,e.split("."),a[e]),(i[e]||[]).forEach(function(t){c(l,t.split("."),a[e])}))}),s["--"]?l["--"]=h.slice():h.forEach(function(e){l._.push(e)}),l}}var url={},pathBrowserify,hasRequiredPathBrowserify,requiresPort,hasRequiredRequiresPort;function requirePathBrowserify(){if(hasRequiredPathBrowserify)return pathBrowserify;function e(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function t(e,t){for(var r,s="",n=0,i=-1,o=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(i===a-1||1===o);else if(i!==a-1&&2===o){if(s.length<2||2!==n||46!==s.charCodeAt(s.length-1)||46!==s.charCodeAt(s.length-2))if(s.length>2){var l=s.lastIndexOf("/");if(l!==s.length-1){-1===l?(s="",n=0):n=(s=s.slice(0,l)).length-1-s.lastIndexOf("/"),i=a,o=0;continue}}else if(2===s.length||1===s.length){s="",n=0,i=a,o=0;continue}t&&(s.length>0?s+="/..":s="..",n=2)}else s.length>0?s+="/"+e.slice(i+1,a):s=e.slice(i+1,a),n=a-i-1;i=a,o=0}else 46===r&&-1!==o?++o:o=-1}return s}hasRequiredPathBrowserify=1;var r={resolve:function(){for(var r,s="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var o;i>=0?o=arguments[i]:(void 0===r&&(r=process.cwd()),o=r),e(o),0!==o.length&&(s=o+"/"+s,n=47===o.charCodeAt(0))}return s=t(s,!n),n?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(r){if(e(r),0===r.length)return".";var s=47===r.charCodeAt(0),n=47===r.charCodeAt(r.length-1);return 0!==(r=t(r,!s)).length||s||(r="."),r.length>0&&n&&(r+="/"),s?"/"+r:r},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,s=0;s<arguments.length;++s){var n=arguments[s];e(n),n.length>0&&(void 0===t?t=n:t+="/"+n)}return void 0===t?".":r.normalize(t)},relative:function(t,s){if(e(t),e(s),t===s)return"";if((t=r.resolve(t))===(s=r.resolve(s)))return"";for(var n=1;n<t.length&&47===t.charCodeAt(n);++n);for(var i=t.length,o=i-n,a=1;a<s.length&&47===s.charCodeAt(a);++a);for(var l=s.length-a,c=o<l?o:l,d=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(47===s.charCodeAt(a+h))return s.slice(a+h+1);if(0===h)return s.slice(a+h)}else o>c&&(47===t.charCodeAt(n+h)?d=h:0===h&&(d=0));break}var u=t.charCodeAt(n+h);if(u!==s.charCodeAt(a+h))break;47===u&&(d=h)}var p="";for(h=n+d+1;h<=i;++h)h!==i&&47!==t.charCodeAt(h)||(0===p.length?p+="..":p+="/..");return p.length>0?p+s.slice(a+d):(a+=d,47===s.charCodeAt(a)&&++a,s.slice(a))},_makeLong:function(e){return e},dirname:function(t){if(e(t),0===t.length)return".";for(var r=t.charCodeAt(0),s=47===r,n=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(r=t.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?s?"/":".":s&&1===n?"//":t.slice(0,n)},basename:function(t,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');e(t);var s,n=0,i=-1,o=!0;if(void 0!==r&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return"";var a=r.length-1,l=-1;for(s=t.length-1;s>=0;--s){var c=t.charCodeAt(s);if(47===c){if(!o){n=s+1;break}}else-1===l&&(o=!1,l=s+1),a>=0&&(c===r.charCodeAt(a)?-1===--a&&(i=s):(a=-1,i=l))}return n===i?i=l:-1===i&&(i=t.length),t.slice(n,i)}for(s=t.length-1;s>=0;--s)if(47===t.charCodeAt(s)){if(!o){n=s+1;break}}else-1===i&&(o=!1,i=s+1);return-1===i?"":t.slice(n,i)},extname:function(t){e(t);for(var r=-1,s=0,n=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var l=t.charCodeAt(a);if(47!==l)-1===n&&(i=!1,n=a+1),46===l?-1===r?r=a:1!==o&&(o=1):-1!==r&&(o=-1);else if(!i){s=a+1;break}}return-1===r||-1===n||0===o||1===o&&r===n-1&&r===s+1?"":t.slice(r,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,s=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+s:r+e+s:s}("/",e)},parse:function(t){e(t);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return r;var s,n=t.charCodeAt(0),i=47===n;i?(r.root="/",s=1):s=0;for(var o=-1,a=0,l=-1,c=!0,d=t.length-1,h=0;d>=s;--d)if(47!==(n=t.charCodeAt(d)))-1===l&&(c=!1,l=d+1),46===n?-1===o?o=d:1!==h&&(h=1):-1!==o&&(h=-1);else if(!c){a=d+1;break}return-1===o||-1===l||0===h||1===h&&o===l-1&&o===a+1?-1!==l&&(r.base=r.name=0===a&&i?t.slice(1,l):t.slice(a,l)):(0===a&&i?(r.name=t.slice(1,o),r.base=t.slice(1,l)):(r.name=t.slice(a,o),r.base=t.slice(a,l)),r.ext=t.slice(o,l)),a>0?r.dir=t.slice(0,a-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,pathBrowserify=r}function requireRequiresPort(){return hasRequiredRequiresPort?requiresPort:(hasRequiredRequiresPort=1,requiresPort=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e})}var querystringify={},hasRequiredQuerystringify,urlParse,hasRequiredUrlParse,hasRequiredUrl,hasRequiredPageconfig;function requireQuerystringify(){if(hasRequiredQuerystringify)return querystringify;hasRequiredQuerystringify=1;var e=Object.prototype.hasOwnProperty;function t(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function r(e){try{return encodeURIComponent(e)}catch(t){return null}}return querystringify.stringify=function(t,s){s=s||"";var n,i,o=[];for(i in"string"!=typeof s&&(s="?"),t)if(e.call(t,i)){if((n=t[i])||null!=n&&!isNaN(n)||(n=""),i=r(i),n=r(n),null===i||null===n)continue;o.push(i+"="+n)}return o.length?s+o.join("&"):""},querystringify.parse=function(e){for(var r,s=/([^=?#&]+)=?([^&]*)/g,n={};r=s.exec(e);){var i=t(r[1]),o=t(r[2]);null===i||null===o||i in n||(n[i]=o)}return n},querystringify}function requireUrlParse(){if(hasRequiredUrlParse)return urlParse;hasRequiredUrlParse=1;var e=requireRequiresPort(),t=requireQuerystringify(),r=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,n=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=/:\d+$/,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,a=/^[a-zA-Z]:/;function l(e){return(e||"").toString().replace(r,"")}var c=[["#","hash"],["?","query"],function(e,t){return u(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function h(e){var t,r=("undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).location||{},s={},i=typeof(e=e||r);if("blob:"===e.protocol)s=new g(unescape(e.pathname),{});else if("string"===i)for(t in s=new g(e,{}),d)delete s[t];else if("object"===i){for(t in e)t in d||(s[t]=e[t]);void 0===s.slashes&&(s.slashes=n.test(e.href))}return s}function u(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function p(e,t){e=(e=l(e)).replace(s,""),t=t||{};var r,n=o.exec(e),i=n[1]?n[1].toLowerCase():"",a=!!n[2],c=!!n[3],d=0;return a?c?(r=n[2]+n[3]+n[4],d=n[2].length+n[3].length):(r=n[2]+n[4],d=n[2].length):c?(r=n[3]+n[4],d=n[3].length):r=n[4],"file:"===i?d>=2&&(r=r.slice(2)):u(i)?r=n[4]:i?a&&(r=r.slice(2)):d>=2&&u(t.protocol)&&(r=n[4]),{protocol:i,slashes:a||u(i),slashesCount:d,rest:r}}function g(r,n,i){if(r=(r=l(r)).replace(s,""),!(this instanceof g))return new g(r,n,i);var o,d,m,f,v,_,y=c.slice(),b=typeof n,C=this,w=0;for("object"!==b&&"string"!==b&&(i=n,n=null),i&&"function"!=typeof i&&(i=t.parse),o=!(d=p(r||"",n=h(n))).protocol&&!d.slashes,C.slashes=d.slashes||o&&n.slashes,C.protocol=d.protocol||n.protocol||"",r=d.rest,("file:"===d.protocol&&(2!==d.slashesCount||a.test(r))||!d.slashes&&(d.protocol||d.slashesCount<2||!u(C.protocol)))&&(y[3]=[/(.*)/,"pathname"]);w<y.length;w++)"function"!=typeof(f=y[w])?(m=f[0],_=f[1],m!=m?C[_]=r:"string"==typeof m?~(v="@"===m?r.lastIndexOf(m):r.indexOf(m))&&("number"==typeof f[2]?(C[_]=r.slice(0,v),r=r.slice(v+f[2])):(C[_]=r.slice(v),r=r.slice(0,v))):(v=m.exec(r))&&(C[_]=v[1],r=r.slice(0,v.index)),C[_]=C[_]||o&&f[3]&&n[_]||"",f[4]&&(C[_]=C[_].toLowerCase())):r=f(r,C);i&&(C.query=i(C.query)),o&&n.slashes&&"/"!==C.pathname.charAt(0)&&(""!==C.pathname||""!==n.pathname)&&(C.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),s=r.length,n=r[s-1],i=!1,o=0;s--;)"."===r[s]?r.splice(s,1):".."===r[s]?(r.splice(s,1),o++):o&&(0===s&&(i=!0),r.splice(s,1),o--);return i&&r.unshift(""),"."!==n&&".."!==n||r.push(""),r.join("/")}(C.pathname,n.pathname)),"/"!==C.pathname.charAt(0)&&u(C.protocol)&&(C.pathname="/"+C.pathname),e(C.port,C.protocol)||(C.host=C.hostname,C.port=""),C.username=C.password="",C.auth&&(~(v=C.auth.indexOf(":"))?(C.username=C.auth.slice(0,v),C.username=encodeURIComponent(decodeURIComponent(C.username)),C.password=C.auth.slice(v+1),C.password=encodeURIComponent(decodeURIComponent(C.password))):C.username=encodeURIComponent(decodeURIComponent(C.auth)),C.auth=C.password?C.username+":"+C.password:C.username),C.origin="file:"!==C.protocol&&u(C.protocol)&&C.host?C.protocol+"//"+C.host:"null",C.href=C.toString()}return g.prototype={set:function(r,s,n){var o=this;switch(r){case"query":"string"==typeof s&&s.length&&(s=(n||t.parse)(s)),o[r]=s;break;case"port":o[r]=s,e(s,o.protocol)?s&&(o.host=o.hostname+":"+s):(o.host=o.hostname,o[r]="");break;case"hostname":o[r]=s,o.port&&(s+=":"+o.port),o.host=s;break;case"host":o[r]=s,i.test(s)?(s=s.split(":"),o.port=s.pop(),o.hostname=s.join(":")):(o.hostname=s,o.port="");break;case"protocol":o.protocol=s.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(s){var a="pathname"===r?"/":"#";o[r]=s.charAt(0)!==a?a+s:s}else o[r]=s;break;case"username":case"password":o[r]=encodeURIComponent(s);break;case"auth":var l=s.indexOf(":");~l?(o.username=s.slice(0,l),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=s.slice(l+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(s))}for(var d=0;d<c.length;d++){var h=c[d];h[4]&&(o[h[1]]=o[h[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&u(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=t.stringify);var r,s=this,n=s.host,o=s.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var a=o+(s.protocol&&s.slashes||u(s.protocol)?"//":"");return s.username?(a+=s.username,s.password&&(a+=":"+s.password),a+="@"):s.password?(a+=":"+s.password,a+="@"):"file:"!==s.protocol&&u(s.protocol)&&!n&&"/"!==s.pathname&&(a+="@"),(":"===n[n.length-1]||i.test(s.hostname)&&!s.port)&&(n+=":"),a+=n+s.pathname,(r="object"==typeof s.query?e(s.query):s.query)&&(a+="?"!==r.charAt(0)?"?"+r:r),s.hash&&(a+=s.hash),a}},g.extractProtocol=p,g.location=h,g.trimLeft=l,g.qs=t,urlParse=g}function requireUrl(){if(hasRequiredUrl)return url;hasRequiredUrl=1;var e=url&&url.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(url,"__esModule",{value:!0}),url.URLExt=void 0;const t=requirePathBrowserify(),r=e(requireUrlParse());var s;return function(e){function s(e){if("undefined"!=typeof document&&document){const t=document.createElement("a");return t.href=e,t}return(0,r.default)(e)}function n(...e){let s=(0,r.default)(e[0],{});const n=""===s.protocol&&s.slashes;n&&(s=(0,r.default)(e[0],"https:"+e[0]));const i=`${n?"":s.protocol}${s.slashes?"//":""}${s.auth}${s.auth?"@":""}${s.host}`,o=t.posix.join(`${i&&"/"!==s.pathname[0]?"/":""}${s.pathname}`,...e.slice(1));return`${i}${"."===o?"":o}`}e.parse=s,e.getHostName=function(e){return(0,r.default)(e).hostname},e.normalize=function(e){return e&&s(e).toString()},e.join=n,e.encodeParts=function(e){return n(...e.split("/").map(encodeURIComponent))},e.objectToQueryString=function(e){const t=Object.keys(e).filter(e=>e.length>0);return t.length?"?"+t.map(t=>{const r=encodeURIComponent(String(e[t]));return t+(r?"="+r:"")}).join("&"):""},e.queryStringToObject=function(e){return e.replace(/^\?/,"").split("&").reduce((e,t)=>{const[r,s]=t.split("=");return r.length>0&&(e[r]=decodeURIComponent(s||"")),e},{})},e.isLocal=function(e,t=!1){const{protocol:r}=s(e);return(!r||0!==e.toLowerCase().indexOf(r))&&(t?0!==e.indexOf("//"):0!==e.indexOf("/"))}}(s||(url.URLExt=s={})),url}function requirePageconfig(){if(hasRequiredPageconfig)return pageconfig;hasRequiredPageconfig=1;var __importDefault=pageconfig&&pageconfig.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pageconfig,"__esModule",{value:!0}),pageconfig.PageConfig=void 0;const coreutils_1=requireDist(),minimist_1=__importDefault(requireMinimist()),url_1=/* @__PURE__ */requireUrl();var PageConfig;return function(PageConfig){function getOption(name){if(configData)return configData[name]||getBodyData(name);configData=/* @__PURE__ */Object.create(null);let found=!1;if("undefined"!=typeof document&&document){const e=document.getElementById("jupyter-config-data");e&&(configData=JSON.parse(e.textContent||""),found=!0)}if(!found&&"undefined"!=typeof process&&process.argv)try{const cli=(0,minimist_1.default)(process.argv.slice(2)),path=requirePathBrowserify();let fullPath="";"jupyter-config-data"in cli?fullPath=path.resolve(cli["jupyter-config-data"]):"JUPYTER_CONFIG_DATA"in process.env&&(fullPath=path.resolve(process.env.JUPYTER_CONFIG_DATA)),fullPath&&(configData=eval("require")(fullPath))}catch(e){console.error(e)}if(coreutils_1.JSONExt.isObject(configData))for(const t in configData)"string"!=typeof configData[t]&&(configData[t]=JSON.stringify(configData[t]));else configData=/* @__PURE__ */Object.create(null);return configData[name]||getBodyData(name)}function setOption(e,t){const r=getOption(e);return configData[e]=t,r}function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}function getUrl(e){var t,r,s,n;let i=e.toShare?getShareUrl():getBaseUrl();const o=null!==(t=e.mode)&&void 0!==t?t:getOption("mode"),a=null!==(r=e.workspace)&&void 0!==r?r:getOption("workspace"),l="single-document"===o?"doc":"lab";i=url_1.URLExt.join(i,l),a!==PageConfig.defaultWorkspace&&(i=url_1.URLExt.join(i,"workspaces",encodeURIComponent(null!==(s=getOption("workspace"))&&void 0!==s?s:PageConfig.defaultWorkspace)));const c=null!==(n=e.treePath)&&void 0!==n?n:getOption("treePath");return c&&(i=url_1.URLExt.join(i,"tree",url_1.URLExt.encodeParts(c))),i}function getWsUrl(e){let t=getOption("wsUrl");if(!t){if(0!==(e=e?url_1.URLExt.normalize(e):getBaseUrl()).indexOf("http"))return"";t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}function getNBConvertURL({path:e,format:t,download:r}){const s=url_1.URLExt.encodeParts(e),n=url_1.URLExt.join(getBaseUrl(),"nbconvert",t,s);return r?n+"?download=true":n}function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}function getNotebookVersion(){const e=getOption("notebookVersion");return""===e?[0,0,0]:JSON.parse(e)}PageConfig.getOption=getOption,PageConfig.setOption=setOption,PageConfig.getBaseUrl=getBaseUrl,PageConfig.getTreeUrl=getTreeUrl,PageConfig.getShareUrl=getShareUrl,PageConfig.getTreeShareUrl=getTreeShareUrl,PageConfig.getUrl=getUrl,PageConfig.defaultWorkspace="default",PageConfig.getWsUrl=getWsUrl,PageConfig.getNBConvertURL=getNBConvertURL,PageConfig.getToken=getToken,PageConfig.getNotebookVersion=getNotebookVersion;let configData=null;function getBodyData(e){if("undefined"==typeof document||!document.body)return"";const t=document.body.dataset[e];return void 0===t?"":decodeURIComponent(t)}!function(e){function t(e){try{const t=getOption(e);if(t)return JSON.parse(t)}catch(t){console.warn(`Unable to parse ${e}.`,t)}return[]}e.deferred=t("deferredExtensions"),e.disabled=t("disabledExtensions"),e.isDeferred=function(t){const r=t.indexOf(":");let s="";return-1!==r&&(s=t.slice(0,r)),e.deferred.some(e=>e===t||s&&e===s)},e.isDisabled=function(t){const r=t.indexOf(":");let s="";return-1!==r&&(s=t.slice(0,r)),e.disabled.some(e=>e===t||s&&e===s)}}(PageConfig.Extension||(PageConfig.Extension={}))}(PageConfig||(pageconfig.PageConfig=PageConfig={})),pageconfig}var path={},hasRequiredPath;function requirePath(){if(hasRequiredPath)return path;hasRequiredPath=1,Object.defineProperty(path,"__esModule",{value:!0}),path.PathExt=void 0;const e=requirePathBrowserify();var t;return function(t){function r(e){return 0===e.indexOf("/")&&(e=e.slice(1)),e}t.join=function(...t){const s=e.posix.join(...t);return"."===s?"":r(s)},t.joinWithLeadingSlash=function(...t){const r=e.posix.join(...t);return"."===r?"":r},t.basename=function(t,r){return e.posix.basename(t,r)},t.dirname=function(t){const s=r(e.posix.dirname(t));return"."===s?"":s},t.extname=function(t){return e.posix.extname(t)},t.normalize=function(t){return""===t?"":r(e.posix.normalize(t))},t.resolve=function(...t){return r(e.posix.resolve(...t))},t.relative=function(t,s){return r(e.posix.relative(t,s))},t.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e},t.removeSlash=r}(t||(path.PathExt=t={})),path}var signal={},hasRequiredSignal;function requireSignal(){if(hasRequiredSignal)return signal;hasRequiredSignal=1,Object.defineProperty(signal,"__esModule",{value:!0}),signal.signalToPromise=function(t,r){const s=new e.PromiseDelegate;function n(){t.disconnect(i)}function i(e,t){n(),s.resolve([e,t])}t.connect(i),(null!=r?r:0)>0&&setTimeout(()=>{n(),s.reject(`Signal not emitted within ${r} ms.`)},r);return s.promise};const e=requireDist();return signal}var text={},hasRequiredText;function requireText(){return hasRequiredText||(hasRequiredText=1,Object.defineProperty(text,"__esModule",{value:!0}),text.Text=void 0,(t=e||(text.Text=e={})).jsIndexToCharIndex=function(e,t){return e},t.charIndexToJsIndex=function(e,t){return e},t.camelCase=function(e,t=!1){return e.replace(/^(\w)|[\s-_:]+(\w)/g,function(e,r,s){return s?s.toUpperCase():t?r.toUpperCase():r.toLowerCase()})},t.titleCase=function(e){return(e||"").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}),text;var e,t}var time={},hasRequiredTime;function requireTime(){if(hasRequiredTime)return time;hasRequiredTime=1,Object.defineProperty(time,"__esModule",{value:!0}),time.Time=void 0;const e=[{name:"years",milliseconds:31536e6},{name:"months",milliseconds:2592e6},{name:"days",milliseconds:864e5},{name:"hours",milliseconds:36e5},{name:"minutes",milliseconds:6e4},{name:"seconds",milliseconds:1e3}];var t,r;return(r=t||(time.Time=t={})).formatHuman=function(t,r="long"){const s=document.documentElement.lang||"en",n=new Intl.RelativeTimeFormat(s,{numeric:"auto",style:r}),i=new Date(t).getTime()-Date.now();for(let o of e){const e=Math.ceil(i/o.milliseconds);if(0!==e)return n.format(e,o.name)}return n.format(0,"seconds")},r.format=function(e){const t=document.documentElement.lang||"en";return new Intl.DateTimeFormat(t,{dateStyle:"short",timeStyle:"short"}).format(new Date(e))},time}var pluginregistry={},hasRequiredPluginregistry,hasRequiredLib$9;function requirePluginregistry(){if(hasRequiredPluginregistry)return pluginregistry;hasRequiredPluginregistry=1,Object.defineProperty(pluginregistry,"__esModule",{value:!0}),pluginregistry.JupyterPluginRegistry=void 0;const e=requireDist();class t extends e.PluginRegistry{constructor(e){var t;super(e),this._pluginData=/* @__PURE__ */new Map,this._expectedActivationTime=null!==(t=null==e?void 0:e.expectedActivationTime)&&void 0!==t?t:5e3}registerPlugin(e){return this._pluginData.set(e.id,e),super.registerPlugin(e)}async activatePlugin(e){const t=performance.now();let r=setTimeout(()=>{console.warn(`Plugin ${e} is taking too long to activate.`)},this._expectedActivationTime);try{const s=await super.activatePlugin(e);clearTimeout(r);const n=performance.now()-t;if(n>=this._expectedActivationTime){const t=this._getDependentCount(e);console.warn(`Plugin ${e} (with ${t} dependants) took ${n.toFixed(2)}ms to activate.`)}return s}catch(s){throw clearTimeout(r),console.error(`Error activating plugin: ${e}`,s),s}}_getDependentCount(e){var t;const r=this._pluginData.get(e);if(!(null==r?void 0:r.provides))return 0;const s=r.provides.name;let n=0;for(const[i,o]of this._pluginData.entries()){if(i===e)continue;(null===(t=o.requires)||void 0===t?void 0:t.filter(e=>!!e).some(e=>e.name===s))&&n++}return n}}return pluginregistry.JupyterPluginRegistry=t,pluginregistry}function requireLib$9(){return hasRequiredLib$9||(hasRequiredLib$9=1,e=lib$8,t=lib$8&&lib$8.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=lib$8&&lib$8.__exportStar||function(e,r){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||t(r,e,s)},Object.defineProperty(e,"__esModule",{value:!0}),r(/* @__PURE__ */requireActivitymonitor(),e),r(/* @__PURE__ */requireInterfaces$1(),e),r(/* @__PURE__ */requireLru(),e),r(/* @__PURE__ */requireMarkdowncodeblocks(),e),r(/* @__PURE__ */requirePageconfig(),e),r(/* @__PURE__ */requirePath(),e),r(/* @__PURE__ */requireSignal(),e),r(/* @__PURE__ */requireText(),e),r(/* @__PURE__ */requireTime(),e),r(/* @__PURE__ */requireUrl(),e),r(/* @__PURE__ */requirePluginregistry(),e)),lib$8;var e,t,r}var serialize={},messages={},hasRequiredMessages,hasRequiredSerialize;function requireMessages(){if(hasRequiredMessages)return messages;hasRequiredMessages=1,Object.defineProperty(messages,"__esModule",{value:!0}),messages.supportedKernelWebSocketProtocols=void 0,messages.createMessage=function(t){var r,s,n,i,o,a;return{buffers:null!==(r=t.buffers)&&void 0!==r?r:[],channel:t.channel,content:t.content,header:{date:/* @__PURE__ */(new Date).toISOString(),msg_id:null!==(s=t.msgId)&&void 0!==s?s:e.UUID.uuid4(),msg_type:t.msgType,session:t.session,username:null!==(n=t.username)&&void 0!==n?n:"",subshell_id:null!==(i=t.subshellId)&&void 0!==i?i:null,version:"5.2"},metadata:null!==(o=t.metadata)&&void 0!==o?o:{},parent_header:null!==(a=t.parentHeader)&&void 0!==a?a:{}}},messages.isStreamMsg=function(e){return"stream"===e.header.msg_type},messages.isDisplayDataMsg=function(e){return"display_data"===e.header.msg_type},messages.isUpdateDisplayDataMsg=function(e){return"update_display_data"===e.header.msg_type},messages.isExecuteInputMsg=function(e){return"execute_input"===e.header.msg_type},messages.isExecuteResultMsg=function(e){return"execute_result"===e.header.msg_type},messages.isErrorMsg=function(e){return"error"===e.header.msg_type},messages.isStatusMsg=function(e){return"status"===e.header.msg_type},messages.isClearOutputMsg=function(e){return"clear_output"===e.header.msg_type},messages.isDebugEventMsg=function(e){return"debug_event"===e.header.msg_type},messages.isCommOpenMsg=function(e){return"comm_open"===e.header.msg_type},messages.isCommCloseMsg=function(e){return"comm_close"===e.header.msg_type},messages.isCommMsgMsg=function(e){return"comm_msg"===e.header.msg_type},messages.isInfoRequestMsg=function(e){return"kernel_info_request"===e.header.msg_type},messages.isExecuteReplyMsg=function(e){return"execute_reply"===e.header.msg_type},messages.isDebugRequestMsg=function(e){return"debug_request"===e.header.msg_type},messages.isDebugReplyMsg=function(e){return"debug_reply"===e.header.msg_type},messages.isInputRequestMsg=function(e){return"input_request"===e.header.msg_type},messages.isInputReplyMsg=function(e){return"input_reply"===e.header.msg_type};const e=requireDist();var t;return(t||(messages.supportedKernelWebSocketProtocols=t={})).v1KernelWebsocketJupyterOrg="v1.kernel.websocket.jupyter.org",messages}function requireSerialize(){if(hasRequiredSerialize)return serialize;hasRequiredSerialize=1;var e=serialize&&serialize.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),t=serialize&&serialize.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=serialize&&serialize.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(s,r,n);return t(s,r),s};Object.defineProperty(serialize,"__esModule",{value:!0}),serialize.serialize=function(e,t=""){if(t===s.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg)return n.serializeV1KernelWebsocketJupyterOrg(e);return n.serializeDefault(e)},serialize.deserialize=function(e,t=""){if(t===s.supportedKernelWebSocketProtocols.v1KernelWebsocketJupyterOrg)return n.deserializeV1KernelWebsocketJupyterOrg(e);return n.deserializeDefault(e)};const s=r(requireMessages());var n,i;return(i=n||(n={})).deserializeV1KernelWebsocketJupyterOrg=function(e){let t;const r=new DataView(e),s=Number(r.getBigUint64(0,!0));let n=[];for(let u=0;u<s;u++)n.push(Number(r.getBigUint64(8*(u+1),!0)));const i=new TextDecoder("utf8"),o=i.decode(e.slice(n[0],n[1])),a=JSON.parse(i.decode(e.slice(n[1],n[2]))),l=JSON.parse(i.decode(e.slice(n[2],n[3]))),c=JSON.parse(i.decode(e.slice(n[3],n[4]))),d=JSON.parse(i.decode(e.slice(n[4],n[5])));let h=[];for(let u=5;u<n.length-1;u++)h.push(new DataView(e.slice(n[u],n[u+1])));return t={channel:o,header:a,parent_header:l,metadata:c,content:d,buffers:h},t},i.serializeV1KernelWebsocketJupyterOrg=function(e){const t=JSON.stringify(e.header),r=null==e.parent_header?"{}":JSON.stringify(e.parent_header),s=JSON.stringify(e.metadata),n=JSON.stringify(e.content),i=void 0!==e.buffers?e.buffers:[],o=5+i.length+1;let a=[];a.push(8*(1+o)),a.push(e.channel.length+a[a.length-1]);const l=new TextEncoder,c=l.encode(e.channel),d=l.encode(t),h=l.encode(r),u=l.encode(s),p=l.encode(n),g=new Uint8Array(c.length+d.length+h.length+u.length+p.length);g.set(c),g.set(d,c.length),g.set(h,c.length+d.length),g.set(u,c.length+d.length+h.length),g.set(p,c.length+d.length+h.length+u.length);for(let y of[d.length,h.length,u.length,p.length])a.push(y+a[a.length-1]);let m=0;for(let y of i){let e=y.byteLength;a.push(e+a[a.length-1]),m+=e}const f=new Uint8Array(8*(1+o)+g.byteLength+m),v=new ArrayBuffer(8),_=new DataView(v);_.setBigUint64(0,BigInt(o),!0),f.set(new Uint8Array(v),0);for(let y=0;y<a.length;y++)_.setBigUint64(0,BigInt(a[y]),!0),f.set(new Uint8Array(v),8*(y+1));f.set(g,a[0]);for(let y=0;y<i.length;y++){const e=i[y];f.set(new Uint8Array(ArrayBuffer.isView(e)?e.buffer:e),a[5+y])}return f.buffer},i.deserializeDefault=function(e){let t;return t="string"==typeof e?JSON.parse(e):function(e){const t=new DataView(e),r=t.getUint32(0),s=[];if(r<2)throw new Error("Invalid incoming Kernel Message");for(let o=1;o<=r;o++)s.push(t.getUint32(4*o));const n=new Uint8Array(e.slice(s[0],s[1])),i=JSON.parse(new TextDecoder("utf8").decode(n));i.buffers=[];for(let o=1;o<r;o++){const t=s[o],r=s[o+1]||e.byteLength;i.buffers.push(new DataView(e.slice(t,r)))}return i}(e),t},i.serializeDefault=function(e){var t;let r;return r=(null===(t=e.buffers)||void 0===t?void 0:t.length)?function(e){const t=[],r=[],s=new TextEncoder;let n=[];void 0!==e.buffers&&(n=e.buffers,delete e.buffers);const i=s.encode(JSON.stringify(e));r.push(i.buffer);for(let c=0;c<n.length;c++){const e=n[c];r.push(ArrayBuffer.isView(e)?e.buffer:e)}const o=r.length;t.push(4*(o+1));for(let c=0;c+1<r.length;c++)t.push(t[t.length-1]+r[c].byteLength);const a=new Uint8Array(t[t.length-1]+r[r.length-1].byteLength),l=new DataView(a.buffer);l.setUint32(0,o);for(let c=0;c<t.length;c++)l.setUint32(4*(c+1),t[c]);for(let c=0;c<r.length;c++)a.set(new Uint8Array(r[c]),t[c]);return a.buffer}(e):JSON.stringify(e),r},serialize}var ws={},hasRequiredWs,hasRequiredServerconnection,hasRequiredBasemanager;function requireWs(){return hasRequiredWs||(hasRequiredWs=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.default=WebSocket),ws}function requireServerconnection(){if(hasRequiredServerconnection)return serverconnection;hasRequiredServerconnection=1,Object.defineProperty(serverconnection,"__esModule",{value:!0}),serverconnection.ServerConnection=void 0;const e=/* @__PURE__ */requireLib$9(),t=requireSerialize();let r;var s,n,i;return r="undefined"==typeof window?requireWs():WebSocket,function(e){e.makeSettings=function(e){return n.makeSettings(e)},e.makeRequest=function(e,t,r){return n.handleRequest(e,t,r)};class t extends Error{static async create(e){try{const r=await e.json(),{message:s,traceback:n}=r;return n&&console.error(n),new t(e,null!=s?s:t._defaultMessage(e),null!=n?n:"")}catch(r){return console.debug(r),new t(e)}}constructor(e,r=t._defaultMessage(e),s=""){super(r),this.response=e,this.traceback=s}static _defaultMessage(e){return`Invalid response: ${e.status} ${e.statusText}`}}e.ResponseError=t;class r extends TypeError{constructor(e){super(e.message),this.stack=e.stack}}e.NetworkError=r}(s||(serverconnection.ServerConnection=s={})),(i=n||(n={})).makeSettings=function(s={}){var n;const i=e.PageConfig.getBaseUrl(),o=e.PageConfig.getWsUrl(),a=e.URLExt.normalize(s.baseUrl)||i;let l=s.wsUrl;l||a!==i||(l=o),l||0!==a.indexOf("http")||(l="ws"+a.slice(4)),l=null!=l?l:o;const c=e.PageConfig.getOption("appendToken").toLowerCase();let d;return d=""===c?"undefined"==typeof window||"undefined"!=typeof process&&void 0!==(null===(n=null===process||void 0===process?void 0:process.env)||void 0===n?void 0:n.JEST_WORKER_ID)||e.URLExt.getHostName(i)!==e.URLExt.getHostName(l):"true"===c,{init:{cache:"no-store",credentials:"same-origin"},fetch:fetch,Headers:Headers,Request:Request,WebSocket:r,token:e.PageConfig.getToken(),appUrl:e.PageConfig.getOption("appUrl"),appendToken:d,serializer:{serialize:t.serialize,deserialize:t.deserialize},...s,baseUrl:a,wsUrl:l}},i.handleRequest=function(e,t,r){var n;if(0!==e.indexOf(r.baseUrl))throw new Error("Can only be used for notebook server requests");"no-store"===(null!==(n=t.cache)&&void 0!==n?n:r.init.cache)&&(e+=(/\?/.test(e)?"&":"?")+/* @__PURE__ */(new Date).getTime());const i=new r.Request(e,{...r.init,...t});let o=!1;if(r.token&&(o=!0,i.headers.append("Authorization",`token ${r.token}`)),"undefined"!=typeof document){const e=function(e){let t="";try{t=document.cookie}catch(s){return}const r=t.match("\\b"+e+"=([^;]*)\\b");return null==r?void 0:r[1]}("_xsrf");void 0!==e&&(o=!0,i.headers.append("X-XSRFToken",e))}return!i.headers.has("Content-Type")&&o&&i.headers.set("Content-Type","application/json"),r.fetch.call(null,i).catch(e=>{throw new s.NetworkError(e)})},serverconnection}function requireBasemanager(){if(hasRequiredBasemanager)return basemanager;hasRequiredBasemanager=1,Object.defineProperty(basemanager,"__esModule",{value:!0}),basemanager.BaseManager=void 0;const e=require$$0$2,t=requireServerconnection();return basemanager.BaseManager=class{constructor(r){var s;this._isDisposed=!1,this._disposed=new e.Signal(this),this.serverSettings=null!==(s=r.serverSettings)&&void 0!==s?s:t.ServerConnection.makeSettings()}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}get isActive(){return!0}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(void 0),e.Signal.clearData(this))}},basemanager}var config$1={},hasRequiredConfig;function requireConfig(){if(hasRequiredConfig)return config$1;hasRequiredConfig=1,Object.defineProperty(config$1,"__esModule",{value:!0}),config$1.ConfigWithDefaults=config$1.ConfigSection=config$1.ConfigSectionManager=void 0;const e=/* @__PURE__ */requireLib$9(),t=requireLib$7();var r;config$1.ConfigSectionManager=class{constructor(e){var r;this.serverSettings=null!==(r=e.serverSettings)&&void 0!==r?r:t.ServerConnection.makeSettings()}async create(e){const t=new s({...e,serverSettings:this.serverSettings});return await t.load(),t}},function(e){let t;e.create=async function(e){if(!t){const t=new s(e);return await t.load(),t}return await t.create(e)},e._setConfigSectionManager=function(e){if(t)throw new Error("ConfigSectionManager already set. If you would like to create a config section, use the `IConfigSectionManager` token in a plugin.");t=e}}(r||(config$1.ConfigSection=r={}));class s{constructor(e){var r;this.serverSettings=null!==(r=e.serverSettings)&&void 0!==r?r:t.ServerConnection.makeSettings(),this._name=e.name}get data(){return this._data}async load(){const e=await t.ServerConnection.makeRequest(this._url,{},this.serverSettings);if(200!==e.status){throw await t.ServerConnection.ResponseError.create(e)}this._data=await e.json()}async update(e){this._data={...this._data,...e};const r={method:"PATCH",body:JSON.stringify(e)},s=await t.ServerConnection.makeRequest(this._url,r,this.serverSettings);if(200!==s.status){throw await t.ServerConnection.ResponseError.create(s)}return this._data=await s.json(),this._data}get _url(){return e.URLExt.join(this.serverSettings.baseUrl,"api/config",encodeURIComponent(this._name))}}return config$1.ConfigWithDefaults=class{constructor(e){var t,r;this._className="",this._section=e.section,this._defaults=null!==(t=e.defaults)&&void 0!==t?t:{},this._className=null!==(r=e.className)&&void 0!==r?r:""}get(e){const t=this._classData();return e in t?t[e]:this._defaults[e]}set(e,t){const r={};if(r[e]=t,this._className){const e={};return e[this._className]=r,this._section.update(e)}return this._section.update(r)}_classData(){const e=this._section.data;return this._className&&this._className in e?e[this._className]:e}},config$1}var connectionstatus={},hasRequiredConnectionstatus;function requireConnectionstatus(){if(hasRequiredConnectionstatus)return connectionstatus;hasRequiredConnectionstatus=1,Object.defineProperty(connectionstatus,"__esModule",{value:!0}),connectionstatus.ConnectionStatus=void 0;return connectionstatus.ConnectionStatus=class{constructor(){this.isConnected=!0}},connectionstatus}var contents={},DisposableSet2,ObservableDisposableSet2;class DisposableDelegate{constructor(e){this._fn=e}get isDisposed(){return!this._fn}dispose(){if(!this._fn)return;let e=this._fn;this._fn=null,e()}}class ObservableDisposableDelegate extends DisposableDelegate{constructor(){super(...arguments),this._disposed=new Signal(this)}get disposed(){return this._disposed}dispose(){this.isDisposed||(super.dispose(),this._disposed.emit(void 0),Signal.clearData(this))}}class DisposableSet{constructor(){this._isDisposed=!1,this._items=/* @__PURE__ */new Set}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(e=>{e.dispose()}),this._items.clear())}contains(e){return this._items.has(e)}add(e){this._items.add(e)}remove(e){this._items.delete(e)}clear(){this._items.clear()}}DisposableSet2=DisposableSet||(DisposableSet={}),DisposableSet2.from=function(e){let t=new DisposableSet2;for(const r of e)t.add(r);return t};class ObservableDisposableSet extends DisposableSet{constructor(){super(...arguments),this._disposed=new Signal(this)}get disposed(){return this._disposed}dispose(){this.isDisposed||(super.dispose(),this._disposed.emit(void 0),Signal.clearData(this))}}ObservableDisposableSet2=ObservableDisposableSet||(ObservableDisposableSet={}),ObservableDisposableSet2.from=function(e){let t=new ObservableDisposableSet2;for(const r of e)t.add(r);return t};const index_es6$2=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,DisposableDelegate:DisposableDelegate,get DisposableSet(){return DisposableSet},ObservableDisposableDelegate:ObservableDisposableDelegate,get ObservableDisposableSet(){return ObservableDisposableSet}},Symbol.toStringTag,{value:"Module"})),require$$1$2=/* @__PURE__ */getAugmentedNamespace(index_es6$2);var validate$4={},validate$3={},hasRequiredValidate$4,hasRequiredValidate$3,hasRequiredContents;function requireValidate$4(){if(hasRequiredValidate$4)return validate$3;return hasRequiredValidate$4=1,Object.defineProperty(validate$3,"__esModule",{value:!0}),validate$3.validateProperty=function(e,t,r,s=[]){if(!e.hasOwnProperty(t))throw Error(`Missing property '${t}'`);const n=e[t];if(void 0!==r){let e=!0;switch(r){case"array":e=Array.isArray(n);break;case"object":e=void 0!==n;break;default:e=typeof n===r}if(!e)throw new Error(`Property '${t}' is not of type '${r}'`);if(s.length>0){let e=!0;switch(r){case"string":case"number":case"boolean":e=s.includes(n);break;default:e=s.findIndex(e=>e===n)>=0}if(!e)throw new Error(`Property '${t}' is not one of the valid values ${JSON.stringify(s)}`)}}},validate$3}function requireValidate$3(){if(hasRequiredValidate$3)return validate$4;hasRequiredValidate$3=1,Object.defineProperty(validate$4,"__esModule",{value:!0}),validate$4.validateContentsModel=function(t){(0,e.validateProperty)(t,"name","string"),(0,e.validateProperty)(t,"path","string"),(0,e.validateProperty)(t,"type","string"),(0,e.validateProperty)(t,"created","string"),(0,e.validateProperty)(t,"last_modified","string"),(0,e.validateProperty)(t,"mimetype","object"),(0,e.validateProperty)(t,"content","object"),(0,e.validateProperty)(t,"format","object")},validate$4.validateCheckpointModel=function(t){(0,e.validateProperty)(t,"id","string"),(0,e.validateProperty)(t,"last_modified","string")};const e=requireValidate$4();return validate$4}function requireContents(){if(hasRequiredContents)return contents;hasRequiredContents=1;var e=contents&&contents.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),t=contents&&contents.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=contents&&contents.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(s,r,n);return t(s,r),s};Object.defineProperty(contents,"__esModule",{value:!0}),contents.RestContentProvider=contents.ContentProviderRegistry=contents.Drive=contents.ContentsManager=contents.Contents=void 0;const s=/* @__PURE__ */requireLib$9(),n=require$$1$2,i=require$$0$2,o=requireLib$7(),a=r(requireValidate$3());var l,c,d;(c=l||(contents.Contents=l={})).validateContentsModel=function(e){a.validateContentsModel(e)},c.validateCheckpointModel=function(e){a.validateCheckpointModel(e)};contents.ContentsManager=class{constructor(e={}){var t,r;this._isDisposed=!1,this._additionalDrives=/* @__PURE__ */new Map,this._fileChanged=new i.Signal(this);const s=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings();this._defaultDrive=null!==(r=e.defaultDrive)&&void 0!==r?r:new h({serverSettings:s}),this._defaultDrive.fileChanged.connect(this._onFileChanged,this)}get defaultDrive(){return this._defaultDrive}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,i.Signal.clearData(this))}addDrive(e){this._additionalDrives.set(e.name,e),e.fileChanged.connect(this._onFileChanged,this)}getSharedModelFactory(e,t){var r,s;const[n]=this._driveForPath(e),i=null===(r=n.contentProviderRegistry)||void 0===r?void 0:r.getProvider(null==t?void 0:t.contentProviderId);return(null==i?void 0:i.sharedModelFactory)?i.sharedModelFactory:null!==(s=n.sharedModelFactory)&&void 0!==s?s:null}localPath(e){const t=e.split("/"),r=t[0].split(":");return 1!==r.length&&this._additionalDrives.has(r[0])?s.PathExt.join(r.slice(1).join(":"),...t.slice(1)):s.PathExt.removeSlash(e)}normalize(e){const t=e.split(":");return 1===t.length?s.PathExt.normalize(e):`${t[0]}:${s.PathExt.normalize(t.slice(1).join(":"))}`}resolvePath(e,t){const r=this.driveName(e),n=this.localPath(e),i=s.PathExt.resolve("/",n,t);return r?`${r}:${i}`:i}driveName(e){const t=e.split("/")[0].split(":");return 1===t.length?"":this._additionalDrives.has(t[0])?t[0]:""}get(e,t){const[r,s]=this._driveForPath(e);return r.get(s,t).then(e=>{const t=[];if("directory"===e.type&&e.content){for(const s of e.content)t.push({...s,path:this._toGlobalPath(r,s.path)});return{...e,path:this._toGlobalPath(r,s),content:t,serverPath:e.path}}return{...e,path:this._toGlobalPath(r,s),serverPath:e.path}})}getDownloadUrl(e){const[t,r]=this._driveForPath(e);return t.getDownloadUrl(r)}newUntitled(e={}){if(e.path){const t=this.normalize(e.path),[r,n]=this._driveForPath(t);return r.newUntitled({...e,path:n}).then(e=>({...e,path:s.PathExt.join(t,e.name),serverPath:e.path}))}return this._defaultDrive.newUntitled(e)}delete(e){const[t,r]=this._driveForPath(e);return t.delete(r)}rename(e,t){const[r,s]=this._driveForPath(e),[n,i]=this._driveForPath(t);if(r!==n)throw Error("ContentsManager: renaming files must occur within a Drive");return r.rename(s,i).then(e=>({...e,path:this._toGlobalPath(r,i),serverPath:e.path}))}save(e,t={}){const r=this.normalize(e),[s,n]=this._driveForPath(e);return s.save(n,{...t,path:n}).then(e=>({...e,path:r,serverPath:e.path}))}copy(e,t){const[r,s]=this._driveForPath(e),[n,i]=this._driveForPath(t);if(r===n)return r.copy(s,i).then(e=>({...e,path:this._toGlobalPath(r,e.path),serverPath:e.path}));throw Error("Copying files between drives is not currently implemented")}createCheckpoint(e){const[t,r]=this._driveForPath(e);return t.createCheckpoint(r)}listCheckpoints(e){const[t,r]=this._driveForPath(e);return t.listCheckpoints(r)}restoreCheckpoint(e,t){const[r,s]=this._driveForPath(e);return r.restoreCheckpoint(s,t)}deleteCheckpoint(e,t){const[r,s]=this._driveForPath(e);return r.deleteCheckpoint(s,t)}_toGlobalPath(e,t){return e===this._defaultDrive?s.PathExt.removeSlash(t):`${e.name}:${s.PathExt.removeSlash(t)}`}_driveForPath(e){const t=this.driveName(e),r=this.localPath(e);return t?[this._additionalDrives.get(t),r]:[this._defaultDrive,r]}_onFileChanged(e,t){var r,s;if(e===this._defaultDrive)this._fileChanged.emit(t);else{let n=null,i=null;(null===(r=t.newValue)||void 0===r?void 0:r.path)&&(n={...t.newValue,path:this._toGlobalPath(e,t.newValue.path)}),(null===(s=t.oldValue)||void 0===s?void 0:s.path)&&(i={...t.oldValue,path:this._toGlobalPath(e,t.oldValue.path)}),this._fileChanged.emit({type:t.type,newValue:n,oldValue:i})}}};class h{constructor(e={}){var t,r,s;this._isDisposed=!1,this._fileChanged=new i.Signal(this),this.name=null!==(t=e.name)&&void 0!==t?t:"Default",this._apiEndpoint=null!==(r=e.apiEndpoint)&&void 0!==r?r:"api/contents",this.serverSettings=null!==(s=e.serverSettings)&&void 0!==s?s:o.ServerConnection.makeSettings(),this._restContentProvider=new p({...e,apiEndpoint:this._apiEndpoint,serverSettings:this.serverSettings}),e.defaultContentProvider?this.contentProviderRegistry=new u({defaultProvider:e.defaultContentProvider}):this.contentProviderRegistry=new u,this.contentProviderRegistry.fileChanged.connect((e,t)=>{this._fileChanged.emit(t)})}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,i.Signal.clearData(this))}async get(e,t){const r=this.contentProviderRegistry.getProvider(null==t?void 0:t.contentProviderId);return r?r.get(e,t):await this._restContentProvider.get(e,t)}getDownloadUrl(e){const t=this.serverSettings.baseUrl;let r=s.URLExt.join(t,"files",s.URLExt.encodeParts(e)),n="";try{n=document.cookie}catch(o){}const i=n.match("\\b_xsrf=([^;]*)\\b");if(i){const e=new URL(r);e.searchParams.append("_xsrf",i[1]),r=e.toString()}return Promise.resolve(r)}async newUntitled(e={}){var t;let r="{}";e&&(e.ext&&(e.ext=d.normalizeExtension(e.ext)),r=JSON.stringify(e));const s=this.serverSettings,n=this._getUrl(null!==(t=e.path)&&void 0!==t?t:""),i={method:"POST",body:r},l=await o.ServerConnection.makeRequest(n,i,s);if(201!==l.status){throw await o.ServerConnection.ResponseError.create(l)}const c=await l.json();return a.validateContentsModel(c),this._fileChanged.emit({type:"new",oldValue:null,newValue:c}),c}async delete(e){const t=this._getUrl(e),r=this.serverSettings,s=await o.ServerConnection.makeRequest(t,{method:"DELETE"},r);if(204!==s.status){throw await o.ServerConnection.ResponseError.create(s)}this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,t){const r=this.serverSettings,s=this._getUrl(e),n={method:"PATCH",body:JSON.stringify({path:t})},i=await o.ServerConnection.makeRequest(s,n,r);if(200!==i.status){throw await o.ServerConnection.ResponseError.create(i)}const l=await i.json();return a.validateContentsModel(l),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:l}),l}async save(e,t={}){const r=this.contentProviderRegistry.getProvider(null==t?void 0:t.contentProviderId);let s;return s=r?await r.save(e,t):await this._restContentProvider.save(e,t),this._fileChanged.emit({type:"save",oldValue:null,newValue:s}),s}async copy(e,t){const r=this.serverSettings,s=this._getUrl(t),n={method:"POST",body:JSON.stringify({copy_from:e})},i=await o.ServerConnection.makeRequest(s,n,r);if(201!==i.status){throw await o.ServerConnection.ResponseError.create(i)}const l=await i.json();return a.validateContentsModel(l),this._fileChanged.emit({type:"new",oldValue:null,newValue:l}),l}async createCheckpoint(e){const t=this._getUrl(e,"checkpoints"),r=await o.ServerConnection.makeRequest(t,{method:"POST"},this.serverSettings);if(201!==r.status){throw await o.ServerConnection.ResponseError.create(r)}const s=await r.json();return a.validateCheckpointModel(s),s}async listCheckpoints(e){const t=this._getUrl(e,"checkpoints"),r=await o.ServerConnection.makeRequest(t,{},this.serverSettings);if(200!==r.status){throw await o.ServerConnection.ResponseError.create(r)}const s=await r.json();if(!Array.isArray(s))throw new Error("Invalid Checkpoint list");for(let n=0;n<s.length;n++)a.validateCheckpointModel(s[n]);return s}async restoreCheckpoint(e,t){const r=this._getUrl(e,"checkpoints",t),s=await o.ServerConnection.makeRequest(r,{method:"POST"},this.serverSettings);if(204!==s.status){throw await o.ServerConnection.ResponseError.create(s)}}async deleteCheckpoint(e,t){const r=this._getUrl(e,"checkpoints",t),s=await o.ServerConnection.makeRequest(r,{method:"DELETE"},this.serverSettings);if(204!==s.status){throw await o.ServerConnection.ResponseError.create(s)}}_getUrl(...e){const t=e.map(e=>s.URLExt.encodeParts(e)),r=this.serverSettings.baseUrl;return s.URLExt.join(r,this._apiEndpoint,...t)}}contents.Drive=h,(d||(d={})).normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e};class u{constructor(e){this._providers=/* @__PURE__ */new Map,this._fileChanged=new i.Signal(this),(null==e?void 0:e.defaultProvider)&&this.register("default",e.defaultProvider)}register(e,t){if(this._providers.has(e))throw Error(`Provider with ${e} identifier was already registered on this drive`);this._providers.set(e,t);const r=(e,t)=>{this._fileChanged.emit(t)};return t.fileChanged&&t.fileChanged.connect(r),new n.DisposableDelegate(()=>{t.fileChanged&&t.fileChanged.disconnect(r),this._providers.has(e)&&this._providers.delete(e)})}getProvider(e){if(!e)return null;const t=this._providers.get(e);if(!t)throw Error(`Provider ${e} is not registered`);return t}get fileChanged(){return this._fileChanged}}contents.ContentProviderRegistry=u;class p{constructor(e){this._options=e}async get(e,t){let r=this._getUrl(e);if(t){"notebook"===t.type&&delete t.format;const e=t.content?"1":"0",n=t.hash?"1":"0",i={...t,content:e,hash:n};r+=s.URLExt.objectToQueryString(i)}const n=this._options.serverSettings,i=await o.ServerConnection.makeRequest(r,{},n);if(200!==i.status){throw await o.ServerConnection.ResponseError.create(i)}const l=await i.json();return a.validateContentsModel(l),l}async save(e,t={}){const r=this._options.serverSettings,s=this._getUrl(e),n={method:"PUT",body:new File([JSON.stringify(t)],"data.json",{type:"application/json"})},i=await o.ServerConnection.makeRequest(s,n,r);if(200!==i.status&&201!==i.status){throw await o.ServerConnection.ResponseError.create(i)}const l=await i.json();return a.validateContentsModel(l),l}_getUrl(...e){const t=e.map(e=>s.URLExt.encodeParts(e)),r=this._options.serverSettings.baseUrl;return s.URLExt.join(r,this._options.apiEndpoint,...t)}}return contents.RestContentProvider=p,contents}var event={},Poll2,Private$s,Private2;class Poll{constructor(e){var t;this._disposed=new Signal(this),this._lingered=0,this._tick=new PromiseDelegate,this._ticked=new Signal(this),this._factory=e.factory,this._linger=null!==(t=e.linger)&&void 0!==t?t:Private$s.DEFAULT_LINGER,this._standby=e.standby||Private$s.DEFAULT_STANDBY,this._state={...Private$s.DEFAULT_STATE,timestamp:/* @__PURE__ */(new Date).getTime()};const r=e.frequency||{},s=Math.max(r.interval||0,r.max||0,Private$s.DEFAULT_FREQUENCY.max);this.frequency={...Private$s.DEFAULT_FREQUENCY,...r,max:s},this.name=e.name||Private$s.DEFAULT_NAME,"auto"in e&&!e.auto||setTimeout(()=>this.start())}get disposed(){return this._disposed}get frequency(){return this._frequency}set frequency(e){if(this.isDisposed||JSONExt.deepEqual(e,this.frequency||{}))return;let{backoff:t,interval:r,max:s}=e;if(r=Math.round(r),s=Math.round(s),"number"==typeof t&&t<1)throw new Error("Poll backoff growth factor must be at least 1");if((r<0||r>s)&&r!==Poll.NEVER)throw new Error("Poll interval must be between 0 and max");if(s>Poll.MAX_INTERVAL&&s!==Poll.NEVER)throw new Error(`Max interval must be less than ${Poll.MAX_INTERVAL}`);this._frequency={backoff:t,interval:r,max:s}}get isDisposed(){return"disposed"===this.state.phase}get standby(){return this._standby}set standby(e){this.isDisposed||this.standby===e||(this._standby=e)}get state(){return this._state}get tick(){return this._tick.promise}get ticked(){return this._ticked}async*[Symbol.asyncIterator](){for(;!this.isDisposed;)yield this.state,await this.tick.catch(()=>{})}dispose(){this.isDisposed||(this._state={...Private$s.DISPOSED_STATE,timestamp:/* @__PURE__ */(new Date).getTime()},this._tick.promise.catch(e=>{}),this._tick.reject(new Error(`Poll (${this.name}) is disposed.`)),this._disposed.emit(void 0),Signal.clearData(this))}refresh(){return this.schedule({cancel:({phase:e})=>"refreshed"===e,interval:Poll.IMMEDIATE,phase:"refreshed"})}async schedule(e={}){if(this.isDisposed)return;if(e.cancel&&e.cancel(this.state))return;const t=this._tick,r=new PromiseDelegate,s={interval:this.frequency.interval,payload:null,phase:"standby",timestamp:/* @__PURE__ */(new Date).getTime(),...e};if(this._state=s,this._tick=r,clearTimeout(this._timeout),this._ticked.emit(this.state),t.resolve(this),await t.promise,s.interval===Poll.NEVER)return void(this._timeout=void 0);this._timeout=setTimeout(()=>{this.isDisposed||this.tick!==r.promise||this._execute()},s.interval)}start(){return this.schedule({cancel:({phase:e})=>"constructed"!==e&&"standby"!==e&&"stopped"!==e,interval:Poll.IMMEDIATE,phase:"started"})}stop(){return this.schedule({cancel:({phase:e})=>"stopped"===e,interval:Poll.NEVER,phase:"stopped"})}get hidden(){return Private$s.hidden}_execute(){let e="function"==typeof this.standby?this.standby():this.standby;if("never"===e?e=!1:"when-hidden"===e&&(this.hidden?e=++this._lingered>this._linger:(this._lingered=0,e=!1)),e)return void this.schedule();const t=this.tick;this._factory(this.state).then(e=>{this.isDisposed||this.tick!==t||this.schedule({payload:e,phase:"rejected"===this.state.phase?"reconnected":"resolved"})}).catch(e=>{this.isDisposed||this.tick!==t||this.schedule({interval:Private$s.sleep(this.frequency,this.state),payload:e,phase:"rejected"})})}}Poll2=Poll||(Poll={}),Poll2.IMMEDIATE=0,Poll2.MAX_INTERVAL=2147483647,Poll2.NEVER=1/0,Private2=Private$s||(Private$s={}),Private2.DEFAULT_BACKOFF=3,Private2.DEFAULT_FREQUENCY={backoff:!0,interval:1e3,max:3e4},Private2.DEFAULT_LINGER=1,Private2.DEFAULT_NAME="unknown",Private2.DEFAULT_STANDBY="when-hidden",Private2.DEFAULT_STATE={interval:Poll.NEVER,payload:null,phase:"constructed",timestamp:/* @__PURE__ */new Date(0).getTime()},Private2.DISPOSED_STATE={interval:Poll.NEVER,payload:null,phase:"disposed",timestamp:/* @__PURE__ */new Date(0).getTime()},Private2.sleep=function(e,t){const{backoff:r,interval:s,max:n}=e;if(s===Poll.NEVER)return s;const i=!0===r?Private2.DEFAULT_BACKOFF:!1===r?1:r,o=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}(s,t.interval*i);return Math.min(n,o)},Private2.hidden="undefined"!=typeof document&&(document.addEventListener("visibilitychange",()=>{Private2.hidden="hidden"===document.visibilityState}),document.addEventListener("pagehide",()=>{Private2.hidden="hidden"===document.visibilityState}),"hidden"===document.visibilityState);class RateLimiter{constructor(e,t=500){this.args=void 0,this.payload=null,this.limit=t,this.poll=new Poll({auto:!1,factory:async()=>{const{args:t}=this;return this.args=void 0,e(...t)},frequency:{backoff:!1,interval:Poll.NEVER,max:Poll.NEVER},standby:"never"}),this.payload=new PromiseDelegate,this.poll.ticked.connect((e,t)=>{const{payload:r}=this;return"resolved"===t.phase?(this.payload=new PromiseDelegate,void r.resolve(t.payload)):"rejected"===t.phase||"stopped"===t.phase?(this.payload=new PromiseDelegate,r.promise.catch(e=>{}),void r.reject(t.payload)):void 0},this)}get isDisposed(){return null===this.payload}dispose(){this.isDisposed||(this.args=void 0,this.payload=null,this.poll.dispose())}async stop(){return this.poll.stop()}}class Debouncer extends RateLimiter{invoke(...e){return this.args=e,this.poll.schedule({interval:this.limit,phase:"invoked"}),this.payload.promise}}class Throttler extends RateLimiter{constructor(e,t){super(e,"number"==typeof t?t:t&&t.limit),this._trailing=!1,"number"!=typeof t&&t&&"trailing"===t.edge&&(this._trailing=!0),this._interval=this._trailing?this.limit:Poll.IMMEDIATE}invoke(...e){const t="invoked"!==this.poll.state.phase;return(t||this._trailing)&&(this.args=e),t&&this.poll.schedule({interval:this._interval,phase:"invoked"}),this.payload.promise}}const index_es6$1=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,Debouncer:Debouncer,get Poll(){return Poll},RateLimiter:RateLimiter,Throttler:Throttler},Symbol.toStringTag,{value:"Module"})),require$$1$1=/* @__PURE__ */getAugmentedNamespace(index_es6$1);var hasRequiredEvent;function requireEvent(){if(hasRequiredEvent)return event;hasRequiredEvent=1,Object.defineProperty(event,"__esModule",{value:!0}),event.EventManager=void 0;const e=/* @__PURE__ */requireLib$9(),t=require$$1$1,r=require$$0$2,s=requireServerconnection(),n="api/events";return event.EventManager=class{constructor(e={}){var n,i;this._socket=null,this.serverSettings=null!==(n=e.serverSettings)&&void 0!==n?n:s.ServerConnection.makeSettings(),this._poll=new t.Poll({factory:()=>this._subscribe(),standby:null!==(i=e.standby)&&void 0!==i?i:"when-hidden"}),this._stream=new r.Stream(this),this._poll.start()}get isDisposed(){return this._poll.isDisposed}get stream(){return this._stream}dispose(){if(this.isDisposed)return;this._poll.dispose();const e=this._socket;e&&(this._socket=null,e.onopen=()=>{},e.onerror=()=>{},e.onmessage=()=>{},e.onclose=()=>{},e.close()),r.Signal.clearData(this),this._stream.stop()}async emit(t){const{serverSettings:r}=this,{baseUrl:i}=r,{makeRequest:o,ResponseError:a}=s.ServerConnection,l=e.URLExt.join(i,n),c={body:JSON.stringify(t),method:"POST"},d=await o(l,c,r);if(204!==d.status)throw new a(d)}_subscribe(){return new Promise((t,r)=>{if(this.isDisposed)return;const{appendToken:s,token:i,WebSocket:o,wsUrl:a}=this.serverSettings;let l=e.URLExt.join(a,n,"subscribe");s&&""!==i&&(l+=`?token=${encodeURIComponent(i)}`);const c=this._socket=new o(l),d=this._stream;c.onclose=()=>r(new Error("EventManager socket closed")),c.onmessage=e=>e.data&&d.emit(JSON.parse(e.data))})}},event}var kernel$1={},comm={},hasRequiredComm;function requireComm(){if(hasRequiredComm)return comm;hasRequiredComm=1;var e=comm&&comm.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),t=comm&&comm.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=comm&&comm.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(s,r,n);return t(s,r),s};Object.defineProperty(comm,"__esModule",{value:!0}),comm.CommHandler=comm.CommsOverSubshells=void 0;const s=requireDist(),n=require$$1$2,i=r(requireMessages());var o,a;(a=o||(comm.CommsOverSubshells=o={})).Disabled="disabled",a.PerComm="perComm",a.PerCommTarget="perCommTarget";class l extends n.DisposableDelegate{constructor(e,t,r,n,i){super(n),this._subshellStarted=new s.PromiseDelegate,this._subshellId=null,this._target="",this._id="",this._id=t,this._target=e,this._kernel=r,this._kernel.statusChanged.connect(()=>{"restarting"===this._kernel.status&&this._cleanSubshells()}),this.commsOverSubshells=null!=i?i:o.PerCommTarget}get commId(){return this._id}get targetName(){return this._target}get subshellId(){return this._subshellId}get subshellStarted(){return this._subshellStarted.promise}get commsOverSubshells(){return this._commsOverSubshells}set commsOverSubshells(e){this._commsOverSubshells=e,this._commsOverSubshells===o.Disabled?this._maybeCloseSubshell():this._maybeStartSubshell()}get onClose(){return this._onClose}set onClose(e){this._onClose=e}get onMsg(){return this._onMsg}set onMsg(e){this._onMsg=e}open(e,t,r=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot open");const s=i.createMessage({msgType:"comm_open",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,subshellId:this._subshellId||this._kernel.subshellId,content:{comm_id:this._id,target_name:this._target,data:null!=e?e:{}},metadata:t,buffers:r});return this._kernel.sendShellMessage(s,!1,!0)}send(e,t,r=[],s=!0){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot send");const n=i.createMessage({msgType:"comm_msg",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,subshellId:this._subshellId||this._kernel.subshellId,content:{comm_id:this._id,data:e},metadata:t,buffers:r});return this._kernel.sendShellMessage(n,!1,s)}close(e,t,r=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot close");const s=i.createMessage({msgType:"comm_close",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,subshellId:this._subshellId||this._kernel.subshellId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:r}),n=this._kernel.sendShellMessage(s,!1,!0),o=this._onClose;if(o){o(i.createMessage({msgType:"comm_close",channel:"iopub",username:this._kernel.username,session:this._kernel.clientId,subshellId:this._subshellId||this._kernel.subshellId,content:{comm_id:this._id,data:null!=e?e:{}},metadata:t,buffers:r}))}return this.dispose(),n}dispose(){this._maybeCloseSubshell(),super.dispose()}_cleanSubshells(){const e=this._kernel.id;l._commTargetSubShellsId.hasOwnProperty(e)&&delete l._commTargetSubShellsId[e]}async _maybeStartSubshell(){if(await this._kernel.info,!this._kernel.supportsSubshells)return;if(this._commsOverSubshells===o.PerComm){const e=await this._kernel.requestCreateSubshell({}).done;return this._subshellId=e.content.subshell_id,void this._subshellStarted.resolve()}const e=this._kernel.id;l._commTargetSubShellsId.hasOwnProperty(e)||(l._commTargetSubShellsId[e]={});const t=l._commTargetSubShellsId[e];t[this._target]?(this._subshellId=await t[this._target],this._subshellStarted.resolve()):(t[this._target]=this._kernel.requestCreateSubshell({}).done.then(e=>(this._subshellId=e.content.subshell_id,this._subshellId)),await t[this._target],this._subshellStarted.resolve())}_maybeCloseSubshell(){this._commsOverSubshells===o.PerComm?(this._subshellId&&"dead"!==this._kernel.status&&this._kernel.requestDeleteSubshell({subshell_id:this._subshellId},!0),this._subshellId=null):this._subshellId=null}}return comm.CommHandler=l,l._commTargetSubShellsId={},comm}var kernel={},hasRequiredKernel$1;function requireKernel$1(){return hasRequiredKernel$1||(hasRequiredKernel$1=1,Object.defineProperty(kernel,"__esModule",{value:!0})),kernel}var restapi$4={},validate$2={},hasRequiredValidate$2,hasRequiredRestapi$4;function requireValidate$2(){if(hasRequiredValidate$2)return validate$2;hasRequiredValidate$2=1,Object.defineProperty(validate$2,"__esModule",{value:!0}),validate$2.validateMessage=function(s){(0,e.validateProperty)(s,"metadata","object"),(0,e.validateProperty)(s,"content","object"),(0,e.validateProperty)(s,"channel","string"),function(r){for(let s=0;s<t.length;s++)(0,e.validateProperty)(r,t[s],"string")}(s.header),"iopub"===s.channel&&function(t){if("iopub"===t.channel){const s=r[t.header.msg_type];if(void 0===s)return;const n=Object.keys(s),i=t.content;for(let t=0;t<n.length;t++){let r=s[n[t]];Array.isArray(r)||(r=[r]),(0,e.validateProperty)(i,n[t],...r)}}}(s)},validate$2.validateModel=s,validate$2.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid kernel list");e.forEach(e=>s(e))};const e=requireValidate$4(),t=["username","version","session","msg_id","msg_type"],r={stream:{name:"string",text:"string"},display_data:{data:"object",metadata:"object"},execute_input:{code:"string",execution_count:"number"},execute_result:{execution_count:"number",data:"object",metadata:"object"},error:{ename:"string",evalue:"string",traceback:"object"},status:{execution_state:["string",["starting","idle","busy","restarting","dead"]]},clear_output:{wait:"boolean"},comm_open:{comm_id:"string",target_name:"string",data:"object"},comm_msg:{comm_id:"string",data:"object"},comm_close:{comm_id:"string"},shutdown_reply:{restart:"boolean"}};function s(t){(0,e.validateProperty)(t,"name","string"),(0,e.validateProperty)(t,"id","string")}return validate$2}function requireRestapi$4(){return hasRequiredRestapi$4||(hasRequiredRestapi$4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.KernelAPIClient=e.KERNEL_SERVICE_URL=void 0,e.listRunning=n,e.startNew=i,e.restartKernel=o,e.interruptKernel=a,e.shutdownKernel=l,e.getKernelModel=c;const t=requireServerconnection(),r=/* @__PURE__ */requireLib$9(),s=requireValidate$2();async function n(n=t.ServerConnection.makeSettings()){const i=r.URLExt.join(n.baseUrl,e.KERNEL_SERVICE_URL),o=await t.ServerConnection.makeRequest(i,{},n);if(200!==o.status){throw await t.ServerConnection.ResponseError.create(o)}const a=await o.json();return(0,s.validateModels)(a),a}async function i(n={},i=t.ServerConnection.makeSettings()){const o=r.URLExt.join(i.baseUrl,e.KERNEL_SERVICE_URL),a={method:"POST",body:JSON.stringify(n)},l=await t.ServerConnection.makeRequest(o,a,i);if(201!==l.status){throw await t.ServerConnection.ResponseError.create(l)}const c=await l.json();return(0,s.validateModel)(c),c}async function o(n,i=t.ServerConnection.makeSettings()){const o=r.URLExt.join(i.baseUrl,e.KERNEL_SERVICE_URL,encodeURIComponent(n),"restart"),a=await t.ServerConnection.makeRequest(o,{method:"POST"},i);if(200!==a.status){throw await t.ServerConnection.ResponseError.create(a)}const l=await a.json();(0,s.validateModel)(l)}async function a(s,n=t.ServerConnection.makeSettings()){const i=r.URLExt.join(n.baseUrl,e.KERNEL_SERVICE_URL,encodeURIComponent(s),"interrupt"),o=await t.ServerConnection.makeRequest(i,{method:"POST"},n);if(204!==o.status){throw await t.ServerConnection.ResponseError.create(o)}}async function l(s,n=t.ServerConnection.makeSettings()){const i=r.URLExt.join(n.baseUrl,e.KERNEL_SERVICE_URL,encodeURIComponent(s)),o=await t.ServerConnection.makeRequest(i,{method:"DELETE"},n);if(404===o.status){const e=`The kernel "${s}" does not exist on the server`;console.warn(e)}else if(204!==o.status){throw await t.ServerConnection.ResponseError.create(o)}}async function c(n,i=t.ServerConnection.makeSettings()){const o=r.URLExt.join(i.baseUrl,e.KERNEL_SERVICE_URL,encodeURIComponent(n)),a=await t.ServerConnection.makeRequest(o,{},i);if(404===a.status)return;if(200!==a.status){throw await t.ServerConnection.ResponseError.create(a)}const l=await a.json();return(0,s.validateModel)(l),l}e.KERNEL_SERVICE_URL="api/kernels";e.KernelAPIClient=class{constructor(e={}){var r;this.serverSettings=null!==(r=e.serverSettings)&&void 0!==r?r:t.ServerConnection.makeSettings()}async listRunning(){return n(this.serverSettings)}async getModel(e){return c(e,this.serverSettings)}async startNew(e={}){return i(e,this.serverSettings)}async restart(e){return o(e,this.serverSettings)}async interrupt(e){return a(e,this.serverSettings)}async shutdown(e){return l(e,this.serverSettings)}}}(restapi$4)),restapi$4}var _default$2={},future={},hasRequiredFuture;function requireFuture(){if(hasRequiredFuture)return future;hasRequiredFuture=1;var e=future&&future.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),t=future&&future.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=future&&future.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(s,r,n);return t(s,r),s};Object.defineProperty(future,"__esModule",{value:!0}),future.KernelShellFutureHandler=future.KernelControlFutureHandler=future.KernelFutureHandler=void 0;const s=requireDist(),n=require$$1$2,i=r(requireMessages());class o extends n.DisposableDelegate{constructor(e,t,r,n,i){super(e),this._status=0,this._stdin=a.noOp,this._iopub=a.noOp,this._reply=a.noOp,this._done=new s.PromiseDelegate,this._hooks=new a.HookList,this._disposeOnDone=!0,this._msg=t,r||this._setFlag(a.KernelFutureFlag.GotReply),this._disposeOnDone=n,this._kernel=i}get msg(){return this._msg}get done(){return this._done.promise}get onReply(){return this._reply}set onReply(e){this._reply=e}get onIOPub(){return this._iopub}set onIOPub(e){this._iopub=e}get onStdin(){return this._stdin}set onStdin(e){this._stdin=e}registerMessageHook(e){if(this.isDisposed)throw new Error("Kernel future is disposed");this._hooks.add(e)}removeMessageHook(e){this.isDisposed||this._hooks.remove(e)}sendInputReply(e,t){this._kernel.sendInputReply(e,t)}dispose(){this._stdin=a.noOp,this._iopub=a.noOp,this._reply=a.noOp,this._hooks=null,this._testFlag(a.KernelFutureFlag.IsDone)||(this._done.promise.catch(()=>{}),this._done.reject(new Error(`Canceled future for ${this.msg.header.msg_type} message before replies were done`))),super.dispose()}async handleMsg(e){switch(e.channel){case"control":case"shell":e.channel===this.msg.channel&&e.parent_header.msg_id===this.msg.header.msg_id&&await this._handleReply(e);break;case"stdin":await this._handleStdin(e);break;case"iopub":await this._handleIOPub(e)}}async _handleReply(e){const t=this._reply;t&&await t(e),this._replyMsg=e,this._setFlag(a.KernelFutureFlag.GotReply),this._testFlag(a.KernelFutureFlag.GotIdle)&&this._handleDone()}async _handleStdin(e){this._kernel.hasPendingInput=!0;const t=this._stdin;t&&await t(e)}async _handleIOPub(e){const t=await this._hooks.process(e),r=this._iopub;t&&r&&await r(e),i.isStatusMsg(e)&&"idle"===e.content.execution_state&&(this._setFlag(a.KernelFutureFlag.GotIdle),this._testFlag(a.KernelFutureFlag.GotReply)&&this._handleDone())}_handleDone(){this._testFlag(a.KernelFutureFlag.IsDone)||(this._setFlag(a.KernelFutureFlag.IsDone),this._done.resolve(this._replyMsg),this._disposeOnDone&&this.dispose())}_testFlag(e){return 0!==(this._status&e)}_setFlag(e){this._status|=e}}future.KernelFutureHandler=o;future.KernelControlFutureHandler=class extends o{};var a;return future.KernelShellFutureHandler=class extends o{},function(e){e.noOp=()=>{};const t="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;var r;e.HookList=class{constructor(){this._hooks=[]}add(e){this.remove(e),this._hooks.push(e)}remove(e){const t=this._hooks.indexOf(e);t>=0&&(this._hooks[t]=null,this._scheduleCompact())}async process(e){await this._processing;const t=new s.PromiseDelegate;let r;this._processing=t.promise;for(let s=this._hooks.length-1;s>=0;s--){const i=this._hooks[s];if(null!==i){try{r=await i(e)}catch(n){r=!0,console.error(n)}if(!1===r)return t.resolve(void 0),!1}}return t.resolve(void 0),!0}_scheduleCompact(){this._compactScheduled||(this._compactScheduled=!0,t(()=>{this._processing=this._processing.then(()=>{this._compactScheduled=!1,this._compact()})}))}_compact(){let e=0;for(let t=0,r=this._hooks.length;t<r;t++){const r=this._hooks[t];null===this._hooks[t]?e++:this._hooks[t-e]=r}this._hooks.length-=e}},(r=e.KernelFutureFlag||(e.KernelFutureFlag={}))[r.GotReply=1]="GotReply",r[r.GotIdle=2]="GotIdle",r[r.IsDone=4]="IsDone",r[r.DisposeOnDone=8]="DisposeOnDone"}(a||(a={})),future}var restapi$3={},validate$1={},hasRequiredValidate$1,hasRequiredRestapi$3,hasRequired_default$2;function requireValidate$1(){if(hasRequiredValidate$1)return validate$1;hasRequiredValidate$1=1,Object.defineProperty(validate$1,"__esModule",{value:!0}),validate$1.validateSpecModel=t,validate$1.validateSpecModels=function(e){if(!e.hasOwnProperty("kernelspecs"))throw new Error("No kernelspecs found");let r=Object.keys(e.kernelspecs);const s=/* @__PURE__ */Object.create(null);let n=e.default;for(let o=0;o<r.length;o++){const n=e.kernelspecs[r[o]];try{s[r[o]]=t(n)}catch(i){console.warn(`Removing errant kernel spec: ${r[o]}`)}}if(r=Object.keys(s),!r.length)throw new Error("No valid kernelspecs found");n&&"string"==typeof n&&n in s||(n=r[0],console.warn(`Default kernel not found, using '${r[0]}'`));return{default:n,kernelspecs:s}};const e=requireValidate$4();function t(t){const r=t.spec;if(!r)throw new Error("Invalid kernel spec");(0,e.validateProperty)(t,"name","string"),(0,e.validateProperty)(t,"resources","object"),(0,e.validateProperty)(r,"language","string"),(0,e.validateProperty)(r,"display_name","string"),(0,e.validateProperty)(r,"argv","array");let s=null;r.hasOwnProperty("metadata")&&((0,e.validateProperty)(r,"metadata","object"),s=r.metadata);let n=null;return r.hasOwnProperty("env")&&((0,e.validateProperty)(r,"env","object"),n=r.env),{name:t.name,resources:t.resources,language:r.language,display_name:r.display_name,argv:r.argv,metadata:s,env:n}}return validate$1}function requireRestapi$3(){if(hasRequiredRestapi$3)return restapi$3;hasRequiredRestapi$3=1,Object.defineProperty(restapi$3,"__esModule",{value:!0}),restapi$3.KernelSpecAPIClient=void 0,restapi$3.getSpecs=n;const e=requireServerconnection(),t=requireValidate$1(),r=/* @__PURE__ */requireLib$9(),s="api/kernelspecs";async function n(n=e.ServerConnection.makeSettings()){const i=r.URLExt.join(n.baseUrl,s),o=await e.ServerConnection.makeRequest(i,{},n);if(200!==o.status){throw await e.ServerConnection.ResponseError.create(o)}const a=await o.json();return(0,t.validateSpecModels)(a)}return restapi$3.KernelSpecAPIClient=class{constructor(t={}){var r;this.serverSettings=null!==(r=t.serverSettings)&&void 0!==r?r:e.ServerConnection.makeSettings()}async get(){return n(this.serverSettings)}},restapi$3}function require_default$2(){if(hasRequired_default$2)return _default$2;hasRequired_default$2=1;var e=_default$2&&_default$2.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),t=_default$2&&_default$2.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=_default$2&&_default$2.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(s,r,n);return t(s,r),s};Object.defineProperty(_default$2,"__esModule",{value:!0}),_default$2.KernelConnection=void 0;const s=/* @__PURE__ */requireLib$9(),n=requireDist(),i=require$$0$2,o=requireLib$7(),a=requireComm(),l=r(requireMessages()),c=requireFuture(),d=r(requireValidate$2()),h=requireRestapi$4(),u=requireRestapi$3(),p=/* @__PURE__ */requireLib$9(),g="_RESTARTING_";class m{constructor(e){var t,r,a,c,p,g,m,v;this._createSocket=(e=!0)=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const t=this.serverSettings,r=s.URLExt.join(t.wsUrl,h.KERNEL_SERVICE_URL,encodeURIComponent(this._id)),n=r.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1");console.debug(`Starting WebSocket: ${n}`);let i=s.URLExt.join(r,"channels?session_id="+encodeURIComponent(this._clientId));const a=t.token;t.appendToken&&""!==a&&(i+=`&token=${encodeURIComponent(a)}`);const l=e?this._supportedProtocols:[];this._ws=new t.WebSocket(i,l),this._ws.binaryType="arraybuffer";let c=!1;const d=async e=>{var t,r;if(!this._isDisposed){this._reason="",this._model=void 0;try{const t=await this._kernelAPIClient.getModel(this._id);this._model=t,"dead"===(null==t?void 0:t.execution_state)?this._updateStatus("dead"):this._onWSClose(e)}catch(s){if(s instanceof o.ServerConnection.NetworkError||503===(null===(t=s.response)||void 0===t?void 0:t.status)||424===(null===(r=s.response)||void 0===r?void 0:r.status)){const t=1e3*f.getRandomIntInclusive(10,30);setTimeout(d,t,e)}else this._reason="Kernel died unexpectedly",this._updateStatus("dead")}}},u=async e=>{c||(c=!0,await d(e))};this._ws.onmessage=this._onWSMessage,this._ws.onopen=this._onWSOpen,this._ws.onclose=u,this._ws.onerror=u},this._onWSOpen=e=>{if(""!==this._ws.protocol&&!this._supportedProtocols.includes(this._ws.protocol))throw console.log("Server selected unknown kernel wire protocol:",this._ws.protocol),this._updateStatus("dead"),new Error(`Unknown kernel wire protocol:  ${this._ws.protocol}`);this._selectedProtocol=this._ws.protocol,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose,this._updateConnectionStatus("connected")},this._onWSMessage=e=>{let t;try{t=this.serverSettings.serializer.deserialize(e.data,this._ws.protocol),d.validateMessage(t)}catch(r){throw r.message=`Kernel message validation error: ${r.message}`,r}this._kernelSession=t.header.session,this._msgChain=this._msgChain.then(()=>this._handleMessage(t)).catch(e=>{e.message.startsWith("Canceled future for ")&&console.error(e)}),this._anyMessage.emit({msg:t,direction:"recv"})},this._onWSClose=e=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._supportedProtocols=Object.values(l.supportedKernelWebSocketProtocols),this._selectedProtocol="",this._commsOverSubshells=o.CommsOverSubshells.PerCommTarget,this._futures=/* @__PURE__ */new Map,this._comms=/* @__PURE__ */new Map,this._targetRegistry=/* @__PURE__ */Object.create(null),this._info=new n.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new i.Signal(this),this._connectionStatusChanged=new i.Signal(this),this._disposed=new i.Signal(this),this._iopubMessage=new i.Signal(this),this._anyMessage=new i.Signal(this),this._pendingInput=new i.Signal(this),this._unhandledMessage=new i.Signal(this),this._displayIdToParentIds=/* @__PURE__ */new Map,this._msgIdToDisplayIds=/* @__PURE__ */new Map,this._msgChain=Promise.resolve(),this._hasPendingInput=!1,this._reason="",this._noOp=()=>{},this._supportsSubshells=!1,this._name=e.model.name,this._id=e.model.id,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings(),this._kernelAPIClient=null!==(r=e.kernelAPIClient)&&void 0!==r?r:new h.KernelAPIClient({serverSettings:this.serverSettings}),this._kernelSpecAPIClient=null!==(a=e.kernelSpecAPIClient)&&void 0!==a?a:new u.KernelSpecAPIClient({serverSettings:this.serverSettings}),this._clientId=null!==(c=e.clientId)&&void 0!==c?c:n.UUID.uuid4(),this._username=null!==(p=e.username)&&void 0!==p?p:"",this.handleComms=null===(g=e.handleComms)||void 0===g||g,this._commsOverSubshells=null!==(m=e.commsOverSubshells)&&void 0!==m?m:o.CommsOverSubshells.PerCommTarget,this._subshellId=null!==(v=e.subshellId)&&void 0!==v?v:null,this._createSocket()}get disposed(){return this._disposed}get commsOverSubshells(){return this._commsOverSubshells}set commsOverSubshells(e){this._commsOverSubshells=e;for(const[t,r]of this._comms)r.commsOverSubshells=e}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return this._model||{id:this.id,name:this.name,reason:this._reason}}get anyMessage(){return this._anyMessage}get pendingInput(){return this._pendingInput}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get subshellId(){return this._subshellId}set subshellId(e){this._subshellId=e}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise||(this._specPromise=this._kernelSpecAPIClient.get().then(e=>e.kernelspecs[this._name])),this._specPromise}get supportsSubshells(){return this._supportsSubshells}clone(e={}){return new m({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1,kernelAPIClient:this._kernelAPIClient,commsOverSubshells:o.CommsOverSubshells.Disabled,...e})}dispose(){if(this.isDisposed)return;const e=()=>{this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),i.Signal.clearData(this)};if(null!==this._subshellId){this.requestDeleteSubshell({subshell_id:this._subshellId},!0).onReply=t=>{e()}}else e()}sendShellMessage(e,t=!1,r=!0){return this._sendKernelShellControl(c.KernelShellFutureHandler,e,t,r)}sendControlMessage(e,t=!1,r=!0){return this._sendKernelShellControl(c.KernelControlFutureHandler,e,t,r)}_sendKernelShellControl(e,t,r=!1,s=!0){this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"});const n=new e(()=>{const e=t.header.msg_id;this._futures.delete(e);const r=this._msgIdToDisplayIds.get(e);r&&(r.forEach(t=>{const r=this._displayIdToParentIds.get(t);if(r){const s=r.indexOf(e);if(-1===s)return;1===r.length?this._displayIdToParentIds.delete(t):(r.splice(s,1),this._displayIdToParentIds.set(t,r))}}),this._msgIdToDisplayIds.delete(e))},t,r,s,this);return this._futures.set(t.header.msg_id,n),n}_sendMessage(e,t=!0){if("dead"===this.status)throw new Error("Kernel is dead");if((""===this._kernelSession||this._kernelSession===g)&&l.isInfoRequestMsg(e)){if("connected"===this.connectionStatus)return void this._ws.send(this.serverSettings.serializer.serialize(e,this._ws.protocol));throw new Error("Could not send message: status is not connected")}if(t&&this._pendingMessages.length>0)this._pendingMessages.push(e);else if("connected"===this.connectionStatus&&this._kernelSession!==g)this._ws.send(this.serverSettings.serializer.serialize(e,this._ws.protocol));else{if(!t)throw new Error("Could not send message");this._pendingMessages.push(e)}}async interrupt(){if(this.hasPendingInput=!1,"dead"===this.status)throw new Error("Kernel is dead");return this._kernelAPIClient.interrupt(this.id)}async restart(){if("dead"===this.status)throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=g,await this._kernelAPIClient.restart(this.id),await this.reconnect(),this.hasPendingInput=!1}reconnect(){this._errorIfDisposed();const e=new n.PromiseDelegate,t=(r,s)=>{"connected"===s?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===s&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){"dead"!==this.status&&await this._kernelAPIClient.shutdown(this.id),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){const e=l.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:{}});let t;try{t=await f.handleShellMessage(this,e)}catch(s){if(this.isDisposed)return;throw s}if(this._errorIfDisposed(),!t)return;if(void 0===t.content.status&&(t.content.status="ok"),"ok"!==t.content.status)return this._info.reject("Kernel info reply errored"),t;this._info.resolve(t.content),this._kernelSession=t.header.session;const r=t.content.supported_features;return this._supportsSubshells=void 0!==r&&r.includes("kernel subshells"),t}requestComplete(e){const t=l.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:e});return f.handleShellMessage(this,t)}requestInspect(e){const t=l.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:e});return f.handleShellMessage(this,t)}requestHistory(e){const t=l.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:e});return f.handleShellMessage(this,t)}requestExecute(e,t=!0,r){const s=l.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1,...e},metadata:r});return this.sendShellMessage(s,!0,t)}requestDebug(e,t=!0){const r=l.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(r,!0,t)}requestCreateSubshell(e,t=!0){if(!this.supportsSubshells)throw new Error("Kernel subshells are not supported");const r=l.createMessage({msgType:"create_subshell_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(r,!0,t)}requestDeleteSubshell(e,t=!0){if(!this.supportsSubshells)throw new Error("Kernel subshells are not supported");const r=l.createMessage({msgType:"delete_subshell_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(r,!0,t)}requestListSubshell(e,t=!0){if(!this.supportsSubshells)throw new Error("Kernel subshells are not supported");const r=l.createMessage({msgType:"list_subshell_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(r,!0,t)}requestIsComplete(e){const t=l.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:e});return f.handleShellMessage(this,t)}requestCommInfo(e){const t=l.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,subshellId:this._subshellId,content:e});return f.handleShellMessage(this,t)}sendInputReply(e,t){const r=l.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});r.parent_header=t,this._sendMessage(r),this._anyMessage.emit({msg:r,direction:"send"}),this.hasPendingInput=!1}createComm(e,t=n.UUID.uuid4()){if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(t))throw new Error("Comm is already created");const r=new a.CommHandler(e,t,this,()=>{this._unregisterComm(t)},this._commsOverSubshells);return this._comms.set(t,r),r}hasComm(e){return this._comms.has(e)}registerCommTarget(e,t){this.handleComms&&(this._targetRegistry[e]=t)}removeCommTarget(e,t){this.handleComms&&(this.isDisposed||this._targetRegistry[e]!==t||delete this._targetRegistry[e])}registerMessageHook(e,t){var r;const s=null===(r=this._futures)||void 0===r?void 0:r.get(e);s&&s.registerMessageHook(t)}removeMessageHook(e,t){var r;const s=null===(r=this._futures)||void 0===r?void 0:r.get(e);s&&s.removeMessageHook(t)}removeInputGuard(){this.hasPendingInput=!1}async _handleDisplayId(e,t){var r,s;const i=t.parent_header.msg_id;let o=this._displayIdToParentIds.get(e);if(o){const e={header:n.JSONExt.deepCopy(t.header),parent_header:n.JSONExt.deepCopy(t.parent_header),metadata:n.JSONExt.deepCopy(t.metadata),content:n.JSONExt.deepCopy(t.content),channel:t.channel,buffers:t.buffers?t.buffers.slice():[]};e.header.msg_type="update_display_data",await Promise.all(o.map(async t=>{const r=this._futures&&this._futures.get(t);r&&await r.handleMsg(e)}))}if("update_display_data"===t.header.msg_type)return!0;o=null!==(r=this._displayIdToParentIds.get(e))&&void 0!==r?r:[],-1===o.indexOf(i)&&o.push(i),this._displayIdToParentIds.set(e,o);const a=null!==(s=this._msgIdToDisplayIds.get(i))&&void 0!==s?s:[];return-1===a.indexOf(i)&&a.push(i),this._msgIdToDisplayIds.set(i,a),!1}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status!==e&&"dead"!==this._status&&(this._status=e,f.logKernelStatus(this),this._statusChanged.emit(e),"dead"===e&&this.dispose())}_sendPending(){for(;"connected"===this.connectionStatus&&this._kernelSession!==g&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach(e=>{e.dispose()}),this._comms.forEach(e=>{e.dispose()}),this._msgChain=Promise.resolve(),this._futures=/* @__PURE__ */new Map,this._comms=/* @__PURE__ */new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error(`Canceling handling of old message: ${e.header.msg_type}`)}async _handleCommOpen(e){this._assertCurrentMessage(e);const t=e.content,r=new a.CommHandler(t.target_name,t.comm_id,this,()=>{this._unregisterComm(t.comm_id)},this.commsOverSubshells);this._comms.set(t.comm_id,r);try{const s=await f.loadObject(t.target_name,t.target_module,this._targetRegistry);await s(r,e)}catch(s){throw r.close(),console.error("Exception opening new comm"),s}}async _handleCommClose(e){this._assertCurrentMessage(e);const t=e.content,r=this._comms.get(t.comm_id);if(!r)return void console.error("Comm not found for comm id "+t.comm_id);this._unregisterComm(r.commId);const s=r.onClose;s&&await s(e),r.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);const t=e.content,r=this._comms.get(t.comm_id);if(!r)return;const s=r.onMsg;s&&await s(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"dead"!==this.status)if("connected"===e){let e=this._kernelSession===g,t=this.requestKernelInfo(),r=!1,s=()=>{r||(r=!0,e&&this._kernelSession===g&&(this._kernelSession=""),clearTimeout(n),this._pendingMessages.length>0&&this._sendPending())};t.then(s);let n=setTimeout(s,3e3)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var t,r;let s=!1;if(e.parent_header&&"iopub"===e.channel&&(l.isDisplayDataMsg(e)||l.isUpdateDisplayDataMsg(e)||l.isExecuteResultMsg(e))){const r=(null!==(t=e.content.transient)&&void 0!==t?t:{}).display_id;r&&(s=await this._handleDisplayId(r,e),this._assertCurrentMessage(e))}if(!s&&e.parent_header){const t=e.parent_header,s=null===(r=this._futures)||void 0===r?void 0:r.get(t.msg_id);if(s)await s.handleMsg(e),this._assertCurrentMessage(e);else{const r=t.session===this.clientId;"iopub"!==e.channel&&r&&this._unhandledMessage.emit(e)}}if("iopub"===e.channel){switch(e.header.msg_type){case"status":{const t=p.PageConfig.getOption("untracked_message_types");if(JSON.parse(t||"[]").includes(e.parent_header.msg_type))break;const r=e.content.execution_state;"restarting"===r&&Promise.resolve().then(async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()}),this._updateStatus(r);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e)}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=f.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`);const t=""!==this._selectedProtocol;this._reconnectTimeout=setTimeout(this._createSocket,e,t),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}get hasPendingInput(){return this._hasPendingInput}set hasPendingInput(e){this._hasPendingInput=e,this._pendingInput.emit(e)}}var f,v;return _default$2.KernelConnection=m,(v=f||(f={})).logKernelStatus=function(e){switch(e.status){case"idle":case"busy":case"unknown":return;default:console.debug(`Kernel: ${e.status} (${e.id})`)}},v.handleShellMessage=async function(e,t){return e.sendShellMessage(t,!0).done},v.loadObject=function(e,t,r){return new Promise((s,n)=>{if(t){if("undefined"==typeof requirejs)throw new Error("requirejs not found");requirejs([t],r=>{void 0===r[e]?n(new Error(`Object '${e}' not found in module '${t}'`)):s(r[e])},n)}else(null==r?void 0:r[e])?s(r[e]):n(new Error(`Object '${e}' not found in registry`))})},v.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},_default$2}var manager$5={},hasRequiredManager$5,hasRequiredKernel;function requireManager$5(){if(hasRequiredManager$5)return manager$5;hasRequiredManager$5=1,Object.defineProperty(manager$5,"__esModule",{value:!0}),manager$5.KernelManager=void 0;const e=require$$1$1,t=require$$0$2,r=requireLib$7(),s=requireBasemanager(),n=requireRestapi$4(),i=require_default$2(),o=requireRestapi$3();class a extends s.BaseManager{constructor(s={}){var i,a,l;super(s),this._commsOverSubshells=r.CommsOverSubshells.PerCommTarget,this._isReady=!1,this._kernelConnections=/* @__PURE__ */new Set,this._models=/* @__PURE__ */new Map,this._runningChanged=new t.Signal(this),this._connectionFailure=new t.Signal(this),this._kernelAPIClient=null!==(i=s.kernelAPIClient)&&void 0!==i?i:new n.KernelAPIClient({serverSettings:this.serverSettings}),this._kernelSpecAPIClient=null!==(a=s.kernelSpecAPIClient)&&void 0!==a?a:new o.KernelSpecAPIClient({serverSettings:this.serverSettings}),this._pollModels=new e.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelManager#models",standby:null!==(l=s.standby)&&void 0!==l?l:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._kernelConnections.forEach(e=>e.dispose()),this._pollModels.dispose(),super.dispose())}connectTo(e){var t;const{id:r}=e.model;let s=null===(t=e.handleComms)||void 0===t||t;if(void 0===e.handleComms)for(const i of this._kernelConnections)if(i.id===r&&i.handleComms){s=!1;break}e.commsOverSubshells=this._commsOverSubshells;const n=new i.KernelConnection({handleComms:s,...e,serverSettings:this.serverSettings,kernelAPIClient:this._kernelAPIClient,kernelSpecAPIClient:this._kernelSpecAPIClient});return this._onStarted(n),this._models.has(r)||this.refreshRunning().catch(()=>{}),n}running(){return this._models.values()}get runningCount(){return this._models.size}get commsOverSubshells(){return this._commsOverSubshells}set commsOverSubshells(e){this._commsOverSubshells=e;for(const t of this._kernelConnections)t.commsOverSubshells=e}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e={},t={}){const r=await this._kernelAPIClient.startNew(e);return this.connectTo({...t,model:r})}async shutdown(e){await this._kernelAPIClient.shutdown(e),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map(e=>this._kernelAPIClient.shutdown(e))),await this.refreshRunning()}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async requestRunning(){var e,t;let s;try{s=await this._kernelAPIClient.listRunning()}catch(n){throw(n instanceof r.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===s.length&&s.every(e=>{const t=this._models.get(e.id);return!!t&&(t.connections===e.connections&&t.execution_state===e.execution_state&&t.last_activity===e.last_activity&&t.name===e.name&&t.reason===e.reason&&t.traceback===e.traceback)})||(this._models=new Map(s.map(e=>[e.id,e])),this._kernelConnections.forEach(e=>{this._models.has(e.id)||e.handleShutdown()}),this._runningChanged.emit(s))}_onStarted(e){this._kernelConnections.add(e),e.statusChanged.connect(this._onStatusChanged,this),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._kernelConnections.delete(e),this.refreshRunning().catch(()=>{})}_onStatusChanged(e,t){"dead"===t&&this.refreshRunning().catch(()=>{})}}var l;return manager$5.KernelManager=a,(l=a||(manager$5.KernelManager=a={})).NoopManager=class extends l{constructor(){super(...arguments),this._readyPromise=new Promise(()=>{})}get isActive(){return!1}get parentReady(){return super.ready}async startNew(e={},t={}){return Promise.reject(new Error("Not implemented in no-op Kernel Manager"))}connectTo(e){throw new Error("Not implemented in no-op Kernel Manager")}async shutdown(e){return Promise.reject(new Error("Not implemented in no-op Kernel Manager"))}get ready(){return this.parentReady.then(()=>this._readyPromise)}async requestRunning(){return Promise.resolve()}},manager$5}function requireKernel(){return hasRequiredKernel||(hasRequiredKernel=1,function(e){var t=kernel$1&&kernel$1.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=kernel$1&&kernel$1.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=kernel$1&&kernel$1.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(s,e,n);return r(s,e),s},n=kernel$1&&kernel$1.__exportStar||function(e,r){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||t(r,e,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.CommsOverSubshells=e.KernelConnection=e.KernelAPI=e.KernelMessage=e.Kernel=void 0;const i=requireComm();Object.defineProperty(e,"CommsOverSubshells",{enumerable:!0,get:function(){return i.CommsOverSubshells}});const o=s(requireKernel$1());e.Kernel=o;const a=s(requireMessages());e.KernelMessage=a;const l=s(requireRestapi$4());e.KernelAPI=l;const c=require_default$2();Object.defineProperty(e,"KernelConnection",{enumerable:!0,get:function(){return c.KernelConnection}}),n(requireManager$5(),e)}(kernel$1)),kernel$1}var kernelspec$1={},kernelspec={},hasRequiredKernelspec$1;function requireKernelspec$1(){return hasRequiredKernelspec$1||(hasRequiredKernelspec$1=1,Object.defineProperty(kernelspec,"__esModule",{value:!0})),kernelspec}var manager$4={},hasRequiredManager$4,hasRequiredKernelspec;function requireManager$4(){if(hasRequiredManager$4)return manager$4;hasRequiredManager$4=1,Object.defineProperty(manager$4,"__esModule",{value:!0}),manager$4.KernelSpecManager=void 0;const e=requireDist(),t=require$$1$1,r=require$$0$2,s=requireBasemanager(),n=requireRestapi$3();class i extends s.BaseManager{constructor(e={}){var s,i;super(e),this._isReady=!1,this._connectionFailure=new r.Signal(this),this._specs=null,this._specsChanged=new r.Signal(this),this._kernelSpecAPIClient=null!==(s=e.kernelSpecAPIClient)&&void 0!==s?s:new n.KernelSpecAPIClient({serverSettings:this.serverSettings}),this._ready=Promise.all([this.requestSpecs()]).then(e=>{}).catch(e=>{}).then(()=>{this.isDisposed||(this._isReady=!0)}),this._pollSpecs=new t.Poll({auto:!1,factory:()=>this.requestSpecs(),frequency:{interval:61e3,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelSpecManager#specs",standby:null!==(i=e.standby)&&void 0!==i?i:"when-hidden"}),this.ready.then(()=>{this._pollSpecs.start()})}get isReady(){return this._isReady}get ready(){return this._ready}get specs(){return this._specs}get specsChanged(){return this._specsChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshSpecs(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestSpecs(){const t=await this._kernelSpecAPIClient.get();this.isDisposed||e.JSONExt.deepEqual(t,this._specs)||(this._specs=t,this._specsChanged.emit(t))}}return manager$4.KernelSpecManager=i,manager$4}function requireKernelspec(){return hasRequiredKernelspec||(hasRequiredKernelspec=1,function(e){var t=kernelspec$1&&kernelspec$1.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=kernelspec$1&&kernelspec$1.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=kernelspec$1&&kernelspec$1.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(s,e,n);return r(s,e),s},n=kernelspec$1&&kernelspec$1.__exportStar||function(e,r){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||t(r,e,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.KernelSpecAPI=e.KernelSpec=void 0;const i=s(requireKernelspec$1());e.KernelSpec=i;const o=s(requireRestapi$3());e.KernelSpecAPI=o,n(requireManager$4(),e)}(kernelspec$1)),kernelspec$1}var manager$3={},builder={},hasRequiredBuilder;function requireBuilder(){if(hasRequiredBuilder)return builder;hasRequiredBuilder=1,Object.defineProperty(builder,"__esModule",{value:!0}),builder.BuildManager=void 0;const e=/* @__PURE__ */requireLib$9(),t=requireServerconnection();return builder.BuildManager=class{constructor(e={}){var r;this.serverSettings=null!==(r=e.serverSettings)&&void 0!==r?r:t.ServerConnection.makeSettings()}get isAvailable(){return"true"===e.PageConfig.getOption("buildAvailable").toLowerCase()}get shouldCheck(){return"true"===e.PageConfig.getOption("buildCheck").toLowerCase()}getStatus(){const{_url:e,serverSettings:r}=this;return t.ServerConnection.makeRequest(e,{},r).then(e=>{if(200!==e.status)throw new t.ServerConnection.ResponseError(e);return e.json()}).then(e=>{if("string"!=typeof e.status)throw new Error("Invalid data");if("string"!=typeof e.message)throw new Error("Invalid data");return e})}build(){const{_url:e,serverSettings:r}=this;return t.ServerConnection.makeRequest(e,{method:"POST"},r).then(e=>{if(400===e.status)throw new t.ServerConnection.ResponseError(e,"Build aborted");if(200!==e.status){const r=`Build failed with ${e.status}.\n\n        If you are experiencing the build failure after installing an extension (or trying to include previously installed extension after updating JupyterLab) please check the extension repository for new installation instructions as many extensions migrated to the prebuilt extensions system which no longer requires rebuilding JupyterLab (but uses a different installation procedure, typically involving a package manager such as 'pip' or 'conda').\n\n        If you specifically intended to install a source extension, please run 'jupyter lab build' on the server for full output.`;throw new t.ServerConnection.ResponseError(e,r)}})}cancel(){const{_url:e,serverSettings:r}=this;return t.ServerConnection.makeRequest(e,{method:"DELETE"},r).then(e=>{if(204!==e.status)throw new t.ServerConnection.ResponseError(e)})}get _url(){const{baseUrl:t,appUrl:r}=this.serverSettings;return e.URLExt.join(t,r,"api/build")}},builder}var nbconvert={},hasRequiredNbconvert;function requireNbconvert(){if(hasRequiredNbconvert)return nbconvert;hasRequiredNbconvert=1,Object.defineProperty(nbconvert,"__esModule",{value:!0}),nbconvert.NbConvertManager=void 0;const e=/* @__PURE__ */requireLib$9(),t=requireServerconnection(),r=requireDist();return nbconvert.NbConvertManager=class{constructor(e={}){var r;this._exportFormats=null,this.serverSettings=null!==(r=e.serverSettings)&&void 0!==r?r:t.ServerConnection.makeSettings()}async fetchExportFormats(){this._requestingFormats=new r.PromiseDelegate,this._exportFormats=null;const s=this.serverSettings.baseUrl,n=e.URLExt.join(s,"api/nbconvert"),{serverSettings:i}=this,o=await t.ServerConnection.makeRequest(n,{},i);if(200!==o.status){throw await t.ServerConnection.ResponseError.create(o)}const a=await o.json(),l={};return Object.keys(a).forEach(function(e){const t=a[e].output_mimetype;l[e]={output_mimetype:t}}),this._exportFormats=l,this._requestingFormats.resolve(l),l}async getExportFormats(e=!0){return this._requestingFormats?this._requestingFormats.promise:e||!this._exportFormats?await this.fetchExportFormats():this._exportFormats}async exportAs(t){const{format:r,path:s}=t,{download:n=!1}=t.exporterOptions||{},i=this.serverSettings.baseUrl,o=e.URLExt.encodeParts(s);let a=e.URLExt.join(i,"nbconvert",r,o);n&&(a+="?download=true"),null===window||void 0===window||window.open(a,"_blank","noopener")}},nbconvert}var session$1={},session={},hasRequiredSession$1;function requireSession$1(){return hasRequiredSession$1||(hasRequiredSession$1=1,Object.defineProperty(session,"__esModule",{value:!0})),session}var restapi$2={},validate={},hasRequiredValidate,hasRequiredRestapi$2;function requireValidate(){if(hasRequiredValidate)return validate;hasRequiredValidate=1,Object.defineProperty(validate,"__esModule",{value:!0}),validate.validateModel=r,validate.updateLegacySessionModel=function(e){void 0===e.path&&void 0!==e.notebook&&(e.path=e.notebook.path,e.type="notebook",e.name="")},validate.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid session list");e.forEach(e=>r(e))};const e=requireValidate$2(),t=requireValidate$4();function r(r){(0,t.validateProperty)(r,"id","string"),(0,t.validateProperty)(r,"type","string"),(0,t.validateProperty)(r,"name","string"),(0,t.validateProperty)(r,"path","string"),(0,t.validateProperty)(r,"kernel","object"),(0,e.validateModel)(r.kernel)}return validate}function requireRestapi$2(){return hasRequiredRestapi$2||(hasRequiredRestapi$2=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SessionAPIClient=e.SESSION_SERVICE_URL=void 0,e.listRunning=n,e.getSessionUrl=i,e.shutdownSession=o,e.getSessionModel=a,e.startSession=l,e.updateSession=c;const t=requireServerconnection(),r=/* @__PURE__ */requireLib$9(),s=requireValidate();async function n(n=t.ServerConnection.makeSettings()){const i=r.URLExt.join(n.baseUrl,e.SESSION_SERVICE_URL),o=await t.ServerConnection.makeRequest(i,{},n);if(200!==o.status){throw await t.ServerConnection.ResponseError.create(o)}const a=await o.json();if(!Array.isArray(a))throw new Error("Invalid Session list");return a.forEach(e=>{(0,s.updateLegacySessionModel)(e),(0,s.validateModel)(e)}),a}function i(t,s){const n=r.URLExt.join(t,e.SESSION_SERVICE_URL),i=r.URLExt.join(n,s);if(!i.startsWith(n))throw new Error("Can only be used for services requests");return i}async function o(e,r=t.ServerConnection.makeSettings()){var s;const n=i(r.baseUrl,e),o=await t.ServerConnection.makeRequest(n,{method:"DELETE"},r);if(404===o.status){const t=null!==(s=(await o.json()).message)&&void 0!==s?s:`The session "${e}"" does not exist on the server`;console.warn(t)}else{if(410===o.status)throw new t.ServerConnection.ResponseError(o,"The kernel was deleted but the session was not");if(204!==o.status){throw await t.ServerConnection.ResponseError.create(o)}}}async function a(e,r=t.ServerConnection.makeSettings()){const n=i(r.baseUrl,e),o=await t.ServerConnection.makeRequest(n,{},r);if(200!==o.status){throw await t.ServerConnection.ResponseError.create(o)}const a=await o.json();return(0,s.updateLegacySessionModel)(a),(0,s.validateModel)(a),a}async function l(n,i=t.ServerConnection.makeSettings()){const o=r.URLExt.join(i.baseUrl,e.SESSION_SERVICE_URL),a={method:"POST",body:JSON.stringify(n)},l=await t.ServerConnection.makeRequest(o,a,i);if(201!==l.status){throw await t.ServerConnection.ResponseError.create(l)}const c=await l.json();return(0,s.updateLegacySessionModel)(c),(0,s.validateModel)(c),c}async function c(e,r=t.ServerConnection.makeSettings()){const n=i(r.baseUrl,e.id),o={method:"PATCH",body:JSON.stringify(e)},a=await t.ServerConnection.makeRequest(n,o,r);if(200!==a.status){throw await t.ServerConnection.ResponseError.create(a)}const l=await a.json();return(0,s.updateLegacySessionModel)(l),(0,s.validateModel)(l),l}e.SESSION_SERVICE_URL="api/sessions";e.SessionAPIClient=class{constructor(e){var r;this.serverSettings=null!==(r=e.serverSettings)&&void 0!==r?r:t.ServerConnection.makeSettings()}async listRunning(){return n(this.serverSettings)}async getModel(e){return a(e,this.serverSettings)}async startNew(e){return l(e,this.serverSettings)}async shutdown(e){return o(e,this.serverSettings)}async update(e){return c(e,this.serverSettings)}}}(restapi$2)),restapi$2}var manager$2={},_default$1={},hasRequired_default$1,hasRequiredManager$3,hasRequiredSession;function require_default$1(){if(hasRequired_default$1)return _default$1;hasRequired_default$1=1,Object.defineProperty(_default$1,"__esModule",{value:!0}),_default$1.SessionConnection=void 0;const e=require$$0$2,t=requireLib$7(),r=requireDist(),s=requireRestapi$2();return _default$1.SessionConnection=class{constructor(n){var i,o,a,l,c;this._id="",this._path="",this._name="",this._type="",this._kernel=null,this._isDisposed=!1,this._disposed=new e.Signal(this),this._kernelChanged=new e.Signal(this),this._statusChanged=new e.Signal(this),this._connectionStatusChanged=new e.Signal(this),this._pendingInput=new e.Signal(this),this._iopubMessage=new e.Signal(this),this._unhandledMessage=new e.Signal(this),this._anyMessage=new e.Signal(this),this._propertyChanged=new e.Signal(this),this._id=n.model.id,this._name=n.model.name,this._path=n.model.path,this._type=n.model.type,this._username=null!==(i=n.username)&&void 0!==i?i:"",this._clientId=null!==(o=n.clientId)&&void 0!==o?o:r.UUID.uuid4(),this._connectToKernel=n.connectToKernel,this._kernelConnectionOptions=null!==(a=n.kernelConnectionOptions)&&void 0!==a?a:{},this.serverSettings=null!==(l=n.serverSettings)&&void 0!==l?l:t.ServerConnection.makeSettings(),this._sessionAPIClient=null!==(c=n.sessionAPIClient)&&void 0!==c?c:new s.SessionAPIClient({serverSettings:this.serverSettings}),this.setupKernel(n.model.kernel)}get disposed(){return this._disposed}get kernelChanged(){return this._kernelChanged}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get pendingInput(){return this._pendingInput}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get anyMessage(){return this._anyMessage}get propertyChanged(){return this._propertyChanged}get id(){return this._id}get kernel(){return this._kernel}get path(){return this._path}get type(){return this._type}get name(){return this._name}get model(){return{id:this.id,kernel:this.kernel&&{id:this.kernel.id,name:this.kernel.name},path:this._path,type:this._type,name:this._name}}get isDisposed(){return this._isDisposed}update(e){const t=this.model;if(this._path=e.path,this._name=e.name,this._type=e.type,null===this._kernel&&null!==e.kernel||null!==this._kernel&&null===e.kernel||null!==this._kernel&&null!==e.kernel&&this._kernel.id!==e.kernel.id){null!==this._kernel&&this._kernel.dispose();const t=this._kernel||null;this.setupKernel(e.kernel);const r=this._kernel||null;this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:r})}this._handleModelChange(t)}dispose(){if(!this.isDisposed){if(this._isDisposed=!0,this._disposed.emit(),this._kernel){this._kernel.dispose();const e=this._kernel;this._kernel=null;const t=this._kernel;this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:t})}e.Signal.clearData(this)}}async setPath(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({path:e})}async setName(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({name:e})}async setType(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({type:e})}async changeKernel(e){if(this.isDisposed)throw new Error("Session is disposed");return await this._patch({kernel:e}),this.kernel}async shutdown(){if(this.isDisposed)throw new Error("Session is disposed");await this._sessionAPIClient.shutdown(this.id),this.dispose()}setupKernel(e){if(null===e)return void(this._kernel=null);const t=this._connectToKernel({...this._kernelConnectionOptions,model:e,username:this._username,clientId:this._clientId,serverSettings:this.serverSettings});this._kernel=t,t.statusChanged.connect(this.onKernelStatus,this),t.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),t.pendingInput.connect(this.onPendingInput,this),t.unhandledMessage.connect(this.onUnhandledMessage,this),t.iopubMessage.connect(this.onIOPubMessage,this),t.anyMessage.connect(this.onAnyMessage,this)}onKernelStatus(e,t){this._statusChanged.emit(t)}onKernelConnectionStatus(e,t){this._connectionStatusChanged.emit(t)}onPendingInput(e,t){this._pendingInput.emit(t)}onIOPubMessage(e,t){this._iopubMessage.emit(t)}onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}onAnyMessage(e,t){this._anyMessage.emit(t)}async _patch(e){const t=await this._sessionAPIClient.update({...e,id:this._id});return this.update(t),t}_handleModelChange(e){e.name!==this._name&&this._propertyChanged.emit("name"),e.type!==this._type&&this._propertyChanged.emit("type"),e.path!==this._path&&this._propertyChanged.emit("path")}},_default$1}function requireManager$3(){if(hasRequiredManager$3)return manager$2;hasRequiredManager$3=1,Object.defineProperty(manager$2,"__esModule",{value:!0}),manager$2.SessionManager=void 0;const e=require$$1$1,t=require$$0$2,r=requireServerconnection(),s=requireBasemanager(),n=require_default$1(),i=requireRestapi$2();class o extends s.BaseManager{constructor(r){var s,n;super(r),this._isReady=!1,this._sessionConnections=/* @__PURE__ */new Set,this._models=/* @__PURE__ */new Map,this._runningChanged=new t.Signal(this),this._connectionFailure=new t.Signal(this),this._connectToKernel=e=>this._kernelManager.connectTo(e),this._kernelManager=r.kernelManager,this._sessionAPIClient=null!==(s=r.sessionAPIClient)&&void 0!==s?s:new i.SessionAPIClient({serverSettings:r.serverSettings}),this._pollModels=new e.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:SessionManager#models",standby:null!==(n=r.standby)&&void 0!==n?n:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._kernelManager.isActive&&await this._kernelManager.ready,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._sessionConnections.forEach(e=>e.dispose()),this._pollModels.dispose(),super.dispose())}connectTo(e){const t=new n.SessionConnection({...e,connectToKernel:this._connectToKernel,serverSettings:this.serverSettings,sessionAPIClient:this._sessionAPIClient});return this._onStarted(t),this._models.has(e.model.id)||this.refreshRunning().catch(()=>{}),t}running(){return this._models.values()}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e,t={}){const r=await this._sessionAPIClient.startNew(e);return await this.refreshRunning(),this.connectTo({...t,model:r})}async shutdown(e){await this._sessionAPIClient.shutdown(e),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map(e=>this._sessionAPIClient.shutdown(e))),await this.refreshRunning()}async stopIfNeeded(e){try{const t=(await this._sessionAPIClient.listRunning()).filter(t=>t.path===e);if(1===t.length){const e=t[0].id;await this.shutdown(e)}}catch(t){}}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async findByPath(e){for(const t of this._models.values())if(t.path===e)return t;await this.refreshRunning();for(const t of this._models.values())if(t.path===e)return t}async requestRunning(){var e,t;let s;try{s=await this._sessionAPIClient.listRunning()}catch(n){throw(n instanceof r.ServerConnection.NetworkError||503===(null===(e=n.response)||void 0===e?void 0:e.status)||424===(null===(t=n.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(n),n}this.isDisposed||this._models.size===s.length&&s.every(e=>{var t,r,s,n;const i=this._models.get(e.id);return!!i&&((null===(t=i.kernel)||void 0===t?void 0:t.id)===(null===(r=e.kernel)||void 0===r?void 0:r.id)&&(null===(s=i.kernel)||void 0===s?void 0:s.name)===(null===(n=e.kernel)||void 0===n?void 0:n.name)&&i.name===e.name&&i.path===e.path&&i.type===e.type)})||(this._models=new Map(s.map(e=>[e.id,e])),this._sessionConnections.forEach(e=>{this._models.has(e.id)?e.update(this._models.get(e.id)):e.dispose()}),this._runningChanged.emit(s))}_onStarted(e){this._sessionConnections.add(e),e.disposed.connect(this._onDisposed,this),e.propertyChanged.connect(this._onChanged,this),e.kernelChanged.connect(this._onChanged,this)}_onDisposed(e){this._sessionConnections.delete(e),this.refreshRunning().catch(()=>{})}_onChanged(){this.refreshRunning().catch(()=>{})}}var a;return manager$2.SessionManager=o,(a=o||(manager$2.SessionManager=o={})).NoopManager=class extends a{constructor(){super(...arguments),this._readyPromise=new Promise(()=>{})}get isActive(){return!1}get parentReady(){return super.ready}async startNew(e,t={}){return Promise.reject(new Error("Not implemented in no-op Session Manager"))}connectTo(e){throw Error("Not implemented in no-op Session Manager")}get ready(){return this.parentReady.then(()=>this._readyPromise)}async shutdown(e){return Promise.reject(new Error("Not implemented in no-op Session Manager"))}async requestRunning(){return Promise.resolve()}},manager$2}function requireSession(){return hasRequiredSession||(hasRequiredSession=1,function(e){var t=session$1&&session$1.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=session$1&&session$1.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=session$1&&session$1.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(s,e,n);return r(s,e),s},n=session$1&&session$1.__exportStar||function(e,r){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||t(r,e,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.SessionAPI=e.Session=void 0;const i=s(requireSession$1());e.Session=i;const o=s(requireRestapi$2());e.SessionAPI=o,n(requireManager$3(),e)}(session$1)),session$1}var setting={},lib$7={},dataconnector={},hasRequiredDataconnector;function requireDataconnector(){if(hasRequiredDataconnector)return dataconnector;hasRequiredDataconnector=1,Object.defineProperty(dataconnector,"__esModule",{value:!0}),dataconnector.DataConnector=void 0;return dataconnector.DataConnector=class{async list(e){throw new Error("DataConnector#list method has not been implemented.")}async remove(e){throw new Error("DataConnector#remove method has not been implemented.")}async save(e,t){throw new Error("DataConnector#save method has not been implemented.")}},dataconnector}var interfaces={},hasRequiredInterfaces;function requireInterfaces(){return hasRequiredInterfaces||(hasRequiredInterfaces=1,Object.defineProperty(interfaces,"__esModule",{value:!0})),interfaces}var restorablepool={},Private$r;class AttachedProperty{constructor(e){this._pid=Private$r.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}get(e){let t,r=Private$r.ensureMap(e);return t=this._pid in r?r[this._pid]:r[this._pid]=this._createValue(e),t}set(e,t){let r,s=Private$r.ensureMap(e);r=this._pid in s?s[this._pid]:s[this._pid]=this._createValue(e);let n=this._coerceValue(e,t);this._maybeNotify(e,r,s[this._pid]=n)}coerce(e){let t,r=Private$r.ensureMap(e);t=this._pid in r?r[this._pid]:r[this._pid]=this._createValue(e);let s=this._coerceValue(e,t);this._maybeNotify(e,t,r[this._pid]=s)}_createValue(e){return(0,this._create)(e)}_coerceValue(e,t){let r=this._coerce;return r?r(e,t):t}_compareValue(e,t){let r=this._compare;return r?r(e,t):e===t}_maybeNotify(e,t,r){let s=this._changed;s&&!this._compareValue(t,r)&&s(e,t,r)}}(AttachedProperty||(AttachedProperty={})).clearData=function(e){Private$r.ownerData.delete(e)},function(e){e.ownerData=/* @__PURE__ */new WeakMap,e.nextPID=/* @__PURE__ */(()=>{let e=0;return()=>`pid-${`${Math.random()}`.slice(2)}-${e++}`})(),e.ensureMap=function(t){let r=e.ownerData.get(t);return r||(r=/* @__PURE__ */Object.create(null),e.ownerData.set(t,r),r)}}(Private$r||(Private$r={}));const index_es6=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,get AttachedProperty(){return AttachedProperty}},Symbol.toStringTag,{value:"Module"})),require$$1=/* @__PURE__ */getAugmentedNamespace(index_es6);var hasRequiredRestorablepool;function requireRestorablepool(){if(hasRequiredRestorablepool)return restorablepool;hasRequiredRestorablepool=1,Object.defineProperty(restorablepool,"__esModule",{value:!0}),restorablepool.RestorablePool=void 0;const e=requireDist(),t=require$$1,r=require$$0$2;var s,n;return restorablepool.RestorablePool=class{constructor(t){this._added=new r.Signal(this),this._current=null,this._currentChanged=new r.Signal(this),this._hasRestored=!1,this._isDisposed=!1,this._objects=/* @__PURE__ */new Set,this._restore=null,this._restored=new e.PromiseDelegate,this._updated=new r.Signal(this),this.namespace=t.namespace}get added(){return this._added}get current(){return this._current}set current(e){this._current!==e&&null!==e&&this._objects.has(e)&&(this._current=e,this._currentChanged.emit(this._current))}get currentChanged(){return this._currentChanged}get isDisposed(){return this._isDisposed}get restored(){return this._restored.promise}get size(){return this._objects.size}get updated(){return this._updated}async add(e){var t,r;if(e.isDisposed){const t="A disposed object cannot be added.";throw console.warn(t,e),new Error(t)}if(this._objects.has(e)){const t="This object already exists in the pool.";throw console.warn(t,e),new Error(t)}if(this._objects.add(e),e.disposed.connect(this._onInstanceDisposed,this),!s.injectedProperty.get(e)){if(this._restore){const{connector:n}=this._restore,i=this._restore.name(e);if(i){const o=`${this.namespace}:${i}`,a=null===(r=(t=this._restore).args)||void 0===r?void 0:r.call(t,e);s.nameProperty.set(e,o),await n.save(o,{data:a})}}this._added.emit(e)}}dispose(){this.isDisposed||(this._current=null,this._isDisposed=!0,this._objects.clear(),r.Signal.clearData(this))}find(e){const t=this._objects.values();for(const r of t)if(e(r))return r}forEach(e){this._objects.forEach(e)}filter(e){const t=[];return this.forEach(r=>{e(r)&&t.push(r)}),t}inject(e){return s.injectedProperty.set(e,!0),this.add(e)}has(e){return this._objects.has(e)}async restore(e){if(this._hasRestored)throw new Error("This pool has already been restored.");this._hasRestored=!0;const{command:t,connector:r,registry:s,when:n}=e,i=this.namespace,o=n?[r.list(i)].concat(n):[r.list(i)];this._restore=e;const[a]=await Promise.all(o),l=await Promise.all(a.ids.map(async(e,n)=>{const i=a.values[n],o=i&&i.data;return void 0===o?r.remove(e):s.execute(t,o).catch(()=>r.remove(e))}));return this._restored.resolve(),l}async save(e){var t,r;const n=s.injectedProperty.get(e);if(!this._restore||!this.has(e)||n)return;const{connector:i}=this._restore,o=this._restore.name(e),a=s.nameProperty.get(e),l=o?`${this.namespace}:${o}`:"";if(a&&a!==l&&await i.remove(a),s.nameProperty.set(e,l),l){const s=null===(r=(t=this._restore).args)||void 0===r?void 0:r.call(t,e);await i.save(l,{data:s})}a!==l&&this._updated.emit(e)}_onInstanceDisposed(e){if(this._objects.delete(e),e===this._current&&(this._current=null,this._currentChanged.emit(this._current)),s.injectedProperty.get(e))return;if(!this._restore)return;const{connector:t}=this._restore,r=s.nameProperty.get(e);r&&t.remove(r)}},(n=s||(s={})).injectedProperty=new t.AttachedProperty({name:"injected",create:()=>!1}),n.nameProperty=new t.AttachedProperty({name:"name",create:()=>""}),restorablepool}var statedb={},hasRequiredStatedb;function requireStatedb(){if(hasRequiredStatedb)return statedb;hasRequiredStatedb=1,Object.defineProperty(statedb,"__esModule",{value:!0}),statedb.StateDB=void 0;const e=require$$0$2;class t{constructor(r={}){this._changed=new e.Signal(this);const{connector:s,transform:n}=r;this._connector=s||new t.Connector,this._ready=n?n.then(e=>{const{contents:t,type:r}=e;switch(r){case"cancel":default:return;case"clear":return this._clear();case"merge":return this._merge(t||{});case"overwrite":return this._overwrite(t||{})}}):Promise.resolve(void 0)}get changed(){return this._changed}async clear(){await this._ready,await this._clear()}async fetch(e){return await this._ready,this._fetch(e)}async list(e){return await this._ready,this._list(e)}async remove(e){await this._ready,await this._remove(e),this._changed.emit({id:e,type:"remove"})}async save(e,t){await this._ready,await this._save(e,t),this._changed.emit({id:e,type:"save"})}async toJSON(){await this._ready;const{ids:e,values:t}=await this._list();return t.reduce((t,r,s)=>(t[e[s]]=r,t),{})}async _clear(){await Promise.all((await this._list()).ids.map(e=>this._remove(e)))}async _fetch(e){const t=await this._connector.fetch(e);if(t)return JSON.parse(t).v}async _list(e=""){const{ids:t,values:r}=await this._connector.list(e);return{ids:t,values:r.map(e=>JSON.parse(e).v)}}async _merge(e){await Promise.all(Object.keys(e).map(t=>e[t]&&this._save(t,e[t])))}async _overwrite(e){await this._clear(),await this._merge(e)}async _remove(e){return this._connector.remove(e)}async _save(e,t){return this._connector.save(e,JSON.stringify({v:t}))}}return statedb.StateDB=t,(t||(statedb.StateDB=t={})).Connector=class{constructor(){this._storage={}}async fetch(e){return this._storage[e]}async list(e=""){return Object.keys(this._storage).reduce((t,r)=>(""!==e&&e!==r.split(":")[0]||(t.ids.push(r),t.values.push(this._storage[r])),t),{ids:[],values:[]})}async remove(e){delete this._storage[e]}async save(e,t){this._storage[e]=t}},statedb}var tokens$1={},hasRequiredTokens$1,hasRequiredLib$8,hasRequiredSetting;function requireTokens$1(){if(hasRequiredTokens$1)return tokens$1;hasRequiredTokens$1=1,Object.defineProperty(tokens$1,"__esModule",{value:!0}),tokens$1.IStateDB=void 0;const e=requireDist();return tokens$1.IStateDB=new e.Token("@jupyterlab/coreutils:IStateDB",'A service for the JupyterLab state database.\n  Use this if you want to store data that will persist across page loads.\n  See "state database" for more information.'),tokens$1}function requireLib$8(){return hasRequiredLib$8||(hasRequiredLib$8=1,e=lib$7,t=lib$7&&lib$7.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=lib$7&&lib$7.__exportStar||function(e,r){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||t(r,e,s)},Object.defineProperty(e,"__esModule",{value:!0}),r(/* @__PURE__ */requireDataconnector(),e),r(/* @__PURE__ */requireInterfaces(),e),r(/* @__PURE__ */requireRestorablepool(),e),r(/* @__PURE__ */requireStatedb(),e),r(/* @__PURE__ */requireTokens$1(),e)),lib$7;var e,t,r}function requireSetting(){if(hasRequiredSetting)return setting;hasRequiredSetting=1,Object.defineProperty(setting,"__esModule",{value:!0}),setting.SettingManager=void 0;const e=/* @__PURE__ */requireLib$9(),t=/* @__PURE__ */requireLib$8(),r=requireServerconnection();class s extends t.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings()}async fetch(e){if(!e)throw new Error("Plugin `id` parameter is required for settings fetch.");const{serverSettings:t}=this,{baseUrl:s,appUrl:i}=t,{makeRequest:o,ResponseError:a}=r.ServerConnection,l=s+i,c=n.url(l,e),d=await o(c,{},t);if(200!==d.status){throw await a.create(d)}return d.json()}async list(e){var t,s,i,o;const{serverSettings:a}=this,{baseUrl:l,appUrl:c}=a,{makeRequest:d,ResponseError:h}=r.ServerConnection,u=l+c,p=n.url(u,"","ids"===e),g=await d(p,{},a);if(200!==g.status)throw new h(g);const m=await g.json(),f=null!==(s=null===(t=null==m?void 0:m.settings)||void 0===t?void 0:t.map(e=>e.id))&&void 0!==s?s:[];let v=[];return e||(v=null!==(o=null===(i=null==m?void 0:m.settings)||void 0===i?void 0:i.map(e=>(e.data={composite:{},user:{}},e)))&&void 0!==o?o:[]),{ids:f,values:v}}async save(e,t){const{serverSettings:s}=this,{baseUrl:i,appUrl:o}=s,{makeRequest:a,ResponseError:l}=r.ServerConnection,c=i+o,d=n.url(c,e),h={body:JSON.stringify({raw:t}),method:"PUT"},u=await a(d,h,s);if(204!==u.status)throw new l(u)}}var n;return setting.SettingManager=s,(n||(n={})).url=function(t,r,s){const n=s?e.URLExt.objectToQueryString({ids_only:!0}):"",i=e.URLExt.join(t,"api/settings"),o=e.URLExt.join(i,r);if(!o.startsWith(i))throw new Error("Can only be used for workspaces requests");return`${o}${n}`},setting}var terminal$1={},terminal={},restapi$1={},hasRequiredRestapi$1,hasRequiredTerminal$1;function requireRestapi$1(){return hasRequiredRestapi$1||(hasRequiredRestapi$1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TerminalAPIClient=e.TERMINAL_SERVICE_URL=void 0,e.isAvailable=s,e.startNew=n,e.listRunning=i,e.shutdownTerminal=o;const t=/* @__PURE__ */requireLib$9(),r=requireServerconnection();function s(){return"true"===String(t.PageConfig.getOption("terminalsAvailable")).toLowerCase()}async function n(s=r.ServerConnection.makeSettings(),n,i){a.errorIfNotAvailable();const o=t.URLExt.join(s.baseUrl,e.TERMINAL_SERVICE_URL),l={method:"POST",body:JSON.stringify({name:n,cwd:i})},c=await r.ServerConnection.makeRequest(o,l,s);if(200!==c.status){throw await r.ServerConnection.ResponseError.create(c)}return await c.json()}async function i(s=r.ServerConnection.makeSettings()){a.errorIfNotAvailable();const n=t.URLExt.join(s.baseUrl,e.TERMINAL_SERVICE_URL),i=await r.ServerConnection.makeRequest(n,{},s);if(200!==i.status){throw await r.ServerConnection.ResponseError.create(i)}const o=await i.json();if(!Array.isArray(o))throw new Error("Invalid terminal list");return o}async function o(s,n=r.ServerConnection.makeSettings()){var i;a.errorIfNotAvailable();const o=t.URLExt.join(n.baseUrl,e.TERMINAL_SERVICE_URL),l=t.URLExt.join(o,s);if(!l.startsWith(o))throw new Error("Can only be used for terminal requests");const c=await r.ServerConnection.makeRequest(l,{method:"DELETE"},n);if(404===c.status){const e=null!==(i=(await c.json()).message)&&void 0!==i?i:`The terminal session "${s}"" does not exist on the server`;console.warn(e)}else if(204!==c.status){throw await r.ServerConnection.ResponseError.create(c)}}e.TERMINAL_SERVICE_URL="api/terminals";var a;e.TerminalAPIClient=class{constructor(e={}){var t;this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings()}get isAvailable(){return s()}async startNew(e={}){const{name:t,cwd:r}=e;return n(this.serverSettings,t,r)}async listRunning(){return i(this.serverSettings)}async shutdown(e){return o(e,this.serverSettings)}},(a||(a={})).errorIfNotAvailable=function(){if(!s())throw new Error("Terminals Unavailable")}}(restapi$1)),restapi$1}function requireTerminal$1(){return hasRequiredTerminal$1||(hasRequiredTerminal$1=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isAvailable=void 0;const t=requireRestapi$1();Object.defineProperty(e,"isAvailable",{enumerable:!0,get:function(){return t.isAvailable}})}(terminal)),terminal}var manager$1={},_default={},hasRequired_default,hasRequiredManager$2,hasRequiredTerminal;function require_default(){if(hasRequired_default)return _default;hasRequired_default=1,Object.defineProperty(_default,"__esModule",{value:!0}),_default.TerminalConnection=void 0;const e=/* @__PURE__ */requireLib$9(),t=requireDist(),r=require$$0$2,s=requireLib$7(),n=requireRestapi$1();class i{constructor(t){var i,o;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const t=this._name,r=this.serverSettings;let s=e.URLExt.join(r.wsUrl,"terminals","websocket",encodeURIComponent(t));const n=r.token;r.appendToken&&""!==n&&(s+=`?token=${encodeURIComponent(n)}`),this._ws=new r.WebSocket(s),this._ws.onmessage=this._onWSMessage,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSMessage=e=>{if(this._isDisposed)return;const t=JSON.parse(e.data);"disconnect"===t[0]&&this.dispose(),"connecting"!==this._connectionStatus?this._messageReceived.emit({type:t[0],content:t.slice(1)}):"setup"===t[0]&&this._updateConnectionStatus("connected")},this._onWSClose=e=>{console.warn(`Terminal websocket closed: ${e.code}`),this.isDisposed||this._reconnect()},this._connectionStatus="connecting",this._connectionStatusChanged=new r.Signal(this),this._isDisposed=!1,this._disposed=new r.Signal(this),this._messageReceived=new r.Signal(this),this._reconnectTimeout=null,this._ws=null,this._noOp=()=>{},this._reconnectLimit=7,this._reconnectAttempt=0,this._pendingMessages=[],this._name=t.model.name,this.serverSettings=null!==(i=t.serverSettings)&&void 0!==i?i:s.ServerConnection.makeSettings(),this._terminalAPIClient=null!==(o=t.terminalAPIClient)&&void 0!==o?o:new n.TerminalAPIClient({serverSettings:this.serverSettings}),this._createSocket()}get disposed(){return this._disposed}get messageReceived(){return this._messageReceived}get name(){return this._name}get model(){return{name:this._name}}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearSocket(),r.Signal.clearData(this))}send(e){this._sendMessage(e)}_sendMessage(e,t=!0){if(!this._isDisposed&&e.content)if("connected"===this.connectionStatus&&this._ws){const t=[e.type,...e.content];this._ws.send(JSON.stringify(t))}else{if(!t)throw new Error(`Could not send message: ${JSON.stringify(e)}`);this._pendingMessages.push(e)}}_sendPending(){for(;"connected"===this.connectionStatus&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}reconnect(){this._errorIfDisposed();const e=new t.PromiseDelegate,r=(t,s)=>{"connected"===s?(e.resolve(),this.connectionStatusChanged.disconnect(r,this)):"disconnected"===s&&(e.reject(new Error("Terminal connection disconnected")),this.connectionStatusChanged.disconnect(r,this))};return this.connectionStatusChanged.connect(r,this),this._reconnectAttempt=0,this._reconnect(),e.promise}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=o.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.error(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}async shutdown(){await this._terminalAPIClient.shutdown(this.name),this.dispose()}clone(){return new i({model:this.model,serverSettings:this.serverSettings,terminalAPIClient:this._terminalAPIClient})}_updateConnectionStatus(e){this._connectionStatus!==e&&(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"connected"===e&&this._sendPending(),this._connectionStatusChanged.emit(e))}_errorIfDisposed(){if(this.isDisposed)throw new Error("Terminal connection is disposed")}get connectionStatusChanged(){return this._connectionStatusChanged}get connectionStatus(){return this._connectionStatus}}var o;return _default.TerminalConnection=i,(o||(o={})).getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},_default}function requireManager$2(){if(hasRequiredManager$2)return manager$1;hasRequiredManager$2=1,Object.defineProperty(manager$1,"__esModule",{value:!0}),manager$1.TerminalManager=void 0;const e=require$$1$1,t=require$$0$2,r=requireLib$7(),s=requireBasemanager(),n=requireRestapi$1(),i=require_default();class o extends s.BaseManager{constructor(r={}){var s,i;if(super(r),this._isReady=!1,this._names=[],this._terminalConnections=/* @__PURE__ */new Set,this._runningChanged=new t.Signal(this),this._connectionFailure=new t.Signal(this),this._terminalAPIClient=null!==(s=r.terminalAPIClient)&&void 0!==s?s:new n.TerminalAPIClient({serverSettings:this.serverSettings}),!this.isAvailable())return this._ready=Promise.reject("Terminals unavailable"),void this._ready.catch(e=>{});const o=this._pollModels=new e.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:TerminalManager#models",standby:null!==(i=r.standby)&&void 0!==i?i:"when-hidden"});this._ready=(async()=>{await o.start(),await o.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){var e;this.isDisposed||(this._names.length=0,this._terminalConnections.forEach(e=>e.dispose()),null===(e=this._pollModels)||void 0===e||e.dispose(),super.dispose())}isAvailable(){return this._terminalAPIClient.isAvailable}connectTo(e){const t=new i.TerminalConnection({...e,serverSettings:this.serverSettings,terminalAPIClient:this._terminalAPIClient});return this._onStarted(t),this._names.includes(e.model.name)||this.refreshRunning().catch(()=>{}),t}running(){return this._models[Symbol.iterator]()}async refreshRunning(){this._pollModels&&(await this._pollModels.refresh(),await this._pollModels.tick)}async startNew(e={}){const{name:t,cwd:r}=e,s=await this._terminalAPIClient.startNew({name:t,cwd:r});return await this.refreshRunning(),this.connectTo({model:s})}async shutdown(e){await this._terminalAPIClient.shutdown(e),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all(this._names.map(e=>this._terminalAPIClient.shutdown(e))),await this.refreshRunning()}async requestRunning(){var e,t;let s;try{s=await this._terminalAPIClient.listRunning()}catch(i){throw(i instanceof r.ServerConnection.NetworkError||503===(null===(e=i.response)||void 0===e?void 0:e.status)||424===(null===(t=i.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(i),i}if(this.isDisposed)return;const n=s.map(({name:e})=>e).sort();n!==this._names&&(this._names=n,this._terminalConnections.forEach(e=>{n.includes(e.name)||e.dispose()}),this._runningChanged.emit(this._models))}_onStarted(e){this._terminalConnections.add(e),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._terminalConnections.delete(e),this.refreshRunning().catch(()=>{})}get _models(){return this._names.map(e=>({name:e}))}}var a;return manager$1.TerminalManager=o,(a=o||(manager$1.TerminalManager=o={})).NoopManager=class extends a{constructor(){super(...arguments),this._readyPromise=new Promise(()=>{})}get isActive(){return!1}get parentReady(){return super.ready}get ready(){return this.parentReady.then(()=>this._readyPromise)}async startNew(e){return Promise.reject(new Error("Not implemented in no-op Terminal Manager"))}connectTo(e){throw Error("Not implemented in no-op Terminal Manager")}async shutdown(e){return Promise.reject(new Error("Not implemented in no-op Terminal Manager"))}async requestRunning(){return Promise.resolve()}},manager$1}function requireTerminal(){return hasRequiredTerminal||(hasRequiredTerminal=1,function(e){var t=terminal$1&&terminal$1.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=terminal$1&&terminal$1.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=terminal$1&&terminal$1.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(s,e,n);return r(s,e),s},n=terminal$1&&terminal$1.__exportStar||function(e,r){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||t(r,e,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.TerminalAPI=e.Terminal=void 0;const i=s(requireTerminal$1());e.Terminal=i;const o=s(requireRestapi$1());e.TerminalAPI=o,n(requireManager$2(),e)}(terminal$1)),terminal$1}var user$1={},user={},hasRequiredUser$1;function requireUser$1(){return hasRequiredUser$1||(hasRequiredUser$1=1,Object.defineProperty(user,"__esModule",{value:!0})),user}var restapi={},hasRequiredRestapi;function requireRestapi(){if(hasRequiredRestapi)return restapi;hasRequiredRestapi=1,Object.defineProperty(restapi,"__esModule",{value:!0}),restapi.UserAPIClient=void 0;const e=requireServerconnection(),t=/* @__PURE__ */requireLib$9();return restapi.UserAPIClient=class{constructor(t={}){var r;this.serverSettings=null!==(r=t.serverSettings)&&void 0!==r?r:e.ServerConnection.makeSettings()}async get(){const{baseUrl:r}=this.serverSettings,{makeRequest:s,ResponseError:n}=e.ServerConnection,i=t.URLExt.join(r,"api/me"),o=await s(i,{},this.serverSettings);if(200!==o.status){throw await n.create(o)}return await o.json()}},restapi}var manager={},hasRequiredManager$1,hasRequiredUser;function requireManager$1(){if(hasRequiredManager$1)return manager;hasRequiredManager$1=1,Object.defineProperty(manager,"__esModule",{value:!0}),manager.UserManager=void 0;const e=requireDist(),t=require$$1$1,r=require$$0$2,s=requireBasemanager(),n=requireRestapi(),i="@jupyterlab/services:UserManager#user";class o extends s.BaseManager{constructor(e={}){var s,o;super(e),this._isReady=!1,this._userChanged=new r.Signal(this),this._connectionFailure=new r.Signal(this),this._userApiClient=null!==(s=e.userApiClient)&&void 0!==s?s:new n.UserAPIClient({serverSettings:this.serverSettings}),this._ready=this.requestUser().then(()=>{this.isDisposed||(this._isReady=!0)}).catch(e=>new Promise(()=>{})),this._pollUser=new t.Poll({auto:!1,factory:()=>this.requestUser(),frequency:{interval:61e3,backoff:!0,max:3e5},name:i,standby:null!==(o=e.standby)&&void 0!==o?o:"when-hidden"}),this.ready.then(()=>{this._pollUser.start()})}get isReady(){return this._isReady}get ready(){return this._ready}get identity(){return this._identity}get permissions(){return this._permissions}get userChanged(){return this._userChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollUser.dispose(),super.dispose()}async refreshUser(){await this._pollUser.refresh(),await this._pollUser.tick}async requestUser(){if(this.isDisposed)return;const t={identity:this._identity,permissions:this._permissions},r=await this._userApiClient.get(),s=r.identity,{localStorage:n}=window,o=n.getItem(i);if(o&&(!s.initials||!s.color)){const e=JSON.parse(o);s.initials=s.initials||e.initials||s.name.substring(0,1),s.color=s.color||e.color||a.getRandomColor()}e.JSONExt.deepEqual(r,t)||(this._identity=s,this._permissions=r.permissions,n.setItem(i,JSON.stringify(s)),this._userChanged.emit(r))}}var a;return manager.UserManager=o,function(e){const t=["var(--jp-collaborator-color1)","var(--jp-collaborator-color2)","var(--jp-collaborator-color3)","var(--jp-collaborator-color4)","var(--jp-collaborator-color5)","var(--jp-collaborator-color6)","var(--jp-collaborator-color7)"];e.getRandomColor=()=>t[Math.floor(Math.random()*t.length)]}(a||(a={})),manager}function requireUser(){return hasRequiredUser||(hasRequiredUser=1,function(e){var t=user$1&&user$1.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=user$1&&user$1.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=user$1&&user$1.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(s,e,n);return r(s,e),s},n=user$1&&user$1.__exportStar||function(e,r){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||t(r,e,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.UserAPI=e.User=void 0;const i=s(requireUser$1());e.User=i;const o=s(requireRestapi());e.UserAPI=o,n(requireManager$1(),e)}(user$1)),user$1}var workspace={},hasRequiredWorkspace,hasRequiredManager;function requireWorkspace(){if(hasRequiredWorkspace)return workspace;hasRequiredWorkspace=1,Object.defineProperty(workspace,"__esModule",{value:!0}),workspace.WorkspaceManager=void 0;const e=/* @__PURE__ */requireLib$9(),t=/* @__PURE__ */requireLib$8(),r=requireServerconnection();class s extends t.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings()}async fetch(e){const{serverSettings:t}=this,{baseUrl:s,appUrl:i}=t,{makeRequest:o,ResponseError:a}=r.ServerConnection,l=s+i,c=n.url(l,e),d=await o(c,{},t);if(200!==d.status){throw await a.create(d)}return d.json()}async list(){const{serverSettings:e}=this,{baseUrl:t,appUrl:s}=e,{makeRequest:i,ResponseError:o}=r.ServerConnection,a=t+s,l=n.url(a,""),c=await i(l,{},e);if(200!==c.status){throw await o.create(c)}return(await c.json()).workspaces}async remove(e){const{serverSettings:t}=this,{baseUrl:s,appUrl:i}=t,{makeRequest:o,ResponseError:a}=r.ServerConnection,l=s+i,c=n.url(l,e),d=await o(c,{method:"DELETE"},t);if(204!==d.status){throw await a.create(d)}}async save(e,t){const{serverSettings:s}=this,{baseUrl:i,appUrl:o}=s,{makeRequest:a,ResponseError:l}=r.ServerConnection,c=i+o,d=n.url(c,e),h={body:JSON.stringify(t),method:"PUT"},u=await a(d,h,s);if(204!==u.status){throw await l.create(u)}}}var n;return workspace.WorkspaceManager=s,(n||(n={})).url=function(t,r){const s=e.URLExt.join(t,"api/workspaces"),n=e.URLExt.join(s,r);if(!n.startsWith(s))throw new Error("Can only be used for workspaces requests");return n},workspace}function requireManager(){if(hasRequiredManager)return manager$3;hasRequiredManager=1,Object.defineProperty(manager$3,"__esModule",{value:!0}),manager$3.ServiceManager=void 0;const e=require$$0$2,t=requireBuilder(),r=requireContents(),s=requireEvent(),n=requireKernel(),i=requireKernelspec(),o=requireNbconvert(),a=requireServerconnection(),l=requireSession(),c=requireSetting(),d=requireTerminal(),h=requireUser(),u=requireWorkspace();return manager$3.ServiceManager=class{constructor(p={}){var g,m;this._isDisposed=!1,this._connectionFailure=new e.Signal(this),this._isReady=!1;const f=p.defaultDrive,v=null!==(g=p.serverSettings)&&void 0!==g?g:a.ServerConnection.makeSettings(),_={defaultDrive:f,serverSettings:v,standby:null!==(m=p.standby)&&void 0!==m?m:"when-hidden"};this.serverSettings=v,this.contents=p.contents||new r.ContentsManager(_),this.events=p.events||new s.EventManager(_),this.kernels=p.kernels||new n.KernelManager(_),this.sessions=p.sessions||new l.SessionManager({..._,kernelManager:this.kernels}),this.settings=p.settings||new c.SettingManager(_),this.terminals=p.terminals||new d.TerminalManager(_),this.builder=p.builder||new t.BuildManager(_),this.workspaces=p.workspaces||new u.WorkspaceManager(_),this.nbconvert=p.nbconvert||new o.NbConvertManager(_),this.kernelspecs=p.kernelspecs||new i.KernelSpecManager(_),this.user=p.user||new h.UserManager(_),this.kernelspecs.connectionFailure.connect(this._onConnectionFailure,this),this.sessions.connectionFailure.connect(this._onConnectionFailure,this),this.terminals.connectionFailure.connect(this._onConnectionFailure,this);const y=[this.sessions.ready,this.kernelspecs.ready];this.terminals.isAvailable()&&y.push(this.terminals.ready),this._readyPromise=Promise.all(y).then(()=>{this._isReady=!0})}get connectionFailure(){return this._connectionFailure}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,e.Signal.clearData(this),this.contents.dispose(),this.events.dispose(),this.sessions.dispose(),this.terminals.dispose())}get isReady(){return this._isReady}get ready(){return this._readyPromise}_onConnectionFailure(e,t){this._connectionFailure.emit(t)}},manager$3}var tokens={},hasRequiredTokens,hasRequiredLib$7;function requireTokens(){if(hasRequiredTokens)return tokens;hasRequiredTokens=1,Object.defineProperty(tokens,"__esModule",{value:!0}),tokens.IWorkspaceManager=tokens.IUserManager=tokens.ITerminalManager=tokens.IServiceManager=tokens.ISettingManager=tokens.ISessionManager=tokens.IServerSettings=tokens.INbConvertManager=tokens.IKernelSpecManager=tokens.IKernelManager=tokens.IEventManager=tokens.IDefaultDrive=tokens.IDefaultContentProvider=tokens.IContentsManager=tokens.IConfigSectionManager=tokens.IConnectionStatus=void 0;const e=requireDist();return tokens.IConnectionStatus=new e.Token("@jupyterlab/application:IConnectionStatus","A service providing the application connection status."),tokens.IConfigSectionManager=new e.Token("@jupyterlab/services:IConfigSectionManager","A service providing the config section manager."),tokens.IContentsManager=new e.Token("@jupyterlab/services:IContentsManager","The contents manager token."),tokens.IDefaultContentProvider=new e.Token("@jupyterlab/services:IDefaultContentProvider","The default content provider for the contents manager."),tokens.IDefaultDrive=new e.Token("@jupyterlab/services:IDefaultDrive","The default drive for the contents manager."),tokens.IEventManager=new e.Token("@jupyterlab/services:IEventManager","The event manager token."),tokens.IKernelManager=new e.Token("@jupyterlab/services:IKernelManager","The kernel manager token."),tokens.IKernelSpecManager=new e.Token("@jupyterlab/services:IKernelSpecManager","The kernel spec manager token."),tokens.INbConvertManager=new e.Token("@jupyterlab/services:INbConvertManager","The nbconvert manager token."),tokens.IServerSettings=new e.Token("@jupyterlab/services:IServerSettings","The server settings for the application."),tokens.ISessionManager=new e.Token("@jupyterlab/services:ISessionManager","The session manager token."),tokens.ISettingManager=new e.Token("@jupyterlab/services:ISettingManager","The setting manager token."),tokens.IServiceManager=new e.Token("@jupyterlab/services:IServiceManager","The service manager for the application."),tokens.ITerminalManager=new e.Token("@jupyterlab/services:ITerminalManager","The terminal manager token."),tokens.IUserManager=new e.Token("@jupyterlab/services:IUserManager","The user manager token."),tokens.IWorkspaceManager=new e.Token("@jupyterlab/services:IWorkspaceManager","The workspace manager token."),tokens}function requireLib$7(){return hasRequiredLib$7||(hasRequiredLib$7=1,e=lib$9,t=lib$9&&lib$9.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=lib$9&&lib$9.__exportStar||function(e,r){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||t(r,e,s)},Object.defineProperty(e,"__esModule",{value:!0}),r(requireBasemanager(),e),r(requireConfig(),e),r(requireConnectionstatus(),e),r(requireContents(),e),r(requireEvent(),e),r(requireKernel(),e),r(requireKernelspec(),e),r(requireManager(),e),r(requireServerconnection(),e),r(requireSession(),e),r(requireSetting(),e),r(requireTerminal(),e),r(requireTokens(),e),r(requireUser(),e),r(requireWorkspace(),e),r(requireNbconvert(),e)),lib$9;var e,t,r}var libExports$3=requireLib$7(),_listCacheClear,hasRequired_listCacheClear,eq_1,hasRequiredEq,_assocIndexOf,hasRequired_assocIndexOf,_listCacheDelete,hasRequired_listCacheDelete,_listCacheGet,hasRequired_listCacheGet,_listCacheHas,hasRequired_listCacheHas,_listCacheSet,hasRequired_listCacheSet,_ListCache,hasRequired_ListCache,_stackClear,hasRequired_stackClear,_stackDelete,hasRequired_stackDelete,_stackGet,hasRequired_stackGet,_stackHas,hasRequired_stackHas,_freeGlobal,hasRequired_freeGlobal,_root,hasRequired_root,_Symbol,hasRequired_Symbol,_getRawTag,hasRequired_getRawTag,_objectToString,hasRequired_objectToString,_baseGetTag,hasRequired_baseGetTag,isObject_1,hasRequiredIsObject,isFunction_1,hasRequiredIsFunction,_coreJsData,hasRequired_coreJsData,_isMasked,hasRequired_isMasked,_toSource,hasRequired_toSource,_baseIsNative,hasRequired_baseIsNative,_getValue,hasRequired_getValue,_getNative,hasRequired_getNative,_Map,hasRequired_Map,_nativeCreate,hasRequired_nativeCreate,_hashClear,hasRequired_hashClear,_hashDelete,hasRequired_hashDelete,_hashGet,hasRequired_hashGet,_hashHas,hasRequired_hashHas,_hashSet,hasRequired_hashSet,_Hash,hasRequired_Hash,_mapCacheClear,hasRequired_mapCacheClear,_isKeyable,hasRequired_isKeyable,_getMapData,hasRequired_getMapData,_mapCacheDelete,hasRequired_mapCacheDelete,_mapCacheGet,hasRequired_mapCacheGet,_mapCacheHas,hasRequired_mapCacheHas,_mapCacheSet,hasRequired_mapCacheSet,_MapCache,hasRequired_MapCache,_stackSet,hasRequired_stackSet,_Stack,hasRequired_Stack,_arrayEach,hasRequired_arrayEach,_defineProperty,hasRequired_defineProperty,_baseAssignValue,hasRequired_baseAssignValue,_assignValue,hasRequired_assignValue,_copyObject,hasRequired_copyObject,_baseTimes,hasRequired_baseTimes,isObjectLike_1,hasRequiredIsObjectLike,_baseIsArguments,hasRequired_baseIsArguments,isArguments_1,hasRequiredIsArguments,isArray_1,hasRequiredIsArray;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;return hasRequired_listCacheClear=1,_listCacheClear=function(){this.__data__=[],this.size=0}}function requireEq(){if(hasRequiredEq)return eq_1;return hasRequiredEq=1,eq_1=function(e,t){return e===t||e!=e&&t!=t}}function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var e=requireEq();return _assocIndexOf=function(t,r){for(var s=t.length;s--;)if(e(t[s][0],r))return s;return-1}}function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var e=require_assocIndexOf(),t=Array.prototype.splice;return _listCacheDelete=function(r){var s=this.__data__,n=e(s,r);return!(n<0)&&(n==s.length-1?s.pop():t.call(s,n,1),--this.size,!0)}}function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var e=require_assocIndexOf();return _listCacheGet=function(t){var r=this.__data__,s=e(r,t);return s<0?void 0:r[s][1]}}function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var e=require_assocIndexOf();return _listCacheHas=function(t){return e(this.__data__,t)>-1}}function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var e=require_assocIndexOf();return _listCacheSet=function(t,r){var s=this.__data__,n=e(s,t);return n<0?(++this.size,s.push([t,r])):s[n][1]=r,this}}function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var e=require_listCacheClear(),t=require_listCacheDelete(),r=require_listCacheGet(),s=require_listCacheHas(),n=require_listCacheSet();function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=n,_ListCache=i}function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var e=require_ListCache();return _stackClear=function(){this.__data__=new e,this.size=0}}function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;return hasRequired_stackDelete=1,_stackDelete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}}function require_stackGet(){if(hasRequired_stackGet)return _stackGet;return hasRequired_stackGet=1,_stackGet=function(e){return this.__data__.get(e)}}function require_stackHas(){if(hasRequired_stackHas)return _stackHas;return hasRequired_stackHas=1,_stackHas=function(e){return this.__data__.has(e)}}function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var e="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis;return _freeGlobal=e}function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var e=require_freeGlobal(),t="object"==typeof self&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return _root=r}function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var e=require_root().Symbol;return _Symbol=e}function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var e=require_Symbol(),t=Object.prototype,r=t.hasOwnProperty,s=t.toString,n=e?e.toStringTag:void 0;return _getRawTag=function(e){var t=r.call(e,n),i=e[n];try{e[n]=void 0;var o=!0}catch(l){}var a=s.call(e);return o&&(t?e[n]=i:delete e[n]),a}}function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var e=Object.prototype.toString;return _objectToString=function(t){return e.call(t)}}function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var e=require_Symbol(),t=require_getRawTag(),r=require_objectToString(),s=e?e.toStringTag:void 0;return _baseGetTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?t(e):r(e)}}function requireIsObject(){if(hasRequiredIsObject)return isObject_1;return hasRequiredIsObject=1,isObject_1=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var e=require_baseGetTag(),t=requireIsObject();return isFunction_1=function(r){if(!t(r))return!1;var s=e(r);return"[object Function]"==s||"[object GeneratorFunction]"==s||"[object AsyncFunction]"==s||"[object Proxy]"==s}}function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var e=require_root()["__core-js_shared__"];return _coreJsData=e}function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var e,t=require_coreJsData(),r=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return _isMasked=function(e){return!!r&&r in e}}function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var e=Function.prototype.toString;return _toSource=function(t){if(null!=t){try{return e.call(t)}catch(r){}try{return t+""}catch(r){}}return""}}function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var e=requireIsFunction(),t=require_isMasked(),r=requireIsObject(),s=require_toSource(),n=/^\[object .+?Constructor\]$/,i=Function.prototype,o=Object.prototype,a=i.toString,l=o.hasOwnProperty,c=RegExp("^"+a.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return _baseIsNative=function(i){return!(!r(i)||t(i))&&(e(i)?c:n).test(s(i))}}function require_getValue(){if(hasRequired_getValue)return _getValue;return hasRequired_getValue=1,_getValue=function(e,t){return null==e?void 0:e[t]}}function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var e=require_baseIsNative(),t=require_getValue();return _getNative=function(r,s){var n=t(r,s);return e(n)?n:void 0}}function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var e=require_getNative()(require_root(),"Map");return _Map=e}function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var e=require_getNative()(Object,"create");return _nativeCreate=e}function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var e=require_nativeCreate();return _hashClear=function(){this.__data__=e?e(null):{},this.size=0}}function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;return hasRequired_hashDelete=1,_hashDelete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}}function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var e=require_nativeCreate(),t=Object.prototype.hasOwnProperty;return _hashGet=function(r){var s=this.__data__;if(e){var n=s[r];return"__lodash_hash_undefined__"===n?void 0:n}return t.call(s,r)?s[r]:void 0}}function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var e=require_nativeCreate(),t=Object.prototype.hasOwnProperty;return _hashHas=function(r){var s=this.__data__;return e?void 0!==s[r]:t.call(s,r)}}function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var e=require_nativeCreate();return _hashSet=function(t,r){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=e&&void 0===r?"__lodash_hash_undefined__":r,this}}function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var e=require_hashClear(),t=require_hashDelete(),r=require_hashGet(),s=require_hashHas(),n=require_hashSet();function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=n,_Hash=i}function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var e=require_Hash(),t=require_ListCache(),r=require_Map();return _mapCacheClear=function(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}}function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;return hasRequired_isKeyable=1,_isKeyable=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}}function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var e=require_isKeyable();return _getMapData=function(t,r){var s=t.__data__;return e(r)?s["string"==typeof r?"string":"hash"]:s.map}}function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var e=require_getMapData();return _mapCacheDelete=function(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r}}function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var e=require_getMapData();return _mapCacheGet=function(t){return e(this,t).get(t)}}function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var e=require_getMapData();return _mapCacheHas=function(t){return e(this,t).has(t)}}function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var e=require_getMapData();return _mapCacheSet=function(t,r){var s=e(this,t),n=s.size;return s.set(t,r),this.size+=s.size==n?0:1,this}}function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var e=require_mapCacheClear(),t=require_mapCacheDelete(),r=require_mapCacheGet(),s=require_mapCacheHas(),n=require_mapCacheSet();function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=n,_MapCache=i}function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var e=require_ListCache(),t=require_Map(),r=require_MapCache();return _stackSet=function(s,n){var i=this.__data__;if(i instanceof e){var o=i.__data__;if(!t||o.length<199)return o.push([s,n]),this.size=++i.size,this;i=this.__data__=new r(o)}return i.set(s,n),this.size=i.size,this}}function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var e=require_ListCache(),t=require_stackClear(),r=require_stackDelete(),s=require_stackGet(),n=require_stackHas(),i=require_stackSet();function o(t){var r=this.__data__=new e(t);this.size=r.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=s,o.prototype.has=n,o.prototype.set=i,_Stack=o}function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;return hasRequired_arrayEach=1,_arrayEach=function(e,t){for(var r=-1,s=null==e?0:e.length;++r<s&&!1!==t(e[r],r,e););return e}}function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty;hasRequired_defineProperty=1;var e=require_getNative(),t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(r){}}();return _defineProperty=t}function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var e=require_defineProperty();return _baseAssignValue=function(t,r,s){"__proto__"==r&&e?e(t,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[r]=s}}function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var e=require_baseAssignValue(),t=requireEq(),r=Object.prototype.hasOwnProperty;return _assignValue=function(s,n,i){var o=s[n];r.call(s,n)&&t(o,i)&&(void 0!==i||n in s)||e(s,n,i)}}function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var e=require_assignValue(),t=require_baseAssignValue();return _copyObject=function(r,s,n,i){var o=!n;n||(n={});for(var a=-1,l=s.length;++a<l;){var c=s[a],d=i?i(n[c],r[c],c,n,r):void 0;void 0===d&&(d=r[c]),o?t(n,c,d):e(n,c,d)}return n}}function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;return hasRequired_baseTimes=1,_baseTimes=function(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}}function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;return hasRequiredIsObjectLike=1,isObjectLike_1=function(e){return null!=e&&"object"==typeof e}}function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var e=require_baseGetTag(),t=requireIsObjectLike();return _baseIsArguments=function(r){return t(r)&&"[object Arguments]"==e(r)}}function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var e=require_baseIsArguments(),t=requireIsObjectLike(),r=Object.prototype,s=r.hasOwnProperty,n=r.propertyIsEnumerable,i=e(/* @__PURE__ */function(){return arguments}())?e:function(e){return t(e)&&s.call(e,"callee")&&!n.call(e,"callee")};return isArguments_1=i}function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var e=Array.isArray;return isArray_1=e}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse,hasRequiredIsBuffer,_isIndex,hasRequired_isIndex,isLength_1,hasRequiredIsLength,_baseIsTypedArray,hasRequired_baseIsTypedArray,_baseUnary,hasRequired_baseUnary;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;return hasRequiredStubFalse=1,stubFalse_1=function(){return!1}}function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,e=isBuffer,t=isBuffer.exports,r=require_root(),s=requireStubFalse(),n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n?r.Buffer:void 0,a=(o?o.isBuffer:void 0)||s,e.exports=a),isBuffer.exports;var e,t,r,s,n,i,o,a}function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var e=/^(?:0|[1-9]\d*)$/;return _isIndex=function(t,r){var s=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==s||"symbol"!=s&&e.test(t))&&t>-1&&t%1==0&&t<r}}function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;return isLength_1=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}}function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var e=require_baseGetTag(),t=requireIsLength(),r=requireIsObjectLike(),s={};return s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,_baseIsTypedArray=function(n){return r(n)&&t(n.length)&&!!s[e(n)]}}function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;return hasRequired_baseUnary=1,_baseUnary=function(e){return function(t){return e(t)}}}isBuffer.exports;var _nodeUtil={exports:{}},hasRequired_nodeUtil,isTypedArray_1,hasRequiredIsTypedArray,_arrayLikeKeys,hasRequired_arrayLikeKeys,_isPrototype,hasRequired_isPrototype,_overArg,hasRequired_overArg,_nativeKeys,hasRequired_nativeKeys,_baseKeys,hasRequired_baseKeys,isArrayLike_1,hasRequiredIsArrayLike,keys_1,hasRequiredKeys,_baseAssign,hasRequired_baseAssign,_nativeKeysIn,hasRequired_nativeKeysIn,_baseKeysIn,hasRequired_baseKeysIn,keysIn_1,hasRequiredKeysIn,_baseAssignIn,hasRequired_baseAssignIn;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,e=_nodeUtil,t=_nodeUtil.exports,r=require_freeGlobal(),s=t&&!t.nodeType&&t,n=s&&e&&!e.nodeType&&e,i=n&&n.exports===s&&r.process,o=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}(),e.exports=o),_nodeUtil.exports;var e,t,r,s,n,i,o}function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var e=require_baseIsTypedArray(),t=require_baseUnary(),r=require_nodeUtil(),s=r&&r.isTypedArray,n=s?t(s):e;return isTypedArray_1=n}function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var e=require_baseTimes(),t=requireIsArguments(),r=requireIsArray(),s=requireIsBuffer(),n=require_isIndex(),i=requireIsTypedArray(),o=Object.prototype.hasOwnProperty;return _arrayLikeKeys=function(a,l){var c=r(a),d=!c&&t(a),h=!c&&!d&&s(a),u=!c&&!d&&!h&&i(a),p=c||d||h||u,g=p?e(a.length,String):[],m=g.length;for(var f in a)!l&&!o.call(a,f)||p&&("length"==f||h&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||n(f,m))||g.push(f);return g}}function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var e=Object.prototype;return _isPrototype=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}}function require_overArg(){if(hasRequired_overArg)return _overArg;return hasRequired_overArg=1,_overArg=function(e,t){return function(r){return e(t(r))}}}function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var e=require_overArg()(Object.keys,Object);return _nativeKeys=e}function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var e=require_isPrototype(),t=require_nativeKeys(),r=Object.prototype.hasOwnProperty;return _baseKeys=function(s){if(!e(s))return t(s);var n=[];for(var i in Object(s))r.call(s,i)&&"constructor"!=i&&n.push(i);return n}}function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var e=requireIsFunction(),t=requireIsLength();return isArrayLike_1=function(r){return null!=r&&t(r.length)&&!e(r)}}function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var e=require_arrayLikeKeys(),t=require_baseKeys(),r=requireIsArrayLike();return keys_1=function(s){return r(s)?e(s):t(s)}}function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var e=require_copyObject(),t=requireKeys();return _baseAssign=function(r,s){return r&&e(s,t(s),r)}}function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;return hasRequired_nativeKeysIn=1,_nativeKeysIn=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}}function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var e=requireIsObject(),t=require_isPrototype(),r=require_nativeKeysIn(),s=Object.prototype.hasOwnProperty;return _baseKeysIn=function(n){if(!e(n))return r(n);var i=t(n),o=[];for(var a in n)("constructor"!=a||!i&&s.call(n,a))&&o.push(a);return o}}function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var e=require_arrayLikeKeys(),t=require_baseKeysIn(),r=requireIsArrayLike();return keysIn_1=function(s){return r(s)?e(s,!0):t(s)}}function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var e=require_copyObject(),t=requireKeysIn();return _baseAssignIn=function(r,s){return r&&e(s,t(s),r)}}_nodeUtil.exports;var _cloneBuffer={exports:{}},hasRequired_cloneBuffer,_copyArray,hasRequired_copyArray,_arrayFilter,hasRequired_arrayFilter,stubArray_1,hasRequiredStubArray,_getSymbols,hasRequired_getSymbols,_copySymbols,hasRequired_copySymbols,_arrayPush,hasRequired_arrayPush,_getPrototype,hasRequired_getPrototype,_getSymbolsIn,hasRequired_getSymbolsIn,_copySymbolsIn,hasRequired_copySymbolsIn,_baseGetAllKeys,hasRequired_baseGetAllKeys,_getAllKeys,hasRequired_getAllKeys,_getAllKeysIn,hasRequired_getAllKeysIn,_DataView,hasRequired_DataView,_Promise,hasRequired_Promise,_Set,hasRequired_Set,_WeakMap,hasRequired_WeakMap,_getTag,hasRequired_getTag,_initCloneArray,hasRequired_initCloneArray,_Uint8Array,hasRequired_Uint8Array,_cloneArrayBuffer,hasRequired_cloneArrayBuffer,_cloneDataView,hasRequired_cloneDataView,_cloneRegExp,hasRequired_cloneRegExp,_cloneSymbol,hasRequired_cloneSymbol,_cloneTypedArray,hasRequired_cloneTypedArray,_initCloneByTag,hasRequired_initCloneByTag,_baseCreate,hasRequired_baseCreate,_initCloneObject,hasRequired_initCloneObject,_baseIsMap,hasRequired_baseIsMap,isMap_1,hasRequiredIsMap,_baseIsSet,hasRequired_baseIsSet,isSet_1,hasRequiredIsSet,_baseClone,hasRequired_baseClone,cloneDeep_1,hasRequiredCloneDeep;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,e=_cloneBuffer,t=_cloneBuffer.exports,r=require_root(),s=t&&!t.nodeType&&t,n=s&&e&&!e.nodeType&&e,i=n&&n.exports===s?r.Buffer:void 0,o=i?i.allocUnsafe:void 0,e.exports=function(e,t){if(t)return e.slice();var r=e.length,s=o?o(r):new e.constructor(r);return e.copy(s),s}),_cloneBuffer.exports;var e,t,r,s,n,i,o}function require_copyArray(){if(hasRequired_copyArray)return _copyArray;return hasRequired_copyArray=1,_copyArray=function(e,t){var r=-1,s=e.length;for(t||(t=Array(s));++r<s;)t[r]=e[r];return t}}function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;return hasRequired_arrayFilter=1,_arrayFilter=function(e,t){for(var r=-1,s=null==e?0:e.length,n=0,i=[];++r<s;){var o=e[r];t(o,r,e)&&(i[n++]=o)}return i}}function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;return hasRequiredStubArray=1,stubArray_1=function(){return[]}}function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var e=require_arrayFilter(),t=requireStubArray(),r=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;return _getSymbols=s?function(t){return null==t?[]:(t=Object(t),e(s(t),function(e){return r.call(t,e)}))}:t}function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var e=require_copyObject(),t=require_getSymbols();return _copySymbols=function(r,s){return e(r,t(r),s)}}function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;return hasRequired_arrayPush=1,_arrayPush=function(e,t){for(var r=-1,s=t.length,n=e.length;++r<s;)e[n+r]=t[r];return e}}function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var e=require_overArg()(Object.getPrototypeOf,Object);return _getPrototype=e}function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var e=require_arrayPush(),t=require_getPrototype(),r=require_getSymbols(),s=requireStubArray(),n=Object.getOwnPropertySymbols;return _getSymbolsIn=n?function(s){for(var n=[];s;)e(n,r(s)),s=t(s);return n}:s}function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var e=require_copyObject(),t=require_getSymbolsIn();return _copySymbolsIn=function(r,s){return e(r,t(r),s)}}function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var e=require_arrayPush(),t=requireIsArray();return _baseGetAllKeys=function(r,s,n){var i=s(r);return t(r)?i:e(i,n(r))}}function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var e=require_baseGetAllKeys(),t=require_getSymbols(),r=requireKeys();return _getAllKeys=function(s){return e(s,r,t)}}function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var e=require_baseGetAllKeys(),t=require_getSymbolsIn(),r=requireKeysIn();return _getAllKeysIn=function(s){return e(s,r,t)}}function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var e=require_getNative()(require_root(),"DataView");return _DataView=e}function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var e=require_getNative()(require_root(),"Promise");return _Promise=e}function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var e=require_getNative()(require_root(),"Set");return _Set=e}function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var e=require_getNative()(require_root(),"WeakMap");return _WeakMap=e}function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var e=require_DataView(),t=require_Map(),r=require_Promise(),s=require_Set(),n=require_WeakMap(),i=require_baseGetTag(),o=require_toSource(),a="[object Map]",l="[object Promise]",c="[object Set]",d="[object WeakMap]",h="[object DataView]",u=o(e),p=o(t),g=o(r),m=o(s),f=o(n),v=i;return(e&&v(new e(new ArrayBuffer(1)))!=h||t&&v(new t)!=a||r&&v(r.resolve())!=l||s&&v(new s)!=c||n&&v(new n)!=d)&&(v=function(e){var t=i(e),r="[object Object]"==t?e.constructor:void 0,s=r?o(r):"";if(s)switch(s){case u:return h;case p:return a;case g:return l;case m:return c;case f:return d}return t}),_getTag=v}function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var e=Object.prototype.hasOwnProperty;return _initCloneArray=function(t){var r=t.length,s=new t.constructor(r);return r&&"string"==typeof t[0]&&e.call(t,"index")&&(s.index=t.index,s.input=t.input),s}}function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var e=require_root().Uint8Array;return _Uint8Array=e}function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var e=require_Uint8Array();return _cloneArrayBuffer=function(t){var r=new t.constructor(t.byteLength);return new e(r).set(new e(t)),r}}function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var e=require_cloneArrayBuffer();return _cloneDataView=function(t,r){var s=r?e(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.byteLength)}}function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var e=/\w*$/;return _cloneRegExp=function(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}}function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var e=require_Symbol(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;return _cloneSymbol=function(e){return r?Object(r.call(e)):{}}}function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var e=require_cloneArrayBuffer();return _cloneTypedArray=function(t,r){var s=r?e(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}}function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var e=require_cloneArrayBuffer(),t=require_cloneDataView(),r=require_cloneRegExp(),s=require_cloneSymbol(),n=require_cloneTypedArray();return _initCloneByTag=function(i,o,a){var l=i.constructor;switch(o){case"[object ArrayBuffer]":return e(i);case"[object Boolean]":case"[object Date]":return new l(+i);case"[object DataView]":return t(i,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n(i,a);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(i);case"[object RegExp]":return r(i);case"[object Symbol]":return s(i)}}}function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var e=requireIsObject(),t=Object.create;return _baseCreate=/* @__PURE__ */function(){function r(){}return function(s){if(!e(s))return{};if(t)return t(s);r.prototype=s;var n=new r;return r.prototype=void 0,n}}()}function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var e=require_baseCreate(),t=require_getPrototype(),r=require_isPrototype();return _initCloneObject=function(s){return"function"!=typeof s.constructor||r(s)?{}:e(t(s))}}function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var e=require_getTag(),t=requireIsObjectLike();return _baseIsMap=function(r){return t(r)&&"[object Map]"==e(r)}}function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var e=require_baseIsMap(),t=require_baseUnary(),r=require_nodeUtil(),s=r&&r.isMap,n=s?t(s):e;return isMap_1=n}function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var e=require_getTag(),t=requireIsObjectLike();return _baseIsSet=function(r){return t(r)&&"[object Set]"==e(r)}}function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var e=require_baseIsSet(),t=require_baseUnary(),r=require_nodeUtil(),s=r&&r.isSet,n=s?t(s):e;return isSet_1=n}function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var e=require_Stack(),t=require_arrayEach(),r=require_assignValue(),s=require_baseAssign(),n=require_baseAssignIn(),i=require_cloneBuffer(),o=require_copyArray(),a=require_copySymbols(),l=require_copySymbolsIn(),c=require_getAllKeys(),d=require_getAllKeysIn(),h=require_getTag(),u=require_initCloneArray(),p=require_initCloneByTag(),g=require_initCloneObject(),m=requireIsArray(),f=requireIsBuffer(),v=requireIsMap(),_=requireIsObject(),y=requireIsSet(),b=requireKeys(),C=requireKeysIn(),w="[object Arguments]",S="[object Function]",x="[object Object]",P={};return P[w]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[x]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[S]=P["[object WeakMap]"]=!1,_baseClone=function E(k,A,R,I,T,M){var $,L=1&A,D=2&A,O=4&A;if(R&&($=T?R(k,I,T,M):R(k)),void 0!==$)return $;if(!_(k))return k;var N=m(k);if(N){if($=u(k),!L)return o(k,$)}else{var j=h(k),B=j==S||"[object GeneratorFunction]"==j;if(f(k))return i(k,L);if(j==x||j==w||B&&!T){if($=D||B?{}:g(k),!L)return D?l(k,n($,k)):a(k,s($,k))}else{if(!P[j])return T?k:{};$=p(k,j,L)}}M||(M=new e);var q=M.get(k);if(q)return q;M.set(k,$),y(k)?k.forEach(function(e){$.add(E(e,A,R,e,k,M))}):v(k)&&k.forEach(function(e,t){$.set(t,E(e,A,R,t,k,M))});var F=N?void 0:(O?D?d:c:D?C:b)(k);return t(F||k,function(e,t){F&&(e=k[t=e]),r($,t,E(e,A,R,t,k,M))}),$},_baseClone}function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var e=require_baseClone();return cloneDeep_1=function(t){return e(t,5)}}_cloneBuffer.exports;var cloneDeepExports=requireCloneDeep();const cloneDeep=/* @__PURE__ */getDefaultExportFromCjs(cloneDeepExports);var _assignMergeValue,hasRequired_assignMergeValue,_createBaseFor,hasRequired_createBaseFor,_baseFor,hasRequired_baseFor,isArrayLikeObject_1,hasRequiredIsArrayLikeObject,isPlainObject_1,hasRequiredIsPlainObject$1,_safeGet,hasRequired_safeGet,toPlainObject_1,hasRequiredToPlainObject,_baseMergeDeep,hasRequired_baseMergeDeep,_baseMerge,hasRequired_baseMerge,identity_1,hasRequiredIdentity,_apply,hasRequired_apply,_overRest,hasRequired_overRest,constant_1,hasRequiredConstant,_baseSetToString,hasRequired_baseSetToString,_shortOut,hasRequired_shortOut,_setToString,hasRequired_setToString,_baseRest,hasRequired_baseRest,_isIterateeCall,hasRequired_isIterateeCall,_createAssigner,hasRequired_createAssigner,merge_1,hasRequiredMerge;function require_assignMergeValue(){if(hasRequired_assignMergeValue)return _assignMergeValue;hasRequired_assignMergeValue=1;var e=require_baseAssignValue(),t=requireEq();return _assignMergeValue=function(r,s,n){(void 0!==n&&!t(r[s],n)||void 0===n&&!(s in r))&&e(r,s,n)}}function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;return hasRequired_createBaseFor=1,_createBaseFor=function(e){return function(t,r,s){for(var n=-1,i=Object(t),o=s(t),a=o.length;a--;){var l=o[e?a:++n];if(!1===r(i[l],l,i))break}return t}}}function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var e=require_createBaseFor()();return _baseFor=e}function requireIsArrayLikeObject(){if(hasRequiredIsArrayLikeObject)return isArrayLikeObject_1;hasRequiredIsArrayLikeObject=1;var e=requireIsArrayLike(),t=requireIsObjectLike();return isArrayLikeObject_1=function(r){return t(r)&&e(r)}}function requireIsPlainObject$1(){if(hasRequiredIsPlainObject$1)return isPlainObject_1;hasRequiredIsPlainObject$1=1;var e=require_baseGetTag(),t=require_getPrototype(),r=requireIsObjectLike(),s=Function.prototype,n=Object.prototype,i=s.toString,o=n.hasOwnProperty,a=i.call(Object);return isPlainObject_1=function(s){if(!r(s)||"[object Object]"!=e(s))return!1;var n=t(s);if(null===n)return!0;var l=o.call(n,"constructor")&&n.constructor;return"function"==typeof l&&l instanceof l&&i.call(l)==a}}function require_safeGet(){if(hasRequired_safeGet)return _safeGet;return hasRequired_safeGet=1,_safeGet=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}}function requireToPlainObject(){if(hasRequiredToPlainObject)return toPlainObject_1;hasRequiredToPlainObject=1;var e=require_copyObject(),t=requireKeysIn();return toPlainObject_1=function(r){return e(r,t(r))}}function require_baseMergeDeep(){if(hasRequired_baseMergeDeep)return _baseMergeDeep;hasRequired_baseMergeDeep=1;var e=require_assignMergeValue(),t=require_cloneBuffer(),r=require_cloneTypedArray(),s=require_copyArray(),n=require_initCloneObject(),i=requireIsArguments(),o=requireIsArray(),a=requireIsArrayLikeObject(),l=requireIsBuffer(),c=requireIsFunction(),d=requireIsObject(),h=requireIsPlainObject$1(),u=requireIsTypedArray(),p=require_safeGet(),g=requireToPlainObject();return _baseMergeDeep=function(m,f,v,_,y,b,C){var w=p(m,v),S=p(f,v),x=C.get(S);if(x)e(m,v,x);else{var P=b?b(w,S,v+"",m,f,C):void 0,E=void 0===P;if(E){var k=o(S),A=!k&&l(S),R=!k&&!A&&u(S);P=S,k||A||R?o(w)?P=w:a(w)?P=s(w):A?(E=!1,P=t(S,!0)):R?(E=!1,P=r(S,!0)):P=[]:h(S)||i(S)?(P=w,i(w)?P=g(w):d(w)&&!c(w)||(P=n(S))):E=!1}E&&(C.set(S,P),y(P,S,_,b,C),C.delete(S)),e(m,v,P)}}}function require_baseMerge(){if(hasRequired_baseMerge)return _baseMerge;hasRequired_baseMerge=1;var e=require_Stack(),t=require_assignMergeValue(),r=require_baseFor(),s=require_baseMergeDeep(),n=requireIsObject(),i=requireKeysIn(),o=require_safeGet();return _baseMerge=function a(l,c,d,h,u){l!==c&&r(c,function(r,i){if(u||(u=new e),n(r))s(l,c,i,d,a,h,u);else{var p=h?h(o(l,i),r,i+"",l,c,u):void 0;void 0===p&&(p=r),t(l,i,p)}},i)},_baseMerge}function requireIdentity(){if(hasRequiredIdentity)return identity_1;return hasRequiredIdentity=1,identity_1=function(e){return e}}function require_apply(){if(hasRequired_apply)return _apply;return hasRequired_apply=1,_apply=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}}function require_overRest(){if(hasRequired_overRest)return _overRest;hasRequired_overRest=1;var e=require_apply(),t=Math.max;return _overRest=function(r,s,n){return s=t(void 0===s?r.length-1:s,0),function(){for(var i=arguments,o=-1,a=t(i.length-s,0),l=Array(a);++o<a;)l[o]=i[s+o];o=-1;for(var c=Array(s+1);++o<s;)c[o]=i[o];return c[s]=n(l),e(r,this,c)}},_overRest}function requireConstant(){if(hasRequiredConstant)return constant_1;return hasRequiredConstant=1,constant_1=function(e){return function(){return e}}}function require_baseSetToString(){if(hasRequired_baseSetToString)return _baseSetToString;hasRequired_baseSetToString=1;var e=requireConstant(),t=require_defineProperty(),r=requireIdentity();return _baseSetToString=t?function(r,s){return t(r,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:r}function require_shortOut(){if(hasRequired_shortOut)return _shortOut;hasRequired_shortOut=1;var e=Date.now;return _shortOut=function(t){var r=0,s=0;return function(){var n=e(),i=16-(n-s);if(s=n,i>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}},_shortOut}function require_setToString(){if(hasRequired_setToString)return _setToString;hasRequired_setToString=1;var e=require_baseSetToString(),t=require_shortOut()(e);return _setToString=t}function require_baseRest(){if(hasRequired_baseRest)return _baseRest;hasRequired_baseRest=1;var e=requireIdentity(),t=require_overRest(),r=require_setToString();return _baseRest=function(s,n){return r(t(s,n,e),s+"")}}function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var e=requireEq(),t=requireIsArrayLike(),r=require_isIndex(),s=requireIsObject();return _isIterateeCall=function(n,i,o){if(!s(o))return!1;var a=typeof i;return!!("number"==a?t(o)&&r(i,o.length):"string"==a&&i in o)&&e(o[i],n)}}function require_createAssigner(){if(hasRequired_createAssigner)return _createAssigner;hasRequired_createAssigner=1;var e=require_baseRest(),t=require_isIterateeCall();return _createAssigner=function(r){return e(function(e,s){var n=-1,i=s.length,o=i>1?s[i-1]:void 0,a=i>2?s[2]:void 0;for(o=r.length>3&&"function"==typeof o?(i--,o):void 0,a&&t(s[0],s[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++n<i;){var l=s[n];l&&r(e,l,n,o)}return e})}}function requireMerge(){if(hasRequiredMerge)return merge_1;hasRequiredMerge=1;var e=require_baseMerge(),t=require_createAssigner()(function(t,r,s){e(t,r,s)});return merge_1=t}var mergeExports=requireMerge();const merge=/* @__PURE__ */getDefaultExportFromCjs(mergeExports),jupyterLabThemeDefs={animation:{easeOutCubic:"cubic-bezier(0.33, 1, 0.68, 1)"},borderWidths:[0,"1px"],breakpoints:["544px","768px","1012px","1280px"],fonts:{normal:"var(--jp-ui-font-family, sans-serif)",mono:"var(--jp-code-font-family, monospace)"},fontSizes:["10.833px","var(--jp-ui-font-size1, 13px)","15.6px","18.72px","22.464px","25.96px","32.35px","38.82px","46.58px"],fontWeights:{light:300,normal:400,semibold:500,bold:600},lineHeights:{condensedUltra:1,condensed:1.25,default:1.5},radii:["0","calc(var(--jp-border-radius) * 0.5)","var(--jp-border-radius)","100px"],sizes:{small:"544px",medium:"768px",large:"1012px",xlarge:"1280px"},space:["0","4px","8px","16px","24px","32px","40px","48px","64px","80px","96px","112px","128px"],colorSchemes:{light:{colors:{canvasDefaultTransparent:"rgba(255,255,255,0)",pageHeaderBg:"var(--jp-layout-color1, white)",marketingIcon:{primary:"var(--jp-brand-color1, #1976d2)",secondary:"var(--jp-brand-color3, #bbdefb)"},diffBlob:{addition:{numText:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",fg:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",numBg:"var(--jp-success-color2, #81c784)",lineBg:"var(--jp-success-color3, #c8e6c9)",wordBg:"var(--jp-success-color0, #1b5e20)"},deletion:{numText:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",fg:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",numBg:"var(--jp-error-color2, #e57373)",lineBg:"var(--jp-error-color3, #ffcdd2)",wordBg:"var(--jp-error-color0, #b71c1c)"},hunk:{numBg:"var(--jp-brand-color0, #0d47a1)"},expander:{icon:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.54))"}},diffstat:{deletionBorder:"var(--jp-border-color1, #bdbdbd)",additionBorder:"var(--jp-border-color1, #bdbdbd)",additionBg:"var(--jp-accent-color1, #388e3c)"},searchKeyword:{hl:"var(--jp-warn-color3, #ffe0b2)"},prettylights:{syntax:{comment:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.38))",constant:"#0550ae",entity:"#6639ba",storageModifierImport:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",entityTag:"#116329",keyword:"var(--jp-error-color1, #d32f2f)",string:"#0a3069",variable:"#953800",brackethighlighterUnmatched:"#82071e",invalidIllegalText:"var(--jp-layout-color1, white)",invalidIllegalBg:"#82071e",carriageReturnText:"var(--jp-layout-color1, white)",carriageReturnBg:"var(--jp-error-color1, #d32f2f)",stringRegexp:"#116329",markupList:"#3b2300",markupHeading:"#0550ae",markupItalic:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",markupBold:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",markupDeletedText:"#82071e",markupDeletedBg:"var(--jp-error-color3, #ffcdd2)",markupInsertedText:"#116329",markupInsertedBg:"var(--jp-success-color3, #c8e6c9)",markupChangedText:"#953800",markupChangedBg:"#ffd8b5",markupIgnoredText:"var(--jp-layout-color2, #eee)",markupIgnoredBg:"#0550ae",metaDiffRange:"var(--jp-info-color1, #0097a7)",brackethighlighterAngle:"#57606a",sublimelinterGutterMark:"var(--jp-layout-color4, #757575)",constantOtherReferenceLink:"#0a3069"}},codemirror:{text:"var(--jp-content-font-color1, rgba(255, 255, 255, 1))",bg:"var(--jp-layout-color0, #111)",guttersBg:"var(--jp-layout-color2, #424242)",guttermarkerText:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",guttermarkerSubtleText:"var(--jp-ui-font-color3, rgba(255, 255, 255, 0.38))",linenumberText:"var(--jp-ui-font-color2, rgba(255, 255, 255, 0.54))",cursor:"var(--jp-editor-cursor-color)",selectionBg:"var(--jp-editor-selected-background)",activelineBg:"color-mix(in srgb, var(--jp-layout-color3, #616161) 25%, transparent)",matchingbracketText:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",linesBg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",syntax:{comment:"var(--jp-mirror-editor-comment-color, #408080)",constant:"var(--jp-mirror-editor-property-color, #05a)",entity:"var(--jp-info-color1, #0097a7)",keyword:"var(--jp-mirror-editor-keyword-color, #008000)",storage:"var(--jp-error-color1, #d32f2f)",string:"var(--jp-mirror-editor-string-color, #ba2121)",support:"var(--jp-mirror-editor-property-color, #05a)",variable:"var(--jp-mirror-editor-variable-color, #212121)"}},checks:{bg:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",textPrimary:"var(--jp-layout-color1, white)",textSecondary:"var(--jp-layout-color4, #757575)",textLink:"#54aeff",btnIcon:"#afb8c1",btnHoverIcon:"var(--jp-layout-color1, white)",btnHoverBg:"rgba(255,255,255,0.125)",inputText:"var(--jp-layout-color2, #eee)",inputPlaceholderText:"var(--jp-layout-color4, #757575)",inputFocusText:"var(--jp-layout-color4, #757575)",inputBg:"#32383f",donutError:"#fa4549",donutPending:"#bf8700",donutSuccess:"var(--jp-accent-color1, #388e3c)",donutNeutral:"#afb8c1",dropdownText:"#afb8c1",dropdownBg:"#32383f",dropdownBorder:"#424a53",dropdownShadow:"rgba(31,35,40,0.3)",dropdownHoverText:"var(--jp-layout-color1, white)",dropdownHoverBg:"#424a53",dropdownBtnHoverText:"var(--jp-layout-color1, white)",dropdownBtnHoverBg:"#32383f",scrollbarThumbBg:"#57606a",headerLabelText:"var(--jp-border-color1, #bdbdbd)",headerLabelOpenText:"var(--jp-layout-color1, white)",headerBorder:"#32383f",headerIcon:"var(--jp-layout-color4, #757575)",lineText:"var(--jp-border-color1, #bdbdbd)",lineNumText:"rgba(140,149,159,0.75)",lineTimestampText:"var(--jp-layout-color4, #757575)",lineHoverBg:"#32383f",lineSelectedBg:"rgba(33,139,255,0.15)",lineSelectedNumText:"#54aeff",lineDtFmText:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",lineDtFmBg:"var(--jp-warn-color2, #ffb74d)",gateBg:"rgba(125,78,0,0.15)",gateText:"var(--jp-border-color1, #bdbdbd)",gateWaitingText:"#d4a72c",stepHeaderOpenBg:"#32383f",stepErrorText:"#ff8182",stepWarningText:"#d4a72c",loglineText:"var(--jp-layout-color4, #757575)",loglineNumText:"rgba(140,149,159,0.75)",loglineDebugText:"#c297ff",loglineErrorText:"var(--jp-border-color1, #bdbdbd)",loglineErrorNumText:"#ff8182",loglineErrorBg:"rgba(164,14,38,0.15)",loglineWarningText:"var(--jp-border-color1, #bdbdbd)",loglineWarningNumText:"#d4a72c",loglineWarningBg:"rgba(125,78,0,0.15)",loglineCommandText:"#54aeff",loglineSectionText:"#4ac26b",ansi:{black:"#24292f",blackBright:"#32383f",white:"#d0d7de",whiteBright:"#d0d7de",gray:"#8c959f",red:"#ff8182",redBright:"#ffaba8",green:"#4ac26b",greenBright:"#6fdd8b",yellow:"#d4a72c",yellowBright:"#eac54f",blue:"#54aeff",blueBright:"#80ccff",magenta:"#c297ff",magentaBright:"#d8b9ff",cyan:"#76e3ea",cyanBright:"#b3f0ff"}},project:{headerBg:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",sidebarBg:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",gradientIn:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",gradientOut:"rgba(255,255,255,0)"},mktg:{btn:{bg:"#1b1f23"}},control:{borderColor:{emphasis:"var(--jp-inverse-border-color, #757575)"}},avatar:{bg:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",border:"var(--jp-border-color1, #bdbdbd)",stackFade:"#afb8c1",stackFadeMore:"var(--jp-border-color1, #bdbdbd)"},topicTag:{border:"rgba(0,0,0,0)"},counter:{border:"rgba(0,0,0,0)"},selectMenu:{backdropBorder:"rgba(0,0,0,0)",tapHighlight:"rgba(175,184,193,0.5)",tapFocusBg:"#b6e3ff"},overlay:{backdrop:"rgba(140,149,159,0.2)"},header:{text:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",bg:"var(--jp-inverse-layout-color1, #212121)",divider:"var(--jp-inverse-layout-color2, #424242)",logo:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))"},headerSearch:{bg:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",border:"#57606a"},sidenav:{selectedBg:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))"},menu:{bgActive:"rgba(0,0,0,0)"},input:{disabledBg:"var(--jp-layout-color2, #eee)"},timeline:{badgeBg:"var(--jp-layout-color2, #eee)"},ansi:{black:"#0e1116",blackBright:"#20252c",white:"#ced5dc",whiteBright:"#ced5dc",gray:"#88929d",red:"#ee5a5d",redBright:"#ff8e8a",green:"#26a148",greenBright:"#43c663",yellow:"#b58407",yellowBright:"#d5a824",blue:"#368cf9",blueBright:"#67b3fd",magenta:"#a371f7",magentaBright:"#c49bff",cyan:"#76e3ea",cyanBright:"#b3f0ff"},btn:{text:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",bg:"var(--jp-layout-color1, white)",border:"var(--jp-border-color1, #bdbdbd)",hoverBg:"var(--jp-layout-color2, #eee)",hoverBorder:"var(--jp-border-color1, #bdbdbd)",activeBg:"var(--jp-layout-color3, #bdbdbd)",activeBorder:"var(--jp-border-color1, #bdbdbd)",selectedBg:"var(--jp-layout-color0, white)",counterBg:"var(--jp-layout-color4, #757575)",primary:{text:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",bg:"var(--jp-brand-color1, #388e3c)",border:"var(--jp-border-color1, #bdbdbd)",hoverBg:"var(--jp-brand-color2, #81c784)",hoverBorder:"var(--jp-border-color1, #bdbdbd)",selectedBg:"var(--jp-brand-color0, #1b5e20)",disabledText:"var(--jp-ui-inverse-font-color2, rgba(255, 255, 255, 0.7))",disabledBg:"var(--jp-brand-color3, #c8e6c9)",disabledBorder:"var(--jp-border-color1, #bdbdbd)",icon:"var(--jp-ui-inverse-font-color2, rgba(255, 255, 255, 0.7))",counterBg:"var(--jp-inverse-layout-color3, #616161)"},outline:{text:"var(--jp-brand-color1, #1976d2)",hoverText:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",hoverBg:"var(--jp-brand-color1, #1976d2)",hoverBorder:"var(--jp-border-color1, #bdbdbd)",hoverCounterBg:"var(--jp-brand-color4, #e3f2fd)",selectedText:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",selectedBg:"var(--jp-brand-color2, #64b5f6)",selectedBorder:"var(--jp-border-color1, #bdbdbd)",disabledText:"var(--jp-brand-color3, #bbdefb)",disabledBg:"var(--jp-layout-color1, white)",disabledCounterBg:"var(--jp-brand-color4, #e3f2fd)",counterBg:"var(--jp-brand-color4, #e3f2fd)",counterFg:"var(--jp-brand-color3, #bbdefb)",hoverCounterFg:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",disabledCounterFg:"var(--jp-brand-color3, #bbdefb)"},danger:{text:"var(--jp-error-color0, #b71c1c)",hoverText:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",hoverBg:"var(--jp-error-color1, #d32f2f)",hoverBorder:"var(--jp-border-color1, #bdbdbd)",hoverCounterBg:"var(--jp-brand-color4, #e3f2fd)",selectedText:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",selectedBg:"var(--jp-error-color0, #b71c1c)",selectedBorder:"var(--jp-border-color1, #bdbdbd)",disabledText:"var(--jp-error-color3, #ffcdd2)",disabledBg:"var(--jp-layout-color1, white)",disabledCounterBg:"var(--jp-error-color3, #ffcdd2)",counterBg:"var(--jp-error-color2, #e57373)",icon:"var(--jp-error-color0, #b71c1c)",hoverIcon:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",counterFg:"var(--jp-error-color1, #d32f2f)",hoverCounterFg:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",disabledCounterFg:"var(--jp-error-color3, #ffcdd2)"},inactive:{bg:"var(--jp-layout-color2, #eee)",text:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.54))"}},underlinenav:{icon:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.38))",borderHover:"var(--jp-border-color2, #e0e0e0)"},actionListItem:{inlineDivider:"rgba(208,215,222,0.48)",default:{hoverBg:"rgba(208,215,222,0.32)",hoverBorder:"rgba(0,0,0,0)",activeBg:"rgba(208,215,222,0.48)",activeBorder:"rgba(0,0,0,0)",selectedBg:"rgba(208,215,222,0.24)"},danger:{hoverBg:"var(--jp-error-color0, #b71c1c)",activeBg:"var(--jp-error-color3, #ffcdd2)",hoverText:"var(--jp-error-color2, #e57373)"}},switchTrack:{bg:"var(--jp-layout-color2, #eee)",hoverBg:"hsla(210,24%,90%,1)",activeBg:"hsla(210,24%,88%,1)",disabledBg:"var(--jp-layout-color4, #757575)",fg:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.54))",disabledFg:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",border:"rgba(0,0,0,0)",checked:{bg:"var(--jp-brand-color1, #1976d2)",hoverBg:"#0860CA",activeBg:"#0757BA",fg:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",disabledFg:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",border:"rgba(0,0,0,0)"}},switchKnob:{bg:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",disabledBg:"var(--jp-layout-color1, white)",border:"var(--jp-inverse-border-color, #757575)",checked:{bg:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",disabledBg:"var(--jp-layout-color1, white)",border:"var(--jp-brand-color1, #1976d2)"}},segmentedControl:{bg:"var(--jp-layout-color2, #eee)",button:{bg:"var(--jp-layout-color1, #212121)",hover:{bg:"var(--jp-layout-color2, #424242)"},active:{bg:"var(--jp-layout-color3, #616161)"},selected:{border:"var(--jp-border-color3, #eee)"}}},treeViewItem:{chevron:{hoverBg:"var(--jp-inverse-layout-color1, #212121)"},directory:{fill:"var(--jp-brand-color3, #bbdefb)"}},fg:{default:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.87))",muted:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.54))",subtle:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.38))",onEmphasis:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))"},canvas:{default:"var(--jp-layout-color1, white)",overlay:"var(--jp-ui-inverse-font-color1, rgba(255, 255, 255, 1))",inset:"var(--jp-layout-color1, white)",subtle:"var(--jp-layout-color1, white)"},border:{default:"var(--jp-border-color1, #616161)",muted:"var(--jp-border-color2, #e0e0e0)",subtle:"var(--jp-border-color3, #eee)"},neutral:{emphasisPlus:"var(--jp-layout-color4, #757575)",emphasis:"var(--jp-layout-color3, #bdbdbd)",muted:"var(--jp-layout-color0, white)",subtle:"var(--jp-layout-color3, #bdbdbd)"},accent:{fg:"var(--jp-brand-color1, #1976d2)",emphasis:"var(--jp-brand-color2, #64b5f6)",muted:"var(--jp-brand-color0, #0d47a1)",subtle:"var(--jp-brand-color3, #bbdefb)"},success:{fg:"var(--jp-success-color1, #388e3c)",emphasis:"var(--jp-success-color2, #81c784)",muted:"var(--jp-success-color0, #1b5e20)",subtle:"var(--jp-success-color3, #c8e6c9)"},attention:{fg:"var(--jp-warn-color1, #f57c00)",emphasis:"var(--jp-warn-color2, #ffb74d)",muted:"var(--jp-warn-color0, #e65100)",subtle:"var(--jp-warn-color3, #ffe0b2)"},severe:{fg:"var(--jp-warn-color1, #f57c00)",emphasis:"var(--jp-warn-color2, #ffb74d)",muted:"var(--jp-warn-color0, #e65100)",subtle:"var(--jp-warn-color3, #ffe0b2)"},danger:{fg:"var(--jp-error-color1, #d32f2f)",emphasis:"var(--jp-error-color2, #e57373)",muted:"var(--jp-error-color0, #b71c1c)",subtle:"var(--jp-error-color3, #ffcdd2)"},open:{fg:"var(--jp-success-color1, #388e3c)",emphasis:"var(--jp-success-color2, #81c784)",muted:"var(--jp-success-color0, #1b5e20)",subtle:"var(--jp-success-color3, #c8e6c9)"},closed:{fg:"var(--jp-error-color1, #d32f2f)",emphasis:"var(--jp-error-color2, #e57373)",muted:"var(--jp-error-color0, #b71c1c)",subtle:"var(--jp-error-color3, #ffcdd2)"},done:{fg:"var(--jp-info-color1, #0097a7)",emphasis:"var(--jp-info-color2, #4dd0e1)",muted:"var(--jp-info-color0, #006064)",subtle:"var(--jp-info-color3, #b2ebf2)"},sponsors:{fg:"#bf3989",emphasis:"#bf3989",muted:"rgba(255,128,200,0.4)",subtle:"#ffeff7"},primer:{fg:{disabled:"var(--jp-layout-color4, #757575)"},canvas:{backdrop:"rgba(31,35,40,0.5)",sticky:"rgba(255,255,255,0.95)"},border:{active:"#fd8c73",contrast:"rgba(31,35,40,0.1)"}}},shadows:{mktg:{btn:{shadow:{outline:"rgb(0 0 0 / 15%) 0 0 0 1px inset",focus:"rgb(0 0 0 / 15%) 0 0 0 4px",hover:"0 3px 2px rgba(0, 0, 0, 0.07), 0 7px 5px rgba(0, 0, 0, 0.04), 0 12px 10px rgba(0, 0, 0, 0.03), 0 22px 18px rgba(0, 0, 0, 0.03), 0 42px 33px rgba(0, 0, 0, 0.02), 0 100px 80px rgba(0, 0, 0, 0.02)",hoverMuted:"rgb(0 0 0 / 70%) 0 0 0 2px inset"}}},avatar:{childShadow:"0 0 0 2px var(--jp-ui-inverse-font-color2, rgba(255, 255, 255, 0.7))"},overlay:{shadow:"0 1px 3px rgba(31,35,40,0.12), 0 8px 24px rgba(66,74,83,0.12)"},btn:{shadow:"0 1px 0 rgba(31,35,40,0.04)",insetShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",primary:{shadow:"0 1px 0 rgba(31,35,40,0.1)",insetShadow:"inset 0 1px 0 rgba(255,255,255,0.03)",selectedShadow:"inset 0 1px 0 var(--jp-inverse-layout-color3, #616161)"},outline:{hoverShadow:"0 1px 0 rgba(31,35,40,0.1)",hoverInsetShadow:"inset 0 1px 0 rgba(255,255,255,0.03)",selectedShadow:"inset 0 1px 0 rgba(0,33,85,0.2)"},danger:{hoverShadow:"0 1px 0 rgba(31,35,40,0.1)",hoverInsetShadow:"inset 0 1px 0 rgba(255,255,255,0.03)",selectedShadow:"inset 0 1px 0 rgba(76,0,20,0.2)"}},shadow:{small:"0 1px 0 rgba(31,35,40,0.04)",medium:"0 3px 6px rgba(140,149,159,0.15)",large:"0 8px 24px rgba(140,149,159,0.2)",extraLarge:"0 12px 28px rgba(140,149,159,0.3)"},primer:{shadow:{highlight:"inset 0 1px 0 rgba(255,255,255,0.25)",inset:"inset 0 0 0 0 var(--jp-input-border-color)"}}}},dark:{colors:{canvasDefaultTransparent:"rgba(255,255,255,0)",pageHeaderBg:"var(--jp-layout-color1, #212121)",marketingIcon:{primary:"var(--jp-brand-color1, #2196f3)",secondary:"var(--jp-brand-color3, #bbdefb)"},diffBlob:{addition:{numText:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",fg:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",numBg:"var(--jp-success-color2, #81c784)",lineBg:"var(--jp-success-color3, #c8e6c9)",wordBg:"var(--jp-success-color0, #388e3c)"},deletion:{numText:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",fg:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",numBg:"var(--jp-error-color2, #e57373)",lineBg:"var(--jp-error-color3, #ffcdd2)",wordBg:"var(--jp-error-color0, #d32f2f)"},hunk:{numBg:"var(--jp-brand-color0, #1976d2)"},expander:{icon:"var(--jp-ui-font-color2, rgba(255, 255, 255, 0.54))"}},diffstat:{deletionBorder:"var(--jp-border-color1, #616161)",additionBorder:"var(--jp-border-color1, #616161)",additionBg:"var(--jp-accent-color1, #4caf50)"},searchKeyword:{hl:"var(--jp-warn-color3, #ffe0b2)"},prettylights:{syntax:{comment:"var(--jp-ui-font-color3, rgba(255, 255, 255, 0.38))",constant:"#0550ae",entity:"#6639ba",storageModifierImport:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",entityTag:"#116329",keyword:"var(--jp-error-color1, #f44336)",string:"#0a3069",variable:"#953800",brackethighlighterUnmatched:"#82071e",invalidIllegalText:"var(--jp-layout-color1, #212121)",invalidIllegalBg:"#82071e",carriageReturnText:"var(--jp-layout-color1, #212121)",carriageReturnBg:"var(--jp-error-color1, #f44336)",stringRegexp:"#116329",markupList:"#3b2300",markupHeading:"#0550ae",markupItalic:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",markupBold:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",markupDeletedText:"#82071e",markupDeletedBg:"var(--jp-error-color3, #ffcdd2)",markupInsertedText:"#116329",markupInsertedBg:"var(--jp-success-color3, #c8e6c9)",markupChangedText:"#953800",markupChangedBg:"#ffd8b5",markupIgnoredText:"var(--jp-layout-color2, #424242)",markupIgnoredBg:"#0550ae",metaDiffRange:"var(--jp-info-color1, #00bcd4)",brackethighlighterAngle:"#57606a",sublimelinterGutterMark:"var(--jp-layout-color4, #757575)",constantOtherReferenceLink:"#0a3069"}},codemirror:{text:"var(--jp-content-font-color1, rgba(255, 255, 255, 1))",bg:"var(--jp-layout-color0, #111)",guttersBg:"var(--jp-layout-color2, #424242)",guttermarkerText:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",guttermarkerSubtleText:"var(--jp-ui-font-color3, rgba(255, 255, 255, 0.38))",linenumberText:"var(--jp-ui-font-color2, rgba(255, 255, 255, 0.54))",cursor:"var(--jp-editor-cursor-color)",selectionBg:"var(--jp-editor-selected-background)",activelineBg:"color-mix(in srgb, var(--jp-layout-color3, #616161) 25%, transparent)",matchingbracketText:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",linesBg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",syntax:{comment:"var(--jp-mirror-editor-comment-color, #408080)",constant:"var(--jp-mirror-editor-property-color, #42a5f5)",entity:"var(--jp-info-color1, #00bcd4)",keyword:"var(--jp-mirror-editor-keyword-color, #4caf50)",storage:"var(--jp-error-color1, #f44336)",string:"var(--jp-mirror-editor-string-color, #ff7070)",support:"var(--jp-mirror-editor-property-color, #42a5f5)",variable:"var(--jp-mirror-editor-variable-color, #e0e0e0)"}},checks:{bg:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",textPrimary:"var(--jp-layout-color1, #212121)",textSecondary:"var(--jp-layout-color4, #757575)",textLink:"#54aeff",btnIcon:"#afb8c1",btnHoverIcon:"var(--jp-layout-color1, #212121)",btnHoverBg:"rgba(255,255,255,0.125)",inputText:"var(--jp-layout-color2, #424242)",inputPlaceholderText:"var(--jp-layout-color4, #757575)",inputFocusText:"var(--jp-layout-color4, #757575)",inputBg:"#32383f",donutError:"#fa4549",donutPending:"#bf8700",donutSuccess:"var(--jp-accent-color1, #4caf50)",donutNeutral:"#afb8c1",dropdownText:"#afb8c1",dropdownBg:"#32383f",dropdownBorder:"#424a53",dropdownShadow:"rgba(31,35,40,0.3)",dropdownHoverText:"var(--jp-layout-color1, #212121)",dropdownHoverBg:"#424a53",dropdownBtnHoverText:"var(--jp-layout-color1, #212121)",dropdownBtnHoverBg:"#32383f",scrollbarThumbBg:"#57606a",headerLabelText:"var(--jp-border-color1, #616161)",headerLabelOpenText:"var(--jp-layout-color1, #212121)",headerBorder:"#32383f",headerIcon:"var(--jp-layout-color4, #757575)",lineText:"var(--jp-border-color1, #616161)",lineNumText:"rgba(140,149,159,0.75)",lineTimestampText:"var(--jp-layout-color4, #757575)",lineHoverBg:"#32383f",lineSelectedBg:"rgba(33,139,255,0.15)",lineSelectedNumText:"#54aeff",lineDtFmText:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",lineDtFmBg:"var(--jp-warn-color2, #ffb74d)",gateBg:"rgba(125,78,0,0.15)",gateText:"var(--jp-border-color1, #616161)",gateWaitingText:"#d4a72c",stepHeaderOpenBg:"#32383f",stepErrorText:"#ff8182",stepWarningText:"#d4a72c",loglineText:"var(--jp-layout-color4, #757575)",loglineNumText:"rgba(140,149,159,0.75)",loglineDebugText:"#c297ff",loglineErrorText:"var(--jp-border-color1, #616161)",loglineErrorNumText:"#ff8182",loglineErrorBg:"rgba(164,14,38,0.15)",loglineWarningText:"var(--jp-border-color1, #616161)",loglineWarningNumText:"#d4a72c",loglineWarningBg:"rgba(125,78,0,0.15)",loglineCommandText:"#54aeff",loglineSectionText:"#4ac26b",ansi:{black:"#0d1117",blackBright:"#161b22",white:"#b1bac4",whiteBright:"#b1bac4",gray:"#6e7681",red:"#ff7b72",redBright:"#ffa198",green:"#3fb950",greenBright:"#56d364",yellow:"#d29922",yellowBright:"#e3b341",blue:"#58a6ff",blueBright:"#79c0ff",magenta:"#bc8cff",magentaBright:"#d2a8ff",cyan:"#76e3ea",cyanBright:"#b3f0ff"}},project:{headerBg:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",sidebarBg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",gradientIn:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",gradientOut:"rgba(255,255,255,0)"},mktg:{btn:{bg:"#1b1f23"}},control:{borderColor:{emphasis:"var(--jp-inverse-border-color)"}},avatar:{bg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",border:"var(--jp-border-color1, #616161)",stackFade:"#afb8c1",stackFadeMore:"var(--jp-border-color1, #616161)"},topicTag:{border:"rgba(0,0,0,0)"},counter:{border:"rgba(0,0,0,0)"},selectMenu:{backdropBorder:"rgba(0,0,0,0)",tapHighlight:"rgba(175,184,193,0.5)",tapFocusBg:"#b6e3ff"},overlay:{backdrop:"rgba(140,149,159,0.2)"},header:{text:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",bg:"var(--jp-inverse-layout-color1)",divider:"var(--jp-inverse-layout-color2)",logo:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))"},headerSearch:{bg:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",border:"#57606a"},sidenav:{selectedBg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))"},menu:{bgActive:"rgba(0,0,0,0)"},input:{disabledBg:"var(--jp-layout-color2, #424242)"},timeline:{badgeBg:"var(--jp-layout-color2, #424242)"},ansi:{black:"#484f58",blackBright:"#6e7681",white:"#b1bac4",whiteBright:"#ffffff",gray:"#6e7681",red:"#ff7b72",redBright:"#ffa198",green:"#3fb950",greenBright:"#56d364",yellow:"#d29922",yellowBright:"#e3b341",blue:"#58a6ff",blueBright:"#79c0ff",magenta:"#bc8cff",magentaBright:"#d2a8ff",cyan:"#39c5cf",cyanBright:"#56d4dd"},btn:{text:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",bg:"var(--jp-layout-color1, #212121)",border:"var(--jp-border-color1, #616161)",hoverBg:"var(--jp-layout-color2, #424242)",hoverBorder:"var(--jp-border-color1, #616161)",activeBg:"var(--jp-layout-color3, #616161)",activeBorder:"var(--jp-border-color1, #616161)",selectedBg:"var(--jp-layout-color0, #111)",counterBg:"var(--jp-layout-color4, #757575)",primary:{text:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.8))",bg:"var(--jp-brand-color1, #4caf50)",border:"var(--jp-border-color1, #616161)",hoverBg:"var(--jp-brand-color2, #81c784)",hoverBorder:"var(--jp-border-color1, #616161)",selectedBg:"var(--jp-brand-color0, #388e3c)",disabledText:"var(--jp-ui-font-color2)",disabledBg:"var(--jp-brand-color3, #c8e6c9)",disabledBorder:"var(--jp-border-color1, #616161)",icon:"var(--jp-ui-font-color2)",counterBg:"var(--jp-inverse-layout-color3)"},outline:{text:"var(--jp-brand-color1, #2196f3)",hoverText:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.8))",hoverBg:"var(--jp-brand-color1, #2196f3)",hoverBorder:"var(--jp-border-color1, #616161)",hoverCounterBg:"var(--jp-brand-color4)",selectedText:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.8))",selectedBg:"var(--jp-brand-color2, #64b5f6)",selectedBorder:"var(--jp-border-color1, #616161)",disabledText:"var(--jp-brand-color3, #bbdefb)",disabledBg:"var(--jp-layout-color1, #212121)",disabledCounterBg:"var(--jp-brand-color4)",counterBg:"var(--jp-brand-color4)",counterFg:"var(--jp-brand-color3, #bbdefb)",hoverCounterFg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",disabledCounterFg:"var(--jp-brand-color3, #bbdefb)"},danger:{text:"var(--jp-error-color0, #d32f2f)",hoverText:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.8))",hoverBg:"var(--jp-error-color1, #f44336)",hoverBorder:"var(--jp-border-color1, #616161)",hoverCounterBg:"var(--jp-brand-color4)",selectedText:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.8))",selectedBg:"var(--jp-error-color0, #d32f2f)",selectedBorder:"var(--jp-border-color1, #616161)",disabledText:"var(--jp-error-color3, #ffcdd2)",disabledBg:"var(--jp-layout-color1, #212121)",disabledCounterBg:"var(--jp-error-color3, #ffcdd2)",counterBg:"var(--jp-error-color2, #e57373)",icon:"var(--jp-error-color0, #d32f2f)",hoverIcon:"var(--jp-ui-font-color1, rgba(0, 0, 0, 0.8))",counterFg:"var(--jp-error-color1, #f44336)",hoverCounterFg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",disabledCounterFg:"var(--jp-error-color3, #ffcdd2)"},inactive:{bg:"var(--jp-layout-color2, #424242)",text:"var(--jp-ui-font-color2, rgba(255, 255, 255, 0.54))"}},underlinenav:{icon:"var(--jp-ui-font-color3, rgba(255, 255, 255, 0.38))",borderHover:"var(--jp-border-color2, #424242)"},actionListItem:{inlineDivider:"rgba(208,215,222,0.48)",default:{hoverBg:"rgba(208,215,222,0.32)",hoverBorder:"rgba(0,0,0,0)",activeBg:"rgba(208,215,222,0.48)",activeBorder:"rgba(0,0,0,0)",selectedBg:"rgba(208,215,222,0.24)"},danger:{hoverBg:"var(--jp-error-color0, #d32f2f)",activeBg:"var(--jp-error-color3, #ffcdd2)",hoverText:"var(--jp-error-color2, #e57373)"}},switchTrack:{bg:"var(--jp-layout-color2, #424242)",hoverBg:"hsla(210,24%,90%,1)",activeBg:"hsla(210,24%,88%,1)",disabledBg:"var(--jp-layout-color4, #757575)",fg:"var(--jp-ui-font-color2, rgba(255, 255, 255, 0.54))",disabledFg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",border:"rgba(0,0,0,0)",checked:{bg:"var(--jp-brand-color1, #2196f3)",hoverBg:"#0860CA",activeBg:"#0757BA",fg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",disabledFg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",border:"rgba(0,0,0,0)"}},switchKnob:{bg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",disabledBg:"var(--jp-layout-color1, #212121)",border:"var(--jp-inverse-border-color)",checked:{bg:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",disabledBg:"var(--jp-layout-color1, #212121)",border:"var(--jp-brand-color1, #2196f3)"}},segmentedControl:{bg:"var(--jp-layout-color2, #424242)",button:{bg:"var(--jp-inverse-layout-color4)",hover:{bg:"var(--jp-inverse-layout-color2)"},active:{bg:"var(--jp-inverse-layout-color3)"},selected:{border:"var(--jp-border-color3, #212121)"}}},treeViewItem:{chevron:{hoverBg:"var(--jp-inverse-layout-color1)"},directory:{fill:"var(--jp-brand-color3, #bbdefb)"}},fg:{default:"var(--jp-ui-font-color1, rgba(255, 255, 255, 0.87))",muted:"var(--jp-ui-font-color2, rgba(255, 255, 255, 0.54))",subtle:"var(--jp-ui-font-color3, rgba(255, 255, 255, 0.38))",onEmphasis:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))"},canvas:{default:"var(--jp-layout-color1, #212121)",overlay:"var(--jp-ui-inverse-font-color1, rgba(0, 0, 0, 0.8))",inset:"var(--jp-layout-color1, #212121)",subtle:"var(--jp-layout-color1, #212121)"},border:{default:"var(--jp-border-color1, #616161)",muted:"var(--jp-border-color2, #424242)",subtle:"var(--jp-border-color3, #212121)"},neutral:{emphasisPlus:"var(--jp-layout-color3, #616161)",emphasis:"var(--jp-layout-color2, #424242)",muted:"var(--jp-layout-color1, #212121)",subtle:"var(--jp-layout-color0, #111)"},accent:{fg:"var(--jp-brand-color2, #64b5f6)",emphasis:"var(--jp-brand-color3, #bbdefb)",muted:"var(--jp-brand-color1, #2196f3)",subtle:"var(--jp-brand-color0, #1976d2)"},success:{fg:"var(--jp-success-color2, #81c784)",emphasis:"var(--jp-success-color3, #c8e6c9)",muted:"var(--jp-success-color1, #4caf50)",subtle:"var(--jp-success-color0, #388e3c)"},attention:{fg:"var(--jp-warn-color2, #ffb74d)",emphasis:"var(--jp-warn-color3, #ffe0b2)",muted:"var(--jp-warn-color1, #ff9800)",subtle:"var(--jp-warn-color0, #f57c00)"},severe:{fg:"var(--jp-warn-color2, #ffb74d)",emphasis:"var(--jp-warn-color3, #ffe0b2)",muted:"var(--jp-warn-color1, #ff9800)",subtle:"var(--jp-warn-color0, #f57c00)"},danger:{fg:"var(--jp-error-color2, #e57373)",emphasis:"var(--jp-error-color3, #ffcdd2)",muted:"var(--jp-error-color1, #f44336)",subtle:"var(--jp-error-color0, #d32f2f)"},open:{fg:"var(--jp-success-color2, #81c784)",emphasis:"var(--jp-success-color3, #c8e6c9)",muted:"var(--jp-success-color1, #4caf50)",subtle:"var(--jp-success-color0, #388e3c)"},closed:{fg:"var(--jp-error-color2, #e57373)",emphasis:"var(--jp-error-color3, #ffcdd2)",muted:"var(--jp-error-color1, #f44336)",subtle:"var(--jp-error-color0, #d32f2f)"},done:{fg:"var(--jp-info-color2, #4dd0e1)",emphasis:"var(--jp-info-color3, #b2ebf2)",muted:"var(--jp-info-color1, #00bcd4)",subtle:"var(--jp-info-color0, #0097a7)"},sponsors:{fg:"#db61a2",emphasis:"#bf4b8a",muted:"rgba(219,97,162,0.4)",subtle:"rgba(219,97,162,0.1)"},primer:{fg:{disabled:"var(--jp-layout-color4, #757575)"},canvas:{backdrop:"rgba(31,35,40,0.5)",sticky:"rgba(255,255,255,0.95)"},border:{active:"#fd8c73",contrast:"rgba(31,35,40,0.1)"}}},shadows:{checks:{inputShadow:"0 0 0 1px (obj) => (0, get_1.default)(obj, path)"},mktg:{btn:{shadow:{outline:"rgb(255 255 255 / 25%) 0 0 0 1px inset",focus:"rgb(255 255 255 / 25%) 0 0 0 4px",hover:"0 4px 7px rgba(0, 0, 0, 0.15), 0 100px 80px rgba(255, 255, 255, 0.02), 0 42px 33px rgba(255, 255, 255, 0.024), 0 22px 18px rgba(255, 255, 255, 0.028), 0 12px 10px rgba(255, 255, 255, 0.034), 0 7px 5px rgba(255, 255, 255, 0.04), 0 3px 2px rgba(255, 255, 255, 0.07)",hoverMuted:"rgb(255 255 255) 0 0 0 2px inset"}}},avatar:{childShadow:"0 0 0 2px #0d1117"},overlay:{shadow:"0 0 0 1px #30363d, 0 16px 32px rgba(1,4,9,0.85)"},btn:{shadow:"0 0 transparent",insetShadow:"0 0 transparent",primary:{shadow:"0 0 transparent",insetShadow:"0 0 transparent",selectedShadow:"0 0 transparent"},outline:{hoverShadow:"0 1px 0 rgba(1,4,9,0.1)",hoverInsetShadow:"inset 0 1px 0 rgba(255,255,255,0.03)",selectedShadow:"0 0 transparent"},danger:{hoverShadow:"0 0 transparent",hoverInsetShadow:"0 0 transparent",selectedShadow:"0 0 transparent"}},shadow:{small:"0 0 transparent",medium:"0 3px 6px #010409",large:"0 8px 24px #010409",extraLarge:"0 12px 48px #010409"},primer:{shadow:{highlight:"0 0 transparent",inset:"inset 0 0 0 0 var(--jp-input-border-color)"}}}}}},{colorSchemes:primerSchemes,...primerOthers}=cloneDeep(theme),{colorSchemes:jupyterSchemes,...jupyterOthers}=jupyterLabThemeDefs,jupyterLabTheme=merge(primerOthers,jupyterOthers,{colorSchemes:{light:{},dark:{}}});jupyterLabTheme.colorSchemes.light={colors:merge(primerSchemes.light.colors,jupyterSchemes.light.colors),shadows:merge(primerSchemes.light.shadows,jupyterSchemes.light.shadows)},jupyterLabTheme.colorSchemes.dark={colors:merge(primerSchemes.dark.colors,jupyterSchemes.dark.colors),shadows:merge(primerSchemes.dark.shadows,jupyterSchemes.dark.shadows)};const DATA_JUPYTERLAB_THEME="data-jupyterlab-theme",GlobalStyle=$e`
  .jp-ThemedContainer button {
    --button-primary-bgColor-active: var(--jp-brand-color0, #3a4047ff) !important;
    --button-primary-bgColor-hover: var(--jp-brand-color0, #0d47a1) !important;
    --button-primary-bgColor-rest: var(--jp-brand-color1, #1976d2) !important;
  }
`;let isLoaded=!1;function JupyterLabCss(e){const{colormode:t="light"}=e;return reactExports.useEffect(()=>{isLoaded||(isLoaded=!0,import("./index-Dro44tIm.js"),import("./index-BQ8TJq49.js"),import("./index-CNU-WVhQ.js"),import("./index-B8tnlTuE.js"),import("./index--OLIX362.js"),import("./index-BH2OX5l8.js"),import("./index-BNgsU24L.js"),import("./index-CB9u17_J.js"),import("./index-DYGslHkf.js"),import("./index-CNU-WVhQ.js"),import("./index-B8tnlTuE.js"),import("./index-BAmDqX6O.js"),import("./index-BMmDpPkF.js"),import("./index-B561GyFo.js"),Promise.resolve({          }),Promise.resolve({          }),Promise.resolve({                 }))},[t]),reactExports.useEffect(()=>{let e;switch(t){case"light":e=import("./variables-C-KRvYpv.js");break;case"dark":e=import("./variables-B0Jni0qR.js")}e?.then(e=>{e.default&&(document.body.querySelector(`style[${DATA_JUPYTERLAB_THEME}]`)?.remove(),document.body.insertAdjacentHTML("afterbegin",`<style ${DATA_JUPYTERLAB_THEME}="${t}">\n${e.default}\n</style>`))})},[t]),jsxRuntimeExports.jsx("div",{id:"dla-JupyterLabCss-id",children:jsxRuntimeExports.jsx(GlobalStyle,{})})}class JupyterAuthError extends Error{}var libExports$2=/* @__PURE__ */requireLib$9();const DEFAULT_JUPYTER_SERVER_URL="https://oss.datalayer.run/api/jupyter-server",DEFAULT_JUPYTER_SERVER_TOKEN="60c1661cc408f978c309d04157af55c9588ff9557c9380e4fb50785750703da6",DEFAULT_API_KERNEL_PREFIX_URL="/api/jupyter-server",DEFAULT_KERNEL_NAME="python";let config;const setJupyterServerUrl=e=>{if(!config)throw new Error("Jupyter React Config must be loaded first.");libExports$2.PageConfig.setOption("baseUrl",e),libExports$2.PageConfig.setOption("wsUrl",e.replace(/^http/,"ws")),config.jupyterServerUrl=e},getJupyterServerUrl=()=>{if(!config)throw new Error("Jupyter React Config must be loaded first.");return config.jupyterServerUrl},setJupyterServerToken=e=>{if(!config)throw new Error("Jupyter React Config must be loaded first.");libExports$2.PageConfig.setOption("token",e),config.jupyterServerToken=e},getJupyterServerToken=()=>{if(!config)throw new Error("Jupyter React Config must be loaded first.");return config.jupyterServerToken},loadJupyterConfig=(e={})=>{const{collaborative:t,jupyterServerToken:r,jupyterServerUrl:s,lite:n,terminals:i}=e;config={jupyterServerUrl:s??DEFAULT_JUPYTER_SERVER_URL,jupyterServerToken:r??DEFAULT_JUPYTER_SERVER_TOKEN,insideJupyterLab:!1,insideJupyterHub:!1};const o=document.getElementById("jupyter-config-data");let a;return o&&(a=JSON.parse(o.textContent||""),config.insideJupyterLab="JupyterLab"===a.appName),config.insideJupyterHub=""!==libExports$2.PageConfig.getOption("hubHost"),a?(setJupyterServerUrl(s??a.baseUrl??location.protocol+"//"+location.host+a.baseUrl),setJupyterServerToken(r??a.token??"")):(setJupyterServerUrl(s??config.jupyterServerUrl??location.protocol+"//"+location.host+DEFAULT_API_KERNEL_PREFIX_URL),setJupyterServerToken(r??config.jupyterServerToken??"")),n&&setJupyterServerUrl(location.protocol+"//"+location.host),config.insideJupyterLab||n||(libExports$2.PageConfig.setOption("baseUrl",getJupyterServerUrl()),libExports$2.PageConfig.setOption("wsUrl",getJupyterServerUrl().replace(/^http/,"ws")),libExports$2.PageConfig.setOption("token",getJupyterServerToken()),libExports$2.PageConfig.setOption("collaborative",String(t)),libExports$2.PageConfig.setOption("disableRTC",String(!t)),libExports$2.PageConfig.setOption("terminalsAvailable",String(i)),libExports$2.PageConfig.setOption("mathjaxUrl","https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"),libExports$2.PageConfig.setOption("mathjaxConfig","TeX-AMS_CHTML-full,Safe")),config};async function requestAPI(e,t="api",r="",s={}){const n=libExports$2.URLExt.join(e.baseUrl,t,r);let i;try{if(i=await libExports$3.ServerConnection.makeRequest(n,s,e),403===i.status)throw new JupyterAuthError}catch(a){throw new libExports$3.ServerConnection.NetworkError(a)}let o=await i.text();if(o.length>0)try{o=JSON.parse(o)}catch(a){console.warn("Not a JSON response body.",i)}if(!i.ok)throw new libExports$3.ServerConnection.ResponseError(i,o.message||o);return o}const __vite_import_meta_env__={},createStoreImpl=e=>{let t;const r=/* @__PURE__ */new Set,s=(e,s)=>{const n="function"==typeof e?e(t):e;if(!Object.is(n,t)){const e=t;t=(null!=s?s:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,i={setState:s,getState:n,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{"production"!==(__vite_import_meta_env__?"production":void 0)&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},o=t=e(s,n,i);return i},createStore=e=>e?createStoreImpl(e):createStoreImpl;var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={},hasRequiredUseSyncExternalStoreShim_production,hasRequiredShim,hasRequiredWithSelector_production,hasRequiredWithSelector;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var e=requireReact();var t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=e.useState,s=e.useEffect,n=e.useLayoutEffect,i=e.useDebugValue;function o(e){var r=e.getSnapshot;e=e.value;try{var s=r();return!t(e,s)}catch(n){return!0}}var a="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),l=r({inst:{value:a,getSnapshot:t}}),c=l[0].inst,d=l[1];return n(function(){c.value=a,c.getSnapshot=t,o(c)&&d({inst:c})},[e,a,t]),s(function(){return o(c)&&d({inst:c}),e(function(){o(c)&&d({inst:c})})},[e]),i(a),a};return useSyncExternalStoreShim_production.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:a,useSyncExternalStoreShim_production}function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var e=requireReact(),t=requireShim();var r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=t.useSyncExternalStore,n=e.useRef,i=e.useEffect,o=e.useMemo,a=e.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(e,t,l,c,d){var h=n(null);if(null===h.current){var u={hasValue:!1,value:null};h.current=u}else u=h.current;h=o(function(){function e(e){if(!i){if(i=!0,s=e,e=c(e),void 0!==d&&u.hasValue){var t=u.value;if(d(t,e))return n=t}return n=e}if(t=n,r(s,e))return t;var o=c(e);return void 0!==d&&d(t,o)?(s=e,t):(s=e,n=o)}var s,n,i=!1,o=void 0===l?null:l;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,l,c,d]);var p=s(e,h[0],h[1]);return i(function(){u.hasValue=!0,u.value=p},[p]),a(p),p},withSelector_production}function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=/* @__PURE__ */getDefaultExportFromCjs(withSelectorExports),{useDebugValue:useDebugValue}=t,{useSyncExternalStoreWithSelector:useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity=e=>e;function useStore(e,t=identity,r){const s=useSyncExternalStoreWithSelector(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return useDebugValue(s),s}var ClipboardExt,ElementExt,ElementExt2,Platform,Platform2,Selector$1,Selector2,Private$q,KeycodeLayout2;function getKeyboardLayout(){return Private$p.keyboardLayout}(ClipboardExt||(ClipboardExt={})).copyText=function(e){const t=document.body,r=s=>{s.preventDefault(),s.stopPropagation(),s.clipboardData.setData("text",e),t.removeEventListener("copy",r,!0)};t.addEventListener("copy",r,!0),document.execCommand("copy")},ElementExt2=ElementExt||(ElementExt={}),ElementExt2.boxSizing=function(e){let t=window.getComputedStyle(e),r=parseFloat(t.borderTopWidth)||0,s=parseFloat(t.borderLeftWidth)||0,n=parseFloat(t.borderRightWidth)||0,i=parseFloat(t.borderBottomWidth)||0,o=parseFloat(t.paddingTop)||0,a=parseFloat(t.paddingLeft)||0,l=parseFloat(t.paddingRight)||0,c=parseFloat(t.paddingBottom)||0;return{borderTop:r,borderLeft:s,borderRight:n,borderBottom:i,paddingTop:o,paddingLeft:a,paddingRight:l,paddingBottom:c,horizontalSum:s+a+l+n,verticalSum:r+o+c+i}},ElementExt2.sizeLimits=function(e){let t=window.getComputedStyle(e),r=parseFloat(t.minWidth)||0,s=parseFloat(t.minHeight)||0,n=parseFloat(t.maxWidth)||1/0,i=parseFloat(t.maxHeight)||1/0;return n=Math.max(r,n),i=Math.max(s,i),{minWidth:r,minHeight:s,maxWidth:n,maxHeight:i}},ElementExt2.hitTest=function(e,t,r){let s=e.getBoundingClientRect();return t>=s.left&&t<s.right&&r>=s.top&&r<s.bottom},ElementExt2.scrollIntoViewIfNeeded=function(e,t){let r=e.getBoundingClientRect(),s=t.getBoundingClientRect();s.top<=r.top&&s.bottom>=r.bottom||(s.top<r.top&&s.height<=r.height||s.bottom>r.bottom&&s.height>=r.height?e.scrollTop-=r.top-s.top:(s.top<r.top&&s.height>r.height||s.bottom>r.bottom&&s.height<r.height)&&(e.scrollTop-=r.bottom-s.bottom))},Platform2=Platform||(Platform={}),Platform2.IS_MAC=!!navigator.platform.match(/Mac/i),Platform2.IS_WIN=!!navigator.platform.match(/Win/i),Platform2.IS_IE=/Trident/.test(navigator.userAgent),Platform2.IS_EDGE=/Edge/.test(navigator.userAgent),Platform2.accelKey=function(e){return Platform2.IS_MAC?e.metaKey:e.ctrlKey},Selector2=Selector$1||(Selector$1={}),Selector2.calculateSpecificity=function(e){if(e in Private$q.specificityCache)return Private$q.specificityCache[e];let t=Private$q.calculateSingle(e);return Private$q.specificityCache[e]=t},Selector2.isValid=function(e){if(e in Private$q.validityCache)return Private$q.validityCache[e];let t=!0;try{Private$q.testElem.querySelector(e)}catch(r){t=!1}return Private$q.validityCache[e]=t},Selector2.matches=function(e,t){return Private$q.protoMatchFunc.call(e,t)},function(e){e.specificityCache=/* @__PURE__ */Object.create(null),e.validityCache=/* @__PURE__ */Object.create(null),e.testElem=document.createElement("div"),e.protoMatchFunc=(()=>{let e=Element.prototype;return e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){let t=this,r=t.ownerDocument?t.ownerDocument.querySelectorAll(e):[];return-1!==Array.prototype.indexOf.call(r,t)}})(),e.calculateSingle=function(e){let c=0,d=0,h=0;function u(t){let r=e.match(t);return null!==r&&(e=e.slice(r[0].length),!0)}for(e=(e=e.split(",",1)[0]).replace(l," $1 ");e.length>0;)if(u(t))c++;else if(u(r))d++;else if(u(s))d++;else if(u(i))h++;else if(u(o))d++;else if(u(n))h++;else if(!u(a))return 0;return c=Math.min(c,255),d=Math.min(d,255),h=Math.min(h,255),c<<16|d<<8|h};const t=/^#[^\s\+>~#\.\[:]+/,r=/^\.[^\s\+>~#\.\[:]+/,s=/^\[[^\]]+\]/,n=/^[^\s\+>~#\.\[:]+/,i=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,o=/^:[^\s\+>~#\.\[:]+/,a=/^[\s\+>~\*]+/,l=/:not\(([^\)]+)\)/g}(Private$q||(Private$q={}));class KeycodeLayout{constructor(e,t,r=[]){this.name=e,this._codes=t,this._keys=KeycodeLayout.extractKeys(t),this._modifierKeys=KeycodeLayout.convertToKeySet(r)}keys(){return Object.keys(this._keys)}isValidKey(e){return e in this._keys}isModifierKey(e){return e in this._modifierKeys}keyForKeydownEvent(e){return this._codes[e.keyCode]||""}}KeycodeLayout2=KeycodeLayout||(KeycodeLayout={}),KeycodeLayout2.extractKeys=function(e){let t=/* @__PURE__ */Object.create(null);for(let r in e)t[e[r]]=!0;return t},KeycodeLayout2.convertToKeySet=function(e){let t=Object(null);for(let r=0,s=e.length;r<s;++r)t[e[r]]=!0;return t};const EN_US=new KeycodeLayout("en-us",{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta"},["Shift","Ctrl","Alt","Meta"]);var Private$p,Private$o,LinkedList2,Private$n,MessageLoop,Private$m,h2,VirtualDOM,VirtualDOM2,Private$l,BoxEngine,BoxEngine2,Private$j$1,Layout2,Private$i$1,Utils$1;(Private$p||(Private$p={})).keyboardLayout=EN_US;class CommandRegistry{constructor(){this._timerID=0,this._timerModifierID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=/* @__PURE__ */new Map,this._commandChanged=new Signal(this),this._commandExecuted=new Signal(this),this._keyBindingChanged=new Signal(this),this._holdKeyBindingPromises=/* @__PURE__ */new Map}get commandChanged(){return this._commandChanged}get commandExecuted(){return this._commandExecuted}get keyBindingChanged(){return this._keyBindingChanged}get keyBindings(){return this._keyBindings}listCommands(){return Array.from(this._commands.keys())}hasCommand(e){return this._commands.has(e)}addCommand(e,t){if(this._commands.has(e))throw new Error(`Command '${e}' already registered.`);return this._commands.set(e,Private$o.createCommand(t)),this._commandChanged.emit({id:e,type:"added"}),new DisposableDelegate(()=>{this._commands.delete(e),this._commandChanged.emit({id:e,type:"removed"})})}notifyCommandChanged(e){if(void 0!==e&&!this._commands.has(e))throw new Error(`Command '${e}' is not registered.`);this._commandChanged.emit({id:e,type:e?"changed":"many-changed"})}describedBy(e,t=JSONExt.emptyObject){var r;let s=this._commands.get(e);return Promise.resolve(null!==(r=null==s?void 0:s.describedBy.call(void 0,t))&&void 0!==r?r:{args:null})}label(e,t=JSONExt.emptyObject){var r;let s=this._commands.get(e);return null!==(r=null==s?void 0:s.label.call(void 0,t))&&void 0!==r?r:""}mnemonic(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return r?r.mnemonic.call(void 0,t):-1}icon(e,t=JSONExt.emptyObject){var r;return null===(r=this._commands.get(e))||void 0===r?void 0:r.icon.call(void 0,t)}iconClass(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return r?r.iconClass.call(void 0,t):""}iconLabel(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return r?r.iconLabel.call(void 0,t):""}caption(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return r?r.caption.call(void 0,t):""}usage(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return r?r.usage.call(void 0,t):""}className(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return r?r.className.call(void 0,t):""}dataset(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return r?r.dataset.call(void 0,t):{}}isEnabled(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return!!r&&r.isEnabled.call(void 0,t)}isToggled(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return!!r&&r.isToggled.call(void 0,t)}isToggleable(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return!!r&&r.isToggleable}isVisible(e,t=JSONExt.emptyObject){let r=this._commands.get(e);return!!r&&r.isVisible.call(void 0,t)}execute(e,t=JSONExt.emptyObject){let r,s=this._commands.get(e);if(!s)return Promise.reject(new Error(`Command '${e}' not registered.`));try{r=s.execute.call(void 0,t)}catch(i){r=Promise.reject(i)}let n=Promise.resolve(r);return this._commandExecuted.emit({id:e,args:t,result:n}),n}addKeyBinding(e){let t=Private$o.createKeyBinding(e);return this._keyBindings.push(t),this._keyBindingChanged.emit({binding:t,type:"added"}),new DisposableDelegate(()=>{ArrayExt.removeFirstOf(this._keyBindings,t),this._keyBindingChanged.emit({binding:t,type:"removed"})})}processKeydownEvent(e){if(e.defaultPrevented||this._replaying)return;const t=CommandRegistry.keystrokeForKeydownEvent(e);if(!t)return this._replayKeydownEvents(),void this._clearPendingState();if(CommandRegistry.isModifierKeyPressed(e)){let{exact:r}=Private$o.matchKeyBinding(this._keyBindings,[t],e);return void(r?(e.preventDefault(),e.stopPropagation(),this._startModifierTimer(r)):this._clearModifierTimer())}this._keystrokes.push(t);const{exact:r,partial:s}=Private$o.matchKeyBinding(this._keyBindings,this._keystrokes,e),n=0!==s.length;return r||n?(((null==r?void 0:r.preventDefault)||s.some(e=>e.preventDefault))&&(e.preventDefault(),e.stopPropagation()),this._keydownEvents.push(e),r&&!n?(this._executeKeyBinding(r),void this._clearPendingState()):(r&&(this._exactKeyMatch=r),void this._startTimer())):(this._replayKeydownEvents(),void this._clearPendingState())}holdKeyBindingExecution(e,t){this._holdKeyBindingPromises.set(e,t)}processKeyupEvent(e){this._clearModifierTimer()}_startModifierTimer(e){this._clearModifierTimer(),this._timerModifierID=window.setTimeout(()=>{this._executeKeyBinding(e)},Private$o.modifierkeyTimeOut)}_clearModifierTimer(){0!==this._timerModifierID&&(clearTimeout(this._timerModifierID),this._timerModifierID=0)}_startTimer(){this._clearTimer(),this._timerID=window.setTimeout(()=>{this._onPendingTimeout()},Private$o.CHORD_TIMEOUT)}_clearTimer(){0!==this._timerID&&(clearTimeout(this._timerID),this._timerID=0)}_replayKeydownEvents(){0!==this._keydownEvents.length&&(this._replaying=!0,this._keydownEvents.forEach(Private$o.replayKeyEvent),this._replaying=!1)}async _executeKeyBinding(e){if(0!==this._holdKeyBindingPromises.size){const e=[...this._keydownEvents],t=(await Promise.race([Promise.all(e.map(async e=>{var t;return null!==(t=this._holdKeyBindingPromises.get(e))&&void 0!==t?t:Promise.resolve(!0)})),new Promise(e=>{setTimeout(()=>e([!1]),Private$o.KEYBINDING_HOLD_TIMEOUT)})])).every(Boolean);if(this._holdKeyBindingPromises.clear(),!t)return}let{command:t,args:r}=e,s={_luminoEvent:{type:"keybinding",keys:e.keys},...r};if(!this.hasCommand(t)||!this.isEnabled(t,s)){let r=this.hasCommand(t)?"enabled":"registered",s=`Cannot execute key binding '${e.keys.join(", ")}':`,n=`command '${t}' is not ${r}.`;return void console.warn(`${s} ${n}`)}await this.execute(t,s)}_clearPendingState(){this._clearTimer(),this._clearModifierTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0}_onPendingTimeout(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()}}!function(e){function t(e){let t="",r=!1,s=!1,n=!1,i=!1;for(let o of e.split(/\s+/))"Accel"===o?Platform.IS_MAC?s=!0:n=!0:"Alt"===o?r=!0:"Cmd"===o?s=!0:"Ctrl"===o?n=!0:"Shift"===o?i=!0:o.length>0&&(t=o);return{cmd:s,ctrl:n,alt:r,shift:i,key:t}}function r(e){let r="",s=t(e);return s.ctrl&&(r+="Ctrl "),s.alt&&(r+="Alt "),s.shift&&(r+="Shift "),s.cmd&&Platform.IS_MAC&&(r+="Cmd "),s.key?r+s.key:r.trim()}e.parseKeystroke=t,e.normalizeKeystroke=r,e.normalizeKeys=function(e){let t;return t=Platform.IS_WIN?e.winKeys||e.keys:Platform.IS_MAC?e.macKeys||e.keys:e.linuxKeys||e.keys,t.map(r)},e.formatKeystroke=function(e){return"string"==typeof e?r(e):e.map(r).join(", ");function r(e){let r=[],s=Platform.IS_MAC?" ":"+",n=t(e);return n.ctrl&&r.push("Ctrl"),n.alt&&r.push("Alt"),n.shift&&r.push("Shift"),Platform.IS_MAC&&n.cmd&&r.push("Cmd"),r.push(n.key),r.map(Private$o.formatKey).join(s)}},e.isModifierKeyPressed=function(e){let t=getKeyboardLayout(),r=t.keyForKeydownEvent(e);return t.isModifierKey(r)},e.keystrokeForKeydownEvent=function(e){let t=getKeyboardLayout(),r=t.keyForKeydownEvent(e),s=[];return e.ctrlKey&&s.push("Ctrl"),e.altKey&&s.push("Alt"),e.shiftKey&&s.push("Shift"),e.metaKey&&Platform.IS_MAC&&s.push("Cmd"),t.isModifierKey(r)||s.push(r),s.join(" ")}}(CommandRegistry||(CommandRegistry={})),function(e){e.CHORD_TIMEOUT=1e3,e.KEYBINDING_HOLD_TIMEOUT=1e3,e.modifierkeyTimeOut=500,e.createCommand=function(e){return{execute:e.execute,describedBy:c("function"==typeof e.describedBy?e.describedBy:{args:null,...e.describedBy},()=>({args:null})),label:c(e.label,s),mnemonic:c(e.mnemonic,n),icon:c(e.icon,l),iconClass:c(e.iconClass,s),iconLabel:c(e.iconLabel,s),caption:c(e.caption,s),usage:c(e.usage,s),className:c(e.className,s),dataset:c(e.dataset,a),isEnabled:e.isEnabled||i,isToggled:e.isToggled||o,isToggleable:e.isToggleable||!!e.isToggled,isVisible:e.isVisible||i}},e.createKeyBinding=function(e){var t;return{keys:CommandRegistry.normalizeKeys(e),selector:d(e),command:e.command,args:e.args||JSONExt.emptyObject,preventDefault:null===(t=e.preventDefault)||void 0===t||t}},e.matchKeyBinding=function(e,t,r){let s=null,n=[],i=1/0,o=0;for(let a=0,l=e.length;a<l;++a){let l=e[a],c=h(l.keys,t);if(0===c)continue;if(2===c){-1!==u(l.selector,r)&&n.push(l);continue}let d=u(l.selector,r);if(-1===d||d>i)continue;let p=Selector$1.calculateSpecificity(l.selector);(!s||d<i||p>=o)&&(s=l,i=d,o=p)}return{exact:s,partial:n}},e.replayKeyEvent=function(e){e.target.dispatchEvent(function(e){let t=document.createEvent("Event"),r=e.bubbles||!0,s=e.cancelable||!0;return t.initEvent(e.type||"keydown",r,s),t.key=e.key||"",t.keyCode=e.keyCode||0,t.which=e.keyCode||0,t.ctrlKey=e.ctrlKey||!1,t.altKey=e.altKey||!1,t.shiftKey=e.shiftKey||!1,t.metaKey=e.metaKey||!1,t.view=e.view||window,t}(e))},e.formatKey=function(e){return Platform.IS_MAC?t.hasOwnProperty(e)?t[e]:e:r.hasOwnProperty(e)?r[e]:e};const t={Backspace:"",Tab:"",Enter:"",Shift:"",Ctrl:"",Alt:"",Escape:"",PageUp:"",PageDown:"",End:"",Home:"",ArrowLeft:"",ArrowUp:"",ArrowRight:"",ArrowDown:"",Delete:"",Cmd:""},r={Escape:"Esc",PageUp:"Page Up",PageDown:"Page Down",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},s=()=>"",n=()=>-1,i=()=>!0,o=()=>!1,a=()=>({}),l=()=>{};function c(e,t){return void 0===e?t:"function"==typeof e?e:()=>e}function d(e){if(-1!==e.selector.indexOf(","))throw new Error(`Selector cannot contain commas: ${e.selector}`);if(!Selector$1.isValid(e.selector))throw new Error(`Invalid selector: ${e.selector}`);return e.selector}function h(e,t){if(e.length<t.length)return 0;for(let r=0,s=t.length;r<s;++r)if(e[r]!==t[r])return 0;return e.length>t.length?2:1}function u(e,t){let r=t.target,s=t.currentTarget;for(let n=0;null!==r;r=r.parentElement,++n){if(r.hasAttribute("data-lm-suppress-shortcuts"))return-1;if(Selector$1.matches(r,e))return n;if(r===s)return-1}return-1}}(Private$o||(Private$o={}));class LinkedList{constructor(){this._first=null,this._last=null,this._size=0}get isEmpty(){return 0===this._size}get size(){return this._size}get length(){return this._size}get first(){return this._first?this._first.value:void 0}get last(){return this._last?this._last.value:void 0}get firstNode(){return this._first}get lastNode(){return this._last}*[Symbol.iterator](){let e=this._first;for(;e;)yield e.value,e=e.next}*retro(){let e=this._last;for(;e;)yield e.value,e=e.prev}*nodes(){let e=this._first;for(;e;)yield e,e=e.next}*retroNodes(){let e=this._last;for(;e;)yield e,e=e.prev}assign(e){this.clear();for(const t of e)this.addLast(t)}push(e){this.addLast(e)}pop(){return this.removeLast()}shift(e){this.addFirst(e)}unshift(){return this.removeFirst()}addFirst(e){let t=new Private$n.LinkedListNode(this,e);return this._first?(t.next=this._first,this._first.prev=t,this._first=t):(this._first=t,this._last=t),this._size++,t}addLast(e){let t=new Private$n.LinkedListNode(this,e);return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,t}insertBefore(e,t){if(!t||t===this._first)return this.addFirst(e);if(!(t instanceof Private$n.LinkedListNode)||t.list!==this)throw new Error("Reference node is not owned by the list.");let r=new Private$n.LinkedListNode(this,e),s=t,n=s.prev;return r.next=s,r.prev=n,s.prev=r,n.next=r,this._size++,r}insertAfter(e,t){if(!t||t===this._last)return this.addLast(e);if(!(t instanceof Private$n.LinkedListNode)||t.list!==this)throw new Error("Reference node is not owned by the list.");let r=new Private$n.LinkedListNode(this,e),s=t,n=s.next;return r.next=n,r.prev=s,s.next=r,n.prev=r,this._size++,r}removeFirst(){let e=this._first;if(e)return e===this._last?(this._first=null,this._last=null):(this._first=e.next,this._first.prev=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value}removeLast(){let e=this._last;if(e)return e===this._first?(this._first=null,this._last=null):(this._last=e.prev,this._last.next=null),e.list=null,e.next=null,e.prev=null,this._size--,e.value}removeNode(e){if(!(e instanceof Private$n.LinkedListNode)||e.list!==this)throw new Error("Node is not owned by the list.");let t=e;t===this._first&&t===this._last?(this._first=null,this._last=null):t===this._first?(this._first=t.next,this._first.prev=null):t===this._last?(this._last=t.prev,this._last.next=null):(t.next.prev=t.prev,t.prev.next=t.next),t.list=null,t.next=null,t.prev=null,this._size--}clear(){let e=this._first;for(;e;){let t=e.next;e.list=null,e.prev=null,e.next=null,e=t}this._first=null,this._last=null,this._size=0}}LinkedList2=LinkedList||(LinkedList={}),LinkedList2.from=function(e){let t=new LinkedList2;return t.assign(e),t},function(e){e.LinkedListNode=class{constructor(e,t){this.list=null,this.next=null,this.prev=null,this.list=e,this.value=t}}}(Private$n||(Private$n={}));class Message{constructor(e){this.type=e}get isConflatable(){return!1}conflate(e){return!1}}class ConflatableMessage extends Message{get isConflatable(){return!0}conflate(e){return!0}}!function(e){let t=null;const r=/* @__PURE__ */(e=>t=>{let r=!1;return e.then(()=>!r&&t()),()=>{r=!0}})(Promise.resolve());function s(e,t){let r=i.get(e);if(!r||0===r.length)return void c(e,t);let s=every$2(retro(r),r=>!r||function(e,t,r){let s=!0;try{s="function"==typeof e?e(t,r):e.messageHook(t,r)}catch(n){a(n)}return s}(r,e,t));s&&c(e,t)}e.sendMessage=s,e.postMessage=function(e,t){if(!t.isConflatable)return void d(e,t);some$1(n,r=>r.handler===e&&(!!r.msg&&(r.msg.type===t.type&&(!!r.msg.isConflatable&&r.msg.conflate(t)))))||d(e,t)},e.installMessageHook=function(e,t){let r=i.get(e);r&&-1!==r.indexOf(t)||(r?r.push(t):i.set(e,[t]))},e.removeMessageHook=function(e,t){let r=i.get(e);if(!r)return;let s=r.indexOf(t);-1!==s&&(r[s]=null,u(r))},e.clearData=function(e){let t=i.get(e);t&&t.length>0&&(ArrayExt.fill(t,null),u(t));for(const r of n)r.handler===e&&(r.handler=null,r.msg=null)},e.flush=function(){l||null===t||(t(),t=null,l=!0,h(),l=!1)},e.getExceptionHandler=function(){return a},e.setExceptionHandler=function(e){let t=a;return a=e,t};const n=new LinkedList,i=/* @__PURE__ */new WeakMap,o=/* @__PURE__ */new Set;let a=e=>{console.error(e)},l=!1;function c(e,t){try{e.processMessage(t)}catch(r){a(r)}}function d(e,s){n.addLast({handler:e,msg:s}),null===t&&(t=r(h))}function h(){if(t=null,n.isEmpty)return;let e={handler:null,msg:null};for(n.addLast(e);;){let t=n.removeFirst();if(t===e)return;t.handler&&t.msg&&s(t.handler,t.msg)}}function u(e){0===o.size&&r(p),o.add(e)}function p(){o.forEach(g),o.clear()}function g(e){ArrayExt.removeAllWhere(e,m)}function m(e){return null===e}}(MessageLoop||(MessageLoop={}));class Drag{constructor(e){this._onScrollFrame=()=>{if(!this._scrollTarget)return;let{element:e,edge:t,distance:r}=this._scrollTarget,s=Private$m.SCROLL_EDGE_SIZE-r,n=Math.pow(s/Private$m.SCROLL_EDGE_SIZE,2),i=Math.max(1,Math.round(n*Private$m.SCROLL_EDGE_SIZE));switch(t){case"top":e.scrollTop-=i;break;case"left":e.scrollLeft-=i;break;case"right":e.scrollLeft+=i;break;case"bottom":e.scrollTop+=i}requestAnimationFrame(this._onScrollFrame)},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.document=e.document||document,this.mimeData=e.mimeData,this.dragImage=e.dragImage||null,this.proposedAction=e.proposedAction||"copy",this.supportedActions=e.supportedActions||"all",this.source=e.source||null}dispose(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){let e=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:-1,clientY:-1});Private$m.dispatchDragLeave(this,this._currentTarget,null,e)}this._finalize("none")}}get isDisposed(){return this._disposed}start(e,t){if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(e,t),this._promise=new Promise(e=>{this._resolve=e});let r=new PointerEvent("pointermove",{bubbles:!0,cancelable:!0,clientX:e,clientY:t});return document.dispatchEvent(r),this._promise}handleEvent(e){switch(e.type){case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"keydown":this._evtKeyDown(e);break;default:e.preventDefault(),e.stopPropagation()}}moveDragImage(e,t){if(!this.dragImage)return;this.dragImage.style.transform=`translate(${e}px, ${t}px)`}_evtPointerMove(e){e.preventDefault(),e.stopPropagation(),this._updateCurrentTarget(e),this._updateDragScroll(e),this.moveDragImage(e.clientX,e.clientY)}_evtPointerUp(e){if(e.preventDefault(),e.stopPropagation(),0!==e.button)return;if(this._updateCurrentTarget(e),!this._currentTarget)return void this._finalize("none");if("none"===this._dropAction)return Private$m.dispatchDragLeave(this,this._currentTarget,null,e),void this._finalize("none");let t=Private$m.dispatchDrop(this,this._currentTarget,e);this._finalize(t)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this.dispose()}_addListeners(){document.addEventListener("pointerdown",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("pointerup",this,!0),document.addEventListener("pointerenter",this,!0),document.addEventListener("pointerleave",this,!0),document.addEventListener("pointerover",this,!0),document.addEventListener("pointerout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)}_removeListeners(){document.removeEventListener("pointerdown",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointerenter",this,!0),document.removeEventListener("pointerleave",this,!0),document.removeEventListener("pointerover",this,!0),document.removeEventListener("pointerout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)}_updateDragScroll(e){let t=Private$m.findScrollTarget(e);(this._scrollTarget||t)&&(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=t)}_updateCurrentTarget(e){let t=this._currentTarget,r=this._currentTarget,s=this._currentElement,n=Private$m.findElementBehindBackdrop(e,this.document);this._currentElement=n,n!==s&&n!==r&&Private$m.dispatchDragExit(this,r,n,e),n!==s&&n!==r&&(r=Private$m.dispatchDragEnter(this,n,r,e)),r!==t&&(this._currentTarget=r,Private$m.dispatchDragLeave(this,t,r,e));let i=Private$m.dispatchDragOver(this,r,e);this._setDropAction(i)}_attachDragImage(e,t){if(!this.dragImage)return;this.dragImage.classList.add("lm-mod-drag-image");let r=this.dragImage.style;r.pointerEvents="none",r.position="fixed",r.transform=`translate(${e}px, ${t}px)`;(this.document instanceof Document?this.document.body:this.document.firstElementChild).appendChild(this.dragImage)}_detachDragImage(){if(!this.dragImage)return;let e=this.dragImage.parentNode;e&&e.removeChild(this.dragImage)}_setDropAction(e){if(e=Private$m.validateAction(e,this.supportedActions),!this._override||this._dropAction!==e)switch(e){case"none":this._dropAction=e,this._override=Drag.overrideCursor("no-drop",this.document);break;case"copy":this._dropAction=e,this._override=Drag.overrideCursor("copy",this.document);break;case"link":this._dropAction=e,this._override=Drag.overrideCursor("alias",this.document);break;case"move":this._dropAction=e,this._override=Drag.overrideCursor("move",this.document)}}_finalize(e){let t=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,t&&t(e)}}!function(e){class t extends DragEvent{constructor(e,t){super(t.type,{bubbles:!0,cancelable:!0,altKey:e.altKey,button:e.button,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:0,metaKey:e.metaKey,relatedTarget:t.related,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,view:window});const{drag:r}=t;this.dropAction="none",this.mimeData=r.mimeData,this.proposedAction=r.proposedAction,this.supportedActions=r.supportedActions,this.source=r.source}}e.Event=t,e.overrideCursor=function(e,t=document){return Private$m.overrideCursor(e,t)}}(Drag||(Drag={})),function(e){function t(t,n=document){if(t){if(r&&t==r.event)return r.element;e.cursorBackdrop.style.zIndex="-1000";const s=n.elementFromPoint(t.clientX,t.clientY);return e.cursorBackdrop.style.zIndex="",r={event:t,element:s},s}{const t=e.cursorBackdrop.style.transform;if(s&&t===s.transform)return s.element;const r=e.cursorBackdrop.getBoundingClientRect();e.cursorBackdrop.style.zIndex="-1000";const i=n.elementFromPoint(r.left+r.width/2,r.top+r.height/2);return e.cursorBackdrop.style.zIndex="",s={transform:t,element:i},i}}e.SCROLL_EDGE_SIZE=20,e.validateAction=function(e,t){return n[e]&i[t]?e:"none"},e.findElementBehindBackdrop=t;let r=null,s=null;e.findScrollTarget=function(r){let s=r.clientX,n=r.clientY,i=t(r);for(;i;i=i.parentElement){if(!i.hasAttribute("data-lm-dragscroll"))continue;let t=0,r=0;i===document.body&&(t=window.pageXOffset,r=window.pageYOffset);let o=i.getBoundingClientRect(),a=o.top+r,l=o.left+t,c=l+o.width,d=a+o.height;if(s<l||s>=c||n<a||n>=d)continue;let h,u=s-l+1,p=n-a+1,g=c-s,m=d-n,f=Math.min(u,p,g,m);if(f>e.SCROLL_EDGE_SIZE)continue;switch(f){case m:h="bottom";break;case p:h="top";break;case g:h="right";break;case u:h="left";break;default:throw"unreachable"}let v,_=i.scrollWidth-i.clientWidth,y=i.scrollHeight-i.clientHeight;switch(h){case"top":v=y>0&&i.scrollTop>0;break;case"left":v=_>0&&i.scrollLeft>0;break;case"right":v=_>0&&i.scrollLeft<_;break;case"bottom":v=y>0&&i.scrollTop<y;break;default:throw"unreachable"}if(v)return{element:i,edge:h,distance:f}}return null},e.dispatchDragEnter=function(e,t,r,s){if(!t)return null;let n=new Drag.Event(s,{drag:e,related:r,type:"lm-dragenter"});if(!t.dispatchEvent(n))return t;const i=e.document instanceof Document?e.document.body:e.document.firstElementChild;return t===i?r:(n=new Drag.Event(s,{drag:e,related:r,type:"lm-dragenter"}),i.dispatchEvent(n),i)},e.dispatchDragExit=function(e,t,r,s){if(!t)return;let n=new Drag.Event(s,{drag:e,related:r,type:"lm-dragexit"});t.dispatchEvent(n)},e.dispatchDragLeave=function(e,t,r,s){if(!t)return;let n=new Drag.Event(s,{drag:e,related:r,type:"lm-dragleave"});t.dispatchEvent(n)},e.dispatchDragOver=function(e,t,r){if(!t)return"none";let s=new Drag.Event(r,{drag:e,related:null,type:"lm-dragover"});return!t.dispatchEvent(s)?s.dropAction:"none"},e.dispatchDrop=function(e,t,r){if(!t)return"none";let s=new Drag.Event(r,{drag:e,related:null,type:"lm-drop"});return!t.dispatchEvent(s)?s.dropAction:"none"};const n={none:0,copy:1,link:2,move:4},i={none:n.none,copy:n.copy,link:n.link,move:n.move,"copy-link":n.copy|n.link,"copy-move":n.copy|n.move,"link-move":n.link|n.move,all:n.copy|n.link|n.move};function o(t){e.cursorBackdrop&&(e.cursorBackdrop.style.transform=`translate(${t.clientX}px, ${t.clientY}px)`)}function a(r){if(!e.cursorBackdrop)return;let s=t();if(!s)return;const n=s.closest("[data-lm-dragscroll]");n&&(n.scrollTop+=e.cursorBackdrop.scrollTop-c,n.scrollLeft+=e.cursorBackdrop.scrollLeft-c,l())}function l(){e.cursorBackdrop.scrollTop=c,e.cursorBackdrop.scrollLeft=c}e.overrideCursor=function(t,r=document){let s=++d;const n=r instanceof Document?r.body:r.firstElementChild;return e.cursorBackdrop.isConnected||(e.cursorBackdrop.style.transform="scale(0)",n.appendChild(e.cursorBackdrop),l(),document.addEventListener("pointermove",o,{capture:!0,passive:!0}),e.cursorBackdrop.addEventListener("scroll",a,{capture:!0,passive:!0})),e.cursorBackdrop.style.cursor=t,new DisposableDelegate(()=>{s===d&&e.cursorBackdrop.isConnected&&(document.removeEventListener("pointermove",o,!0),e.cursorBackdrop.removeEventListener("scroll",a,!0),n.removeChild(e.cursorBackdrop))})};const c=500;let d=0;e.cursorBackdrop=function(){const e=document.createElement("div");return e.classList.add("lm-cursor-backdrop"),e}()}(Private$m||(Private$m={}));class VirtualText{constructor(e){this.type="text",this.content=e}}class VirtualElement{constructor(e,t,r,s){this.type="element",this.tag=e,this.attrs=t,this.children=r,this.renderer=s}}function h(e){let t,r={},s=[];for(let i=1,o=arguments.length;i<o;++i){let e=arguments[i];"string"==typeof e?s.push(new VirtualText(e)):e instanceof VirtualText||e instanceof VirtualElement?s.push(e):e instanceof Array?n(s,e):1!==i&&2!==i||!e||"object"!=typeof e||("render"in e?t=e:r=e)}return new VirtualElement(e,r,s,t);function n(e,t){for(let r of t)"string"==typeof r?e.push(new VirtualText(r)):(r instanceof VirtualText||r instanceof VirtualElement)&&e.push(r)}}h2=h||(h={}),h2.a=h2.bind(void 0,"a"),h2.abbr=h2.bind(void 0,"abbr"),h2.address=h2.bind(void 0,"address"),h2.area=h2.bind(void 0,"area"),h2.article=h2.bind(void 0,"article"),h2.aside=h2.bind(void 0,"aside"),h2.audio=h2.bind(void 0,"audio"),h2.b=h2.bind(void 0,"b"),h2.bdi=h2.bind(void 0,"bdi"),h2.bdo=h2.bind(void 0,"bdo"),h2.blockquote=h2.bind(void 0,"blockquote"),h2.br=h2.bind(void 0,"br"),h2.button=h2.bind(void 0,"button"),h2.canvas=h2.bind(void 0,"canvas"),h2.caption=h2.bind(void 0,"caption"),h2.cite=h2.bind(void 0,"cite"),h2.code=h2.bind(void 0,"code"),h2.col=h2.bind(void 0,"col"),h2.colgroup=h2.bind(void 0,"colgroup"),h2.data=h2.bind(void 0,"data"),h2.datalist=h2.bind(void 0,"datalist"),h2.dd=h2.bind(void 0,"dd"),h2.del=h2.bind(void 0,"del"),h2.dfn=h2.bind(void 0,"dfn"),h2.div=h2.bind(void 0,"div"),h2.dl=h2.bind(void 0,"dl"),h2.dt=h2.bind(void 0,"dt"),h2.em=h2.bind(void 0,"em"),h2.embed=h2.bind(void 0,"embed"),h2.fieldset=h2.bind(void 0,"fieldset"),h2.figcaption=h2.bind(void 0,"figcaption"),h2.figure=h2.bind(void 0,"figure"),h2.footer=h2.bind(void 0,"footer"),h2.form=h2.bind(void 0,"form"),h2.h1=h2.bind(void 0,"h1"),h2.h2=h2.bind(void 0,"h2"),h2.h3=h2.bind(void 0,"h3"),h2.h4=h2.bind(void 0,"h4"),h2.h5=h2.bind(void 0,"h5"),h2.h6=h2.bind(void 0,"h6"),h2.header=h2.bind(void 0,"header"),h2.hr=h2.bind(void 0,"hr"),h2.i=h2.bind(void 0,"i"),h2.iframe=h2.bind(void 0,"iframe"),h2.img=h2.bind(void 0,"img"),h2.input=h2.bind(void 0,"input"),h2.ins=h2.bind(void 0,"ins"),h2.kbd=h2.bind(void 0,"kbd"),h2.label=h2.bind(void 0,"label"),h2.legend=h2.bind(void 0,"legend"),h2.li=h2.bind(void 0,"li"),h2.main=h2.bind(void 0,"main"),h2.map=h2.bind(void 0,"map"),h2.mark=h2.bind(void 0,"mark"),h2.meter=h2.bind(void 0,"meter"),h2.nav=h2.bind(void 0,"nav"),h2.noscript=h2.bind(void 0,"noscript"),h2.object=h2.bind(void 0,"object"),h2.ol=h2.bind(void 0,"ol"),h2.optgroup=h2.bind(void 0,"optgroup"),h2.option=h2.bind(void 0,"option"),h2.output=h2.bind(void 0,"output"),h2.p=h2.bind(void 0,"p"),h2.param=h2.bind(void 0,"param"),h2.pre=h2.bind(void 0,"pre"),h2.progress=h2.bind(void 0,"progress"),h2.q=h2.bind(void 0,"q"),h2.rp=h2.bind(void 0,"rp"),h2.rt=h2.bind(void 0,"rt"),h2.ruby=h2.bind(void 0,"ruby"),h2.s=h2.bind(void 0,"s"),h2.samp=h2.bind(void 0,"samp"),h2.section=h2.bind(void 0,"section"),h2.select=h2.bind(void 0,"select"),h2.small=h2.bind(void 0,"small"),h2.source=h2.bind(void 0,"source"),h2.span=h2.bind(void 0,"span"),h2.strong=h2.bind(void 0,"strong"),h2.sub=h2.bind(void 0,"sub"),h2.summary=h2.bind(void 0,"summary"),h2.sup=h2.bind(void 0,"sup"),h2.table=h2.bind(void 0,"table"),h2.tbody=h2.bind(void 0,"tbody"),h2.td=h2.bind(void 0,"td"),h2.textarea=h2.bind(void 0,"textarea"),h2.tfoot=h2.bind(void 0,"tfoot"),h2.th=h2.bind(void 0,"th"),h2.thead=h2.bind(void 0,"thead"),h2.time=h2.bind(void 0,"time"),h2.title=h2.bind(void 0,"title"),h2.tr=h2.bind(void 0,"tr"),h2.track=h2.bind(void 0,"track"),h2.u=h2.bind(void 0,"u"),h2.ul=h2.bind(void 0,"ul"),h2.var_=h2.bind(void 0,"var"),h2.video=h2.bind(void 0,"video"),h2.wbr=h2.bind(void 0,"wbr"),VirtualDOM2=VirtualDOM||(VirtualDOM={}),VirtualDOM2.realize=function(e){return Private$l.createDOMNode(e)},VirtualDOM2.render=function(e,t){let r=Private$l.hostMap.get(t)||[],s=Private$l.asContentArray(e);Private$l.hostMap.set(t,s),Private$l.updateContent(t,r,s)},function(e){function t(e){let r=arguments[1]||null;const n=arguments[2]||null;if(r)r.insertBefore(t(e),n);else{if("text"===e.type)return document.createTextNode(e.content);if(r=document.createElement(e.tag),function(e,t){for(let r in t)r in s||("on"===r.substr(0,2)?e[r]=t[r]:e.setAttribute(r,t[r]));void 0!==t.className&&e.setAttribute("class",t.className);void 0!==t.htmlFor&&e.setAttribute("for",t.htmlFor);t.dataset&&function(e,t){for(let r in t)e.setAttribute(`data-${r}`,t[r])}(e,t.dataset);t.style&&function(e,t){let r,s=e.style;for(r in t)s[r]=t[r]}(e,t.style)}(r,e.attrs),e.renderer)return e.renderer.render(r,{attrs:e.attrs,children:e.children}),r;for(let s=0,n=e.children.length;s<n;++s)t(e.children[s],r)}return r}function r(e,t,s,n){for(let i=t.length-1;i>=s;--i){const s=t[i],o=n?e.lastChild:e.childNodes[i];"text"===s.type||(s.renderer&&s.renderer.unrender?s.renderer.unrender(o,{attrs:s.attrs,children:s.children}):r(o,s.children,0,!1)),n&&e.removeChild(o)}}e.hostMap=/* @__PURE__ */new WeakMap,e.asContentArray=function(e){return e?e instanceof Array?e:[e]:[]},e.createDOMNode=t,e.updateContent=function e(s,i,o){if(i===o)return;let a=function(e,t){let r=e.firstChild,s=/* @__PURE__ */Object.create(null);for(let n of t)"element"===n.type&&n.attrs.key&&(s[n.attrs.key]={vNode:n,element:r}),r=r.nextSibling;return s}(s,i),l=i.slice(),c=s.firstChild,d=o.length;for(let r=0;r<d;++r){if(r>=l.length){t(o[r],s);continue}let i=l[r],d=o[r];if(i===d){c=c.nextSibling;continue}if("text"===i.type&&"text"===d.type){c.textContent!==d.content&&(c.textContent=d.content),c=c.nextSibling;continue}if("text"===i.type||"text"===d.type){ArrayExt.insert(l,r,d),t(d,s,c);continue}if(!i.renderer!=!d.renderer){ArrayExt.insert(l,r,d),t(d,s,c);continue}let h=d.attrs.key;if(h&&h in a){let e=a[h];e.vNode!==i&&(ArrayExt.move(l,l.indexOf(e.vNode,r+1),r),s.insertBefore(e.element,c),i=e.vNode,c=e.element)}if(i===d){c=c.nextSibling;continue}let u=i.attrs.key;u&&u!==h?(ArrayExt.insert(l,r,d),t(d,s,c)):i.tag===d.tag?(n(c,i.attrs,d.attrs),d.renderer?d.renderer.render(c,{attrs:d.attrs,children:d.children}):e(c,i.children,d.children),c=c.nextSibling):(ArrayExt.insert(l,r,d),t(d,s,c))}r(s,l,d,!0)};const s={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function n(e,t,r){if(t===r)return;let n;for(n in t)n in s||n in r||("on"===n.substr(0,2)?e[n]=null:e.removeAttribute(n));for(n in r)n in s||t[n]===r[n]||("on"===n.substr(0,2)?e[n]=r[n]:e.setAttribute(n,r[n]));t.className!==r.className&&(void 0!==r.className?e.setAttribute("class",r.className):e.removeAttribute("class")),t.htmlFor!==r.htmlFor&&(void 0!==r.htmlFor?e.setAttribute("for",r.htmlFor):e.removeAttribute("for")),t.dataset!==r.dataset&&function(e,t,r){for(let s in t)s in r||e.removeAttribute(`data-${s}`);for(let s in r)t[s]!==r[s]&&e.setAttribute(`data-${s}`,r[s])}(e,t.dataset||{},r.dataset||{}),t.style!==r.style&&function(e,t,r){let s,n=e.style;for(s in t)s in r||(n[s]="");for(s in r)t[s]!==r[s]&&(n[s]=r[s])}(e,t.style||{},r.style||{})}}(Private$l||(Private$l={}));class BoxSizer{constructor(){this.sizeHint=0,this.minSize=0,this.maxSize=1/0,this.stretch=1,this.size=0,this.done=!1}}BoxEngine2=BoxEngine||(BoxEngine={}),BoxEngine2.calc=function(e,t){let r=e.length;if(0===r)return t;let s=0,n=0,i=0,o=0,a=0;for(let d=0;d<r;++d){let t=e[d],r=t.minSize,l=t.maxSize,c=t.sizeHint;t.done=!1,t.size=Math.max(r,Math.min(c,l)),i+=t.size,s+=r,n+=l,t.stretch>0&&(o+=t.stretch,a++)}if(t===i)return 0;if(t<=s){for(let t=0;t<r;++t){let r=e[t];r.size=r.minSize}return t-s}if(t>=n){for(let t=0;t<r;++t){let r=e[t];r.size=r.maxSize}return t-n}let l=.01,c=r;if(t<i){let s=i-t;for(;a>0&&s>l;){let t=s,n=o;for(let i=0;i<r;++i){let r=e[i];if(r.done||0===r.stretch)continue;let l=r.stretch*t/n;r.size-l<=r.minSize?(s-=r.size-r.minSize,o-=r.stretch,r.size=r.minSize,r.done=!0,c--,a--):(s-=l,r.size-=l)}}for(;c>0&&s>l;){let t=s/c;for(let n=0;n<r;++n){let r=e[n];r.done||(r.size-t<=r.minSize?(s-=r.size-r.minSize,r.size=r.minSize,r.done=!0,c--):(s-=t,r.size-=t))}}}else{let s=t-i;for(;a>0&&s>l;){let t=s,n=o;for(let i=0;i<r;++i){let r=e[i];if(r.done||0===r.stretch)continue;let l=r.stretch*t/n;r.size+l>=r.maxSize?(s-=r.maxSize-r.size,o-=r.stretch,r.size=r.maxSize,r.done=!0,c--,a--):(s-=l,r.size+=l)}}for(;c>0&&s>l;){let t=s/c;for(let n=0;n<r;++n){let r=e[n];r.done||(r.size+t>=r.maxSize?(s-=r.maxSize-r.size,r.size=r.maxSize,r.done=!0,c--):(s-=t,r.size+=t))}}}return 0},BoxEngine2.adjust=function(e,t,r){0!==e.length&&0!==r&&(r>0?function(e,t,r){let s=0;for(let a=0;a<=t;++a){let t=e[a];s+=t.maxSize-t.size}let n=0;for(let a=t+1,l=e.length;a<l;++a){let t=e[a];n+=t.size-t.minSize}let i=r=Math.min(r,s,n);for(let a=t;a>=0&&i>0;--a){let t=e[a],r=t.maxSize-t.size;r>=i?(t.sizeHint=t.size+i,i=0):(t.sizeHint=t.size+r,i-=r)}let o=r;for(let a=t+1,l=e.length;a<l&&o>0;++a){let t=e[a],r=t.size-t.minSize;r>=o?(t.sizeHint=t.size-o,o=0):(t.sizeHint=t.size-r,o-=r)}}(e,t,r):function(e,t,r){let s=0;for(let a=t+1,l=e.length;a<l;++a){let t=e[a];s+=t.maxSize-t.size}let n=0;for(let a=0;a<=t;++a){let t=e[a];n+=t.size-t.minSize}let i=r=Math.min(r,s,n);for(let a=t+1,l=e.length;a<l&&i>0;++a){let t=e[a],r=t.maxSize-t.size;r>=i?(t.sizeHint=t.size+i,i=0):(t.sizeHint=t.size+r,i-=r)}let o=r;for(let a=t;a>=0&&o>0;--a){let t=e[a],r=t.size-t.minSize;r>=o?(t.sizeHint=t.size-o,o=0):(t.sizeHint=t.size-r,o-=r)}}(e,t,-r))};class Title{constructor(e){this._label="",this._caption="",this._mnemonic=-1,this._icon=void 0,this._iconClass="",this._iconLabel="",this._className="",this._closable=!1,this._changed=new Signal(this),this._isDisposed=!1,this.owner=e.owner,void 0!==e.label&&(this._label=e.label),void 0!==e.mnemonic&&(this._mnemonic=e.mnemonic),void 0!==e.icon&&(this._icon=e.icon),void 0!==e.iconClass&&(this._iconClass=e.iconClass),void 0!==e.iconLabel&&(this._iconLabel=e.iconLabel),void 0!==e.caption&&(this._caption=e.caption),void 0!==e.className&&(this._className=e.className),void 0!==e.closable&&(this._closable=e.closable),this._dataset=e.dataset||{}}get changed(){return this._changed}get label(){return this._label}set label(e){this._label!==e&&(this._label=e,this._changed.emit(void 0))}get mnemonic(){return this._mnemonic}set mnemonic(e){this._mnemonic!==e&&(this._mnemonic=e,this._changed.emit(void 0))}get icon(){return this._icon}set icon(e){this._icon!==e&&(this._icon=e,this._changed.emit(void 0))}get iconClass(){return this._iconClass}set iconClass(e){this._iconClass!==e&&(this._iconClass=e,this._changed.emit(void 0))}get iconLabel(){return this._iconLabel}set iconLabel(e){this._iconLabel!==e&&(this._iconLabel=e,this._changed.emit(void 0))}get caption(){return this._caption}set caption(e){this._caption!==e&&(this._caption=e,this._changed.emit(void 0))}get className(){return this._className}set className(e){this._className!==e&&(this._className=e,this._changed.emit(void 0))}get closable(){return this._closable}set closable(e){this._closable!==e&&(this._closable=e,this._changed.emit(void 0))}get dataset(){return this._dataset}set dataset(e){this._dataset!==e&&(this._dataset=e,this._changed.emit(void 0))}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,Signal.clearData(this))}}class Widget{constructor(e={}){this._flags=0,this._layout=null,this._parent=null,this._disposed=new Signal(this),this._hiddenMode=Widget.HiddenMode.Display,this.node=Private$j$1.createNode(e),this.addClass("lm-Widget")}dispose(){this.isDisposed||(this.setFlag(Widget.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&Widget.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),this.title.dispose(),Signal.clearData(this),MessageLoop.clearData(this),AttachedProperty.clearData(this))}get disposed(){return this._disposed}get isDisposed(){return this.testFlag(Widget.Flag.IsDisposed)}get isAttached(){return this.testFlag(Widget.Flag.IsAttached)}get isHidden(){return this.testFlag(Widget.Flag.IsHidden)}get isVisible(){let e=this;do{if(e.isHidden||!e.isAttached)return!1;e=e.parent}while(null!=e);return!0}get title(){return Private$j$1.titleProperty.get(this)}get id(){return this.node.id}set id(e){this.node.id=e}get dataset(){return this.node.dataset}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this.isHidden&&this._toggleHidden(!1),e==Widget.HiddenMode.Scale?this.node.style.willChange="transform":this.node.style.willChange="auto",this._hiddenMode=e,this.isHidden&&this._toggleHidden(!0))}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(e&&this.contains(e))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){let e=new Widget.ChildMessage("child-removed",this);MessageLoop.sendMessage(this._parent,e)}if(this._parent=e,this._parent&&!this._parent.isDisposed){let e=new Widget.ChildMessage("child-added",this);MessageLoop.sendMessage(this._parent,e)}this.isDisposed||MessageLoop.sendMessage(this,Widget.Msg.ParentChanged)}}get layout(){return this._layout}set layout(e){if(this._layout!==e){if(this.testFlag(Widget.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(e.parent)throw new Error("Cannot change layout parent.");this._layout=e,e.parent=this}}*children(){this._layout&&(yield*this._layout)}contains(e){for(let t=e;t;t=t._parent)if(t===this)return!0;return!1}hasClass(e){return this.node.classList.contains(e)}addClass(e){this.node.classList.add(e)}removeClass(e){this.node.classList.remove(e)}toggleClass(e,t){return!0===t?(this.node.classList.add(e),!0):!1===t?(this.node.classList.remove(e),!1):this.node.classList.toggle(e)}update(){MessageLoop.postMessage(this,Widget.Msg.UpdateRequest)}fit(){MessageLoop.postMessage(this,Widget.Msg.FitRequest)}activate(){MessageLoop.postMessage(this,Widget.Msg.ActivateRequest)}close(){MessageLoop.sendMessage(this,Widget.Msg.CloseRequest)}show(){if(this.testFlag(Widget.Flag.IsHidden)&&(!this.isAttached||this.parent&&!this.parent.isVisible||MessageLoop.sendMessage(this,Widget.Msg.BeforeShow),this.clearFlag(Widget.Flag.IsHidden),this._toggleHidden(!1),!this.isAttached||this.parent&&!this.parent.isVisible||MessageLoop.sendMessage(this,Widget.Msg.AfterShow),this.parent)){let e=new Widget.ChildMessage("child-shown",this);MessageLoop.sendMessage(this.parent,e)}}hide(){if(!this.testFlag(Widget.Flag.IsHidden)&&(!this.isAttached||this.parent&&!this.parent.isVisible||MessageLoop.sendMessage(this,Widget.Msg.BeforeHide),this.setFlag(Widget.Flag.IsHidden),this._toggleHidden(!0),!this.isAttached||this.parent&&!this.parent.isVisible||MessageLoop.sendMessage(this,Widget.Msg.AfterHide),this.parent)){let e=new Widget.ChildMessage("child-hidden",this);MessageLoop.sendMessage(this.parent,e)}}setHidden(e){e?this.hide():this.show()}testFlag(e){return 0!==(this._flags&e)}setFlag(e){this._flags|=e}clearFlag(e){this._flags&=~e}processMessage(e){switch(e.type){case"resize":this.notifyLayout(e),this.onResize(e);break;case"update-request":this.notifyLayout(e),this.onUpdateRequest(e);break;case"fit-request":this.notifyLayout(e),this.onFitRequest(e);break;case"before-show":this.notifyLayout(e),this.onBeforeShow(e);break;case"after-show":this.setFlag(Widget.Flag.IsVisible),this.notifyLayout(e),this.onAfterShow(e);break;case"before-hide":this.notifyLayout(e),this.onBeforeHide(e);break;case"after-hide":this.clearFlag(Widget.Flag.IsVisible),this.notifyLayout(e),this.onAfterHide(e);break;case"before-attach":this.notifyLayout(e),this.onBeforeAttach(e);break;case"after-attach":this.isHidden||this.parent&&!this.parent.isVisible||this.setFlag(Widget.Flag.IsVisible),this.setFlag(Widget.Flag.IsAttached),this.notifyLayout(e),this.onAfterAttach(e);break;case"before-detach":this.notifyLayout(e),this.onBeforeDetach(e);break;case"after-detach":this.clearFlag(Widget.Flag.IsVisible),this.clearFlag(Widget.Flag.IsAttached),this.notifyLayout(e),this.onAfterDetach(e);break;case"activate-request":this.notifyLayout(e),this.onActivateRequest(e);break;case"close-request":this.notifyLayout(e),this.onCloseRequest(e);break;case"child-added":this.notifyLayout(e),this.onChildAdded(e);break;case"child-removed":this.notifyLayout(e),this.onChildRemoved(e);break;default:this.notifyLayout(e)}}notifyLayout(e){this._layout&&this._layout.processParentMessage(e)}onCloseRequest(e){this.parent?this.parent=null:this.isAttached&&Widget.detach(this)}onResize(e){}onUpdateRequest(e){}onFitRequest(e){}onActivateRequest(e){}onBeforeShow(e){}onAfterShow(e){}onBeforeHide(e){}onAfterHide(e){}onBeforeAttach(e){}onAfterAttach(e){}onBeforeDetach(e){}onAfterDetach(e){}onChildAdded(e){}onChildRemoved(e){}_toggleHidden(e){if(e)switch(this._hiddenMode){case Widget.HiddenMode.Display:this.addClass("lm-mod-hidden");break;case Widget.HiddenMode.Scale:this.node.style.transform="scale(0)",this.node.setAttribute("aria-hidden","true");break;case Widget.HiddenMode.ContentVisibility:this.node.style.contentVisibility="hidden",this.node.style.zIndex="-1"}else switch(this._hiddenMode){case Widget.HiddenMode.Display:this.removeClass("lm-mod-hidden");break;case Widget.HiddenMode.Scale:this.node.style.transform="",this.node.removeAttribute("aria-hidden");break;case Widget.HiddenMode.ContentVisibility:this.node.style.contentVisibility="",this.node.style.zIndex=""}}}!function(e){var t,r,s,n;(t=e.HiddenMode||(e.HiddenMode={}))[t.Display=0]="Display",t[t.Scale=1]="Scale",t[t.ContentVisibility=2]="ContentVisibility",(r=e.Flag||(e.Flag={}))[r.IsDisposed=1]="IsDisposed",r[r.IsAttached=2]="IsAttached",r[r.IsHidden=4]="IsHidden",r[r.IsVisible=8]="IsVisible",r[r.DisallowLayout=16]="DisallowLayout",(s=e.Msg||(e.Msg={})).BeforeShow=new Message("before-show"),s.AfterShow=new Message("after-show"),s.BeforeHide=new Message("before-hide"),s.AfterHide=new Message("after-hide"),s.BeforeAttach=new Message("before-attach"),s.AfterAttach=new Message("after-attach"),s.BeforeDetach=new Message("before-detach"),s.AfterDetach=new Message("after-detach"),s.ParentChanged=new Message("parent-changed"),s.UpdateRequest=new ConflatableMessage("update-request"),s.FitRequest=new ConflatableMessage("fit-request"),s.ActivateRequest=new ConflatableMessage("activate-request"),s.CloseRequest=new ConflatableMessage("close-request");e.ChildMessage=class extends Message{constructor(e,t){super(e),this.child=t}};class i extends Message{constructor(e,t){super("resize"),this.width=e,this.height=t}}e.ResizeMessage=i,(n=i=e.ResizeMessage||(e.ResizeMessage={})).UnknownSize=new n(-1,-1),e.attach=function(t,r,s=null){if(t.parent)throw new Error("Cannot attach a child widget.");if(t.isAttached||t.node.isConnected)throw new Error("Widget is already attached.");if(!r.isConnected)throw new Error("Host is not attached.");MessageLoop.sendMessage(t,e.Msg.BeforeAttach),r.insertBefore(t.node,s),MessageLoop.sendMessage(t,e.Msg.AfterAttach)},e.detach=function(t){if(t.parent)throw new Error("Cannot detach a child widget.");if(!t.isAttached||!t.node.isConnected)throw new Error("Widget is not attached.");MessageLoop.sendMessage(t,e.Msg.BeforeDetach),t.node.parentNode.removeChild(t.node),MessageLoop.sendMessage(t,e.Msg.AfterDetach)}}(Widget||(Widget={})),function(e){e.titleProperty=new AttachedProperty({name:"title",create:e=>new Title({owner:e})}),e.createNode=function(e){return e.node||document.createElement(e.tag||"div")}}(Private$j$1||(Private$j$1={}));class Layout{constructor(e={}){this._disposed=!1,this._parent=null,this._fitPolicy=e.fitPolicy||"set-min-size"}dispose(){this._parent=null,this._disposed=!0,Signal.clearData(this),AttachedProperty.clearData(this)}get isDisposed(){return this._disposed}get parent(){return this._parent}set parent(e){if(this._parent!==e){if(this._parent)throw new Error("Cannot change parent widget.");if(e.layout!==this)throw new Error("Invalid parent widget.");this._parent=e,this.init()}}get fitPolicy(){return this._fitPolicy}set fitPolicy(e){if(this._fitPolicy!==e&&(this._fitPolicy=e,this._parent)){let e=this._parent.node.style;e.minWidth="",e.minHeight="",e.maxWidth="",e.maxHeight="",this._parent.fit()}}processParentMessage(e){switch(e.type){case"resize":this.onResize(e);break;case"update-request":this.onUpdateRequest(e);break;case"fit-request":this.onFitRequest(e);break;case"before-show":this.onBeforeShow(e);break;case"after-show":this.onAfterShow(e);break;case"before-hide":this.onBeforeHide(e);break;case"after-hide":this.onAfterHide(e);break;case"before-attach":this.onBeforeAttach(e);break;case"after-attach":this.onAfterAttach(e);break;case"before-detach":this.onBeforeDetach(e);break;case"after-detach":this.onAfterDetach(e);break;case"child-removed":this.onChildRemoved(e);break;case"child-shown":this.onChildShown(e);break;case"child-hidden":this.onChildHidden(e)}}init(){for(const e of this)e.parent=this.parent}onResize(e){for(const t of this)MessageLoop.sendMessage(t,Widget.ResizeMessage.UnknownSize)}onUpdateRequest(e){for(const t of this)MessageLoop.sendMessage(t,Widget.ResizeMessage.UnknownSize)}onBeforeAttach(e){for(const t of this)MessageLoop.sendMessage(t,e)}onAfterAttach(e){for(const t of this)MessageLoop.sendMessage(t,e)}onBeforeDetach(e){for(const t of this)MessageLoop.sendMessage(t,e)}onAfterDetach(e){for(const t of this)MessageLoop.sendMessage(t,e)}onBeforeShow(e){for(const t of this)t.isHidden||MessageLoop.sendMessage(t,e)}onAfterShow(e){for(const t of this)t.isHidden||MessageLoop.sendMessage(t,e)}onBeforeHide(e){for(const t of this)t.isHidden||MessageLoop.sendMessage(t,e)}onAfterHide(e){for(const t of this)t.isHidden||MessageLoop.sendMessage(t,e)}onChildRemoved(e){this.removeWidget(e.child)}onFitRequest(e){}onChildShown(e){}onChildHidden(e){}}Layout2=Layout||(Layout={}),Layout2.getHorizontalAlignment=function(e){return Private$i$1.horizontalAlignmentProperty.get(e)},Layout2.setHorizontalAlignment=function(e,t){Private$i$1.horizontalAlignmentProperty.set(e,t)},Layout2.getVerticalAlignment=function(e){return Private$i$1.verticalAlignmentProperty.get(e)},Layout2.setVerticalAlignment=function(e,t){Private$i$1.verticalAlignmentProperty.set(e,t)};class LayoutItem{constructor(e){this._top=NaN,this._left=NaN,this._width=NaN,this._height=NaN,this._minWidth=0,this._minHeight=0,this._maxWidth=1/0,this._maxHeight=1/0,this._disposed=!1,this.widget=e,this.widget.node.style.position="absolute",this.widget.node.style.contain="strict"}dispose(){if(this._disposed)return;this._disposed=!0;let e=this.widget.node.style;e.position="",e.top="",e.left="",e.width="",e.height="",e.contain=""}get minWidth(){return this._minWidth}get minHeight(){return this._minHeight}get maxWidth(){return this._maxWidth}get maxHeight(){return this._maxHeight}get isDisposed(){return this._disposed}get isHidden(){return this.widget.isHidden}get isVisible(){return this.widget.isVisible}get isAttached(){return this.widget.isAttached}fit(){let e=ElementExt.sizeLimits(this.widget.node);this._minWidth=e.minWidth,this._minHeight=e.minHeight,this._maxWidth=e.maxWidth,this._maxHeight=e.maxHeight}update(e,t,r,s){let n=Math.max(this._minWidth,Math.min(r,this._maxWidth)),i=Math.max(this._minHeight,Math.min(s,this._maxHeight));if(n<r)switch(Layout.getHorizontalAlignment(this.widget)){case"left":break;case"center":e+=(r-n)/2;break;case"right":e+=r-n;break;default:throw"unreachable"}if(i<s)switch(Layout.getVerticalAlignment(this.widget)){case"top":break;case"center":t+=(s-i)/2;break;case"bottom":t+=s-i;break;default:throw"unreachable"}let o=!1,a=this.widget.node.style;if(this._top!==t&&(this._top=t,a.top=`${t}px`),this._left!==e&&(this._left=e,a.left=`${e}px`),this._width!==n&&(o=!0,this._width=n,a.width=`${n}px`),this._height!==i&&(o=!0,this._height=i,a.height=`${i}px`),o){let e=new Widget.ResizeMessage(n,i);MessageLoop.sendMessage(this.widget,e)}}}!function(e){function t(e){e.parent&&e.parent.layout&&e.parent.update()}e.horizontalAlignmentProperty=new AttachedProperty({name:"horizontalAlignment",create:()=>"center",changed:t}),e.verticalAlignmentProperty=new AttachedProperty({name:"verticalAlignment",create:()=>"top",changed:t})}(Private$i$1||(Private$i$1={}));class PanelLayout extends Layout{constructor(){super(...arguments),this._widgets=[]}dispose(){for(;this._widgets.length>0;)this._widgets.pop().dispose();super.dispose()}get widgets(){return this._widgets}*[Symbol.iterator](){yield*this._widgets}addWidget(e){this.insertWidget(this._widgets.length,e)}insertWidget(e,t){t.parent=this.parent;let r=this._widgets.indexOf(t),s=Math.max(0,Math.min(e,this._widgets.length));if(-1===r)return ArrayExt.insert(this._widgets,s,t),void(this.parent&&this.attachWidget(s,t));s===this._widgets.length&&s--,r!==s&&(ArrayExt.move(this._widgets,r,s),this.parent&&this.moveWidget(r,s,t))}removeWidget(e){this.removeWidgetAt(this._widgets.indexOf(e))}removeWidgetAt(e){let t=ArrayExt.removeAt(this._widgets,e);t&&this.parent&&this.detachWidget(e,t)}init(){super.init();let e=0;for(const t of this)this.attachWidget(e++,t)}attachWidget(e,t){let r=this.parent.node.children[e];this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeAttach),this.parent.node.insertBefore(t.node,r),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterAttach)}moveWidget(e,t,r){this.parent.isAttached&&MessageLoop.sendMessage(r,Widget.Msg.BeforeDetach),this.parent.node.removeChild(r.node),this.parent.isAttached&&MessageLoop.sendMessage(r,Widget.Msg.AfterDetach);let s=this.parent.node.children[t];this.parent.isAttached&&MessageLoop.sendMessage(r,Widget.Msg.BeforeAttach),this.parent.node.insertBefore(r.node,s),this.parent.isAttached&&MessageLoop.sendMessage(r,Widget.Msg.AfterAttach)}detachWidget(e,t){this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterDetach)}}(Utils$1||(Utils$1={})).clampDimension=function(e){return Math.max(0,Math.floor(e))};var Utils$1$1=Utils$1,SplitLayout2,Private$h$1,Private$g$1,Private$f$1,Private$e$1,Private$d$1,BoxLayout2,Private$c$1,BoxPanel2,Private$b$1,Private$a$1,Private$9$1,Private$8$1;class SplitLayout extends PanelLayout{constructor(e){super(),this.widgetOffset=0,this._fixed=0,this._spacing=4,this._dirty=!1,this._hasNormedSizes=!1,this._sizers=[],this._items=[],this._handles=[],this._box=null,this._alignment="start",this._orientation="horizontal",this.renderer=e.renderer,void 0!==e.orientation&&(this._orientation=e.orientation),void 0!==e.alignment&&(this._alignment=e.alignment),void 0!==e.spacing&&(this._spacing=Utils$1.clampDimension(e.spacing))}dispose(){for(const e of this._items)e.dispose();this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,super.dispose()}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this.parent&&(this.parent.dataset.orientation=e,this.parent.fit()))}get alignment(){return this._alignment}set alignment(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))}get spacing(){return this._spacing}set spacing(e){e=Utils$1.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get handles(){return this._handles}absoluteSizes(){return this._sizers.map(e=>e.size)}relativeSizes(){return Private$h$1.normalize(this._sizers.map(e=>e.size))}setRelativeSizes(e,t=!0){let r=this._sizers.length,s=e.slice(0,r);for(;s.length<r;)s.push(0);let n=Private$h$1.normalize(s);for(let i=0;i<r;++i){let e=this._sizers[i];e.sizeHint=n[i],e.size=n[i]}this._hasNormedSizes=!0,t&&this.parent&&this.parent.update()}moveHandle(e,t){let r,s=this._handles[e];if(s&&!s.classList.contains("lm-mod-hidden")&&(r="horizontal"===this._orientation?t-s.offsetLeft:t-s.offsetTop,0!==r)){for(let e of this._sizers)e.size>0&&(e.sizeHint=e.size);BoxEngine.adjust(this._sizers,e,r),this.parent&&this.parent.update()}}init(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(e,t){let r=new LayoutItem(t),s=Private$h$1.createHandle(this.renderer),n=Private$h$1.averageSize(this._sizers),i=Private$h$1.createSizer(n);ArrayExt.insert(this._items,e,r),ArrayExt.insert(this._sizers,e,i),ArrayExt.insert(this._handles,e,s),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.node.appendChild(s),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterAttach),this.parent.fit()}moveWidget(e,t,r){ArrayExt.move(this._items,e,t),ArrayExt.move(this._sizers,e,t),ArrayExt.move(this._handles,e,t),this.parent.fit()}detachWidget(e,t){let r=ArrayExt.removeAt(this._items,e),s=ArrayExt.removeAt(this._handles,e);ArrayExt.removeAt(this._sizers,e),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.node.removeChild(s),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterDetach),r.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}updateItemPosition(e,t,r,s,n,i,o){const a=this._items[e];if(a.isHidden)return;let l=this._handles[e].style;t?(r+=this.widgetOffset,a.update(r,s,o,n),r+=o,l.top=`${s}px`,l.left=`${r}px`,l.width=`${this._spacing}px`,l.height=`${n}px`):(s+=this.widgetOffset,a.update(r,s,i,o),s+=o,l.top=`${s}px`,l.left=`${r}px`,l.width=`${i}px`,l.height=`${this._spacing}px`)}_fit(){let e=0,t=-1;for(let a=0,l=this._items.length;a<l;++a)this._items[a].isHidden?this._handles[a].classList.add("lm-mod-hidden"):(this._handles[a].classList.remove("lm-mod-hidden"),t=a,e++);-1!==t&&this._handles[t].classList.add("lm-mod-hidden"),this._fixed=this._spacing*Math.max(0,e-1)+this.widgetOffset*this._items.length;let r="horizontal"===this._orientation,s=r?this._fixed:0,n=r?0:this._fixed;for(let a=0,l=this._items.length;a<l;++a){let e=this._items[a],t=this._sizers[a];t.size>0&&(t.sizeHint=t.size),e.isHidden?(t.minSize=0,t.maxSize=0):(e.fit(),t.stretch=SplitLayout.getStretch(e.widget),r?(t.minSize=e.minWidth,t.maxSize=e.maxWidth,s+=e.minWidth,n=Math.max(n,e.minHeight)):(t.minSize=e.minHeight,t.maxSize=e.maxHeight,n+=e.minHeight,s=Math.max(s,e.minWidth)))}let i=this._box=ElementExt.boxSizing(this.parent.node);s+=i.horizontalSum,n+=i.verticalSum;let o=this.parent.node.style;o.minWidth=`${s}px`,o.minHeight=`${n}px`,this._dirty=!0,this.parent.parent&&MessageLoop.sendMessage(this.parent.parent,Widget.Msg.FitRequest),this._dirty&&MessageLoop.sendMessage(this.parent,Widget.Msg.UpdateRequest)}_update(e,t){this._dirty=!1;let r=0;for(let d=0,h=this._items.length;d<h;++d)r+=+!this._items[d].isHidden;if(0===r&&0===this.widgetOffset)return;e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=ElementExt.boxSizing(this.parent.node));let s=this._box.paddingTop,n=this._box.paddingLeft,i=e-this._box.horizontalSum,o=t-this._box.verticalSum,a=0,l=0,c="horizontal"===this._orientation;if(r>0){let e;if(e=c?Math.max(0,i-this._fixed):Math.max(0,o-this._fixed),this._hasNormedSizes){for(let t of this._sizers)t.sizeHint*=e;this._hasNormedSizes=!1}let t=BoxEngine.calc(this._sizers,e);if(t>0)switch(this._alignment){case"start":break;case"center":a=0,l=t/2;break;case"end":a=0,l=t;break;case"justify":a=t/r,l=0;break;default:throw"unreachable"}}for(let d=0,h=this._items.length;d<h;++d){const e=this._items[d].isHidden?0:this._sizers[d].size+a;this.updateItemPosition(d,c,c?n+l:n,c?s:s+l,o,i,e);const t=this.widgetOffset+(this._handles[d].classList.contains("lm-mod-hidden")?0:this._spacing);c?n+=e+t:s+=e+t}}}SplitLayout2=SplitLayout||(SplitLayout={}),SplitLayout2.getStretch=function(e){return Private$h$1.stretchProperty.get(e)},SplitLayout2.setStretch=function(e,t){Private$h$1.stretchProperty.set(e,t)},function(e){e.stretchProperty=new AttachedProperty({name:"stretch",create:()=>0,coerce:(e,t)=>Math.max(0,Math.floor(t)),changed:function(e){e.parent&&e.parent.layout instanceof SplitLayout&&e.parent.fit()}}),e.createSizer=function(e){let t=new BoxSizer;return t.sizeHint=Math.floor(e),t},e.createHandle=function(e){let t=e.createHandle();return t.style.position="absolute",t.style.contain="style",t},e.averageSize=function(e){return e.reduce((e,t)=>e+t.size,0)/e.length||0},e.normalize=function(e){let t=e.length;if(0===t)return[];let r=e.reduce((e,t)=>e+Math.abs(t),0);return 0===r?e.map(e=>1/t):e.map(e=>e/r)}}(Private$h$1||(Private$h$1={}));class AccordionLayout extends SplitLayout{constructor(e){super({...e,orientation:e.orientation||"vertical"}),this._titles=[],this.titleSpace=e.titleSpace||22}get titleSpace(){return this.widgetOffset}set titleSpace(e){e=Utils$1$1.clampDimension(e),this.widgetOffset!==e&&(this.widgetOffset=e,this.parent&&this.parent.fit())}get titles(){return this._titles}dispose(){this.isDisposed||(this._titles.length=0,super.dispose())}updateTitle(e,t){const r=this._titles[e],s=r.classList.contains("lm-mod-expanded"),n=Private$g$1.createTitle(this.renderer,t.title,s);this._titles[e]=n,this.parent.node.replaceChild(n,r)}insertWidget(e,t){t.id||(t.id=`id-${UUID.uuid4()}`),super.insertWidget(e,t)}attachWidget(e,t){const r=Private$g$1.createTitle(this.renderer,t.title);ArrayExt.insert(this._titles,e,r),this.parent.node.appendChild(r),t.node.setAttribute("role","region"),t.node.setAttribute("aria-labelledby",r.id),super.attachWidget(e,t)}moveWidget(e,t,r){ArrayExt.move(this._titles,e,t),super.moveWidget(e,t,r)}detachWidget(e,t){const r=ArrayExt.removeAt(this._titles,e);this.parent.node.removeChild(r),super.detachWidget(e,t)}updateItemPosition(e,t,r,s,n,i,o){const a=this._titles[e].style;a.top=`${s}px`,a.left=`${r}px`,a.height=`${this.widgetOffset}px`,a.width=t?`${n}px`:`${i}px`,super.updateItemPosition(e,t,r,s,n,i,o)}}(Private$g$1||(Private$g$1={})).createTitle=function(e,t,r=!0){const s=e.createSectionTitle(t);return s.style.position="absolute",s.style.contain="strict",s.setAttribute("aria-label",`${t.label} Section`),s.setAttribute("aria-expanded",r?"true":"false"),s.setAttribute("aria-controls",t.owner.id),r&&s.classList.add("lm-mod-expanded"),s};class Panel extends Widget{constructor(e={}){super(),this.addClass("lm-Panel"),this.layout=Private$f$1.createLayout(e)}get widgets(){return this.layout.widgets}addWidget(e){this.layout.addWidget(e)}insertWidget(e,t){this.layout.insertWidget(e,t)}}(Private$f$1||(Private$f$1={})).createLayout=function(e){return e.layout||new PanelLayout};class SplitPanel extends Panel{constructor(e={}){super({layout:Private$e$1.createLayout(e)}),this._handleMoved=new Signal(this),this._pressData=null,this.addClass("lm-SplitPanel")}dispose(){this._releaseMouse(),super.dispose()}get orientation(){return this.layout.orientation}set orientation(e){this.layout.orientation=e}get alignment(){return this.layout.alignment}set alignment(e){this.layout.alignment=e}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get renderer(){return this.layout.renderer}get handleMoved(){return this._handleMoved}get handles(){return this.layout.handles}relativeSizes(){return this.layout.relativeSizes()}setRelativeSizes(e,t=!0){this.layout.setRelativeSizes(e,t)}handleEvent(e){switch(e.type){case"pointerdown":this._evtPointerDown(e);break;case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){e.child.addClass("lm-SplitPanel-child"),this._releaseMouse()}onChildRemoved(e){e.child.removeClass("lm-SplitPanel-child"),this._releaseMouse()}_evtKeyDown(e){this._pressData&&(e.preventDefault(),e.stopPropagation()),27===e.keyCode&&this._releaseMouse()}_evtPointerDown(e){if(0!==e.button)return;let t,r=this.layout,s=ArrayExt.findFirstIndex(r.handles,t=>t.contains(e.target));if(-1===s)return;e.preventDefault(),e.stopPropagation(),document.addEventListener("pointerup",this,!0),document.addEventListener("pointermove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);let n=r.handles[s],i=n.getBoundingClientRect();t="horizontal"===r.orientation?e.clientX-i.left:e.clientY-i.top;let o=window.getComputedStyle(n),a=Drag.overrideCursor(o.cursor);this._pressData={index:s,delta:t,override:a}}_evtPointerMove(e){let t;e.preventDefault(),e.stopPropagation();let r=this.layout,s=this.node.getBoundingClientRect();t="horizontal"===r.orientation?e.clientX-s.left-this._pressData.delta:e.clientY-s.top-this._pressData.delta,r.moveHandle(this._pressData.index,t)}_evtPointerUp(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())}_releaseMouse(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,this._handleMoved.emit(),document.removeEventListener("keydown",this,!0),document.removeEventListener("pointerup",this,!0),document.removeEventListener("pointermove",this,!0),document.removeEventListener("contextmenu",this,!0))}}!function(e){class t{createHandle(){let e=document.createElement("div");return e.className="lm-SplitPanel-handle",e}}e.Renderer=t,e.defaultRenderer=new t,e.getStretch=function(e){return SplitLayout.getStretch(e)},e.setStretch=function(e,t){SplitLayout.setStretch(e,t)}}(SplitPanel||(SplitPanel={})),(Private$e$1||(Private$e$1={})).createLayout=function(e){return e.layout||new SplitLayout({renderer:e.renderer||SplitPanel.defaultRenderer,orientation:e.orientation,alignment:e.alignment,spacing:e.spacing})};class AccordionPanel extends SplitPanel{constructor(e={}){super({...e,layout:Private$d$1.createLayout(e)}),this._widgetSizesCache=/* @__PURE__ */new WeakMap,this._expansionToggled=new Signal(this),this.addClass("lm-AccordionPanel")}get renderer(){return this.layout.renderer}get titleSpace(){return this.layout.titleSpace}set titleSpace(e){this.layout.titleSpace=e}get titles(){return this.layout.titles}get expansionToggled(){return this._expansionToggled}addWidget(e){super.addWidget(e),e.title.changed.connect(this._onTitleChanged,this)}collapse(e){const t=this.layout.widgets[e];t&&!t.isHidden&&this._toggleExpansion(e)}expand(e){const t=this.layout.widgets[e];t&&t.isHidden&&this._toggleExpansion(e)}insertWidget(e,t){super.insertWidget(e,t),t.title.changed.connect(this._onTitleChanged,this)}handleEvent(e){switch(super.handleEvent(e),e.type){case"click":this._evtClick(e);break;case"keydown":this._eventKeyDown(e)}}onBeforeAttach(e){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),super.onBeforeAttach(e)}onAfterDetach(e){super.onAfterDetach(e),this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this)}_onTitleChanged(e){const t=ArrayExt.findFirstIndex(this.widgets,t=>t.contains(e.owner));t>=0&&(this.layout.updateTitle(t,e.owner),this.update())}_computeWidgetSize(e){const t=this.layout,r=t.widgets[e];if(!r)return;const s=r.isHidden,n=t.absoluteSizes(),i=(s?-1:1)*this.spacing,o=n.reduce((e,t)=>e+t);let a=[...n];if(s){const t=this._widgetSizesCache.get(r);if(!t)return;a[e]+=t;const s=a.map(e=>e-t>0).lastIndexOf(!0);-1===s?a.forEach((r,s)=>{s!==e&&(a[s]-=n[s]/o*(t-i))}):a[s]-=t-i}else{const t=n[e];this._widgetSizesCache.set(r,t),a[e]=0;const s=a.map(e=>e>0).lastIndexOf(!0);if(-1===s)return;a[s]=n[s]+t+i}return a.map(e=>e/(o+i))}_evtClick(e){const t=e.target;if(t){const r=ArrayExt.findFirstIndex(this.titles,e=>e.contains(t));r>=0&&(e.preventDefault(),e.stopPropagation(),this._toggleExpansion(r))}}_eventKeyDown(e){if(e.defaultPrevented)return;const t=e.target;let r=!1;if(t){const s=ArrayExt.findFirstIndex(this.titles,e=>e.contains(t));if(s>=0){const n=e.keyCode.toString();if(e.key.match(/Space|Enter/)||n.match(/13|32/))t.click(),r=!0;else if("horizontal"===this.orientation?e.key.match(/ArrowLeft|ArrowRight/)||n.match(/37|39/):e.key.match(/ArrowUp|ArrowDown/)||n.match(/38|40/)){const t=e.key.match(/ArrowLeft|ArrowUp/)||n.match(/37|38/)?-1:1,i=this.titles.length,o=(s+i+t)%i;this.titles[o].focus(),r=!0}else"End"===e.key||"35"===n?(this.titles[this.titles.length-1].focus(),r=!0):"Home"!==e.key&&"36"!==n||(this.titles[0].focus(),r=!0)}r&&e.preventDefault()}}_toggleExpansion(e){const t=this.titles[e],r=this.layout.widgets[e],s=this._computeWidgetSize(e);s&&this.setRelativeSizes(s,!1),r.isHidden?(t.classList.add("lm-mod-expanded"),t.setAttribute("aria-expanded","true"),r.show()):(t.classList.remove("lm-mod-expanded"),t.setAttribute("aria-expanded","false"),r.hide()),this._expansionToggled.emit(e)}}!function(e){class t extends SplitPanel.Renderer{constructor(){super(),this.titleClassName="lm-AccordionPanel-title",this._titleID=0,this._titleKeys=/* @__PURE__ */new WeakMap,this._uuid=++t._nInstance}createCollapseIcon(e){return document.createElement("span")}createSectionTitle(e){const t=document.createElement("h3");t.setAttribute("tabindex","0"),t.id=this.createTitleKey(e),t.className=this.titleClassName;for(const s in e.dataset)t.dataset[s]=e.dataset[s];t.appendChild(this.createCollapseIcon(e)).className="lm-AccordionPanel-titleCollapser";const r=t.appendChild(document.createElement("span"));return r.className="lm-AccordionPanel-titleLabel",r.textContent=e.label,r.title=e.caption||e.label,t}createTitleKey(e){let t=this._titleKeys.get(e);return void 0===t&&(t=`title-key-${this._uuid}-${this._titleID++}`,this._titleKeys.set(e,t)),t}}t._nInstance=0,e.Renderer=t,e.defaultRenderer=new t}(AccordionPanel||(AccordionPanel={})),(Private$d$1||(Private$d$1={})).createLayout=function(e){return e.layout||new AccordionLayout({renderer:e.renderer||AccordionPanel.defaultRenderer,orientation:e.orientation,alignment:e.alignment,spacing:e.spacing,titleSpace:e.titleSpace})};class BoxLayout extends PanelLayout{constructor(e={}){super(),this._fixed=0,this._spacing=4,this._dirty=!1,this._sizers=[],this._items=[],this._box=null,this._alignment="start",this._direction="top-to-bottom",void 0!==e.direction&&(this._direction=e.direction),void 0!==e.alignment&&(this._alignment=e.alignment),void 0!==e.spacing&&(this._spacing=Utils$1$1.clampDimension(e.spacing))}dispose(){for(const e of this._items)e.dispose();this._box=null,this._items.length=0,this._sizers.length=0,super.dispose()}get direction(){return this._direction}set direction(e){this._direction!==e&&(this._direction=e,this.parent&&(this.parent.dataset.direction=e,this.parent.fit()))}get alignment(){return this._alignment}set alignment(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))}get spacing(){return this._spacing}set spacing(e){e=Utils$1$1.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}init(){this.parent.dataset.direction=this.direction,this.parent.dataset.alignment=this.alignment,super.init()}attachWidget(e,t){ArrayExt.insert(this._items,e,new LayoutItem(t)),ArrayExt.insert(this._sizers,e,new BoxSizer),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterAttach),this.parent.fit()}moveWidget(e,t,r){ArrayExt.move(this._items,e,t),ArrayExt.move(this._sizers,e,t),this.parent.update()}detachWidget(e,t){let r=ArrayExt.removeAt(this._items,e);ArrayExt.removeAt(this._sizers,e),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterDetach),r.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){let e=0;for(let o=0,a=this._items.length;o<a;++o)e+=+!this._items[o].isHidden;this._fixed=this._spacing*Math.max(0,e-1);let t=Private$c$1.isHorizontal(this._direction),r=t?this._fixed:0,s=t?0:this._fixed;for(let o=0,a=this._items.length;o<a;++o){let e=this._items[o],n=this._sizers[o];e.isHidden?(n.minSize=0,n.maxSize=0):(e.fit(),n.sizeHint=BoxLayout.getSizeBasis(e.widget),n.stretch=BoxLayout.getStretch(e.widget),t?(n.minSize=e.minWidth,n.maxSize=e.maxWidth,r+=e.minWidth,s=Math.max(s,e.minHeight)):(n.minSize=e.minHeight,n.maxSize=e.maxHeight,s+=e.minHeight,r=Math.max(r,e.minWidth)))}let n=this._box=ElementExt.boxSizing(this.parent.node);r+=n.horizontalSum,s+=n.verticalSum;let i=this.parent.node.style;i.minWidth=`${r}px`,i.minHeight=`${s}px`,this._dirty=!0,this.parent.parent&&MessageLoop.sendMessage(this.parent.parent,Widget.Msg.FitRequest),this._dirty&&MessageLoop.sendMessage(this.parent,Widget.Msg.UpdateRequest)}_update(e,t){this._dirty=!1;let r=0;for(let d=0,h=this._items.length;d<h;++d)r+=+!this._items[d].isHidden;if(0===r)return;e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=ElementExt.boxSizing(this.parent.node));let s,n=this._box.paddingTop,i=this._box.paddingLeft,o=e-this._box.horizontalSum,a=t-this._box.verticalSum;switch(this._direction){case"left-to-right":s=BoxEngine.calc(this._sizers,Math.max(0,o-this._fixed));break;case"top-to-bottom":s=BoxEngine.calc(this._sizers,Math.max(0,a-this._fixed));break;case"right-to-left":s=BoxEngine.calc(this._sizers,Math.max(0,o-this._fixed)),i+=o;break;case"bottom-to-top":s=BoxEngine.calc(this._sizers,Math.max(0,a-this._fixed)),n+=a;break;default:throw"unreachable"}let l=0,c=0;if(s>0)switch(this._alignment){case"start":break;case"center":l=0,c=s/2;break;case"end":l=0,c=s;break;case"justify":l=s/r,c=0;break;default:throw"unreachable"}for(let d=0,h=this._items.length;d<h;++d){let e=this._items[d];if(e.isHidden)continue;let t=this._sizers[d].size;switch(this._direction){case"left-to-right":e.update(i+c,n,t+l,a),i+=t+l+this._spacing;break;case"top-to-bottom":e.update(i,n+c,o,t+l),n+=t+l+this._spacing;break;case"right-to-left":e.update(i-c-t-l,n,t+l,a),i-=t+l+this._spacing;break;case"bottom-to-top":e.update(i,n-c-t-l,o,t+l),n-=t+l+this._spacing;break;default:throw"unreachable"}}}}BoxLayout2=BoxLayout||(BoxLayout={}),BoxLayout2.getStretch=function(e){return Private$c$1.stretchProperty.get(e)},BoxLayout2.setStretch=function(e,t){Private$c$1.stretchProperty.set(e,t)},BoxLayout2.getSizeBasis=function(e){return Private$c$1.sizeBasisProperty.get(e)},BoxLayout2.setSizeBasis=function(e,t){Private$c$1.sizeBasisProperty.set(e,t)},function(e){function t(e){e.parent&&e.parent.layout instanceof BoxLayout&&e.parent.fit()}e.stretchProperty=new AttachedProperty({name:"stretch",create:()=>0,coerce:(e,t)=>Math.max(0,Math.floor(t)),changed:t}),e.sizeBasisProperty=new AttachedProperty({name:"sizeBasis",create:()=>0,coerce:(e,t)=>Math.max(0,Math.floor(t)),changed:t}),e.isHorizontal=function(e){return"left-to-right"===e||"right-to-left"===e},e.clampSpacing=function(e){return Math.max(0,Math.floor(e))}}(Private$c$1||(Private$c$1={}));class BoxPanel extends Panel{constructor(e={}){super({layout:Private$b$1.createLayout(e)}),this.addClass("lm-BoxPanel")}get direction(){return this.layout.direction}set direction(e){this.layout.direction=e}get alignment(){return this.layout.alignment}set alignment(e){this.layout.alignment=e}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}onChildAdded(e){e.child.addClass("lm-BoxPanel-child")}onChildRemoved(e){e.child.removeClass("lm-BoxPanel-child")}}BoxPanel2=BoxPanel||(BoxPanel={}),BoxPanel2.getStretch=function(e){return BoxLayout.getStretch(e)},BoxPanel2.setStretch=function(e,t){BoxLayout.setStretch(e,t)},BoxPanel2.getSizeBasis=function(e){return BoxLayout.getSizeBasis(e)},BoxPanel2.setSizeBasis=function(e,t){BoxLayout.setSizeBasis(e,t)},(Private$b$1||(Private$b$1={})).createLayout=function(e){return e.layout||new BoxLayout(e)};class CommandPalette extends Widget{constructor(e){super({node:Private$a$1.createNode()}),this._activeIndex=-1,this._items=[],this._results=null,this.addClass("lm-CommandPalette"),this.setFlag(Widget.Flag.DisallowLayout),this.commands=e.commands,this.renderer=e.renderer||CommandPalette.defaultRenderer,this.commands.commandChanged.connect(this._onGenericChange,this),this.commands.keyBindingChanged.connect(this._onGenericChange,this)}dispose(){this._items.length=0,this._results=null,super.dispose()}get searchNode(){return this.node.getElementsByClassName("lm-CommandPalette-search")[0]}get inputNode(){return this.node.getElementsByClassName("lm-CommandPalette-input")[0]}get contentNode(){return this.node.getElementsByClassName("lm-CommandPalette-content")[0]}get items(){return this._items}addItem(e){let t=Private$a$1.createItem(this.commands,e);return this._items.push(t),this.refresh(),t}addItems(e){const t=e.map(e=>Private$a$1.createItem(this.commands,e));return t.forEach(e=>this._items.push(e)),this.refresh(),t}removeItem(e){this.removeItemAt(this._items.indexOf(e))}removeItemAt(e){ArrayExt.removeAt(this._items,e)&&this.refresh()}clearItems(){0!==this._items.length&&(this._items.length=0,this.refresh())}refresh(){if(this._results=null,""!==this.inputNode.value){this.node.getElementsByClassName("lm-close-icon")[0].style.display="inherit"}else{this.node.getElementsByClassName("lm-close-icon")[0].style.display="none"}this.update()}handleEvent(e){switch(e.type){case"click":this._evtClick(e);break;case"keydown":this._evtKeyDown(e);break;case"input":this.refresh();break;case"focus":case"blur":this._toggleFocused()}}onBeforeAttach(e){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),this.node.addEventListener("input",this),this.node.addEventListener("focus",this,!0),this.node.addEventListener("blur",this,!0)}onAfterDetach(e){this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this),this.node.removeEventListener("input",this),this.node.removeEventListener("focus",this,!0),this.node.removeEventListener("blur",this,!0)}onAfterShow(e){this.update(),super.onAfterShow(e)}onActivateRequest(e){if(this.isAttached){let e=this.inputNode;e.focus(),e.select()}}onUpdateRequest(e){if(!this.isVisible)return void VirtualDOM.render(null,this.contentNode);let t=this.inputNode.value,r=this.contentNode,s=this._results;if(s||(s=this._results=Private$a$1.search(this._items,t),this._activeIndex=t?ArrayExt.findFirstIndex(s,Private$a$1.canActivate):-1),!t&&0===s.length)return void VirtualDOM.render(null,r);if(t&&0===s.length){let e=this.renderer.renderEmptyMessage({query:t});return void VirtualDOM.render(e,r)}let n=this.renderer,i=this._activeIndex,o=new Array(s.length);for(let a=0,l=s.length;a<l;++a){let e=s[a];if("header"===e.type){let t=e.indices,r=e.category;o[a]=n.renderHeader({category:r,indices:t})}else{let t=e.item,r=e.indices,s=a===i;o[a]=n.renderItem({item:t,indices:r,active:s})}}if(VirtualDOM.render(o,r),i<0||i>=s.length)r.scrollTop=0;else{let e=r.children[i];ElementExt.scrollIntoViewIfNeeded(r,e)}}_evtClick(e){if(0!==e.button)return;if(e.target.classList.contains("lm-close-icon"))return this.inputNode.value="",void this.refresh();let t=ArrayExt.findFirstIndex(this.contentNode.children,t=>t.contains(e.target));-1!==t&&(e.preventDefault(),e.stopPropagation(),this._execute(t))}_evtKeyDown(e){if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey))switch(e.keyCode){case 13:e.preventDefault(),e.stopPropagation(),this._execute(this._activeIndex);break;case 38:e.preventDefault(),e.stopPropagation(),this._activatePreviousItem();break;case 40:e.preventDefault(),e.stopPropagation(),this._activateNextItem()}}_activateNextItem(){if(!this._results||0===this._results.length)return;let e=this._activeIndex,t=this._results.length,r=e<t-1?e+1:0,s=0===r?t-1:r-1;this._activeIndex=ArrayExt.findFirstIndex(this._results,Private$a$1.canActivate,r,s),this.update()}_activatePreviousItem(){if(!this._results||0===this._results.length)return;let e=this._activeIndex,t=this._results.length,r=e<=0?t-1:e-1,s=r===t-1?0:r+1;this._activeIndex=ArrayExt.findLastIndex(this._results,Private$a$1.canActivate,r,s),this.update()}_execute(e){if(!this._results)return;let t=this._results[e];if(t){if("header"===t.type){let e=this.inputNode;return e.value=`${t.category.toLowerCase()} `,e.focus(),void this.refresh()}t.item.isEnabled&&(this.commands.execute(t.item.command,t.item.args),this.inputNode.value="",this.refresh())}}_toggleFocused(){let e=document.activeElement===this.inputNode;this.toggleClass("lm-mod-focused",e)}_onGenericChange(){this.refresh()}}!function(e){class t{renderHeader(e){let t=this.formatHeader(e);return h.li({className:"lm-CommandPalette-header"},t)}renderItem(e){let t=this.createItemClass(e),r=this.createItemDataset(e);return e.item.isToggleable?h.li({className:t,dataset:r,role:"menuitemcheckbox","aria-checked":`${e.item.isToggled}`},this.renderItemIcon(e),this.renderItemContent(e),this.renderItemShortcut(e)):h.li({className:t,dataset:r,role:"menuitem"},this.renderItemIcon(e),this.renderItemContent(e),this.renderItemShortcut(e))}renderEmptyMessage(e){let t=this.formatEmptyMessage(e);return h.li({className:"lm-CommandPalette-emptyMessage"},t)}renderItemIcon(e){let t=this.createIconClass(e);return h.div({className:t},e.item.icon,e.item.iconLabel)}renderItemContent(e){return h.div({className:"lm-CommandPalette-itemContent"},this.renderItemLabel(e),this.renderItemCaption(e))}renderItemLabel(e){let t=this.formatItemLabel(e);return h.div({className:"lm-CommandPalette-itemLabel"},t)}renderItemCaption(e){let t=this.formatItemCaption(e);return h.div({className:"lm-CommandPalette-itemCaption"},t)}renderItemShortcut(e){let t=this.formatItemShortcut(e);return h.div({className:"lm-CommandPalette-itemShortcut"},t)}createItemClass(e){let t="lm-CommandPalette-item";e.item.isEnabled||(t+=" lm-mod-disabled"),e.item.isToggled&&(t+=" lm-mod-toggled"),e.active&&(t+=" lm-mod-active");let r=e.item.className;return r&&(t+=` ${r}`),t}createItemDataset(e){return{...e.item.dataset,command:e.item.command}}createIconClass(e){let t="lm-CommandPalette-itemIcon",r=e.item.iconClass;return r?`${t} ${r}`:t}formatHeader(e){return e.indices&&0!==e.indices.length?StringExt.highlight(e.category,e.indices,h.mark):e.category}formatEmptyMessage(e){return`No commands found that match '${e.query}'`}formatItemShortcut(e){let t=e.item.keyBinding;return t?CommandRegistry.formatKeystroke(t.keys):null}formatItemLabel(e){return e.indices&&0!==e.indices.length?StringExt.highlight(e.item.label,e.indices,h.mark):e.item.label}formatItemCaption(e){return e.item.caption}}e.Renderer=t,e.defaultRenderer=new t}(CommandPalette||(CommandPalette={})),function(e){function t(e,t){let r=e.category.toLowerCase(),s=`${r} ${e.label.toLowerCase()}`,n=1/0,i=null,o=/\b\w/g;for(;;){let e=o.exec(s);if(!e)break;let r=StringExt.matchSumOfDeltas(s,t,e.index);if(!r)break;r.score<=n&&(n=r.score,i=r.indices)}if(!i||n===1/0)return null;let a=r.length+1,l=ArrayExt.lowerBound(i,a,(e,t)=>e-t),c=i.slice(0,l),d=i.slice(l);for(let h=0,u=d.length;h<u;++h)d[h]-=a;return 0===c.length?{matchType:0,categoryIndices:null,labelIndices:d,score:n,item:e}:0===d.length?{matchType:1,categoryIndices:c,labelIndices:null,score:n,item:e}:{matchType:2,categoryIndices:c,labelIndices:d,score:n,item:e}}function r(e,t){let r=e.matchType-t.matchType;if(0!==r)return r;let s=e.score-t.score;if(0!==s)return s;let n=0,i=0;switch(e.matchType){case 0:n=e.labelIndices[0],i=t.labelIndices[0];break;case 1:case 2:n=e.categoryIndices[0],i=t.categoryIndices[0]}if(n!==i)return n-i;let o=e.item.category.localeCompare(t.item.category);if(0!==o)return o;let a=e.item.rank,l=t.item.rank;return a!==l?a<l?-1:1:e.item.label.localeCompare(t.item.label)}e.createNode=function(){let e=document.createElement("div"),t=document.createElement("div"),r=document.createElement("div"),s=document.createElement("input"),n=document.createElement("ul"),i=document.createElement("button");return t.className="lm-CommandPalette-search",r.className="lm-CommandPalette-wrapper",s.className="lm-CommandPalette-input",i.className="lm-close-icon",n.className="lm-CommandPalette-content",n.setAttribute("role","menu"),s.spellcheck=!1,r.appendChild(s),r.appendChild(i),t.appendChild(r),e.appendChild(t),e.appendChild(n),e},e.createItem=function(e,t){return new s(e,t)},e.search=function(e,s){let n=function(e,r){s=r,r=s.replace(/\s+/g,"").toLowerCase();var s;let n=[];for(let i=0,o=e.length;i<o;++i){let s=e[i];if(!s.isVisible)continue;if(!r){n.push({matchType:3,categoryIndices:null,labelIndices:null,score:0,item:s});continue}let o=t(s,r);o&&(s.isEnabled||(o.score+=1e3),n.push(o))}return n}(e,s);return n.sort(r),function(e){let t=[];for(let r=0,s=e.length;r<s;++r){let{item:s,categoryIndices:n,labelIndices:i}=e[r],o=s.category;0!==r&&o===e[r-1].item.category||t.push({type:"header",category:o,indices:n}),t.push({type:"item",item:s,indices:i})}return t}(n)},e.canActivate=function(e){return"item"===e.type&&e.item.isEnabled};class s{constructor(e,t){this._commands=e,this.category=t.category.trim().replace(/\s+/g," "),this.command=t.command,this.args=t.args||JSONExt.emptyObject,this.rank=void 0!==t.rank?t.rank:1/0}get label(){return this._commands.label(this.command,this.args)}get icon(){return this._commands.icon(this.command,this.args)}get iconClass(){return this._commands.iconClass(this.command,this.args)}get iconLabel(){return this._commands.iconLabel(this.command,this.args)}get caption(){return this._commands.caption(this.command,this.args)}get className(){return this._commands.className(this.command,this.args)}get dataset(){return this._commands.dataset(this.command,this.args)}get isEnabled(){return this._commands.isEnabled(this.command,this.args)}get isToggled(){return this._commands.isToggled(this.command,this.args)}get isToggleable(){return this._commands.isToggleable(this.command,this.args)}get isVisible(){return this._commands.isVisible(this.command,this.args)}get keyBinding(){let{command:e,args:t}=this;return ArrayExt.findLastValue(this._commands.keyBindings,r=>r.command===e&&JSONExt.deepEqual(r.args,t))||null}}}(Private$a$1||(Private$a$1={}));class Menu extends Widget{constructor(e){super({node:Private$9$1.createNode()}),this._childIndex=-1,this._activeIndex=-1,this._openTimerID=0,this._closeTimerID=0,this._items=[],this._childMenu=null,this._parentMenu=null,this._aboutToClose=new Signal(this),this._menuRequested=new Signal(this),this.addClass("lm-Menu"),this.setFlag(Widget.Flag.DisallowLayout),this.commands=e.commands,this.renderer=e.renderer||Menu.defaultRenderer}dispose(){this.close(),this._items.length=0,super.dispose()}get aboutToClose(){return this._aboutToClose}get menuRequested(){return this._menuRequested}get parentMenu(){return this._parentMenu}get childMenu(){return this._childMenu}get rootMenu(){let e=this;for(;e._parentMenu;)e=e._parentMenu;return e}get leafMenu(){let e=this;for(;e._childMenu;)e=e._childMenu;return e}get contentNode(){return this.node.getElementsByClassName("lm-Menu-content")[0]}get activeItem(){return this._items[this._activeIndex]||null}set activeItem(e){this.activeIndex=e?this._items.indexOf(e):-1}get activeIndex(){return this._activeIndex}set activeIndex(e){(e<0||e>=this._items.length)&&(e=-1),-1===e||Private$9$1.canActivate(this._items[e])||(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this._activeIndex>=0&&this.contentNode.childNodes[this._activeIndex]&&this.contentNode.childNodes[this._activeIndex].focus(),this.update())}get items(){return this._items}activateNextItem(){let e=this._items.length,t=this._activeIndex,r=t<e-1?t+1:0,s=0===r?e-1:r-1;this.activeIndex=ArrayExt.findFirstIndex(this._items,Private$9$1.canActivate,r,s)}activatePreviousItem(){let e=this._items.length,t=this._activeIndex,r=t<=0?e-1:t-1,s=r===e-1?0:r+1;this.activeIndex=ArrayExt.findLastIndex(this._items,Private$9$1.canActivate,r,s)}triggerActiveItem(){if(!this.isAttached)return;let e=this.activeItem;if(!e)return;if(this._cancelOpenTimer(),this._cancelCloseTimer(),"submenu"===e.type)return void this._openChildMenu(!0);this.rootMenu.close();let{command:t,args:r}=e;this.commands.isEnabled(t,r)?this.commands.execute(t,r):console.log(`Command '${t}' is disabled.`)}addItem(e){return this.insertItem(this._items.length,e)}insertItem(e,t){this.isAttached&&this.close(),this.activeIndex=-1;let r=Math.max(0,Math.min(e,this._items.length)),s=Private$9$1.createItem(this,t);return ArrayExt.insert(this._items,r,s),this.update(),s}removeItem(e){this.removeItemAt(this._items.indexOf(e))}removeItemAt(e){this.isAttached&&this.close(),this.activeIndex=-1,ArrayExt.removeAt(this._items,e)&&this.update()}clearItems(){this.isAttached&&this.close(),this.activeIndex=-1,0!==this._items.length&&(this._items.length=0,this.update())}open(e,t,r={}){var s,n,i;if(this.isAttached)return;let o=r.forceX||!1,a=r.forceY||!1;const l=null!==(s=r.host)&&void 0!==s?s:null,c=null!==(n=r.ref)&&void 0!==n?n:null,d=null!==(i=r.horizontalAlignment)&&void 0!==i?i:"rtl"===document.documentElement.dir?"right":"left";Private$9$1.openRootMenu(this,e,t,o,a,d,l,c),this.activate()}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mouseup":this._evtMouseUp(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseenter":this._evtMouseEnter(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"mousedown":this._evtMouseDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)}onAfterDetach(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)}onActivateRequest(e){this.isAttached&&this.node.focus()}onUpdateRequest(e){let t=this._items,r=this.renderer,s=this._activeIndex,n=Private$9$1.computeCollapsed(t),i=new Array(t.length);for(let o=0,a=t.length;o<a;++o){let e=t[o],a=o===s,l=n[o];i[o]=r.renderItem({item:e,active:a,collapsed:l,onfocus:()=>{this.activeIndex=o}})}VirtualDOM.render(i,this.contentNode)}onCloseRequest(e){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;let t=this._childMenu;t&&(this._childIndex=-1,this._childMenu=null,t._parentMenu=null,t.close());let r=this._parentMenu;r&&(this._parentMenu=null,r._childIndex=-1,r._childMenu=null,r.activate()),this.isAttached&&this._aboutToClose.emit(void 0),super.onCloseRequest(e)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation();let t=e.keyCode;if(13===t)return void this.triggerActiveItem();if(27===t)return void this.close();if(37===t)return void(this._parentMenu?this.close():this._menuRequested.emit("previous"));if(38===t)return void this.activatePreviousItem();if(39===t){let e=this.activeItem;return void(e&&"submenu"===e.type?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next"))}if(40===t)return void this.activateNextItem();let r=getKeyboardLayout().keyForKeydownEvent(e);if(!r)return;let s=this._activeIndex+1,n=Private$9$1.findMnemonic(this._items,r,s);-1===n.index||n.multiple?-1!==n.index?this.activeIndex=n.index:-1!==n.auto&&(this.activeIndex=n.auto):(this.activeIndex=n.index,this.triggerActiveItem())}_evtMouseUp(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this.triggerActiveItem())}_evtMouseMove(e){let t=ArrayExt.findFirstIndex(this.contentNode.children,t=>ElementExt.hitTest(t,e.clientX,e.clientY));if(t===this._activeIndex)return;if(this.activeIndex=t,t=this.activeIndex,t===this._childIndex)return this._cancelOpenTimer(),void this._cancelCloseTimer();-1!==this._childIndex&&this._startCloseTimer(),this._cancelOpenTimer();let r=this.activeItem;r&&"submenu"===r.type&&r.submenu&&this._startOpenTimer()}_evtMouseEnter(e){for(let t=this._parentMenu;t;t=t._parentMenu)t._cancelOpenTimer(),t._cancelCloseTimer(),t.activeIndex=t._childIndex}_evtMouseLeave(e){if(this._cancelOpenTimer(),!this._childMenu)return void(this.activeIndex=-1);let{clientX:t,clientY:r}=e;ElementExt.hitTest(this._childMenu.node,t,r)?this._cancelCloseTimer():(this.activeIndex=-1,this._startCloseTimer())}_evtMouseDown(e){this._parentMenu||(Private$9$1.hitTestMenus(this,e.clientX,e.clientY)?(e.preventDefault(),e.stopPropagation()):this.close())}_openChildMenu(e=!1){let t=this.activeItem;if(!t||"submenu"!==t.type||!t.submenu)return void this._closeChildMenu();let r=t.submenu;if(r===this._childMenu)return;Menu.saveWindowData(),this._closeChildMenu(),this._childMenu=r,this._childIndex=this._activeIndex,r._parentMenu=this,MessageLoop.sendMessage(this,Widget.Msg.UpdateRequest);let s=this.contentNode.children[this._activeIndex];Private$9$1.openSubmenu(r,s),e&&(r.activeIndex=-1,r.activateNextItem()),r.activate()}_closeChildMenu(){this._childMenu&&this._childMenu.close()}_startOpenTimer(){0===this._openTimerID&&(this._openTimerID=window.setTimeout(()=>{this._openTimerID=0,this._openChildMenu()},Private$9$1.TIMER_DELAY))}_startCloseTimer(){0===this._closeTimerID&&(this._closeTimerID=window.setTimeout(()=>{this._closeTimerID=0,this._closeChildMenu()},Private$9$1.TIMER_DELAY))}_cancelOpenTimer(){0!==this._openTimerID&&(clearTimeout(this._openTimerID),this._openTimerID=0)}_cancelCloseTimer(){0!==this._closeTimerID&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)}static saveWindowData(){Private$9$1.saveWindowData()}}!function(e){class t{renderItem(e){let t=this.createItemClass(e),r=this.createItemDataset(e),s=this.createItemARIA(e);return h.li({className:t,dataset:r,tabindex:"0",onfocus:e.onfocus,...s},this.renderIcon(e),this.renderLabel(e),this.renderShortcut(e),this.renderSubmenu(e))}renderIcon(e){let t=this.createIconClass(e);return h.div({className:t},e.item.icon,e.item.iconLabel)}renderLabel(e){let t=this.formatLabel(e);return h.div({className:"lm-Menu-itemLabel"},t)}renderShortcut(e){let t=this.formatShortcut(e);return h.div({className:"lm-Menu-itemShortcut"},t)}renderSubmenu(e){return h.div({className:"lm-Menu-itemSubmenuIcon"})}createItemClass(e){let t="lm-Menu-item";e.item.isEnabled||(t+=" lm-mod-disabled"),e.item.isToggled&&(t+=" lm-mod-toggled"),e.item.isVisible||(t+=" lm-mod-hidden"),e.active&&(t+=" lm-mod-active"),e.collapsed&&(t+=" lm-mod-collapsed");let r=e.item.className;return r&&(t+=` ${r}`),t}createItemDataset(e){let t,{type:r,command:s,dataset:n}=e.item;return t="command"===r?{...n,type:r,command:s}:{...n,type:r},t}createIconClass(e){let t="lm-Menu-itemIcon",r=e.item.iconClass;return r?`${t} ${r}`:t}createItemARIA(e){let t={};switch(e.item.type){case"separator":t.role="presentation";break;case"submenu":t["aria-haspopup"]="true",e.item.isEnabled||(t["aria-disabled"]="true");break;default:e.item.isEnabled||(t["aria-disabled"]="true"),e.item.isToggled?(t.role="menuitemcheckbox",t["aria-checked"]="true"):t.role="menuitem"}return t}formatLabel(e){let{label:t,mnemonic:r}=e.item;if(r<0||r>=t.length)return t;let s=t.slice(0,r),n=t.slice(r+1),i=t[r];return[s,h.span({className:"lm-Menu-itemMnemonic"},i),n]}formatShortcut(e){let t=e.item.keyBinding;return t?CommandRegistry.formatKeystroke(t.keys):null}}e.Renderer=t,e.defaultRenderer=new t}(Menu||(Menu={})),function(e){e.TIMER_DELAY=300,e.SUBMENU_OVERLAP=3;let t=null,r=0;function s(){return r>0?(r--,t):i()}function n(e){return"separator"!==e.type&&e.isEnabled&&e.isVisible}function i(){return{pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}}e.saveWindowData=function(){t=i(),r++},e.createNode=function(){let e=document.createElement("div"),t=document.createElement("ul");return t.className="lm-Menu-content",e.appendChild(t),t.setAttribute("role","menu"),e.tabIndex=0,e},e.canActivate=n,e.createItem=function(e,t){return new o(e.commands,t)},e.hitTestMenus=function(e,t,r){for(let s=e;s;s=s.childMenu)if(ElementExt.hitTest(s.node,t,r))return!0;return!1},e.computeCollapsed=function(e){let t=new Array(e.length);ArrayExt.fill(t,!1);let r=0,s=e.length;for(;r<s;++r){let s=e[r];if(s.isVisible){if("separator"!==s.type)break;t[r]=!0}}let n=s-1;for(;n>=0;--n){let r=e[n];if(r.isVisible){if("separator"!==r.type)break;t[n]=!0}}let i=!1;for(;++r<n;){let s=e[r];s.isVisible&&("separator"!==s.type?i=!1:i?t[r]=!0:i=!0)}return t},e.openRootMenu=function(e,t,r,n,i,o,a,l){const c=s();let d=c.pageXOffset,h=c.pageYOffset,u=c.clientWidth,p=c.clientHeight;MessageLoop.sendMessage(e,Widget.Msg.UpdateRequest);let g=p-(i?r:0),m=e.node,f=m.style;f.opacity="0",f.maxHeight=`${g}px`,Widget.attach(e,a||document.body,l);let{width:v,height:_}=m.getBoundingClientRect();"right"===o&&(t-=v),!n&&t+v>d+u&&(t=d+u-v),!i&&r+_>h+p&&(r>h+p?r=h+p-_:r-=_),f.transform=`translate(${Math.max(0,t)}px, ${Math.max(0,r)}px`,f.opacity="1"},e.openSubmenu=function(t,r){const n=s();let i=n.pageXOffset,o=n.pageYOffset,a=n.clientWidth,l=n.clientHeight;MessageLoop.sendMessage(t,Widget.Msg.UpdateRequest);let c=l,d=t.node,h=d.style;h.opacity="0",h.maxHeight=`${c}px`,Widget.attach(t,document.body);let{width:u,height:p}=d.getBoundingClientRect(),g=ElementExt.boxSizing(t.node),m=r.getBoundingClientRect(),f=m.right-e.SUBMENU_OVERLAP;f+u>i+a&&(f=m.left+e.SUBMENU_OVERLAP-u);let v=m.top-g.borderTop-g.paddingTop;v+p>o+l&&(v=m.bottom+g.borderBottom+g.paddingBottom-p),h.transform=`translate(${Math.max(0,f)}px, ${Math.max(0,v)}px`,h.opacity="1"},e.findMnemonic=function(e,t,r){let s=-1,i=-1,o=!1,a=t.toUpperCase();for(let l=0,c=e.length;l<c;++l){let t=(l+r)%c,d=e[t];if(!n(d))continue;let h=d.label;if(0===h.length)continue;let u=d.mnemonic;u>=0&&u<h.length?h[u].toUpperCase()===a&&(-1===s?s=t:o=!0):-1===i&&h[0].toUpperCase()===a&&(i=t)}return{index:s,multiple:o,auto:i}};class o{constructor(e,t){this._commands=e,this.type=t.type||"command",this.command=t.command||"",this.args=t.args||JSONExt.emptyObject,this.submenu=t.submenu||null}get label(){return"command"===this.type?this._commands.label(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.label:""}get mnemonic(){return"command"===this.type?this._commands.mnemonic(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.mnemonic:-1}get icon(){return"command"===this.type?this._commands.icon(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.icon:void 0}get iconClass(){return"command"===this.type?this._commands.iconClass(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.iconClass:""}get iconLabel(){return"command"===this.type?this._commands.iconLabel(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.iconLabel:""}get caption(){return"command"===this.type?this._commands.caption(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.caption:""}get className(){return"command"===this.type?this._commands.className(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.className:""}get dataset(){return"command"===this.type?this._commands.dataset(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.dataset:{}}get isEnabled(){return"command"===this.type?this._commands.isEnabled(this.command,this.args):"submenu"!==this.type||null!==this.submenu}get isToggled(){return"command"===this.type&&this._commands.isToggled(this.command,this.args)}get isVisible(){return"command"===this.type?this._commands.isVisible(this.command,this.args):"submenu"!==this.type||null!==this.submenu}get keyBinding(){if("command"===this.type){let{command:e,args:t}=this;return ArrayExt.findLastValue(this._commands.keyBindings,r=>r.command===e&&JSONExt.deepEqual(r.args,t))||null}return null}}}(Private$9$1||(Private$9$1={}));class ContextMenu{constructor(e){this._groupByTarget=!0,this._idTick=0,this._items=[],this._sortBySelector=!0;const{groupByTarget:t,sortBySelector:r,...s}=e;this.menu=new Menu(s),this._groupByTarget=!1!==t,this._sortBySelector=!1!==r}addItem(e){let t=Private$8$1.createItem(e,this._idTick++);return this._items.push(t),new DisposableDelegate(()=>{ArrayExt.removeFirstOf(this._items,t)})}open(e){if(Menu.saveWindowData(),this.menu.clearItems(),0===this._items.length)return!1;let t=Private$8$1.matchItems(this._items,e,this._groupByTarget,this._sortBySelector);if(!t||0===t.length)return!1;for(const r of t)this.menu.addItem(r);return this.menu.open(e.clientX,e.clientY),!0}}!function(e){function t(e,t){let r=e.rank,s=t.rank;return r!==s?r<s?-1:1:e.id-t.id}function r(e,r){let s=Selector$1.calculateSpecificity(e.selector),n=Selector$1.calculateSpecificity(r.selector);return s!==n?n-s:t(e,r)}e.createItem=function(e,t){let r=function(e){if(-1!==e.indexOf(","))throw new Error(`Selector cannot contain commas: ${e}`);if(!Selector$1.isValid(e))throw new Error(`Invalid selector: ${e}`);return e}(e.selector),s=void 0!==e.rank?e.rank:1/0;return{...e,selector:r,rank:s,id:t}},e.matchItems=function(e,s,n,i){let o=s.target;if(!o)return null;let a=s.currentTarget;if(!a)return null;if(!a.contains(o)&&(o=document.elementFromPoint(s.clientX,s.clientY),!o||!a.contains(o)))return null;let l=[],c=e.slice();for(;null!==o;){let e=[];for(let t=0,r=c.length;t<r;++t){let r=c[t];r&&(Selector$1.matches(o,r.selector)&&(e.push(r),c[t]=null))}if(0!==e.length&&(n&&e.sort(i?r:t),l.push(...e)),o===a)break;o=o.parentElement}return n||l.sort(i?r:t),l}}(Private$8$1||(Private$8$1={}));const ARROW_KEYS=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Home","End"];class TabBar extends Widget{constructor(e={}){super({node:Private$7$1.createNode()}),this._currentIndex=-1,this._titles=[],this._titlesEditable=!1,this._previousTitle=null,this._dragData=null,this._addButtonEnabled=!1,this._tabMoved=new Signal(this),this._currentChanged=new Signal(this),this._addRequested=new Signal(this),this._tabCloseRequested=new Signal(this),this._tabDetachRequested=new Signal(this),this._tabActivateRequested=new Signal(this),this.addClass("lm-TabBar"),this.contentNode.setAttribute("role","tablist"),this.setFlag(Widget.Flag.DisallowLayout),this._document=e.document||document,this.tabsMovable=e.tabsMovable||!1,this.titlesEditable=e.titlesEditable||!1,this.allowDeselect=e.allowDeselect||!1,this.addButtonEnabled=e.addButtonEnabled||!1,this.insertBehavior=e.insertBehavior||"select-tab-if-needed",this.name=e.name||"",this.orientation=e.orientation||"horizontal",this.removeBehavior=e.removeBehavior||"select-tab-after",this.renderer=e.renderer||TabBar.defaultRenderer}dispose(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,super.dispose()}get currentChanged(){return this._currentChanged}get tabMoved(){return this._tabMoved}get tabActivateRequested(){return this._tabActivateRequested}get addRequested(){return this._addRequested}get tabCloseRequested(){return this._tabCloseRequested}get tabDetachRequested(){return this._tabDetachRequested}get document(){return this._document}get titlesEditable(){return this._titlesEditable}set titlesEditable(e){this._titlesEditable=e}get currentTitle(){return this._titles[this._currentIndex]||null}set currentTitle(e){this.currentIndex=e?this._titles.indexOf(e):-1}get currentIndex(){return this._currentIndex}set currentIndex(e){if((e<0||e>=this._titles.length)&&(e=-1),this._currentIndex===e)return;let t=this._currentIndex,r=this._titles[t]||null,s=e,n=this._titles[s]||null;this._currentIndex=s,this._previousTitle=r,this.update(),this._currentChanged.emit({previousIndex:t,previousTitle:r,currentIndex:s,currentTitle:n})}get name(){return this._name}set name(e){this._name=e,e?this.contentNode.setAttribute("aria-label",e):this.contentNode.removeAttribute("aria-label")}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e,this.contentNode.setAttribute("aria-orientation",e))}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled!==e&&(this._addButtonEnabled=e,e?this.addButtonNode.classList.remove("lm-mod-hidden"):this.addButtonNode.classList.add("lm-mod-hidden"))}get titles(){return this._titles}get contentNode(){return this.node.getElementsByClassName("lm-TabBar-content")[0]}get addButtonNode(){return this.node.getElementsByClassName("lm-TabBar-addButton")[0]}addTab(e){return this.insertTab(this._titles.length,e)}insertTab(e,t){this._releaseMouse();let r=Private$7$1.asTitle(t),s=this._titles.indexOf(r),n=Math.max(0,Math.min(e,this._titles.length));return-1===s?(ArrayExt.insert(this._titles,n,r),r.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(n,r),r):(n===this._titles.length&&n--,s===n||(ArrayExt.move(this._titles,s,n),this.update(),this._adjustCurrentForMove(s,n)),r)}removeTab(e){this.removeTabAt(this._titles.indexOf(e))}removeTabAt(e){this._releaseMouse();let t=ArrayExt.removeAt(this._titles,e);t&&(t.changed.disconnect(this._onTitleChanged,this),t===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(e,t))}clearTabs(){if(0===this._titles.length)return;this._releaseMouse();for(let r of this._titles)r.changed.disconnect(this._onTitleChanged,this);let e=this.currentIndex,t=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),-1!==e&&this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null})}releaseMouse(){this._releaseMouse()}handleEvent(e){switch(e.type){case"pointerdown":this._evtPointerDown(e);break;case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"dblclick":this._evtDblClick(e);break;case"keydown":e.eventPhase===Event.CAPTURING_PHASE?this._evtKeyDownCapturing(e):this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("pointerdown",this),this.node.addEventListener("dblclick",this),this.node.addEventListener("keydown",this)}onAfterDetach(e){this.node.removeEventListener("pointerdown",this),this.node.removeEventListener("dblclick",this),this.node.removeEventListener("keydown",this),this._releaseMouse()}onUpdateRequest(e){var t;let r=this._titles,s=this.renderer,n=this.currentTitle,i=new Array(r.length);const o=null!==(t=this._getCurrentTabindex())&&void 0!==t?t:this._currentIndex>-1?this._currentIndex:0;for(let a=0,l=r.length;a<l;++a){let e=r[a],t=e===n,c=t?l:l-a-1,d=o===a?0:-1;i[a]=s.renderTab({title:e,current:t,zIndex:c,tabIndex:d})}VirtualDOM.render(i,this.contentNode)}_getCurrentTabindex(){let e=null;const t=this.contentNode.querySelector('li[tabindex="0"]');return t?e=[...this.contentNode.children].indexOf(t):this._addButtonEnabled&&"0"===this.addButtonNode.getAttribute("tabindex")&&(e=-1),e}_evtDblClick(e){if(!this.titlesEditable)return;let t=this.contentNode.children,r=ArrayExt.findFirstIndex(t,t=>ElementExt.hitTest(t,e.clientX,e.clientY));if(-1===r)return;let s=this.titles[r],n=t[r].querySelector(".lm-TabBar-tabLabel");if(n&&n.contains(e.target)){let e=s.label||"",t=n.innerHTML;n.innerHTML="";let r=document.createElement("input");r.classList.add("lm-TabBar-tabInput"),r.value=e,n.appendChild(r);let i=()=>{r.removeEventListener("blur",i),n.innerHTML=t,this.node.addEventListener("keydown",this)};r.addEventListener("dblclick",e=>e.stopPropagation()),r.addEventListener("blur",i),r.addEventListener("keydown",e=>{"Enter"===e.key?(""!==r.value&&(s.label=s.caption=r.value),i()):"Escape"===e.key&&i()}),this.node.removeEventListener("keydown",this),r.select(),r.focus(),n.children.length>0&&n.children[0].focus()}}_evtKeyDownCapturing(e){e.eventPhase===Event.CAPTURING_PHASE&&(e.preventDefault(),e.stopPropagation(),"Escape"===e.key&&this._releaseMouse())}_evtKeyDown(e){var t,r,s;if("Tab"!==e.key&&e.eventPhase!==Event.CAPTURING_PHASE)if("Enter"===e.key||"Spacebar"===e.key||" "===e.key){const t=document.activeElement;if(this.addButtonEnabled&&this.addButtonNode.contains(t))e.preventDefault(),e.stopPropagation(),this._addRequested.emit();else{const r=ArrayExt.findFirstIndex(this.contentNode.children,e=>e.contains(t));r>=0&&(e.preventDefault(),e.stopPropagation(),this.currentIndex=r)}}else if(ARROW_KEYS.includes(e.key)){const n=[...this.contentNode.children];if(this.addButtonEnabled&&n.push(this.addButtonNode),n.length<=1)return;e.preventDefault(),e.stopPropagation();let i,o=n.indexOf(document.activeElement);-1===o&&(o=this._currentIndex),"ArrowRight"===e.key&&"horizontal"===this._orientation||"ArrowDown"===e.key&&"vertical"===this._orientation?i=null!==(t=n[o+1])&&void 0!==t?t:n[0]:"ArrowLeft"===e.key&&"horizontal"===this._orientation||"ArrowUp"===e.key&&"vertical"===this._orientation?i=null!==(r=n[o-1])&&void 0!==r?r:n[n.length-1]:"Home"===e.key?i=n[0]:"End"===e.key&&(i=n[n.length-1]),i&&(null===(s=n[o])||void 0===s||s.setAttribute("tabindex","-1"),null==i||i.setAttribute("tabindex","0"),i.focus())}}_evtPointerDown(e){if(0!==e.button&&1!==e.button)return;if(this._dragData)return;if(e.target.classList.contains("lm-TabBar-tabInput"))return;let t=this.addButtonEnabled&&this.addButtonNode.contains(e.target),r=this.contentNode.children,s=ArrayExt.findFirstIndex(r,t=>ElementExt.hitTest(t,e.clientX,e.clientY));if(-1===s&&!t)return;if(e.preventDefault(),e.stopPropagation(),this._dragData={tab:r[s],index:s,pressX:e.clientX,pressY:e.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},this.document.addEventListener("pointerup",this,!0),1===e.button||t)return;let n=r[s].querySelector(this.renderer.closeIconSelector);n&&n.contains(e.target)||(this.tabsMovable&&(this.document.addEventListener("pointermove",this,!0),this.document.addEventListener("keydown",this,!0),this.document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===s?this.currentIndex=-1:this.currentIndex=s,-1!==this.currentIndex&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}_evtPointerMove(e){let t=this._dragData;if(!t)return;e.preventDefault(),e.stopPropagation();let r=this.contentNode.children;if(t.dragActive||Private$7$1.dragExceeded(t,e)){if(!t.dragActive){let e=t.tab.getBoundingClientRect();"horizontal"===this._orientation?(t.tabPos=t.tab.offsetLeft,t.tabSize=e.width,t.tabPressPos=t.pressX-e.left):(t.tabPos=t.tab.offsetTop,t.tabSize=e.height,t.tabPressPos=t.pressY-e.top),t.tabPressOffset={x:t.pressX-e.left,y:t.pressY-e.top},t.tabLayout=Private$7$1.snapTabLayout(r,this._orientation),t.contentRect=this.contentNode.getBoundingClientRect(),t.override=Drag.overrideCursor("default"),t.tab.classList.add("lm-mod-dragging"),this.addClass("lm-mod-dragging"),t.dragActive=!0}if(!t.detachRequested&&Private$7$1.detachExceeded(t,e)){t.detachRequested=!0;let s=t.index,n=e.clientX,i=e.clientY,o=r[s],a=this._titles[s];if(this._tabDetachRequested.emit({index:s,title:a,tab:o,clientX:n,clientY:i,offset:t.tabPressOffset}),t.dragAborted)return}Private$7$1.layoutTabs(r,t,e,this._orientation)}}_evtPointerUp(e){if(0!==e.button&&1!==e.button)return;const t=this._dragData;if(!t)return;if(e.preventDefault(),e.stopPropagation(),this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),!t.dragActive){if(this._dragData=null,this.addButtonEnabled&&this.addButtonNode.contains(e.target))return void this._addRequested.emit(void 0);let r=this.contentNode.children,s=ArrayExt.findFirstIndex(r,t=>ElementExt.hitTest(t,e.clientX,e.clientY));if(s!==t.index)return;let n=this._titles[s];if(!n.closable)return;if(1===e.button)return void this._tabCloseRequested.emit({index:s,title:n});let i=r[s].querySelector(this.renderer.closeIconSelector);return i&&i.contains(e.target)?void this._tabCloseRequested.emit({index:s,title:n}):void 0}if(0!==e.button)return;Private$7$1.finalizeTabPosition(t,this._orientation),t.tab.classList.remove("lm-mod-dragging");let r=Private$7$1.parseTransitionDuration(t.tab);setTimeout(()=>{if(t.dragAborted)return;this._dragData=null,Private$7$1.resetTabPositions(this.contentNode.children,this._orientation),t.override.dispose(),this.removeClass("lm-mod-dragging");let e=t.index,r=t.targetIndex;-1!==r&&e!==r&&(ArrayExt.move(this._titles,e,r),this._adjustCurrentForMove(e,r),this._tabMoved.emit({fromIndex:e,toIndex:r,title:this._titles[r]}),MessageLoop.sendMessage(this,Widget.Msg.UpdateRequest))},r)}_releaseMouse(){let e=this._dragData;e&&(this._dragData=null,this.document.removeEventListener("pointermove",this,!0),this.document.removeEventListener("pointerup",this,!0),this.document.removeEventListener("keydown",this,!0),this.document.removeEventListener("contextmenu",this,!0),e.dragAborted=!0,e.dragActive&&(Private$7$1.resetTabPositions(this.contentNode.children,this._orientation),e.override.dispose(),e.tab.classList.remove("lm-mod-dragging"),this.removeClass("lm-mod-dragging")))}_adjustCurrentForInsert(e,t){let r=this.currentTitle,s=this._currentIndex,n=this.insertBehavior;if("select-tab"===n||"select-tab-if-needed"===n&&-1===s)return this._currentIndex=e,this._previousTitle=r,void this._currentChanged.emit({previousIndex:s,previousTitle:r,currentIndex:e,currentTitle:t});s>=e&&this._currentIndex++}_adjustCurrentForMove(e,t){this._currentIndex===e?this._currentIndex=t:this._currentIndex<e&&this._currentIndex>=t?this._currentIndex++:this._currentIndex>e&&this._currentIndex<=t&&this._currentIndex--}_adjustCurrentForRemove(e,t){let r=this._currentIndex,s=this.removeBehavior;if(r===e){if(0===this._titles.length)return this._currentIndex=-1,void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null});if("select-tab-after"===s)return this._currentIndex=Math.min(e,this._titles.length-1),void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});if("select-tab-before"===s)return this._currentIndex=Math.max(0,e-1),void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});if("select-previous-tab"===s)return this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(e,this._titles.length-1),void this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:this._currentIndex,currentTitle:this.currentTitle});this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:t,currentIndex:-1,currentTitle:null})}else r>e&&this._currentIndex--}_onTitleChanged(e){this.update()}}var Private$7$1,Private$6$1,Private$5$1,GridLayout2,Private$4$1,Private$3$1,Private$2$1,Private$1$1,Private$k;!function(e){class t{constructor(){this.closeIconSelector=".lm-TabBar-tabCloseIcon",this._tabID=0,this._tabKeys=/* @__PURE__ */new WeakMap,this._uuid=++t._nInstance}renderTab(e){let t=e.title.caption,r=this.createTabKey(e),s=r,n=this.createTabStyle(e),i=this.createTabClass(e),o=this.createTabDataset(e),a=this.createTabARIA(e);return e.title.closable?h.li({id:s,key:r,className:i,title:t,style:n,dataset:o,...a},this.renderIcon(e),this.renderLabel(e),this.renderCloseIcon(e)):h.li({id:s,key:r,className:i,title:t,style:n,dataset:o,...a},this.renderIcon(e),this.renderLabel(e))}renderIcon(e){const{title:t}=e;let r=this.createIconClass(e);return h.div({className:r},t.icon,t.iconLabel)}renderLabel(e){return h.div({className:"lm-TabBar-tabLabel"},e.title.label)}renderCloseIcon(e){return h.div({className:"lm-TabBar-tabCloseIcon"})}createTabKey(e){let t=this._tabKeys.get(e.title);return void 0===t&&(t=`tab-key-${this._uuid}-${this._tabID++}`,this._tabKeys.set(e.title,t)),t}createTabStyle(e){return{zIndex:`${e.zIndex}`}}createTabClass(e){let t="lm-TabBar-tab";return e.title.className&&(t+=` ${e.title.className}`),e.title.closable&&(t+=" lm-mod-closable"),e.current&&(t+=" lm-mod-current"),t}createTabDataset(e){return e.title.dataset}createTabARIA(e){var t;return{role:"tab","aria-selected":e.current.toString(),tabindex:`${null!==(t=e.tabIndex)&&void 0!==t?t:"-1"}`}}createIconClass(e){let t="lm-TabBar-tabIcon",r=e.title.iconClass;return r?`${t} ${r}`:t}}t._nInstance=0,e.Renderer=t,e.defaultRenderer=new t,e.addButtonSelector=".lm-TabBar-addButton"}(TabBar||(TabBar={})),function(e){e.DRAG_THRESHOLD=5,e.DETACH_THRESHOLD=20,e.createNode=function(){let e=document.createElement("div"),t=document.createElement("ul");t.setAttribute("role","tablist"),t.className="lm-TabBar-content",e.appendChild(t);let r=document.createElement("div");return r.className="lm-TabBar-addButton lm-mod-hidden",r.setAttribute("tabindex","-1"),r.setAttribute("role","button"),e.appendChild(r),e},e.asTitle=function(e){return e instanceof Title?e:new Title(e)},e.parseTransitionDuration=function(e){let t=window.getComputedStyle(e);return 1e3*(parseFloat(t.transitionDuration)||0)},e.snapTabLayout=function(e,t){let r=new Array(e.length);for(let s=0,n=e.length;s<n;++s){let n=e[s],i=window.getComputedStyle(n);r[s]="horizontal"===t?{pos:n.offsetLeft,size:n.offsetWidth,margin:parseFloat(i.marginLeft)||0}:{pos:n.offsetTop,size:n.offsetHeight,margin:parseFloat(i.marginTop)||0}}return r},e.dragExceeded=function(t,r){let s=Math.abs(r.clientX-t.pressX),n=Math.abs(r.clientY-t.pressY);return s>=e.DRAG_THRESHOLD||n>=e.DRAG_THRESHOLD},e.detachExceeded=function(t,r){let s=t.contentRect;return r.clientX<s.left-e.DETACH_THRESHOLD||r.clientX>=s.right+e.DETACH_THRESHOLD||r.clientY<s.top-e.DETACH_THRESHOLD||r.clientY>=s.bottom+e.DETACH_THRESHOLD},e.layoutTabs=function(e,t,r,s){let n,i,o,a;"horizontal"===s?(n=t.pressX,i=r.clientX-t.contentRect.left,o=r.clientX,a=t.contentRect.width):(n=t.pressY,i=r.clientY-t.contentRect.top,o=r.clientY,a=t.contentRect.height);let l=t.index,c=i-t.tabPressPos,d=c+t.tabSize;for(let h=0,u=e.length;h<u;++h){let r,i=t.tabLayout[h],u=i.pos+(i.size>>1);if(h<t.index&&c<u)r=`${t.tabSize+t.tabLayout[h+1].margin}px`,l=Math.min(l,h);else if(h>t.index&&d>u)r=-t.tabSize-i.margin+"px",l=Math.max(l,h);else if(h===t.index){let e=o-n,s=a-(t.tabPos+t.tabSize);r=`${Math.max(-t.tabPos,Math.min(e,s))}px`}else r="";"horizontal"===s?e[h].style.left=r:e[h].style.top=r}t.targetIndex=l},e.finalizeTabPosition=function(e,t){let r,s;if(r="horizontal"===t?e.contentRect.width:e.contentRect.height,e.targetIndex===e.index)s=0;else if(e.targetIndex>e.index){let t=e.tabLayout[e.targetIndex];s=t.pos+t.size-e.tabSize-e.tabPos}else{s=e.tabLayout[e.targetIndex].pos-e.tabPos}let n=r-(e.tabPos+e.tabSize),i=Math.max(-e.tabPos,Math.min(s,n));"horizontal"===t?e.tab.style.left=`${i}px`:e.tab.style.top=`${i}px`},e.resetTabPositions=function(e,t){for(const r of e)"horizontal"===t?r.style.left="":r.style.top=""}}(Private$7$1||(Private$7$1={}));class DockLayout extends Layout{constructor(e){super(),this._spacing=4,this._dirty=!1,this._root=null,this._box=null,this._items=/* @__PURE__ */new Map,this.renderer=e.renderer,void 0!==e.spacing&&(this._spacing=Utils$1$1.clampDimension(e.spacing)),this._document=e.document||document,this._hiddenMode=void 0!==e.hiddenMode?e.hiddenMode:Widget.HiddenMode.Display}dispose(){let e=this[Symbol.iterator]();this._items.forEach(e=>{e.dispose()}),this._box=null,this._root=null,this._items.clear();for(const t of e)t.dispose();super.dispose()}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){if(this._hiddenMode!==e){this._hiddenMode=e;for(const e of this.tabBars())if(e.titles.length>1)for(const t of e.titles)t.owner.hiddenMode=this._hiddenMode}}get spacing(){return this._spacing}set spacing(e){e=Utils$1$1.clampDimension(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())}get isEmpty(){return null===this._root}[Symbol.iterator](){return this._root?this._root.iterAllWidgets():empty()}widgets(){return this._root?this._root.iterUserWidgets():empty()}selectedWidgets(){return this._root?this._root.iterSelectedWidgets():empty()}tabBars(){return this._root?this._root.iterTabBars():empty()}handles(){return this._root?this._root.iterHandles():empty()}moveHandle(e,t,r){let s=e.classList.contains("lm-mod-hidden");if(!this._root||s)return;let n,i=this._root.findSplitNode(e);i&&(n="horizontal"===i.node.orientation?t-e.offsetLeft:r-e.offsetTop,0!==n&&(i.node.holdSizes(),BoxEngine.adjust(i.node.sizers,i.index,n),this.parent&&this.parent.update()))}saveLayout(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}}restoreLayout(e){let t,r=/* @__PURE__ */new Set;t=e.main?Private$6$1.normalizeAreaConfig(e.main,r):null;let s=this.widgets(),n=this.tabBars(),i=this.handles();this._root=null;for(const o of s)r.has(o)||(o.parent=null);for(const o of n)o.dispose();for(const o of i)o.parentNode&&o.parentNode.removeChild(o);for(const o of r)o.parent=this.parent;this._root=t?Private$6$1.realizeAreaConfig(t,{createTabBar:e=>this._createTabBar(),createHandle:()=>this._createHandle()},this._document):null,this.parent&&(r.forEach(e=>{this.attachWidget(e)}),this.parent.fit())}addWidget(e,t={}){let r=t.ref||null,s=t.mode||"tab-after",n=null;if(this._root&&r&&(n=this._root.findTabNode(r)),r&&!n)throw new Error("Reference widget is not in the layout.");switch(e.parent=this.parent,s){case"tab-after":this._insertTab(e,r,n,!0);break;case"tab-before":this._insertTab(e,r,n,!1);break;case"split-top":this._insertSplit(e,r,n,"vertical",!1);break;case"split-left":this._insertSplit(e,r,n,"horizontal",!1);break;case"split-right":this._insertSplit(e,r,n,"horizontal",!0);break;case"split-bottom":this._insertSplit(e,r,n,"vertical",!0);break;case"merge-top":this._insertSplit(e,r,n,"vertical",!1,!0);break;case"merge-left":this._insertSplit(e,r,n,"horizontal",!1,!0);break;case"merge-right":this._insertSplit(e,r,n,"horizontal",!0,!0);break;case"merge-bottom":this._insertSplit(e,r,n,"vertical",!0,!0)}this.parent&&(this.attachWidget(e),this.parent.fit())}removeWidget(e){this._removeWidget(e),this.parent&&(this.detachWidget(e),this.parent.fit())}hitTestTabAreas(e,t){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=ElementExt.boxSizing(this.parent.node));let r=this.parent.node.getBoundingClientRect(),s=e-r.left-this._box.borderLeft,n=t-r.top-this._box.borderTop,i=this._root.hitTestTabNodes(s,n);if(!i)return null;let{tabBar:o,top:a,left:l,width:c,height:d}=i,h=this._box.borderLeft+this._box.borderRight,u=this._box.borderTop+this._box.borderBottom;return{tabBar:o,x:s,y:n,top:a,left:l,right:r.width-h-(l+c),bottom:r.height-u-(a+d),width:c,height:d}}init(){super.init();for(const e of this)this.attachWidget(e);for(const e of this.handles())this.parent.node.appendChild(e);this.parent.fit()}attachWidget(e){this.parent.node!==e.node.parentNode&&(this._items.set(e,new LayoutItem(e)),this.parent.isAttached&&MessageLoop.sendMessage(e,Widget.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&MessageLoop.sendMessage(e,Widget.Msg.AfterAttach))}detachWidget(e){if(this.parent.node!==e.node.parentNode)return;this.parent.isAttached&&MessageLoop.sendMessage(e,Widget.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&MessageLoop.sendMessage(e,Widget.Msg.AfterDetach);let t=this._items.get(e);t&&(this._items.delete(e),t.dispose())}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_removeWidget(e){if(!this._root)return;let t=this._root.findTabNode(e);if(!t)return;if(Private$6$1.removeAria(e),t.tabBar.titles.length>1){if(t.tabBar.removeTab(e.title),this._hiddenMode===Widget.HiddenMode.Scale&&1==t.tabBar.titles.length){t.tabBar.titles[0].owner.hiddenMode=Widget.HiddenMode.Display}return}if(t.tabBar.dispose(),this._root===t)return void(this._root=null);this._root.holdAllSizes();let r=t.parent;t.parent=null;let s=ArrayExt.removeFirstOf(r.children,t),n=ArrayExt.removeAt(r.handles,s);if(ArrayExt.removeAt(r.sizers,s),n.parentNode&&n.parentNode.removeChild(n),r.children.length>1)return void r.syncHandles();let i=r.parent;r.parent=null;let o=r.children[0],a=r.handles[0];if(r.children.length=0,r.handles.length=0,r.sizers.length=0,a.parentNode&&a.parentNode.removeChild(a),this._root===r)return o.parent=null,void(this._root=o);let l=i,c=l.children.indexOf(r);if(o instanceof Private$6$1.TabLayoutNode)return o.parent=l,void(l.children[c]=o);let d=ArrayExt.removeAt(l.handles,c);ArrayExt.removeAt(l.children,c),ArrayExt.removeAt(l.sizers,c),d.parentNode&&d.parentNode.removeChild(d);for(let h=0,u=o.children.length;h<u;++h){let e=o.children[h],t=o.handles[h],r=o.sizers[h];ArrayExt.insert(l.children,c+h,e),ArrayExt.insert(l.handles,c+h,t),ArrayExt.insert(l.sizers,c+h,r),e.parent=l}o.children.length=0,o.handles.length=0,o.sizers.length=0,o.parent=null,l.syncHandles()}_createTabNode(e){let t=new Private$6$1.TabLayoutNode(this._createTabBar());return t.tabBar.addTab(e.title),Private$6$1.addAria(e,t.tabBar),t}_insertTab(e,t,r,s){if(e===t)return;if(!this._root){let t=new Private$6$1.TabLayoutNode(this._createTabBar());return t.tabBar.addTab(e.title),this._root=t,void Private$6$1.addAria(e,t.tabBar)}let n;if(r||(r=this._root.findFirstTabNode()),-1===r.tabBar.titles.indexOf(e.title)&&(this._removeWidget(e),e.hide()),n=t?r.tabBar.titles.indexOf(t.title):r.tabBar.currentIndex,this._hiddenMode===Widget.HiddenMode.Scale)if(0===r.tabBar.titles.length)e.hiddenMode=Widget.HiddenMode.Display;else if(1==r.tabBar.titles.length){r.tabBar.titles[0].owner.hiddenMode=Widget.HiddenMode.Scale}else e.hiddenMode=Widget.HiddenMode.Scale;else e.hiddenMode=this._hiddenMode;r.tabBar.insertTab(n+(s?1:0),e.title),Private$6$1.addAria(e,r.tabBar)}_insertSplit(e,t,r,s,n,i=!1){if(e===t&&r&&1===r.tabBar.titles.length)return;if(this._removeWidget(e),!this._root)return void(this._root=this._createTabNode(e));if(!r||!r.parent){let t=this._splitRoot(s),i=n?t.children.length:0;t.normalizeSizes();let o=Private$6$1.createSizer(r?1:Private$6$1.GOLDEN_RATIO),a=this._createTabNode(e);return ArrayExt.insert(t.children,i,a),ArrayExt.insert(t.sizers,i,o),ArrayExt.insert(t.handles,i,this._createHandle()),a.parent=t,t.normalizeSizes(),void t.syncHandles()}let o=r.parent;if(o.orientation===s){let t=o.children.indexOf(r);if(i){let r=t+(n?1:-1),s=o.children[r];if(s instanceof Private$6$1.TabLayoutNode)return this._insertTab(e,null,s,!0),void++s.tabBar.currentIndex}o.normalizeSizes();let s=o.sizers[t].sizeHint/=2,a=t+(n?1:0),l=this._createTabNode(e);return ArrayExt.insert(o.children,a,l),ArrayExt.insert(o.sizers,a,Private$6$1.createSizer(s)),ArrayExt.insert(o.handles,a,this._createHandle()),l.parent=o,void o.syncHandles()}let a=ArrayExt.removeFirstOf(o.children,r),l=new Private$6$1.SplitLayoutNode(s);l.normalized=!0,l.children.push(r),l.sizers.push(Private$6$1.createSizer(.5)),l.handles.push(this._createHandle()),r.parent=l;let c=n?1:0,d=this._createTabNode(e);ArrayExt.insert(l.children,c,d),ArrayExt.insert(l.sizers,c,Private$6$1.createSizer(.5)),ArrayExt.insert(l.handles,c,this._createHandle()),d.parent=l,l.syncHandles(),ArrayExt.insert(o.children,a,l),l.parent=o}_splitRoot(e){let t=this._root;if(t instanceof Private$6$1.SplitLayoutNode&&t.orientation===e)return t;let r=this._root=new Private$6$1.SplitLayoutNode(e);return t&&(r.children.push(t),r.sizers.push(Private$6$1.createSizer(0)),r.handles.push(this._createHandle()),t.parent=r),r}_fit(){let e=0,t=0;if(this._root){let r=this._root.fit(this._spacing,this._items);e=r.minWidth,t=r.minHeight}let r=this._box=ElementExt.boxSizing(this.parent.node);e+=r.horizontalSum,t+=r.verticalSum;let s=this.parent.node.style;s.minWidth=`${e}px`,s.minHeight=`${t}px`,this._dirty=!0,this.parent.parent&&MessageLoop.sendMessage(this.parent.parent,Widget.Msg.FitRequest),this._dirty&&MessageLoop.sendMessage(this.parent,Widget.Msg.UpdateRequest)}_update(e,t){if(this._dirty=!1,!this._root)return;e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=ElementExt.boxSizing(this.parent.node));let r=this._box.paddingTop,s=this._box.paddingLeft,n=e-this._box.horizontalSum,i=t-this._box.verticalSum;this._root.update(r,s,n,i,this._spacing,this._items)}_createTabBar(){let e=this.renderer.createTabBar(this._document);return e.orientation="horizontal",this.parent&&this.attachWidget(e),e}_createHandle(){let e=this.renderer.createHandle(),t=e.style;return t.position="absolute",t.contain="strict",t.top="0",t.left="0",t.width="0",t.height="0",this.parent&&this.parent.node.appendChild(e),e}}!function(e){function t(e){let t=new BoxSizer;return t.sizeHint=e,t.size=e,t}function r(e,t){let s;return s="tab-area"===e.type?function(e,t){if(0===e.widgets.length)return null;let r=[];for(const n of e.widgets)t.has(n)||(t.add(n),r.push(n));if(0===r.length)return null;let s=e.currentIndex;-1!==s&&(s<0||s>=r.length)&&(s=0);return{type:"tab-area",widgets:r,currentIndex:s}}(e,t):function(e,t){let s=e.orientation,n=[],i=[];for(let o=0,a=e.children.length;o<a;++o){let a=r(e.children[o],t);a&&("tab-area"===a.type||a.orientation!==s?(n.push(a),i.push(Math.abs(e.sizes[o]||0))):(n.push(...a.children),i.push(...a.sizes)))}if(0===n.length)return null;if(1===n.length)return n[0];return{type:"split-area",orientation:s,children:n,sizes:i}}(e,t),s}function s(r,o,a){let l;return l="tab-area"===r.type?function(t,r,s){let i=r.createTabBar(s);for(const n of t.widgets)n.hide(),i.addTab(n.title),e.addAria(n,i);return i.currentIndex=t.currentIndex,new n(i)}(r,o,a):function(e,r,n){let o=new i(e.orientation);return e.children.forEach((i,a)=>{let l=s(i,r,n),c=t(e.sizes[a]),d=r.createHandle();o.children.push(l),o.handles.push(d),o.sizers.push(c),l.parent=o}),o.syncHandles(),o.normalizeSizes(),o}(r,o,a),l}e.GOLDEN_RATIO=.618,e.createSizer=t,e.normalizeAreaConfig=r,e.realizeAreaConfig=s;class n{constructor(e){this.parent=null,this._top=0,this._left=0,this._width=0,this._height=0;let t=new BoxSizer,r=new BoxSizer;t.stretch=0,r.stretch=1,this.tabBar=e,this.sizers=[t,r]}get top(){return this._top}get left(){return this._left}get width(){return this._width}get height(){return this._height}*iterAllWidgets(){yield this.tabBar,yield*this.iterUserWidgets()}*iterUserWidgets(){for(const e of this.tabBar.titles)yield e.owner}*iterSelectedWidgets(){let e=this.tabBar.currentTitle;e&&(yield e.owner)}*iterTabBars(){yield this.tabBar}*iterHandles(){}findTabNode(e){return-1!==this.tabBar.titles.indexOf(e.title)?this:null}findSplitNode(e){return null}findFirstTabNode(){return this}hitTestTabNodes(e,t){return e<this._left||e>=this._left+this._width||t<this._top||t>=this._top+this._height?null:this}createConfig(){return{type:"tab-area",widgets:this.tabBar.titles.map(e=>e.owner),currentIndex:this.tabBar.currentIndex}}holdAllSizes(){}fit(e,t){let r=0,s=0,n=1/0,i=1/0,o=t.get(this.tabBar),a=this.tabBar.currentTitle,l=a?t.get(a.owner):void 0,[c,d]=this.sizers;return o&&o.fit(),l&&l.fit(),o&&!o.isHidden?(r=Math.max(r,o.minWidth),s+=o.minHeight,c.minSize=o.minHeight,c.maxSize=o.maxHeight):(c.minSize=0,c.maxSize=0),l&&!l.isHidden?(r=Math.max(r,l.minWidth),s+=l.minHeight,d.minSize=l.minHeight,d.maxSize=1/0):(d.minSize=0,d.maxSize=1/0),{minWidth:r,minHeight:s,maxWidth:n,maxHeight:i}}update(e,t,r,s,n,i){this._top=t,this._left=e,this._width=r,this._height=s;let o=i.get(this.tabBar),a=this.tabBar.currentTitle,l=a?i.get(a.owner):void 0;if(BoxEngine.calc(this.sizers,s),o&&!o.isHidden){let s=this.sizers[0].size;o.update(e,t,r,s),t+=s}if(l&&!l.isHidden){let s=this.sizers[1].size;l.update(e,t,r,s)}}}e.TabLayoutNode=n;class i{constructor(e){this.parent=null,this.normalized=!1,this.children=[],this.sizers=[],this.handles=[],this.orientation=e}*iterAllWidgets(){for(const e of this.children)yield*e.iterAllWidgets()}*iterUserWidgets(){for(const e of this.children)yield*e.iterUserWidgets()}*iterSelectedWidgets(){for(const e of this.children)yield*e.iterSelectedWidgets()}*iterTabBars(){for(const e of this.children)yield*e.iterTabBars()}*iterHandles(){yield*this.handles;for(const e of this.children)yield*e.iterHandles()}findTabNode(e){for(let t=0,r=this.children.length;t<r;++t){let r=this.children[t].findTabNode(e);if(r)return r}return null}findSplitNode(e){let t=this.handles.indexOf(e);if(-1!==t)return{index:t,node:this};for(let r=0,s=this.children.length;r<s;++r){let t=this.children[r].findSplitNode(e);if(t)return t}return null}findFirstTabNode(){return 0===this.children.length?null:this.children[0].findFirstTabNode()}hitTestTabNodes(e,t){for(let r=0,s=this.children.length;r<s;++r){let s=this.children[r].hitTestTabNodes(e,t);if(s)return s}return null}createConfig(){let e=this.orientation,t=this.createNormalizedSizes();return{type:"split-area",orientation:e,children:this.children.map(e=>e.createConfig()),sizes:t}}syncHandles(){this.handles.forEach((e,t)=>{e.setAttribute("data-orientation",this.orientation),t===this.handles.length-1?e.classList.add("lm-mod-hidden"):e.classList.remove("lm-mod-hidden")})}holdSizes(){for(const e of this.sizers)e.sizeHint=e.size}holdAllSizes(){for(const e of this.children)e.holdAllSizes();this.holdSizes()}normalizeSizes(){let e=this.sizers.length;if(0===e)return;this.holdSizes();let t=this.sizers.reduce((e,t)=>e+t.sizeHint,0);if(0===t)for(const r of this.sizers)r.size=r.sizeHint=1/e;else for(const r of this.sizers)r.size=r.sizeHint/=t;this.normalized=!0}createNormalizedSizes(){let e=this.sizers.length;if(0===e)return[];let t=this.sizers.map(e=>e.size),r=t.reduce((e,t)=>e+t,0);if(0===r)for(let s=t.length-1;s>-1;s--)t[s]=1/e;else for(let s=t.length-1;s>-1;s--)t[s]/=r;return t}fit(e,t){let r="horizontal"===this.orientation,s=Math.max(0,this.children.length-1)*e,n=r?s:0,i=r?0:s,o=1/0,a=1/0;for(let l=0,c=this.children.length;l<c;++l){let s=this.children[l].fit(e,t);r?(i=Math.max(i,s.minHeight),n+=s.minWidth,this.sizers[l].minSize=s.minWidth):(n=Math.max(n,s.minWidth),i+=s.minHeight,this.sizers[l].minSize=s.minHeight)}return{minWidth:n,minHeight:i,maxWidth:o,maxHeight:a}}update(e,t,r,s,n,i){let o="horizontal"===this.orientation,a=Math.max(0,this.children.length-1)*n,l=Math.max(0,(o?r:s)-a);if(this.normalized){for(const e of this.sizers)e.sizeHint*=l;this.normalized=!1}BoxEngine.calc(this.sizers,l);for(let c=0,d=this.children.length;c<d;++c){let a=this.children[c],l=this.sizers[c].size,d=this.handles[c].style;o?(a.update(e,t,l,s,n,i),e+=l,d.top=`${t}px`,d.left=`${e}px`,d.width=`${n}px`,d.height=`${s}px`,e+=n):(a.update(e,t,r,l,n,i),t+=l,d.top=`${t}px`,d.left=`${e}px`,d.width=`${r}px`,d.height=`${n}px`,t+=n)}}}e.SplitLayoutNode=i,e.addAria=function(e,t){e.node.setAttribute("role","tabpanel");let r=t.renderer;if(r instanceof TabBar.Renderer){let t=r.createTabKey({title:e.title,current:!1,zIndex:0});e.node.setAttribute("aria-labelledby",t)}},e.removeAria=function(e){e.node.removeAttribute("role"),e.node.removeAttribute("aria-labelledby")}}(Private$6$1||(Private$6$1={}));class DockPanel extends Widget{constructor(e={}){super(),this._drag=null,this._tabsMovable=!0,this._tabsConstrained=!1,this._addButtonEnabled=!1,this._pressData=null,this._layoutModified=new Signal(this),this._addRequested=new Signal(this),this.addClass("lm-DockPanel"),this._document=e.document||document,this._mode=e.mode||"multiple-document",this._renderer=e.renderer||DockPanel.defaultRenderer,this._edges=e.edges||Private$5$1.DEFAULT_EDGES,void 0!==e.tabsMovable&&(this._tabsMovable=e.tabsMovable),void 0!==e.tabsConstrained&&(this._tabsConstrained=e.tabsConstrained),void 0!==e.addButtonEnabled&&(this._addButtonEnabled=e.addButtonEnabled),this.dataset.mode=this._mode;let t={createTabBar:()=>this._createTabBar(),createHandle:()=>this._createHandle()};this.layout=new DockLayout({document:this._document,renderer:t,spacing:e.spacing,hiddenMode:e.hiddenMode}),this.overlay=e.overlay||new DockPanel.Overlay,this.node.appendChild(this.overlay.node)}dispose(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),super.dispose()}get hiddenMode(){return this.layout.hiddenMode}set hiddenMode(e){this.layout.hiddenMode=e}get layoutModified(){return this._layoutModified}get addRequested(){return this._addRequested}get renderer(){return this.layout.renderer}get spacing(){return this.layout.spacing}set spacing(e){this.layout.spacing=e}get mode(){return this._mode}set mode(e){if(this._mode===e)return;this._mode=e,this.dataset.mode=e;let t=this.layout;switch(e){case"multiple-document":for(const e of t.tabBars())e.show();break;case"single-document":t.restoreLayout(Private$5$1.createSingleDocumentConfig(this));break;default:throw"unreachable"}MessageLoop.postMessage(this,Private$5$1.LayoutModified)}get tabsMovable(){return this._tabsMovable}set tabsMovable(e){this._tabsMovable=e;for(const t of this.tabBars())t.tabsMovable=e}get tabsConstrained(){return this._tabsConstrained}set tabsConstrained(e){this._tabsConstrained=e}get addButtonEnabled(){return this._addButtonEnabled}set addButtonEnabled(e){this._addButtonEnabled=e;for(const t of this.tabBars())t.addButtonEnabled=e}get isEmpty(){return this.layout.isEmpty}*widgets(){yield*this.layout.widgets()}*selectedWidgets(){yield*this.layout.selectedWidgets()}*tabBars(){yield*this.layout.tabBars()}*handles(){yield*this.layout.handles()}selectWidget(e){let t=find$1(this.tabBars(),t=>-1!==t.titles.indexOf(e.title));if(!t)throw new Error("Widget is not contained in the dock panel.");t.currentTitle=e.title}activateWidget(e){this.selectWidget(e),e.activate()}saveLayout(){return this.layout.saveLayout()}restoreLayout(e){this._mode="multiple-document",this.layout.restoreLayout(e),(Platform.IS_EDGE||Platform.IS_IE)&&MessageLoop.flush(),MessageLoop.postMessage(this,Private$5$1.LayoutModified)}addWidget(e,t={}){"single-document"===this._mode?this.layout.addWidget(e):this.layout.addWidget(e,t),MessageLoop.postMessage(this,Private$5$1.LayoutModified)}processMessage(e){"layout-modified"===e.type?this._layoutModified.emit(void 0):super.processMessage(e)}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;case"pointerdown":this._evtPointerDown(e);break;case"pointermove":this._evtPointerMove(e);break;case"pointerup":this._evtPointerUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("lm-dragenter",this),this.node.addEventListener("lm-dragleave",this),this.node.addEventListener("lm-dragover",this),this.node.addEventListener("lm-drop",this),this.node.addEventListener("pointerdown",this)}onAfterDetach(e){this.node.removeEventListener("lm-dragenter",this),this.node.removeEventListener("lm-dragleave",this),this.node.removeEventListener("lm-dragover",this),this.node.removeEventListener("lm-drop",this),this.node.removeEventListener("pointerdown",this),this._releaseMouse()}onChildAdded(e){Private$5$1.isGeneratedTabBarProperty.get(e.child)||e.child.addClass("lm-DockPanel-widget")}onChildRemoved(e){Private$5$1.isGeneratedTabBarProperty.get(e.child)||(e.child.removeClass("lm-DockPanel-widget"),MessageLoop.postMessage(this,Private$5$1.LayoutModified))}_evtDragEnter(e){e.mimeData.hasData("application/vnd.lumino.widget-factory")&&(e.preventDefault(),e.stopPropagation())}_evtDragLeave(e){e.preventDefault(),this._tabsConstrained&&e.source!==this||(e.stopPropagation(),this.overlay.hide(1))}_evtDragOver(e){e.preventDefault(),this._tabsConstrained&&e.source!==this||"invalid"===this._showOverlay(e.clientX,e.clientY)?e.dropAction="none":(e.stopPropagation(),e.dropAction=e.proposedAction)}_evtDrop(e){if(e.preventDefault(),this.overlay.hide(0),"none"===e.proposedAction)return void(e.dropAction="none");let{clientX:t,clientY:r}=e,{zone:s,target:n}=Private$5$1.findDropTarget(this,t,r,this._edges);if(this._tabsConstrained&&e.source!==this||"invalid"===s)return void(e.dropAction="none");let i=e.mimeData.getData("application/vnd.lumino.widget-factory");if("function"!=typeof i)return void(e.dropAction="none");let o=i();if(!(o instanceof Widget))return void(e.dropAction="none");if(o.contains(this))return void(e.dropAction="none");let a=n?Private$5$1.getDropRef(n.tabBar):null;switch(s){case"root-all":this.addWidget(o);break;case"root-top":this.addWidget(o,{mode:"split-top"});break;case"root-left":this.addWidget(o,{mode:"split-left"});break;case"root-right":this.addWidget(o,{mode:"split-right"});break;case"root-bottom":this.addWidget(o,{mode:"split-bottom"});break;case"widget-all":case"widget-tab":this.addWidget(o,{mode:"tab-after",ref:a});break;case"widget-top":this.addWidget(o,{mode:"split-top",ref:a});break;case"widget-left":this.addWidget(o,{mode:"split-left",ref:a});break;case"widget-right":this.addWidget(o,{mode:"split-right",ref:a});break;case"widget-bottom":this.addWidget(o,{mode:"split-bottom",ref:a});break;default:throw"unreachable"}e.dropAction=e.proposedAction,e.stopPropagation(),this.activateWidget(o)}_evtKeyDown(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&(this._releaseMouse(),MessageLoop.postMessage(this,Private$5$1.LayoutModified))}_evtPointerDown(e){if(0!==e.button)return;let t=this.layout,r=e.target,s=find$1(t.handles(),e=>e.contains(r));if(!s)return;e.preventDefault(),e.stopPropagation(),this._document.addEventListener("keydown",this,!0),this._document.addEventListener("pointerup",this,!0),this._document.addEventListener("pointermove",this,!0),this._document.addEventListener("contextmenu",this,!0);let n=s.getBoundingClientRect(),i=e.clientX-n.left,o=e.clientY-n.top,a=window.getComputedStyle(s),l=Drag.overrideCursor(a.cursor,this._document);this._pressData={handle:s,deltaX:i,deltaY:o,override:l}}_evtPointerMove(e){if(!this._pressData)return;e.preventDefault(),e.stopPropagation();let t=this.node.getBoundingClientRect(),r=e.clientX-t.left-this._pressData.deltaX,s=e.clientY-t.top-this._pressData.deltaY;this.layout.moveHandle(this._pressData.handle,r,s)}_evtPointerUp(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse(),MessageLoop.postMessage(this,Private$5$1.LayoutModified))}_releaseMouse(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,this._document.removeEventListener("keydown",this,!0),this._document.removeEventListener("pointerup",this,!0),this._document.removeEventListener("pointermove",this,!0),this._document.removeEventListener("contextmenu",this,!0))}_showOverlay(e,t){let r,s,n,i,{zone:o,target:a}=Private$5$1.findDropTarget(this,e,t,this._edges);if("invalid"===o)return this.overlay.hide(100),o;let l=ElementExt.boxSizing(this.node),c=this.node.getBoundingClientRect();switch(o){case"root-all":r=l.paddingTop,s=l.paddingLeft,n=l.paddingRight,i=l.paddingBottom;break;case"root-top":r=l.paddingTop,s=l.paddingLeft,n=l.paddingRight,i=c.height*Private$5$1.GOLDEN_RATIO;break;case"root-left":r=l.paddingTop,s=l.paddingLeft,n=c.width*Private$5$1.GOLDEN_RATIO,i=l.paddingBottom;break;case"root-right":r=l.paddingTop,s=c.width*Private$5$1.GOLDEN_RATIO,n=l.paddingRight,i=l.paddingBottom;break;case"root-bottom":r=c.height*Private$5$1.GOLDEN_RATIO,s=l.paddingLeft,n=l.paddingRight,i=l.paddingBottom;break;case"widget-all":r=a.top,s=a.left,n=a.right,i=a.bottom;break;case"widget-top":r=a.top,s=a.left,n=a.right,i=a.bottom+a.height/2;break;case"widget-left":r=a.top,s=a.left,n=a.right+a.width/2,i=a.bottom;break;case"widget-right":r=a.top,s=a.left+a.width/2,n=a.right,i=a.bottom;break;case"widget-bottom":r=a.top+a.height/2,s=a.left,n=a.right,i=a.bottom;break;case"widget-tab":{const e=a.tabBar.node.getBoundingClientRect().height;r=a.top,s=a.left,n=a.right,i=a.bottom+a.height-e;break}default:throw"unreachable"}return this.overlay.show({top:r,left:s,right:n,bottom:i}),o}_createTabBar(){let e=this._renderer.createTabBar(this._document);return Private$5$1.isGeneratedTabBarProperty.set(e,!0),"single-document"===this._mode&&e.hide(),e.tabsMovable=this._tabsMovable,e.allowDeselect=!1,e.addButtonEnabled=this._addButtonEnabled,e.removeBehavior="select-previous-tab",e.insertBehavior="select-tab-if-needed",e.tabMoved.connect(this._onTabMoved,this),e.currentChanged.connect(this._onCurrentChanged,this),e.tabCloseRequested.connect(this._onTabCloseRequested,this),e.tabDetachRequested.connect(this._onTabDetachRequested,this),e.tabActivateRequested.connect(this._onTabActivateRequested,this),e.addRequested.connect(this._onTabAddRequested,this),e}_createHandle(){return this._renderer.createHandle()}_onTabMoved(){MessageLoop.postMessage(this,Private$5$1.LayoutModified)}_onCurrentChanged(e,t){let{previousTitle:r,currentTitle:s}=t;r&&r.owner.hide(),s&&s.owner.show(),(Platform.IS_EDGE||Platform.IS_IE)&&MessageLoop.flush(),MessageLoop.postMessage(this,Private$5$1.LayoutModified)}_onTabAddRequested(e){this._addRequested.emit(e)}_onTabActivateRequested(e,t){t.title.owner.activate()}_onTabCloseRequested(e,t){t.title.owner.close()}_onTabDetachRequested(e,t){if(this._drag)return;e.releaseMouse();let{title:r,tab:s,clientX:n,clientY:i,offset:o}=t,a=new MimeData;a.setData("application/vnd.lumino.widget-factory",()=>r.owner);let l=s.cloneNode(!0);o&&(l.style.top=`-${o.y}px`,l.style.left=`-${o.x}px`),this._drag=new Drag({document:this._document,mimeData:a,dragImage:l,proposedAction:"move",supportedActions:"move",source:this}),s.classList.add("lm-mod-hidden");this._drag.start(n,i).then(()=>{this._drag=null,s.classList.remove("lm-mod-hidden")})}}!function(e){e.Overlay=class{constructor(){this._timer=-1,this._hidden=!0,this.node=document.createElement("div"),this.node.classList.add("lm-DockPanel-overlay"),this.node.classList.add("lm-mod-hidden"),this.node.style.position="absolute",this.node.style.contain="strict"}show(e){let t=this.node.style;t.top=`${e.top}px`,t.left=`${e.left}px`,t.right=`${e.right}px`,t.bottom=`${e.bottom}px`,clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("lm-mod-hidden"))}hide(e){if(!this._hidden)return e<=0?(clearTimeout(this._timer),this._timer=-1,this._hidden=!0,void this.node.classList.add("lm-mod-hidden")):void(-1===this._timer&&(this._timer=window.setTimeout(()=>{this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden")},e)))}};class t{createTabBar(e){let t=new TabBar({document:e});return t.addClass("lm-DockPanel-tabBar"),t}createHandle(){let e=document.createElement("div");return e.className="lm-DockPanel-handle",e}}e.Renderer=t,e.defaultRenderer=new t}(DockPanel||(DockPanel={})),function(e){e.GOLDEN_RATIO=.618,e.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},e.LayoutModified=new ConflatableMessage("layout-modified"),e.isGeneratedTabBarProperty=new AttachedProperty({name:"isGeneratedTabBar",create:()=>!1}),e.createSingleDocumentConfig=function(e){if(e.isEmpty)return{main:null};let t=Array.from(e.widgets()),r=e.selectedWidgets().next().value,s=r?t.indexOf(r):-1;return{main:{type:"tab-area",widgets:t,currentIndex:s}}},e.findDropTarget=function(e,t,r,s){if(!ElementExt.hitTest(e.node,t,r))return{zone:"invalid",target:null};let n=e.layout;if(n.isEmpty)return{zone:"root-all",target:null};if("multiple-document"===e.mode){let n=e.node.getBoundingClientRect(),i=t-n.left+1,o=r-n.top+1,a=n.right-t,l=n.bottom-r;switch(Math.min(o,a,l,i)){case o:if(o<s.top)return{zone:"root-top",target:null};break;case a:if(a<s.right)return{zone:"root-right",target:null};break;case l:if(l<s.bottom)return{zone:"root-bottom",target:null};break;case i:if(i<s.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}let i=n.hitTestTabAreas(t,r);if(!i)return{zone:"invalid",target:null};if("single-document"===e.mode)return{zone:"widget-all",target:i};let o=i.x-i.left+1,a=i.y-i.top+1,l=i.left+i.width-i.x,c=i.top+i.height-i.y;if(a<i.tabBar.node.getBoundingClientRect().height)return{zone:"widget-tab",target:i};let d,h=Math.round(i.width/3),u=Math.round(i.height/3);if(o>h&&l>h&&a>u&&c>u)return{zone:"widget-all",target:i};switch(o/=h,a/=u,l/=h,c/=u,Math.min(o,a,l,c)){case o:d="widget-left";break;case a:d="widget-top";break;case l:d="widget-right";break;case c:d="widget-bottom";break;default:throw"unreachable"}return{zone:d,target:i}},e.getDropRef=function(e){return 0===e.titles.length?null:e.currentTitle?e.currentTitle.owner:e.titles[e.titles.length-1].owner}}(Private$5$1||(Private$5$1={}));class FocusTracker{constructor(){this._counter=0,this._widgets=[],this._activeWidget=null,this._currentWidget=null,this._numbers=/* @__PURE__ */new Map,this._nodes=/* @__PURE__ */new Map,this._activeChanged=new Signal(this),this._currentChanged=new Signal(this)}dispose(){if(!(this._counter<0)){this._counter=-1,Signal.clearData(this);for(const e of this._widgets)e.node.removeEventListener("focus",this,!0),e.node.removeEventListener("blur",this,!0);this._activeWidget=null,this._currentWidget=null,this._nodes.clear(),this._numbers.clear(),this._widgets.length=0}}get currentChanged(){return this._currentChanged}get activeChanged(){return this._activeChanged}get isDisposed(){return this._counter<0}get currentWidget(){return this._currentWidget}get activeWidget(){return this._activeWidget}get widgets(){return this._widgets}focusNumber(e){let t=this._numbers.get(e);return void 0===t?-1:t}has(e){return this._numbers.has(e)}add(e){if(this._numbers.has(e))return;let t=e.node.contains(document.activeElement),r=t?this._counter++:-1;this._widgets.push(e),this._numbers.set(e,r),this._nodes.set(e.node,e),e.node.addEventListener("focus",this,!0),e.node.addEventListener("blur",this,!0),e.disposed.connect(this._onWidgetDisposed,this),t&&this._setWidgets(e,e)}remove(e){if(!this._numbers.has(e))return;if(e.disposed.disconnect(this._onWidgetDisposed,this),e.node.removeEventListener("focus",this,!0),e.node.removeEventListener("blur",this,!0),ArrayExt.removeFirstOf(this._widgets,e),this._nodes.delete(e.node),this._numbers.delete(e),this._currentWidget!==e)return;let t=max$1(this._widgets.filter(e=>-1!==this._numbers.get(e)),(e,t)=>this._numbers.get(e)-this._numbers.get(t))||null;this._setWidgets(t,null)}handleEvent(e){switch(e.type){case"focus":this._evtFocus(e);break;case"blur":this._evtBlur(e)}}_setWidgets(e,t){let r=this._currentWidget;this._currentWidget=e;let s=this._activeWidget;this._activeWidget=t,r!==e&&this._currentChanged.emit({oldValue:r,newValue:e}),s!==t&&this._activeChanged.emit({oldValue:s,newValue:t})}_evtFocus(e){let t=this._nodes.get(e.currentTarget);t!==this._currentWidget&&this._numbers.set(t,this._counter++),this._setWidgets(t,t)}_evtBlur(e){let t=this._nodes.get(e.currentTarget),r=e.relatedTarget;r&&(t.node.contains(r)||find$1(this._widgets,e=>e.node.contains(r)))||this._setWidgets(this._currentWidget,null)}_onWidgetDisposed(e){this.remove(e)}}class GridLayout extends Layout{constructor(e={}){super(e),this._dirty=!1,this._rowSpacing=4,this._columnSpacing=4,this._items=[],this._rowStarts=[],this._columnStarts=[],this._rowSizers=[new BoxSizer],this._columnSizers=[new BoxSizer],this._box=null,void 0!==e.rowCount&&Private$4$1.reallocSizers(this._rowSizers,e.rowCount),void 0!==e.columnCount&&Private$4$1.reallocSizers(this._columnSizers,e.columnCount),void 0!==e.rowSpacing&&(this._rowSpacing=Private$4$1.clampValue(e.rowSpacing)),void 0!==e.columnSpacing&&(this._columnSpacing=Private$4$1.clampValue(e.columnSpacing))}dispose(){for(const e of this._items){let t=e.widget;e.dispose(),t.dispose()}this._box=null,this._items.length=0,this._rowStarts.length=0,this._rowSizers.length=0,this._columnStarts.length=0,this._columnSizers.length=0,super.dispose()}get rowCount(){return this._rowSizers.length}set rowCount(e){e!==this.rowCount&&(Private$4$1.reallocSizers(this._rowSizers,e),this.parent&&this.parent.fit())}get columnCount(){return this._columnSizers.length}set columnCount(e){e!==this.columnCount&&(Private$4$1.reallocSizers(this._columnSizers,e),this.parent&&this.parent.fit())}get rowSpacing(){return this._rowSpacing}set rowSpacing(e){e=Private$4$1.clampValue(e),this._rowSpacing!==e&&(this._rowSpacing=e,this.parent&&this.parent.fit())}get columnSpacing(){return this._columnSpacing}set columnSpacing(e){e=Private$4$1.clampValue(e),this._columnSpacing!==e&&(this._columnSpacing=e,this.parent&&this.parent.fit())}rowStretch(e){let t=this._rowSizers[e];return t?t.stretch:-1}setRowStretch(e,t){let r=this._rowSizers[e];r&&(t=Private$4$1.clampValue(t),r.stretch!==t&&(r.stretch=t,this.parent&&this.parent.update()))}columnStretch(e){let t=this._columnSizers[e];return t?t.stretch:-1}setColumnStretch(e,t){let r=this._columnSizers[e];r&&(t=Private$4$1.clampValue(t),r.stretch!==t&&(r.stretch=t,this.parent&&this.parent.update()))}*[Symbol.iterator](){for(const e of this._items)yield e.widget}addWidget(e){-1===ArrayExt.findFirstIndex(this._items,t=>t.widget===e)&&(this._items.push(new LayoutItem(e)),this.parent&&this.attachWidget(e))}removeWidget(e){let t=ArrayExt.findFirstIndex(this._items,t=>t.widget===e);if(-1===t)return;let r=ArrayExt.removeAt(this._items,t);this.parent&&this.detachWidget(e),r.dispose()}init(){super.init();for(const e of this)this.attachWidget(e)}attachWidget(e){this.parent.isAttached&&MessageLoop.sendMessage(e,Widget.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&MessageLoop.sendMessage(e,Widget.Msg.AfterAttach),this.parent.fit()}detachWidget(e){this.parent.isAttached&&MessageLoop.sendMessage(e,Widget.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&MessageLoop.sendMessage(e,Widget.Msg.AfterDetach),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){for(let a=0,l=this.rowCount;a<l;++a)this._rowSizers[a].minSize=0;for(let a=0,l=this.columnCount;a<l;++a)this._columnSizers[a].minSize=0;let e=this._items.filter(e=>!e.isHidden);for(let a=0,l=e.length;a<l;++a)e[a].fit();let t=this.rowCount-1,r=this.columnCount-1;e.sort(Private$4$1.rowSpanCmp);for(let a=0,l=e.length;a<l;++a){let r=e[a],s=GridLayout.getCellConfig(r.widget),n=Math.min(s.row,t),i=Math.min(s.row+s.rowSpan-1,t);Private$4$1.distributeMin(this._rowSizers,n,i,r.minHeight)}e.sort(Private$4$1.columnSpanCmp);for(let a=0,l=e.length;a<l;++a){let t=e[a],s=GridLayout.getCellConfig(t.widget),n=Math.min(s.column,r),i=Math.min(s.column+s.columnSpan-1,r);Private$4$1.distributeMin(this._columnSizers,n,i,t.minWidth)}if("set-no-constraint"===this.fitPolicy)return void MessageLoop.sendMessage(this.parent,Widget.Msg.UpdateRequest);let s=t*this._rowSpacing,n=r*this._columnSpacing;for(let a=0,l=this.rowCount;a<l;++a)s+=this._rowSizers[a].minSize;for(let a=0,l=this.columnCount;a<l;++a)n+=this._columnSizers[a].minSize;let i=this._box=ElementExt.boxSizing(this.parent.node);n+=i.horizontalSum,s+=i.verticalSum;let o=this.parent.node.style;o.minWidth=`${n}px`,o.minHeight=`${s}px`,this._dirty=!0,this.parent.parent&&MessageLoop.sendMessage(this.parent.parent,Widget.Msg.FitRequest),this._dirty&&MessageLoop.sendMessage(this.parent,Widget.Msg.UpdateRequest)}_update(e,t){this._dirty=!1,e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=ElementExt.boxSizing(this.parent.node));let r=this._box.paddingTop,s=this._box.paddingLeft,n=e-this._box.horizontalSum,i=t-this._box.verticalSum,o=this.rowCount-1,a=this.columnCount-1,l=o*this._rowSpacing,c=a*this._columnSpacing;BoxEngine.calc(this._rowSizers,Math.max(0,i-l)),BoxEngine.calc(this._columnSizers,Math.max(0,n-c));for(let d=0,h=r,u=this.rowCount;d<u;++d)this._rowStarts[d]=h,h+=this._rowSizers[d].size+this._rowSpacing;for(let d=0,h=s,u=this.columnCount;d<u;++d)this._columnStarts[d]=h,h+=this._columnSizers[d].size+this._columnSpacing;for(let d=0,h=this._items.length;d<h;++d){let e=this._items[d];if(e.isHidden)continue;let t=GridLayout.getCellConfig(e.widget),r=Math.min(t.row,o),s=Math.min(t.column,a),n=Math.min(t.row+t.rowSpan-1,o),i=Math.min(t.column+t.columnSpan-1,a),l=this._columnStarts[s],c=this._rowStarts[r],h=this._columnStarts[i]+this._columnSizers[i].size-l,u=this._rowStarts[n]+this._rowSizers[n].size-c;e.update(l,c,h,u)}}}GridLayout2=GridLayout||(GridLayout={}),GridLayout2.getCellConfig=function(e){return Private$4$1.cellConfigProperty.get(e)},GridLayout2.setCellConfig=function(e,t){Private$4$1.cellConfigProperty.set(e,Private$4$1.normalizeConfig(t))},function(e){e.cellConfigProperty=new AttachedProperty({name:"cellConfig",create:()=>({row:0,column:0,rowSpan:1,columnSpan:1}),changed:function(e){e.parent&&e.parent.layout instanceof GridLayout&&e.parent.fit()}}),e.normalizeConfig=function(e){return{row:Math.max(0,Math.floor(e.row||0)),column:Math.max(0,Math.floor(e.column||0)),rowSpan:Math.max(1,Math.floor(e.rowSpan||0)),columnSpan:Math.max(1,Math.floor(e.columnSpan||0))}},e.clampValue=function(e){return Math.max(0,Math.floor(e))},e.rowSpanCmp=function(t,r){let s=e.cellConfigProperty.get(t.widget),n=e.cellConfigProperty.get(r.widget);return s.rowSpan-n.rowSpan},e.columnSpanCmp=function(t,r){let s=e.cellConfigProperty.get(t.widget),n=e.cellConfigProperty.get(r.widget);return s.columnSpan-n.columnSpan},e.reallocSizers=function(e,t){for(t=Math.max(1,Math.floor(t));e.length<t;)e.push(new BoxSizer);e.length>t&&(e.length=t)},e.distributeMin=function(e,t,r,s){if(r<t)return;if(t===r){let r=e[t];return void(r.minSize=Math.max(r.minSize,s))}let n=0;for(let o=t;o<=r;++o)n+=e[o].minSize;if(n>=s)return;let i=(s-n)/(r-t+1);for(let o=t;o<=r;++o)e[o].minSize+=i}}(Private$4$1||(Private$4$1={}));class MenuBar extends Widget{constructor(e={}){super({node:Private$3$1.createNode()}),this._activeIndex=-1,this._tabFocusIndex=0,this._menus=[],this._childMenu=null,this._overflowMenu=null,this._menuItemSizes=[],this._overflowIndex=-1,this.addClass("lm-MenuBar"),this.setFlag(Widget.Flag.DisallowLayout),this.renderer=e.renderer||MenuBar.defaultRenderer,this._forceItemsPosition=e.forceItemsPosition||{forceX:!0,forceY:!0},this._overflowMenuOptions=e.overflowMenuOptions||{isVisible:!0}}dispose(){this._closeChildMenu(),this._menus.length=0,super.dispose()}get childMenu(){return this._childMenu}get overflowIndex(){return this._overflowIndex}get overflowMenu(){return this._overflowMenu}get contentNode(){return this.node.getElementsByClassName("lm-MenuBar-content")[0]}get activeMenu(){return this._menus[this._activeIndex]||null}set activeMenu(e){this.activeIndex=e?this._menus.indexOf(e):-1}get activeIndex(){return this._activeIndex}set activeIndex(e){(e<0||e>=this._menus.length)&&(e=-1),e>-1&&0===this._menus[e].items.length&&(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this.update())}get menus(){return this._menus}openActiveMenu(){-1!==this._activeIndex&&(this._openChildMenu(),this._childMenu&&(this._childMenu.activeIndex=-1,this._childMenu.activateNextItem()))}addMenu(e,t=!0){this.insertMenu(this._menus.length,e,t)}insertMenu(e,t,r=!0){this._closeChildMenu();let s=this._menus.indexOf(t),n=Math.max(0,Math.min(e,this._menus.length));if(-1===s)return ArrayExt.insert(this._menus,n,t),t.addClass("lm-MenuBar-menu"),t.aboutToClose.connect(this._onMenuAboutToClose,this),t.menuRequested.connect(this._onMenuMenuRequested,this),t.title.changed.connect(this._onTitleChanged,this),void(r&&this.update());n===this._menus.length&&n--,s!==n&&(ArrayExt.move(this._menus,s,n),r&&this.update())}removeMenu(e,t=!0){this.removeMenuAt(this._menus.indexOf(e),t)}removeMenuAt(e,t=!0){this._closeChildMenu();let r=ArrayExt.removeAt(this._menus,e);r&&(r.aboutToClose.disconnect(this._onMenuAboutToClose,this),r.menuRequested.disconnect(this._onMenuMenuRequested,this),r.title.changed.disconnect(this._onTitleChanged,this),r.removeClass("lm-MenuBar-menu"),t&&this.update())}clearMenus(){if(0!==this._menus.length){this._closeChildMenu();for(let e of this._menus)e.aboutToClose.disconnect(this._onMenuAboutToClose,this),e.menuRequested.disconnect(this._onMenuMenuRequested,this),e.title.changed.disconnect(this._onTitleChanged,this),e.removeClass("lm-MenuBar-menu");this._menus.length=0,this.update()}}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":case"mouseleave":this._evtMouseMove(e);break;case"focusout":this._evtFocusOut(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onBeforeAttach(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("focusout",this),this.node.addEventListener("contextmenu",this)}onAfterDetach(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("focusout",this),this.node.removeEventListener("contextmenu",this),this._closeChildMenu()}onActivateRequest(e){this.isAttached&&this._focusItemAt(0)}onResize(e){this.update(),super.onResize(e)}onUpdateRequest(e){var t;let r=this._menus,s=this.renderer,n=this._activeIndex,i=this._tabFocusIndex>=0&&this._tabFocusIndex<r.length?this._tabFocusIndex:0,o=this._overflowIndex>-1?this._overflowIndex:r.length,a=0,l=!1;o=null!==this._overflowMenu?o-1:o;let c=new Array(o);for(let d=0;d<o;++d)c[d]=s.renderItem({title:r[d].title,active:d===n,tabbable:d===i,disabled:0===r[d].items.length,onfocus:()=>{this._tabFocusIndex=d,this.activeIndex=d}}),a+=this._menuItemSizes[d],r[d].title.label===this._overflowMenuOptions.title&&(l=!0,o--);if(this._overflowMenuOptions.isVisible)if(this._overflowIndex>-1&&!l){if(null===this._overflowMenu){const e=null!==(t=this._overflowMenuOptions.title)&&void 0!==t?t:"...";this._overflowMenu=new Menu({commands:new CommandRegistry}),this._overflowMenu.title.label=e,this._overflowMenu.title.mnemonic=0,this.addMenu(this._overflowMenu,!1)}for(let e=r.length-2;e>=o;e--){const t=this.menus[e];t.title.mnemonic=0,this._overflowMenu.insertItem(0,{type:"submenu",submenu:t}),this.removeMenu(t,!1)}c[o]=s.renderItem({title:this._overflowMenu.title,active:o===n&&0!==r[o].items.length,tabbable:o===i,disabled:0===r[o].items.length,onfocus:()=>{this._tabFocusIndex=o,this.activeIndex=o}}),o++}else if(null!==this._overflowMenu){let e=this._overflowMenu.items,t=this.node.offsetWidth,n=this._overflowMenu.items.length;for(let l=0;l<n;++l){let n=r.length-1-l;if(t-a>this._menuItemSizes[n]){let t=e[0].submenu;this._overflowMenu.removeItemAt(0),this.insertMenu(o,t,!1),c[o]=s.renderItem({title:t.title,active:!1,tabbable:o===i,disabled:0===r[o].items.length,onfocus:()=>{this._tabFocusIndex=o,this.activeIndex=o}}),o++}}0===this._overflowMenu.items.length&&(this.removeMenu(this._overflowMenu,!1),c.pop(),this._overflowMenu=null,this._overflowIndex=-1)}VirtualDOM.render(c,this.contentNode),this._updateOverflowIndex()}_updateOverflowIndex(){if(!this._overflowMenuOptions.isVisible)return;const e=this.contentNode.childNodes;let t=this.node.offsetWidth,r=0,s=-1,n=e.length;if(0==this._menuItemSizes.length)for(let i=0;i<n;i++){let n=e[i];r+=n.offsetWidth,this._menuItemSizes.push(n.offsetWidth),r>t&&-1===s&&(s=i)}else for(let i=0;i<this._menuItemSizes.length;i++)if(r+=this._menuItemSizes[i],r>t){s=i;break}this._overflowIndex=s}_evtKeyDown(e){let t=e.keyCode;if(9===t)return void(this.activeIndex=-1);if(e.preventDefault(),e.stopPropagation(),13===t||32===t||38===t||40===t){if(this.activeIndex=this._tabFocusIndex,this.activeIndex!==this._tabFocusIndex)return;return void this.openActiveMenu()}if(27===t)return this._closeChildMenu(),void this._focusItemAt(this.activeIndex);if(37===t||39===t){let e=37===t?-1:1,r=this._tabFocusIndex+e,s=this._menus.length;for(let t=0;t<s;t++){let n=(s+r+e*t)%s;if(this._menus[n].items.length)return void this._focusItemAt(n)}return}let r=getKeyboardLayout().keyForKeydownEvent(e);if(!r)return;let s=this._activeIndex+1,n=Private$3$1.findMnemonic(this._menus,r,s);-1===n.index||n.multiple?-1!==n.index?(this.activeIndex=n.index,this._focusItemAt(this.activeIndex)):-1!==n.auto&&(this.activeIndex=n.auto,this._focusItemAt(this.activeIndex)):(this.activeIndex=n.index,this.openActiveMenu())}_evtMouseDown(e){if(!ElementExt.hitTest(this.node,e.clientX,e.clientY))return;e.stopPropagation(),e.stopImmediatePropagation();let t=ArrayExt.findFirstIndex(this.contentNode.children,t=>ElementExt.hitTest(t,e.clientX,e.clientY));if(-1!==t){if(0===e.button)if(this._childMenu)this._closeChildMenu(),this.activeIndex=t;else{e.preventDefault();const r=this._positionForMenu(t);Menu.saveWindowData(),this.activeIndex=t,this._openChildMenu(r)}}else this._closeChildMenu()}_evtMouseMove(e){let t=ArrayExt.findFirstIndex(this.contentNode.children,t=>ElementExt.hitTest(t,e.clientX,e.clientY));if(t===this._activeIndex)return;if(-1===t&&this._childMenu)return;const r=t>=0&&this._childMenu?this._positionForMenu(t):null;Menu.saveWindowData(),this.activeIndex=t,r&&this._openChildMenu(r)}_positionForMenu(e){let t=this.contentNode.children[e],{left:r,bottom:s}=t.getBoundingClientRect();return{top:s,left:r}}_evtFocusOut(e){this._childMenu||this.node.contains(e.relatedTarget)||(this.activeIndex=-1)}_focusItemAt(e){const t=this.contentNode.childNodes[e];t&&t.focus()}_openChildMenu(e={}){let t=this.activeMenu;if(!t)return void this._closeChildMenu();let r=this._childMenu;if(r===t)return;this._childMenu=t,r?r.close():document.addEventListener("mousedown",this,!0),this._tabFocusIndex=this.activeIndex,MessageLoop.sendMessage(this,Widget.Msg.UpdateRequest);let{left:s,top:n}=e;void 0!==s&&void 0!==n||({left:s,top:n}=this._positionForMenu(this._activeIndex)),r||this.addClass("lm-mod-active"),t.items.length>0&&t.open(s,n,this._forceItemsPosition)}_closeChildMenu(){if(!this._childMenu)return;this.removeClass("lm-mod-active"),document.removeEventListener("mousedown",this,!0);let e=this._childMenu;this._childMenu=null,e.close(),this.activeIndex=-1}_onMenuAboutToClose(e){e===this._childMenu&&(this.removeClass("lm-mod-active"),document.removeEventListener("mousedown",this,!0),this._childMenu=null,this.activeIndex=-1)}_onMenuMenuRequested(e,t){if(e!==this._childMenu)return;let r=this._activeIndex,s=this._menus.length;switch(t){case"next":this.activeIndex=r===s-1?0:r+1;break;case"previous":this.activeIndex=0===r?s-1:r-1}this.openActiveMenu()}_onTitleChanged(){this.update()}}!function(e){class t{renderItem(e){let t=this.createItemClass(e),r=this.createItemDataset(e),s=this.createItemARIA(e);return h.li({className:t,dataset:r,...e.disabled?{}:{tabindex:e.tabbable?"0":"-1"},onfocus:e.onfocus,...s},this.renderIcon(e),this.renderLabel(e))}renderIcon(e){let t=this.createIconClass(e);return h.div({className:t},e.title.icon,e.title.iconLabel)}renderLabel(e){let t=this.formatLabel(e);return h.div({className:"lm-MenuBar-itemLabel"},t)}createItemClass(e){let t="lm-MenuBar-item";return e.title.className&&(t+=` ${e.title.className}`),e.active&&!e.disabled&&(t+=" lm-mod-active"),t}createItemDataset(e){return e.title.dataset}createItemARIA(e){return{role:"menuitem","aria-haspopup":"true","aria-disabled":e.disabled?"true":"false"}}createIconClass(e){let t="lm-MenuBar-itemIcon",r=e.title.iconClass;return r?`${t} ${r}`:t}formatLabel(e){let{label:t,mnemonic:r}=e.title;if(r<0||r>=t.length)return t;let s=t.slice(0,r),n=t.slice(r+1),i=t[r];return[s,h.span({className:"lm-MenuBar-itemMnemonic"},i),n]}}e.Renderer=t,e.defaultRenderer=new t}(MenuBar||(MenuBar={})),function(e){e.createNode=function(){let e=document.createElement("div"),t=document.createElement("ul");return t.className="lm-MenuBar-content",e.appendChild(t),t.setAttribute("role","menubar"),e},e.findMnemonic=function(e,t,r){let s=-1,n=-1,i=!1,o=t.toUpperCase();for(let a=0,l=e.length;a<l;++a){let t=(a+r)%l,c=e[t].title;if(0===c.label.length)continue;let d=c.mnemonic;d>=0&&d<c.label.length?c.label[d].toUpperCase()===o&&(-1===s?s=t:i=!0):-1===n&&c.label[0].toUpperCase()===o&&(n=t)}return{index:s,multiple:i,auto:n}}}(Private$3$1||(Private$3$1={})),function(e){e.createNode=function(){let e=document.createElement("div"),t=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),n=document.createElement("div");return t.className="lm-ScrollBar-button",r.className="lm-ScrollBar-button",t.dataset.action="decrement",r.dataset.action="increment",s.className="lm-ScrollBar-track",n.className="lm-ScrollBar-thumb",s.appendChild(n),e.appendChild(t),e.appendChild(s),e.appendChild(r),e},e.findPart=function(e,t){return e.thumbNode.contains(t)?"thumb":e.trackNode.contains(t)?"track":e.decrementNode.contains(t)?"decrement":e.incrementNode.contains(t)?"increment":null}}(Private$2$1||(Private$2$1={}));class StackedLayout extends PanelLayout{constructor(e={}){super(e),this._dirty=!1,this._items=[],this._box=null,this._hiddenMode=void 0!==e.hiddenMode?e.hiddenMode:Widget.HiddenMode.Display}get hiddenMode(){return this._hiddenMode}set hiddenMode(e){this._hiddenMode!==e&&(this._hiddenMode=e,this.widgets.length>1&&this.widgets.forEach(e=>{e.hiddenMode=this._hiddenMode}))}dispose(){for(const e of this._items)e.dispose();this._box=null,this._items.length=0,super.dispose()}attachWidget(e,t){this._hiddenMode===Widget.HiddenMode.Scale&&this._items.length>0?(1===this._items.length&&(this.widgets[0].hiddenMode=Widget.HiddenMode.Scale),t.hiddenMode=Widget.HiddenMode.Scale):t.hiddenMode=Widget.HiddenMode.Display,ArrayExt.insert(this._items,e,new LayoutItem(t)),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterAttach),this.parent.fit()}moveWidget(e,t,r){ArrayExt.move(this._items,e,t),this.parent.update()}detachWidget(e,t){let r=ArrayExt.removeAt(this._items,e);this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterDetach),r.widget.node.style.zIndex="",this._hiddenMode===Widget.HiddenMode.Scale&&(t.hiddenMode=Widget.HiddenMode.Display,1===this._items.length&&(this._items[0].widget.hiddenMode=Widget.HiddenMode.Display)),r.dispose(),this.parent.fit()}onBeforeShow(e){super.onBeforeShow(e),this.parent.update()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}onChildShown(e){this.parent.fit()}onChildHidden(e){this.parent.fit()}onResize(e){this.parent.isVisible&&this._update(e.width,e.height)}onUpdateRequest(e){this.parent.isVisible&&this._update(-1,-1)}onFitRequest(e){this.parent.isAttached&&this._fit()}_fit(){let e=0,t=0;for(let n=0,i=this._items.length;n<i;++n){let r=this._items[n];r.isHidden||(r.fit(),e=Math.max(e,r.minWidth),t=Math.max(t,r.minHeight))}let r=this._box=ElementExt.boxSizing(this.parent.node);e+=r.horizontalSum,t+=r.verticalSum;let s=this.parent.node.style;s.minWidth=`${e}px`,s.minHeight=`${t}px`,this._dirty=!0,this.parent.parent&&MessageLoop.sendMessage(this.parent.parent,Widget.Msg.FitRequest),this._dirty&&MessageLoop.sendMessage(this.parent,Widget.Msg.UpdateRequest)}_update(e,t){this._dirty=!1;let r=0;for(let a=0,l=this._items.length;a<l;++a)r+=+!this._items[a].isHidden;if(0===r)return;e<0&&(e=this.parent.node.offsetWidth),t<0&&(t=this.parent.node.offsetHeight),this._box||(this._box=ElementExt.boxSizing(this.parent.node));let s=this._box.paddingTop,n=this._box.paddingLeft,i=e-this._box.horizontalSum,o=t-this._box.verticalSum;for(let a=0,l=this._items.length;a<l;++a){let e=this._items[a];e.isHidden||(e.widget.node.style.zIndex=`${a}`,e.update(n,s,i,o))}}}(Private$1$1||(Private$1$1={})).createLayout=function(e){return e.layout||new StackedLayout},function(e){e.orientationFromPlacement=function(e){return t[e]},e.directionFromPlacement=function(e){return r[e]};const t={top:"horizontal",left:"vertical",right:"vertical",bottom:"horizontal"},r={top:"top-to-bottom",left:"left-to-right",right:"right-to-left",bottom:"bottom-to-top"}}(Private$k||(Private$k={}));class Application{constructor(e){var t;this._delegate=new PromiseDelegate,this._started=!1,this._bubblingKeydown=!1,this.pluginRegistry=null!==(t=e.pluginRegistry)&&void 0!==t?t:new PluginRegistry(e),this.pluginRegistry.application=this,this.commands=new CommandRegistry,this.contextMenu=new ContextMenu({commands:this.commands,renderer:e.contextMenuRenderer}),this.shell=e.shell}get deferredPlugins(){return this.pluginRegistry.deferredPlugins}get started(){return this._delegate.promise}async activateDeferredPlugins(){await this.pluginRegistry.activatePlugins("defer")}async activatePlugin(e){return this.pluginRegistry.activatePlugin(e)}async deactivatePlugin(e){return this.pluginRegistry.deactivatePlugin(e)}deregisterPlugin(e,t){this.pluginRegistry.deregisterPlugin(e,t)}getPluginDescription(e){return this.pluginRegistry.getPluginDescription(e)}hasPlugin(e){return this.pluginRegistry.hasPlugin(e)}isPluginActivated(e){return this.pluginRegistry.isPluginActivated(e)}listPlugins(){return this.pluginRegistry.listPlugins()}registerPlugin(e){this.pluginRegistry.registerPlugin(e)}registerPlugins(e){this.pluginRegistry.registerPlugins(e)}async resolveOptionalService(e){return this.pluginRegistry.resolveOptionalService(e)}async resolveRequiredService(e){return this.pluginRegistry.resolveRequiredService(e)}async start(e={}){var t,r;if(this._started)return this._delegate.promise;this._started=!0,this._bubblingKeydown=null!==(t=e.bubblingKeydown)&&void 0!==t&&t;const s=null!==(r=e.hostID)&&void 0!==r?r:"";await this.pluginRegistry.activatePlugins("startUp",e),this.attachShell(s),this.addEventListeners(),this._delegate.resolve()}handleEvent(e){switch(e.type){case"resize":this.evtResize(e);break;case"keydown":this.evtKeydown(e);break;case"keyup":this.evtKeyup(e);break;case"contextmenu":this.evtContextMenu(e)}}attachShell(e){Widget.attach(this.shell,e&&document.getElementById(e)||document.body)}addEventListeners(){document.addEventListener("contextmenu",this),document.addEventListener("keydown",this,!this._bubblingKeydown),document.addEventListener("keyup",this,!this._bubblingKeydown),window.addEventListener("resize",this)}evtKeydown(e){this.commands.processKeydownEvent(e)}evtKeyup(e){this.commands.processKeyupEvent(e)}evtContextMenu(e){e.shiftKey||this.contextMenu.open(e)&&(e.preventDefault(),e.stopPropagation())}evtResize(e){this.shell.update()}}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mockSocket$1={exports:{}},mockSocket=mockSocket$1.exports,hasRequiredMockSocket;function requireMockSocket(){return hasRequiredMockSocket||(hasRequiredMockSocket=1,function(e){var t,r="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},n=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function o(e){try{return encodeURIComponent(e)}catch(t){return null}}function a(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,s={};t=r.exec(e);){var n=i(t[1]),o=i(t[2]);null===n||null===o||n in s||(s[n]=o)}return s}function l(e,r){r=r||"";var s,i,a=[];for(i in"string"!=typeof r&&(r="?"),e)if(n.call(e,i)){if((s=e[i])||null!==s&&s!==t&&!isNaN(s)||(s=""),i=o(i),s=o(s),null===i||null===s)continue;a.push(i+"="+s)}return a.length?r+a.join("&"):""}var c={stringify:l,parse:a},d=/[\n\r\t]/g,h=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,p=/^[a-zA-Z]:/,g=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/;function m(e){return(e||"").toString().replace(g,"")}var f=[["#","hash"],["?","query"],function(e,t){return y(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],v={hash:1,query:1};function _(e){var t,s=("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{}).location||{},n={},i=typeof(e=e||s);if("blob:"===e.protocol)n=new w(unescape(e.pathname),{});else if("string"===i)for(t in n=new w(e,{}),v)delete n[t];else if("object"===i){for(t in e)t in v||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=h.test(e.href))}return n}function y(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function b(e,t){e=(e=m(e)).replace(d,""),t=t||{};var r,s=u.exec(e),n=s[1]?s[1].toLowerCase():"",i=!!s[2],o=!!s[3],a=0;return i?o?(r=s[2]+s[3]+s[4],a=s[2].length+s[3].length):(r=s[2]+s[4],a=s[2].length):o?(r=s[3]+s[4],a=s[3].length):r=s[4],"file:"===n?a>=2&&(r=r.slice(2)):y(n)?r=s[4]:n?i&&(r=r.slice(2)):a>=2&&y(t.protocol)&&(r=s[4]),{protocol:n,slashes:i||y(n),slashesCount:a,rest:r}}function C(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),s=r.length,n=r[s-1],i=!1,o=0;s--;)"."===r[s]?r.splice(s,1):".."===r[s]?(r.splice(s,1),o++):o&&(0===s&&(i=!0),r.splice(s,1),o--);return i&&r.unshift(""),"."!==n&&".."!==n||r.push(""),r.join("/")}function w(e,t,r){if(e=(e=m(e)).replace(d,""),!(this instanceof w))return new w(e,t,r);var n,i,o,a,l,h,u=f.slice(),g=typeof t,v=this,S=0;for("object"!==g&&"string"!==g&&(r=t,t=null),r&&"function"!=typeof r&&(r=c.parse),n=!(i=b(e||"",t=_(t))).protocol&&!i.slashes,v.slashes=i.slashes||n&&t.slashes,v.protocol=i.protocol||t.protocol||"",e=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||p.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!y(v.protocol)))&&(u[3]=[/(.*)/,"pathname"]);S<u.length;S++)"function"!=typeof(a=u[S])?(o=a[0],h=a[1],o!=o?v[h]=e:"string"==typeof o?~(l="@"===o?e.lastIndexOf(o):e.indexOf(o))&&("number"==typeof a[2]?(v[h]=e.slice(0,l),e=e.slice(l+a[2])):(v[h]=e.slice(l),e=e.slice(0,l))):(l=o.exec(e))&&(v[h]=l[1],e=e.slice(0,l.index)),v[h]=v[h]||n&&a[3]&&t[h]||"",a[4]&&(v[h]=v[h].toLowerCase())):e=a(e,v);r&&(v.query=r(v.query)),n&&t.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==t.pathname)&&(v.pathname=C(v.pathname,t.pathname)),"/"!==v.pathname.charAt(0)&&y(v.protocol)&&(v.pathname="/"+v.pathname),s(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(~(l=v.auth.indexOf(":"))?(v.username=v.auth.slice(0,l),v.username=encodeURIComponent(decodeURIComponent(v.username)),v.password=v.auth.slice(l+1),v.password=encodeURIComponent(decodeURIComponent(v.password))):v.username=encodeURIComponent(decodeURIComponent(v.auth)),v.auth=v.password?v.username+":"+v.password:v.username),v.origin="file:"!==v.protocol&&y(v.protocol)&&v.host?v.protocol+"//"+v.host:"null",v.href=v.toString()}function S(e,t,r){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||c.parse)(t)),n[e]=t;break;case"port":n[e]=t,s(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";n[e]=t.charAt(0)!==i?i+t:t}else n[e]=t;break;case"username":case"password":n[e]=encodeURIComponent(t);break;case"auth":var o=t.indexOf(":");~o?(n.username=t.slice(0,o),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=t.slice(o+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<f.length;a++){var l=f[a];l[4]&&(n[l[1]]=n[l[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin="file:"!==n.protocol&&y(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function x(e){e&&"function"==typeof e||(e=c.stringify);var t,r=this,s=r.host,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var i=n+(r.protocol&&r.slashes||y(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):"file:"!==r.protocol&&y(r.protocol)&&!s&&"/"!==r.pathname&&(i+="@"),":"===s[s.length-1]&&(s+=":"),i+=s+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}w.prototype={set:S,toString:x},w.extractProtocol=b,w.location=_,w.trimLeft=m,w.qs=c;var P=w;function E(e,t){setTimeout(function(t){return e.call(t)},4,t)}function k(e,t){"undefined"!=typeof process&&console[e].call(null,t)}function A(e,t){void 0===e&&(e=[]);var r=[];return e.forEach(function(e){t(e)||r.push(e)}),r}function R(e,t){void 0===e&&(e=[]);var r=[];return e.forEach(function(e){t(e)&&r.push(e)}),r}var I=function(){this.listeners={}};function T(e){var t=e.indexOf("?");return t>=0?e.slice(0,t):e}I.prototype.addEventListener=function(e,t){"function"==typeof t&&(Array.isArray(this.listeners[e])||(this.listeners[e]=[]),0===R(this.listeners[e],function(e){return e===t}).length&&this.listeners[e].push(t))},I.prototype.removeEventListener=function(e,t){var r=this.listeners[e];this.listeners[e]=A(r,function(e){return e===t})},I.prototype.dispatchEvent=function(e){for(var t=this,r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];var n=e.type,i=this.listeners[n];return!!Array.isArray(i)&&(i.forEach(function(s){r.length>0?s.apply(t,r):s.call(t,e)}),!0)};var M=function(){this.urlMap={}};M.prototype.attachWebSocket=function(e,t){var r=T(t),s=this.urlMap[r];if(s&&s.server&&-1===s.websockets.indexOf(e))return s.websockets.push(e),s.server},M.prototype.addMembershipToRoom=function(e,t){var r=this.urlMap[T(e.url)];r&&r.server&&-1!==r.websockets.indexOf(e)&&(r.roomMemberships[t]||(r.roomMemberships[t]=[]),r.roomMemberships[t].push(e))},M.prototype.attachServer=function(e,t){var r=T(t);if(!this.urlMap[r])return this.urlMap[r]={server:e,websockets:[],roomMemberships:{}},e},M.prototype.serverLookup=function(e){var t=T(e),r=this.urlMap[t];if(r)return r.server},M.prototype.websocketsLookup=function(e,t,r){var s,n=T(e),i=this.urlMap[n];return s=i?i.websockets:[],t&&(s=i.roomMemberships[t]||[]),r?s.filter(function(e){return e!==r}):s},M.prototype.removeServer=function(e){delete this.urlMap[T(e)]},M.prototype.removeWebSocket=function(e,t){var r=T(t),s=this.urlMap[r];s&&(s.websockets=A(s.websockets,function(t){return t===e}))},M.prototype.removeMembershipFromRoom=function(e,t){var r=this.urlMap[T(e.url)],s=r.roomMemberships[t];r&&null!==s&&(r.roomMemberships[t]=A(s,function(t){return t===e}))};var $=new M,L={CLOSE_NORMAL:1e3,CLOSE_NO_STATUS:1005,CLOSE_ABNORMAL:1006},D={CONSTRUCTOR_ERROR:"Failed to construct 'WebSocket':",CLOSE_ERROR:"Failed to execute 'close' on 'WebSocket':",EVENT:{MESSAGE:"Failed to construct 'MessageEvent':",CLOSE:"Failed to construct 'CloseEvent':"}},O=function(){};O.prototype.stopPropagation=function(){},O.prototype.stopImmediatePropagation=function(){},O.prototype.initEvent=function(e,t,r){void 0===e&&(e="undefined"),void 0===t&&(t=!1),void 0===r&&(r=!1),this.type=""+e,this.bubbles=Boolean(t),this.cancelable=Boolean(r)};var N=function(e){function t(t,r){if(void 0===r&&(r={}),e.call(this),!t)throw new TypeError(D.EVENT_ERROR+" 1 argument required, but only 0 present.");if("object"!=typeof r)throw new TypeError(D.EVENT_ERROR+" parameter 2 ('eventInitDict') is not an object.");var s=r.bubbles,n=r.cancelable;this.type=""+t,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!n&&Boolean(n),this.cancelBubble=!1,this.bubbles=!!s&&Boolean(s)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(O),j=function(e){function t(t,r){if(void 0===r&&(r={}),e.call(this),!t)throw new TypeError(D.EVENT.MESSAGE+" 1 argument required, but only 0 present.");if("object"!=typeof r)throw new TypeError(D.EVENT.MESSAGE+" parameter 2 ('eventInitDict') is not an object");var s=r.bubbles,n=r.cancelable,i=r.data,o=r.origin,a=r.lastEventId,l=r.ports;this.type=""+t,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!n&&Boolean(n),this.canncelBubble=!1,this.bubbles=!!s&&Boolean(s),this.origin=""+o,this.ports=void 0===l?null:l,this.data=void 0===i?null:i,this.lastEventId=""+(a||"")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(O),B=function(e){function t(t,r){if(void 0===r&&(r={}),e.call(this),!t)throw new TypeError(D.EVENT.CLOSE+" 1 argument required, but only 0 present.");if("object"!=typeof r)throw new TypeError(D.EVENT.CLOSE+" parameter 2 ('eventInitDict') is not an object");var s=r.bubbles,n=r.cancelable,i=r.code,o=r.reason,a=r.wasClean;this.type=""+t,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!n&&Boolean(n),this.cancelBubble=!1,this.bubbles=!!s&&Boolean(s),this.code="number"==typeof i?parseInt(i,10):0,this.reason=""+(o||""),this.wasClean=!!a&&Boolean(a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(O);function q(e){var t=e.type,r=e.target,s=new N(t);return r&&(s.target=r,s.srcElement=r,s.currentTarget=r),s}function F(e){var t=e.type,r=e.origin,s=e.data,n=e.target,i=new j(t,{data:s,origin:r});return n&&(i.target=n,i.srcElement=n,i.currentTarget=n),i}function H(e){var t=e.code,r=e.reason,s=e.type,n=e.target,i=e.wasClean;i||(i=t===L.CLOSE_NORMAL||t===L.CLOSE_NO_STATUS);var o=new B(s,{code:t,reason:r,wasClean:i});return n&&(o.target=n,o.srcElement=n,o.currentTarget=n),o}function V(e,t,r){e.readyState=X.CLOSING;var s=$.serverLookup(e.url),n=H({type:"close",target:e.target,code:t,reason:r});E(function(){$.removeWebSocket(e,e.url),e.readyState=X.CLOSED,e.dispatchEvent(n),s&&s.dispatchEvent(n,s)},e)}function z(e,t,r){e.readyState=X.CLOSING;var s=$.serverLookup(e.url),n=H({type:"close",target:e.target,code:t,reason:r,wasClean:!1}),i=q({type:"error",target:e.target});E(function(){$.removeWebSocket(e,e.url),e.readyState=X.CLOSED,e.dispatchEvent(i),e.dispatchEvent(n),s&&s.dispatchEvent(n,s)},e)}function U(e){return"[object Blob]"===Object.prototype.toString.call(e)||e instanceof ArrayBuffer||(e=String(e)),e}var W=/* @__PURE__ */new WeakMap;function K(e){if(W.has(e))return W.get(e);var t=new Proxy(e,{get:function(r,s){if("close"===s)return function(e){void 0===e&&(e={});var r=e.code||L.CLOSE_NORMAL,s=e.reason||"";V(t,r,s)};if("send"===s)return function(t){t=U(t),e.dispatchEvent(F({type:"message",data:t,origin:this.url,target:e}))};var n=function(e){return"message"===e?"server::"+e:e};return"on"===s?function(t,r){e.addEventListener(n(t),r)}:"off"===s?function(t,r){e.removeEventListener(n(t),r)}:"target"===s?e:r[s]}});return W.set(e,t),t}function G(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)}function J(e){var t=new P(e),r=t.pathname,s=t.protocol,n=t.hash;if(!e)throw new TypeError(D.CONSTRUCTOR_ERROR+" 1 argument required, but only 0 present.");if(r||(t.pathname="/"),""===s)throw new SyntaxError(D.CONSTRUCTOR_ERROR+" The URL '"+t.toString()+"' is invalid.");if("ws:"!==s&&"wss:"!==s)throw new SyntaxError(D.CONSTRUCTOR_ERROR+" The URL's scheme must be either 'ws' or 'wss'. '"+s+"' is not allowed.");if(""!==n)throw new SyntaxError(D.CONSTRUCTOR_ERROR+" The URL contains a fragment identifier ('"+n+"'). Fragment identifiers are not allowed in WebSocket URLs.");return t.toString()}function Y(e){if(void 0===e&&(e=[]),!Array.isArray(e)&&"string"!=typeof e)throw new SyntaxError(D.CONSTRUCTOR_ERROR+" The subprotocol '"+e.toString()+"' is invalid.");"string"==typeof e&&(e=[e]);var t=e.map(function(e){return{count:1,protocol:e}}).reduce(function(e,t){return e[t.protocol]=(e[t.protocol]||0)+t.count,e},{}),r=Object.keys(t).filter(function(e){return t[e]>1});if(r.length>0)throw new SyntaxError(D.CONSTRUCTOR_ERROR+" The subprotocol '"+r[0]+"' is duplicated.");return e}var X=function(e){function t(r,s){e.call(this),this._onopen=null,this._onmessage=null,this._onerror=null,this._onclose=null,this.url=J(r),s=Y(s),this.protocol=s[0]||"",this.binaryType="blob",this.readyState=t.CONNECTING;var n=K(this),i=$.attachWebSocket(n,this.url);E(function(){if(this.readyState===t.CONNECTING)if(i)if(i.options.verifyClient&&"function"==typeof i.options.verifyClient&&!i.options.verifyClient())this.readyState=t.CLOSED,k("error","WebSocket connection to '"+this.url+"' failed: HTTP Authentication failed; no valid credentials available"),$.removeWebSocket(n,this.url),this.dispatchEvent(q({type:"error",target:this})),this.dispatchEvent(H({type:"close",target:this,code:L.CLOSE_NORMAL}));else{if(i.options.selectProtocol&&"function"==typeof i.options.selectProtocol){var e=i.options.selectProtocol(s),r=""!==e,o=-1!==s.indexOf(e);if(r&&!o)return this.readyState=t.CLOSED,k("error","WebSocket connection to '"+this.url+"' failed: Invalid Sub-Protocol"),$.removeWebSocket(n,this.url),this.dispatchEvent(q({type:"error",target:this})),void this.dispatchEvent(H({type:"close",target:this,code:L.CLOSE_NORMAL}));this.protocol=e}this.readyState=t.OPEN,this.dispatchEvent(q({type:"open",target:this})),i.dispatchEvent(q({type:"connection"}),n)}else this.readyState=t.CLOSED,this.dispatchEvent(q({type:"error",target:this})),this.dispatchEvent(H({type:"close",target:this,code:L.CLOSE_NORMAL})),k("error","WebSocket connection to '"+this.url+"' failed")},this)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={onopen:{},onmessage:{},onclose:{},onerror:{}};return r.onopen.get=function(){return this._onopen},r.onmessage.get=function(){return this._onmessage},r.onclose.get=function(){return this._onclose},r.onerror.get=function(){return this._onerror},r.onopen.set=function(e){this.removeEventListener("open",this._onopen),this._onopen=e,this.addEventListener("open",e)},r.onmessage.set=function(e){this.removeEventListener("message",this._onmessage),this._onmessage=e,this.addEventListener("message",e)},r.onclose.set=function(e){this.removeEventListener("close",this._onclose),this._onclose=e,this.addEventListener("close",e)},r.onerror.set=function(e){this.removeEventListener("error",this._onerror),this._onerror=e,this.addEventListener("error",e)},t.prototype.send=function(e){var r=this;if(this.readyState===t.CONNECTING)throw new Error("Failed to execute 'send' on 'WebSocket': Still in CONNECTING state");var s=F({type:"server::message",origin:this.url,data:U(e)}),n=$.serverLookup(this.url);n&&E(function(){r.dispatchEvent(s,e)},n)},t.prototype.close=function(e,r){if(void 0!==e&&("number"!=typeof e||1e3!==e&&(e<3e3||e>4999)))throw new TypeError(D.CLOSE_ERROR+" The code must be either 1000, or between 3000 and 4999. "+e+" is neither.");if(void 0!==r&&G(r)>123)throw new SyntaxError(D.CLOSE_ERROR+" The message must not be greater than 123 bytes.");if(this.readyState!==t.CLOSING&&this.readyState!==t.CLOSED){var s=K(this);this.readyState===t.CONNECTING?z(s,e||L.CLOSE_ABNORMAL,r):V(s,e||L.CLOSE_NO_STATUS,r)}},Object.defineProperties(t.prototype,r),t}(I);X.CONNECTING=0,X.prototype.CONNECTING=X.CONNECTING,X.OPEN=1,X.prototype.OPEN=X.OPEN,X.CLOSING=2,X.prototype.CLOSING=X.CLOSING,X.CLOSED=3,X.prototype.CLOSED=X.CLOSED;var Q=function(e){function t(r,s){var n=this;void 0===r&&(r="socket.io"),void 0===s&&(s=""),e.call(this),this.binaryType="blob";var i=new P(r);i.pathname||(i.pathname="/"),this.url=i.toString(),this.readyState=t.CONNECTING,this.protocol="",this.target=this,"string"==typeof s||"object"==typeof s&&null!==s?this.protocol=s:Array.isArray(s)&&s.length>0&&(this.protocol=s[0]);var o=$.attachWebSocket(this,this.url);E(function(){o?(this.readyState=t.OPEN,o.dispatchEvent(q({type:"connection"}),o,this),o.dispatchEvent(q({type:"connect"}),o,this),this.dispatchEvent(q({type:"connect",target:this}))):(this.readyState=t.CLOSED,this.dispatchEvent(q({type:"error",target:this})),this.dispatchEvent(H({type:"close",target:this,code:L.CLOSE_NORMAL})),k("error","Socket.io connection to '"+this.url+"' failed"))},this),this.addEventListener("close",function(e){n.dispatchEvent(H({type:"disconnect",target:e.target,code:e.code}))})}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={broadcast:{}};return t.prototype.close=function(){if(this.readyState===t.OPEN){var e=$.serverLookup(this.url);return $.removeWebSocket(this,this.url),this.readyState=t.CLOSED,this.dispatchEvent(H({type:"close",target:this,code:L.CLOSE_NORMAL})),e&&e.dispatchEvent(H({type:"disconnect",target:this,code:L.CLOSE_NORMAL}),e),this}},t.prototype.disconnect=function(){return this.close()},t.prototype.emit=function(e){for(var r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];if(this.readyState!==t.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var n=F({type:e,origin:this.url,data:r}),i=$.serverLookup(this.url);return i&&i.dispatchEvent.apply(i,[n].concat(r)),this},t.prototype.send=function(e){return this.emit("message",e),this},r.broadcast.get=function(){if(this.readyState!==t.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var e=this,r=$.serverLookup(this.url);if(!r)throw new Error("SocketIO can not find a server at the specified URL ("+this.url+")");return{emit:function(t,s){return r.emit(t,s,{websockets:$.websocketsLookup(e.url,null,e)}),e},to:function(t){return r.to(t,e)},in:function(t){return r.in(t,e)}}},t.prototype.on=function(e,t){return this.addEventListener(e,t),this},t.prototype.off=function(e,t){this.removeEventListener(e,t)},t.prototype.hasListeners=function(e){var t=this.listeners[e];return!!Array.isArray(t)&&!!t.length},t.prototype.join=function(e){$.addMembershipToRoom(this,e)},t.prototype.leave=function(e){$.removeMembershipFromRoom(this,e)},t.prototype.to=function(e){return this.broadcast.to(e)},t.prototype.in=function(){return this.to.apply(null,arguments)},t.prototype.dispatchEvent=function(e){for(var t=this,r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];var n=e.type,i=this.listeners[n];if(!Array.isArray(i))return!1;i.forEach(function(s){r.length>0?s.apply(t,r):s.call(t,e.data?e.data:e)})},Object.defineProperties(t.prototype,r),t}(I);Q.CONNECTING=0,Q.OPEN=1,Q.CLOSING=2,Q.CLOSED=3;var Z=function(e,t){return new Q(e,t)};Z.connect=function(e,t){return Z(e,t)};var ee=function(e){return e.reduce(function(e,t){return e.indexOf(t)>-1?e:e.concat(t)},[])};function te(){return"undefined"!=typeof window?window:"object"==typeof process&&"function"==typeof commonjsRequire&&"object"==typeof globalThis?globalThis:this}var re={mock:!0,verifyClient:null,selectProtocol:null},se=function(e){function t(t,r){void 0===r&&(r=re),e.call(this);var s=new P(t);if(s.pathname||(s.pathname="/"),this.url=s.toString(),this.originalWebSocket=null,!$.attachServer(this,this.url))throw this.dispatchEvent(q({type:"error"})),new Error("A mock server is already listening on this url");this.options=Object.assign({},re,r),this.options.mock&&this.mockWebsocket()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.mockWebsocket=function(){var e=te();this.originalWebSocket=e.WebSocket,e.WebSocket=X},t.prototype.restoreWebsocket=function(){var e=te();null!==this.originalWebSocket&&(e.WebSocket=this.originalWebSocket),this.originalWebSocket=null},t.prototype.stop=function(e){void 0===e&&(e=function(){}),this.options.mock&&this.restoreWebsocket(),$.removeServer(this.url),"function"==typeof e&&e()},t.prototype.on=function(e,t){this.addEventListener(e,t)},t.prototype.off=function(e,t){this.removeEventListener(e,t)},t.prototype.close=function(e){void 0===e&&(e={});var t=e.code,r=e.reason,s=e.wasClean,n=$.websocketsLookup(this.url);$.removeServer(this.url),n.forEach(function(e){e.readyState=X.CLOSED,e.dispatchEvent(H({type:"close",target:e.target,code:t||L.CLOSE_NORMAL,reason:r||"",wasClean:s}))}),this.dispatchEvent(H({type:"close"}),this)},t.prototype.emit=function(e,t,r){var s=this;void 0===r&&(r={});var n,i=r.websockets;i||(i=$.websocketsLookup(this.url)),"object"!=typeof r||arguments.length>3?(t=Array.prototype.slice.call(arguments,1,arguments.length),n=t.map(function(e){return U(e)})):n=U(t),i.forEach(function(r){var i=r instanceof Q?t:n;Array.isArray(i)?r.dispatchEvent.apply(r,[F({type:e,data:i,origin:s.url,target:r.target})].concat(i)):r.dispatchEvent(F({type:e,data:i,origin:s.url,target:r.target}))})},t.prototype.clients=function(){return $.websocketsLookup(this.url)},t.prototype.to=function(e,t,r){var s=this;void 0===r&&(r=[]);var n=this,i=ee(r.concat($.websocketsLookup(this.url,e,t)));return{to:function(e,t){return s.to.call(s,e,t,i)},emit:function(e,t){n.emit(e,t,{websockets:i})}}},t.prototype.in=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return this.to.apply(null,e)},t.prototype.simulate=function(e){var t=$.websocketsLookup(this.url);"error"===e&&t.forEach(function(e){e.readyState=X.CLOSED,e.dispatchEvent(q({type:"error",target:e.target}))})},t}(I);se.of=function(e){return new se(e)};var ne=se,ie=X,oe=Z;e.Server=ne,e.WebSocket=ie,e.SocketIO=oe,Object.defineProperty(e,"__esModule",{value:!0})}(mockSocket$1.exports)),mockSocket$1.exports}var mockSocketExports=requireMockSocket(),Private$j,ObservableJSON2,Private$i;class Router{get(e,t){this._add("GET",e,t)}put(e,t){this._add("PUT",e,t)}post(e,t){this._add("POST",e,t)}patch(e,t){this._add("PATCH",e,t)}delete(e,t){this._add("DELETE",e,t)}async route(e){const t=new URL(e.url),{method:r}=e,{pathname:s}=t;for(const n of this._routes){if(n.method!==r)continue;const i=s.match(n.pattern);if(!i)continue;const o=i.slice(1);let a;if("PATCH"===n.method||"PUT"===n.method||"POST"===n.method)try{a=JSON.parse(await e.text())}catch{a=void 0}return n.callback.call(null,{pathname:s,body:a,query:Object.fromEntries(t.searchParams)},...o)}throw new Error("Cannot route "+e.method+" "+e.url)}_add(e,t,r){"string"==typeof t&&(t=new RegExp(t)),this._routes.push({method:e,pattern:t,callback:r})}_routes=[]}class LocalEventManager{constructor(e){this._serverSettings=e.serverSettings,this._stream=new Stream(this)}async emit({data:e,schema_id:t}){this._stream.emit({...e,schema_id:t})}dispose(){this.isDisposed||(this._isDisposed=!0,Signal.clearData(this),this._stream.stop())}get isDisposed(){return this._isDisposed}get stream(){return this._stream}get serverSettings(){return this._serverSettings}_isDisposed=!1;_serverSettings;_stream}class JupyterLiteServer extends Application{constructor(e){super(e);const t={...libExports$3.ServerConnection.makeSettings(),WebSocket:mockSocketExports.WebSocket,fetch:this.fetch.bind(this)??void 0};this._serviceManager=new libExports$3.ServiceManager({standby:"never",serverSettings:t,events:new LocalEventManager({serverSettings:t})})}name="JupyterLite Server";namespace=this.name;version="unknown";get router(){return this._router}get serviceManager(){return this._serviceManager}async fetch(e,t){if(!(e instanceof Request))throw Error("Request info is not a Request");return this._router.route(e)}attachShell(e){}evtResize(e){}registerPluginModule(e){let t=e.default;Object.prototype.hasOwnProperty.call(e,"__esModule")||(t=e),Array.isArray(t)||(t=[t]),t.forEach(e=>{try{this.registerPlugin(e)}catch(t){console.error(t)}})}registerPluginModules(e){e.forEach(e=>{this.registerPluginModule(e)})}_router=new Router;_serviceManager}function*activePlugins(e){let t;t=Object.prototype.hasOwnProperty.call(e,"__esModule")?e.default:e,t&&"object"==typeof t&&"default"in t&&(t=t.default);const r=Array.isArray(t)?t:[t];for(const s of r)s?.id?libExports$2.PageConfig.Extension.isDisabled(s.id)?console.info(`JupyterLite plugin '${s.id}' has been disabled.`):yield s:console.log("Skipping JupyterLite plugin without id:",s)}async function createLiteServer(){libExports$2.PageConfig.setOption("serviceWorkerUrl",window.location.protocol+"//"+window.location.host+"/lite-service-worker.js");const e=[],t=await import("./index-DalesL42.js");for(const s of activePlugins(t))console.log("Activating JupyterLite server plugin",s.id),e.push(s);console.log("Total plugins registered:",e.length);const r=new JupyterLiteServer({});return r.registerPluginModules(e),await r.start(),r}class ObservableMap{constructor(e={}){if(this._map=/* @__PURE__ */new Map,this._changed=new Signal(this),this._isDisposed=!1,this._itemCmp=e.itemCmp||Private$j.itemCmp,e.values)for(const t in e.values)this._map.set(t,e.values[t])}get type(){return"Map"}get changed(){return this._changed}get isDisposed(){return this._isDisposed}get size(){return this._map.size}set(e,t){const r=this._map.get(e);if(void 0===t)throw Error("Cannot set an undefined value, use remove");const s=this._itemCmp;return void 0!==r&&s(r,t)||(this._map.set(e,t),this._changed.emit({type:r?"change":"add",key:e,oldValue:r,newValue:t})),r}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){const e=[];return this._map.forEach((t,r)=>{e.push(r)}),e}values(){const e=[];return this._map.forEach((t,r)=>{e.push(t)}),e}delete(e){const t=this._map.get(e);return this._map.delete(e)&&this._changed.emit({type:"remove",key:e,oldValue:t,newValue:void 0}),t}clear(){const e=this.keys();for(let t=0;t<e.length;t++)this.delete(e[t])}dispose(){this.isDisposed||(this._isDisposed=!0,Signal.clearData(this),this._map.clear())}}(Private$j||(Private$j={})).itemCmp=function(e,t){return e===t};class ObservableJSON extends ObservableMap{constructor(e={}){super({itemCmp:JSONExt.deepEqual,values:e.values})}toJSON(){const e=/* @__PURE__ */Object.create(null),t=this.keys();for(const r of t){const t=this.get(r);void 0!==t&&(e[r]=JSONExt.deepCopy(t))}return e}}ObservableJSON2=ObservableJSON||(ObservableJSON={}),ObservableJSON2.ChangeMessage=class extends Message{constructor(e,t){super(e),this.args=t}};class ObservableString{constructor(e=""){this._text="",this._isDisposed=!1,this._changed=new Signal(this),this._text=e}get type(){return"String"}get changed(){return this._changed}set text(e){e.length===this._text.length&&e===this._text||(this._text=e,this._changed.emit({type:"set",start:0,end:e.length,value:e}))}get text(){return this._text}insert(e,t,r){this._text=this._text.slice(0,e)+t+this._text.slice(e),this._changed.emit({type:"insert",start:e,end:e+t.length,value:t,options:r})}remove(e,t,r){const s=this._text.slice(e,t);this._text=this._text.slice(0,e)+this._text.slice(t),this._changed.emit({type:"remove",start:e,end:t,value:s,options:r})}clear(){this.text=""}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,Signal.clearData(this),this.clear())}}class ObservableList{constructor(e={}){if(this._array=[],this._isDisposed=!1,this._changed=new Signal(this),e.values)for(const t of e.values)this._array.push(t);this._itemCmp=e.itemCmp||Private$i.itemCmp}get type(){return"List"}get changed(){return this._changed}get length(){return this._array.length}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,Signal.clearData(this),this.clear())}[Symbol.iterator](){return this._array[Symbol.iterator]()}get(e){return this._array[e]}set(e,t){const r=this._array[e];if(void 0===t)throw new Error("Cannot set an undefined item");(0,this._itemCmp)(r,t)||(this._array[e]=t,this._changed.emit({type:"set",oldIndex:e,newIndex:e,oldValues:[r],newValues:[t]}))}push(e){const t=this._array.push(e);return this._changed.emit({type:"add",oldIndex:-1,newIndex:this.length-1,oldValues:[],newValues:[e]}),t}insert(e,t){e===this._array.length?this._array.push(t):ArrayExt.insert(this._array,e,t),this._changed.emit({type:"add",oldIndex:-2,newIndex:e,oldValues:[],newValues:[t]})}removeValue(e){const t=this._itemCmp,r=ArrayExt.findFirstIndex(this._array,r=>t(r,e));return r<0||this.remove(r),r}remove(e){const t=ArrayExt.removeAt(this._array,e);if(void 0!==t)return this._changed.emit({type:"remove",oldIndex:e,newIndex:-1,newValues:[],oldValues:[t]}),t}clear(){const e=this._array.slice();this._array.length=0,this._changed.emit({type:"clear",oldIndex:0,newIndex:0,newValues:[],oldValues:e})}move(e,t){if(this.length<=1||e===t)return;const r=[this._array[e]];ArrayExt.move(this._array,e,t),this._changed.emit({type:"move",oldIndex:e,newIndex:t,oldValues:r,newValues:r})}pushAll(e){const t=this.length;for(const r of e)this._array.push(r);return this._changed.emit({type:"add",oldIndex:-1,newIndex:t,oldValues:[],newValues:Array.from(e)}),this.length}insertAll(e,t){const r=e;for(const s of t)ArrayExt.insert(this._array,e++,s);this._changed.emit({type:"add",oldIndex:-2,newIndex:r,oldValues:[],newValues:Array.from(t)})}removeRange(e,t){const r=this._array.slice(e,t);for(let s=e;s<t;s++)ArrayExt.removeAt(this._array,e);return this._changed.emit({type:"remove",oldIndex:e,newIndex:-1,oldValues:r,newValues:[]}),this.length}}(Private$i||(Private$i={})).itemCmp=function(e,t){return e===t};const createLiteServiceManager=(e=!0)=>createLiteServer().then(async t=>{const r="boolean"==typeof e?await import("./index-K69xBDfB.js"):await e;let s=r.default;Object.prototype.hasOwnProperty.call(r,"__esModule")||(s=r),s&&"object"==typeof s&&"default"in s&&(s=s.default),Array.isArray(s)||(s=[s]);const n=s.map(e=>{try{return t.registerPlugin(e),e.id}catch(r){return console.error("Error registering pyodide plugin",r),null}});await Promise.all(n.filter(e=>null!==e).map(e=>t.activatePlugin(e)));const i=t.serviceManager;return i.__NAME__="LiteServiceManager",i}),WORKSPACE_JSON='{\n  "data": {\n    "layout-restorer:data": {\n      "main": {\n        "dock": null\n      },\n      "down": {\n        "size": 0,\n        "widgets": []\n      },\n      "left": {\n        "collapsed": true,\n        "visible": true,\n        "widgetStates": {}\n      },\n      "right": {\n        "collapsed": true,\n        "visible": true,\n        "widgetStates": {}\n      },\n      "relativeSizes": [\n      ],\n      "top": {\n        "simpleVisibility": true\n      }\n    }\n  },\n  "metadata": {\n    "id": "default",\n    "last_modified": "2024-09-02T18:06:41.834588+00:00",\n    "created": "2024-09-02T18:06:41.834588+00:00"\n  }\n}',WORKSPACE=JSON.parse(WORKSPACE_JSON);class TerminalManagerLess{runningChanged=new Signal(this);connectionFailure=new Signal(this);isReady=!0;ready=Promise.resolve(void 0);serverSettings;isActive=!0;disposed=new Signal(this);isDisposed=!1;constructor(e){this.serverSettings=e}isAvailable(){return!0}running(){return[].values()}startNew(e){return Promise.resolve({})}connectTo(e){return{}}shutdown(e){return Promise.resolve(void 0)}shutdownAll(){return Promise.resolve(void 0)}refreshRunning(){return Promise.resolve(void 0)}dispose(){}}class ContentsManagerLess{fileChanged=new Signal(this);isDisposed=!1;serverSettings;constructor(e){this.serverSettings=e}addDrive(e){}localPath(e){return e}normalize(e){return e}resolvePath(e,t){return e+t}driveName(e){return""}getSharedModelFactory(e){return null}get(e,t){return new Promise(()=>{})}getDownloadUrl(e){return new Promise(()=>{})}newUntitled(e){return new Promise(()=>{})}delete(e){return new Promise(()=>{})}rename(e,t){return new Promise(()=>{})}save(e,t){return new Promise(()=>{})}copy(e,t){return new Promise(()=>{})}createCheckpoint(e){return new Promise(()=>{})}listCheckpoints(e){return new Promise(()=>{})}restoreCheckpoint(e,t){return new Promise(()=>{})}deleteCheckpoint(e,t){return new Promise(()=>{})}dispose(){}}class KernelManagerLess{runningChanged=new Signal(this);connectionFailure=new Signal(this);isReady=!0;ready=Promise.resolve(void 0);serverSettings;isActive=!0;disposed=new Signal(this);isDisposed=!1;constructor(e){this.serverSettings=e}runningCount=0;running(){return[].values()}refreshRunning(){return new Promise(()=>{})}startNew(e,t){return new Promise(()=>{})}findById(e){return new Promise(()=>{})}connectTo(e){return""}shutdown(e){return new Promise(()=>{})}shutdownAll(){return new Promise(()=>{})}dispose(){}}class KernelspecManagerLess{specsChanged=new Signal(this);specs=null;connectionFailure=new Signal(this);serverSettings;isReady=!0;ready=Promise.resolve(void 0);isActive=!0;disposed=new Signal(this);isDisposed=!1;constructor(e){this.serverSettings=e}refreshSpecs(){return new Promise(()=>{})}dispose(){}}class SessionManagerLess{runningChanged=new Signal(this);connectionFailure=new Signal(this);serverSettings;isReady=!0;isDisposed=!1;ready=Promise.resolve(void 0);constructor(e){this.serverSettings=e}running(){return[].values()}startNew(e,t){return new Promise(()=>{})}findById(e){return new Promise(()=>{})}findByPath(e){return new Promise(()=>{})}connectTo(e){return""}shutdown(e){return new Promise(()=>{})}shutdownAll(){return new Promise(()=>{})}refreshRunning(){return new Promise(()=>{})}stopIfNeeded(e){return new Promise(()=>{})}dispose(){}}class BuilderManagerLess{serverSettings;constructor(e){this.serverSettings=e}get isAvailable(){return!0}get shouldCheck(){return!1}getStatus(){return new Promise(()=>{})}build(){return new Promise(()=>{})}cancel(){return new Promise(()=>{})}}class SettingManagerLess extends libExports$3.SettingManager{serverSettings;constructor(e){super({serverSettings:e}),this.serverSettings=e}fetch(e){return super.fetch(e)}list(e){return super.list(e)}save(e,t){return new Promise(()=>{})}remove(e){return new Promise(()=>{})}}class UserManagerLess{userChanged=new Signal(this);identity=null;permissions=null;connectionFailure=new Signal(this);isReady=!0;ready=Promise.resolve(void 0);isActive=!0;disposed=new Signal(this);isDisposed=!1;serverSettings;constructor(e){this.serverSettings=e}refreshUser(){return new Promise(()=>{})}dispose(){}}class EventsManagerLess{stream=null;isDisposed=!1;serverSettings;constructor(e){this.serverSettings=e}emit(e){return new Promise(()=>{})}dispose(){}}class WorkspaceManagerLess extends libExports$3.WorkspaceManager{serverSettings;constructor(e){super({serverSettings:e}),this.serverSettings=e}fetch(e){return new Promise(e=>e(WORKSPACE))}list(){const e={ids:["1"],values:[WORKSPACE]};return new Promise(t=>t(e))}remove(e){return super.remove(e)}save(e,t){return super.save(e,t)}}class NbConvertManagerLess{serverSettings;_requestingFormats=null;_exportFormats=null;constructor(e){this.serverSettings=e}fetchExportFormats(){return new Promise(()=>{})}getExportFormats(e){return new Promise(()=>{})}}class ServiceManagerLess{__NAME__="LessServiceManager";isReady=!0;ready=Promise.resolve(void 0);isDisposed=!1;serverSettings;connectionFailure=new Signal(this);builder;contents;events;sessions;kernels;kernelspecs;settings;terminals;user;workspaces;nbconvert;constructor(e){this.serverSettings=e??libExports$3.ServerConnection.makeSettings({baseUrl:"https://oss.datalayer.run/api/jupyter-server",wsUrl:"wss://oss.datalayer.run/api/jupyter-server",token:"60c1661cc408f978c309d04157af55c9588ff9557c9380e4fb50785750703da6"}),this.contents=new ContentsManagerLess(this.serverSettings),this.kernels=new KernelManagerLess(this.serverSettings),this.kernelspecs=new KernelspecManagerLess(this.serverSettings),this.sessions=new SessionManagerLess(this.serverSettings),this.settings=new SettingManagerLess(this.serverSettings),this.terminals=new TerminalManagerLess(this.serverSettings),this.user=new UserManagerLess(this.serverSettings),this.builder=new BuilderManagerLess(this.serverSettings),this.events=new EventsManagerLess(this.serverSettings),this.workspaces=new WorkspaceManagerLess(this.serverSettings),this.nbconvert=new NbConvertManagerLess(this.serverSettings)}dispose(){}get_name=()=>this.__NAME__}function createError(e){const t=new Error(e);return t.source="ulid",t}const ENCODING="0123456789ABCDEFGHJKMNPQRSTVWXYZ",ENCODING_LEN=ENCODING.length,TIME_MAX=Math.pow(2,48)-1,TIME_LEN=10,RANDOM_LEN=16;function randomChar(e){let t=Math.floor(e()*ENCODING_LEN);return t===ENCODING_LEN&&(t=ENCODING_LEN-1),ENCODING.charAt(t)}function encodeTime(e,t){if(isNaN(e))throw new Error(e+" must be a number");if(e>TIME_MAX)throw createError("cannot encode time greater than "+TIME_MAX);if(e<0)throw createError("time must be positive");if(!1===Number.isInteger(Number(e)))throw createError("time must be an integer");let r,s="";for(;t>0;t--)r=e%ENCODING_LEN,s=ENCODING.charAt(r)+s,e=(e-r)/ENCODING_LEN;return s}function encodeRandom(e,t){let r="";for(;e>0;e--)r=randomChar(t)+r;return r}function detectPrng(e=!1,t){t||(t="undefined"!=typeof window?window:null);const r=t&&(t.crypto||t.msCrypto);if(r)return()=>{const e=new Uint8Array(1);return r.getRandomValues(e),e[0]/255};try{const e=require("crypto");return()=>e.randomBytes(1).readUInt8()/255}catch(s){}if(e){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch(s){}return()=>Math.random()}throw createError("secure crypto unusable, insecure Math.random not allowed")}function factory(e){return e||(e=detectPrng()),function(t){return isNaN(t)&&(t=Date.now()),encodeTime(t,TIME_LEN)+encodeRandom(RANDOM_LEN,e)}}factory();const newUuid=()=>UUID.uuid4(),outputsAsString=e=>{let t="";return e.forEach(e=>{switch(e.output_type){case"display_data":case"update_display_data":case"stream":case"error":e.text&&(t=t+e.text+"\n");break;case"execute_result":if(e.data){const r=e.data["text/html"]??e.data["text/plain"]??"";t=t+r+"\n"}break;default:console.warn("Unknown output type while converting output to string",e)}}),t},getCookie=e=>{const t=e.length+1;return document.cookie.split(";").map(e=>e.trim()).filter(r=>r.substring(0,t)===`${e}=`).map(e=>decodeURIComponent(e.substring(t)))[0]||null},ensureJupyterAuth=async e=>{try{return await requestAPI(e,"api",""),!0}catch(t){return console.log("The Jupyter Server API has failed with reason",t),!1}},createServerSettings=(e,t)=>libExports$3.ServerConnection.makeSettings({baseUrl:e,wsUrl:e.replace(/^http/,"ws"),token:t,appendToken:!0,init:{mode:"cors",credentials:"include",cache:"no-store"}}),MAJOR_VERSION=4,MINOR_VERSION=4;function isExecuteResult(e){return"execute_result"===e.output_type}function isDisplayData(e){return"display_data"===e.output_type}function isDisplayUpdate(e){return"update_display_data"===e.output_type}function isStream(e){return"stream"===e.output_type}function isError(e){return"error"===e.output_type}class AttachmentModel{constructor(e){this.trusted=!1,this._changed=new Signal(this),this._raw={};const t=Private$h.getData(e.value);this._data=new ObservableJSON({values:t}),this._rawData=t;const r=e.value;for(const s in r)if("data"===s);else this._raw[s]=Private$h.extract(r,s)}get changed(){return this._changed}dispose(){this._data.dispose(),Signal.clearData(this)}get data(){return this._rawData}get metadata(){return{}}setData(e){e.data&&(this._updateObservable(this._data,e.data),this._rawData=e.data),this._changed.emit(void 0)}toJSON(){const e={};for(const t in this._raw)e[t]=Private$h.extract(this._raw,t);return e}_updateObservable(e,t){const r=e.keys(),s=Object.keys(t);for(const n of r)-1===s.indexOf(n)&&e.delete(n);for(const n of s){const r=e.get(n),s=t[n];r!==s&&e.set(n,s)}}}var Private$h;(AttachmentModel||(AttachmentModel={})).getData=function(e){return Private$h.getData(e)},function(e){function t(e){return function(e){const t=/* @__PURE__ */Object.create(null);for(const s in e)t[s]=r(e,s);return t}(e)}function r(e,t){const r=e[t];return void 0===r||JSONExt.isPrimitive(r)?r:JSONExt.deepCopy(r)}e.getData=t,e.getBundleOptions=function(e){return{data:t(e.value)}},e.extract=r}(Private$h||(Private$h={}));var libExports$1=/* @__PURE__ */requireLib$8();const DEFAULT_LANGUAGE_CODE="en";function normalizeDomain(e){return e.replace("-","_")}class Gettext{constructor(e){e=e||{},this._defaults={domain:"messages",locale:document.documentElement.getAttribute("lang")||DEFAULT_LANGUAGE_CODE,pluralFunc:function(e){return{nplurals:2,plural:1!=e?1:0}},contextDelimiter:String.fromCharCode(4),stringsPrefix:""},this._locale=(e.locale||this._defaults.locale).replace("_","-"),this._domain=normalizeDomain(e.domain||this._defaults.domain),this._contextDelimiter=e.contextDelimiter||this._defaults.contextDelimiter,this._stringsPrefix=e.stringsPrefix||this._defaults.stringsPrefix,this._pluralFuncs={},this._dictionary={},this._pluralForms={},e.messages&&(this._dictionary[this._domain]={},this._dictionary[this._domain][this._locale]=e.messages),e.pluralForms&&(this._pluralForms[this._locale]=e.pluralForms)}setContextDelimiter(e){this._contextDelimiter=e}getContextDelimiter(){return this._contextDelimiter}setLocale(e){this._locale=e.replace("_","-")}getLocale(){return this._locale}setDomain(e){this._domain=normalizeDomain(e)}getDomain(){return this._domain}setStringsPrefix(e){this._stringsPrefix=e}getStringsPrefix(){return this._stringsPrefix}static strfmt(e,...t){return e.replace(/%%/g,"%% ").replace(/%(\d+)/g,function(e,r){return t[r-1]}).replace(/%% /g,"%")}loadJSON(e,t){if(!e[""]||!e[""].language||!e[""].pluralForms)throw new Error(`Wrong jsonData, it must have an empty key ("") with "language" and "pluralForms" information: ${e}`);t=normalizeDomain(t);let r=e[""],s=JSON.parse(JSON.stringify(e));delete s[""],this.setMessages(t||this._defaults.domain,r.language,s,r.pluralForms)}__(e,...t){return this.gettext(e,...t)}_n(e,t,r,...s){return this.ngettext(e,t,r,...s)}_p(e,t,...r){return this.pgettext(e,t,...r)}_np(e,t,r,s,...n){return this.npgettext(e,t,r,s,...n)}gettext(e,...t){return this.dcnpgettext("","",e,"",0,...t)}ngettext(e,t,r,...s){return this.dcnpgettext("","",e,t,r,...s)}pgettext(e,t,...r){return this.dcnpgettext("",e,t,"",0,...r)}npgettext(e,t,r,s,...n){return this.dcnpgettext("",e,t,r,s,...n)}dcnpgettext(e,t,r,s,n,...i){let o;e=normalizeDomain(e)||this._domain;let a=t?t+this._contextDelimiter+r:r,l={pluralForm:!1},c=!1,d=this._locale,h=this.expandLocale(this._locale);for(let p in h)if(d=h[p],c=this._dictionary[e]&&this._dictionary[e][d]&&this._dictionary[e][d][a],c=s?c&&this._dictionary[e][d][a].length>1:c&&1==this._dictionary[e][d][a].length,c){l.locale=d;break}if(c?o=this._dictionary[e][d][a]:(o=[r],l.pluralFunc=this._defaults.pluralFunc),!s)return this.t(o,n,l,...i);l.pluralForm=!0;let u=c?o:[r,s];return this.t(u,n,l,...i)}expandLocale(e){let t=[e],r=e.lastIndexOf("-");for(;r>0;)e=e.slice(0,r),t.push(e),r=e.lastIndexOf("-");return t}getPluralFunc(e){if(!new RegExp("^\\s*nplurals\\s*=\\s*[0-9]+\\s*;\\s*plural\\s*=\\s*(?:\\s|[-\\?\\|&=!<>+*/%:;n0-9_()])+").test(e))throw new Error(Gettext.strfmt('The plural form "%1" is not valid',e));return new Function("n","let plural, nplurals; "+e+" return { nplurals: nplurals, plural: (plural === true ? 1 : (plural ? plural : 0)) };")}removeContext(e){if(-1!==e.indexOf(this._contextDelimiter)){return e.split(this._contextDelimiter)[1]}return e}t(e,t,r,...s){if(!r.pluralForm)return this._stringsPrefix+Gettext.strfmt(this.removeContext(e[0]),...s);let n;return r.pluralFunc?n=r.pluralFunc(t):(this._pluralFuncs[r.locale||""]||(this._pluralFuncs[r.locale||""]=this.getPluralFunc(this._pluralForms[r.locale||""])),n=this._pluralFuncs[r.locale||""](t)),(void 0===!n.plural||n.plural>n.nplurals||e.length<=n.plural)&&(n.plural=0),this._stringsPrefix+Gettext.strfmt(this.removeContext(e[n.plural]),...[t].concat(s))}setMessages(e,t,r,s){e=normalizeDomain(e),s&&(this._pluralForms[t]=s),this._dictionary[e]||(this._dictionary[e]={}),this._dictionary[e][t]=r}}class NullTranslator{constructor(e){this.languageCode=DEFAULT_LANGUAGE_CODE,this._languageBundle=e}load(e){return this._languageBundle}}class NullLanguageBundle{__(e,...t){return this.gettext(e,...t)}_n(e,t,r,...s){return this.ngettext(e,t,r,...s)}_p(e,t,...r){return this.pgettext(e,t,...r)}_np(e,t,r,s,...n){return this.npgettext(e,t,r,s,...n)}gettext(e,...t){return Gettext.strfmt(e,...t)}ngettext(e,t,r,...s){return Gettext.strfmt(1==r?e:t,...[r].concat(s))}pgettext(e,t,...r){return Gettext.strfmt(t,...r)}npgettext(e,t,r,s,...n){return this.ngettext(t,r,s,...n)}dcnpgettext(e,t,r,s,n,...i){return this.ngettext(r,s,n,...i)}}const nullTranslator=new NullTranslator(new NullLanguageBundle);var lodash_escape,hasRequiredLodash_escape;function requireLodash_escape(){if(hasRequiredLodash_escape)return lodash_escape;hasRequiredLodash_escape=1;var e="[object Symbol]",t=/[&<>"'`]/g,r=RegExp(t.source),s="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,n="object"==typeof self&&self&&self.Object===Object&&self,i=s||n||Function("return this")();var o,a=(o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==o?void 0:o[e]}),l=Object.prototype.toString,c=i.Symbol,d=c?c.prototype:void 0,h=d?d.toString:void 0;function u(t){if("string"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(e){return!!e&&"object"==typeof e}(t)&&l.call(t)==e}(t))return h?h.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}return lodash_escape=function(e){var s;return(e=null==(s=e)?"":u(s))&&r.test(e)?e.replace(t,a):e}}var lodash_escapeExports=requireLodash_escape();const escape$1=/* @__PURE__ */getDefaultExportFromCjs(lodash_escapeExports),inline="$",MATHSPLIT=/(\$\$?|\\(?:begin|end)\{[a-z]*\*?\}|\\[{}$]|[{}]|(?:\n\s*)+|@@\d+@@|\\\\(?:\(|\)|\[|\]))/i;function removeMath(e){const t=[];let r,s=null,n=null,i=null,o=0;e.includes("`")||e.includes("~~~")?(e=e.replace(/~/g,"~T").replace(/^(?<fence>`{3,}|(~T){3,})[^`\n]*\n([\s\S]*?)^\k<fence>`*$/gm,e=>e.replace(/\$/g,"~D")).replace(/(^|[^\\])(`+)([^\n]*?[^`\n])\2(?!`)/gm,e=>e.replace(/\$/g,"~D")),r=e=>e.replace(/~([TD])/g,(e,t)=>"T"===t?"~":inline)):r=e=>e;let a=e.replace(/\r\n?/g,"\n").split(MATHSPLIT);for(let l=1,c=a.length;l<c;l+=2){const e=a[l];"@"===e.charAt(0)?(a[l]="@@"+t.length+"@@",t.push(e)):null!==s?e===n?o?i=l:(a=processMath(s,l,r,t,a),s=null,n=null,i=null):e.match(/\n.*\n/)?(null!==i&&(l=i,a=processMath(s,l,r,t,a)),s=null,n=null,i=null,o=0):"{"===e?o++:"}"===e&&o&&o--:e===inline||"$$"===e?(s=l,n=e,o=0):"\\\\("===e||"\\\\["===e?(s=l,n="("===e.slice(-1)?"\\\\)":"\\\\]",o=0):"begin"===e.substr(1,5)&&(s=l,n="\\end"+e.substr(6),o=0)}return null!==s&&null!==i&&(a=processMath(s,i,r,t,a),s=null,n=null,i=null),{text:r(a.join("")),math:t}}function replaceMath(e,t){return e.replace(/@@(\d+)@@/g,(e,r)=>{let s=t[r];return"\\\\("===s.substr(0,3)&&"\\\\)"===s.substr(s.length-3)?s="\\("+s.substring(3,s.length-3)+"\\)":"\\\\["===s.substr(0,3)&&"\\\\]"===s.substr(s.length-3)&&(s="\\["+s.substring(3,s.length-3)+"\\]"),s})}function processMath(e,t,r,s,n){let i=n.slice(e,t+1).join("").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");for(navigator&&"Microsoft Internet Explorer"===navigator.appName&&(i=i.replace(/(%[^\n]*)\n/g,"$1<br/>\n"));t>e;)n[t]="",t--;return n[e]="@@"+s.length+"@@",r&&(i=r(i)),s.push(i),n}async function renderHTML(e){let{host:t,source:r,trusted:s,sanitizer:n,resolver:i,linkHandler:o,shouldTypeset:a,latexTypesetter:l,translator:c}=e;c=c||nullTranslator;const d=null==c?void 0:c.load("jupyterlab");let h=r;if(r){if(s||(h=`${r}`,r=n.sanitize(r)),t.innerHTML=r,t.getElementsByTagName("script").length>0)if(s)Private$g.evalInnerHTMLScriptTags(t);else{const e=document.createElement("div"),r=document.createElement("pre");r.textContent=d.__("This HTML output contains inline scripts. Are you sure that you want to run arbitrary Javascript within your JupyterLab session?");const s=document.createElement("button");s.textContent=d.__("Run"),s.onclick=e=>{t.innerHTML=h,Private$g.evalInnerHTMLScriptTags(t),t.firstChild&&t.removeChild(t.firstChild)},e.appendChild(r),e.appendChild(s),t.insertBefore(e,t.firstChild)}if(Private$g.handleDefaults(t),a&&l){const e=l.typeset(t);e instanceof Promise?e.then(()=>hardenAnchorLinks(t,i)).catch(console.warn):hardenAnchorLinks(t,i)}else hardenAnchorLinks(t,i);i&&await Private$g.handleUrls(t,i,o)}else t.textContent=""}async function renderImage(e){const{host:t,mimeType:r,source:s,width:n,height:i,needsBackground:o,unconfined:a}=e;t.textContent="";const l=document.createElement("img");l.src=`data:${r};base64,${s}`,"number"==typeof i&&(l.height=i),"number"==typeof n&&(l.width=n),"light"===o?l.classList.add("jp-needs-light-background"):"dark"===o&&l.classList.add("jp-needs-dark-background"),!0===a&&l.classList.add("jp-mod-unconfined"),t.appendChild(l)}async function renderLatex(e){const{host:t,source:r,shouldTypeset:s,latexTypesetter:n,resolver:i}=e;if(t.textContent=r,s&&n){const e=n.typeset(t);e instanceof Promise?e.then(()=>hardenAnchorLinks(t,i)).catch(console.warn):hardenAnchorLinks(t,i)}}async function renderMarkdown(e){var t;const{host:r,source:s,markdownParser:n,...i}=e;if(!s)return void(r.textContent="");let o="";if(n){const e=removeMath(s);o=await n.render(e.text),o=replaceMath(o,e.math)}else o=`<pre>${s}</pre>`;await renderHTML({host:r,source:o,...i}),Private$g.headerAnchors(r,null!==(t=e.sanitizer.allowNamedProperties)&&void 0!==t&&t)}async function renderSVG(e){let{host:t,source:r,trusted:s,unconfined:n}=e;if(!r)return void(t.textContent="");if(!s)return void(t.textContent="Cannot display an untrusted SVG. Maybe you need to run the cell?");r.search("<svg[^>]+xmlns=[^>]+svg")<0&&(r=r.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"'));const i=new Image;i.src=`data:image/svg+xml,${encodeURIComponent(r)}`,t.appendChild(i),!0===n&&t.classList.add("jp-mod-unconfined")}var ILinker;(renderMarkdown||(renderMarkdown={})).createHeaderId=function(e){var t;return(null!==(t=e.textContent)&&void 0!==t?t:"").replace(/ /g,"-")},function(e){const t="\\u0000-\\u0020\\u007f-\\u009f";e.webLinkRegex=new RegExp("(?<path>(?:[a-zA-Z][a-zA-Z0-9+.-]{2,40}:\\/\\/|data:|www\\.)[^\\s"+t+'"]{2,}[^\\s'+t+"\"'(){}\\[\\],:;.!?])","ug");const r=new RegExp(`(${/(?:[a-zA-Z]:(?:(?:\\|\/)[\w\.-]*)+)/.source}|${/(?:(?:\~|\.)(?:(?:\\|\/)[\w\.-]*)+)/.source})`),s=navigator.userAgent.indexOf("Windows")>=0;e.pathLinkRegex=new RegExp(`(?<path>${s?r.source:/((?:\~|\.)?(?:\/[\w\.-]*)+)/.source})${/(?:(?:\:|", line )(?<line>[\d]+))?(?:\:(?<column>[\d]+))?/.source}`,"g")}(ILinker||(ILinker={}));class WebLinker{constructor(){this.regex=ILinker.webLinkRegex}createAnchor(e,t){const r=document.createElement("a");return r.href=e.startsWith("www.")?"https://"+e:e,r.rel="noopener",r.target="_blank",r.appendChild(document.createTextNode(t)),r}processPath(e){const t=e.slice(-1),r=-1!==[">","<"].indexOf(t)?e.length-1:e.length;return e=e.slice(0,r)}processLabel(e){return this.processPath(e)}}class PathLinker{constructor(){this.regex=ILinker.pathLinkRegex}createAnchor(e,t,r){const s=document.createElement("a");s.dataset.path=e;const n=parseInt(r.line,10);let i=isNaN(n)?"":"line="+(n-1);return s.dataset.locator=i,s.appendChild(document.createTextNode(t)),s}}function autolink(e,t){const r=[];t.checkWeb&&r.push(new WebLinker),t.checkPaths&&r.push(new PathLinker);const s=[],n=(e,t)=>{if(t>=r.length)return void s.push(document.createTextNode(e));const i=r[t];let o,a=0;const l=i.regex;for(l.lastIndex=0;null!=(o=l.exec(e));){const r=e.substring(a,o.index);r&&n(r,t+1);const{path:l,...c}=o.groups,d=i.processPath?i.processPath(l):l,h=i.processLabel?i.processLabel(o[0]):o[0];s.push(i.createAnchor(d,h,c)),a=o.index+h.length}const c=e.substring(a);c&&n(c,t+1)};return n(e,0),s}function splitShallowNode(e,t){var r,s;const n=e.cloneNode();n.textContent=null===(r=e.textContent)||void 0===r?void 0:r.slice(0,t);const i=e.cloneNode();return i.textContent=null===(s=e.textContent)||void 0===s?void 0:s.slice(t),{pre:n,post:i}}function*nodeIter(e){var t;let r,s=0;for(let n of e)r=s+((null===(t=n.textContent)||void 0===t?void 0:t.length)||0),yield{node:n,start:s,end:r,isText:n.nodeType===Node.TEXT_NODE},s=r}function*alignedNodes(e,t){var r,s;let n=nodeIter(e),i=nodeIter(t),o=n.next(),a=i.next();for(;!o.done&&!a.done;){let e=o.value,t=a.value;if(e.isText&&e.start<=t.start&&e.end>=t.end)yield[null,t.node],a=i.next();else if(t.isText&&t.start<=e.start&&t.end>=e.end)yield[e.node,null],o=n.next();else if(e.end===t.end&&e.start===t.start)yield[e.node,t.node],o=n.next(),a=i.next();else if(e.end>t.end){let{pre:s,post:n}=splitShallowNode(e.node,t.end-e.start);t.start<e.start&&(t.node.textContent=null===(r=t.node.textContent)||void 0===r?void 0:r.slice(e.start-t.start)),yield[s,t.node],e.node=n,e.start=t.end,a=i.next()}else{if(!(t.end>e.end))throw new Error(`Unexpected intersection: ${JSON.stringify(e)} ${JSON.stringify(t)}`);{let{pre:r,post:i}=splitShallowNode(t.node,e.end-t.start);e.start<t.start&&(e.node.textContent=null===(s=e.node.textContent)||void 0===s?void 0:s.slice(t.start-e.start)),yield[e.node,r],t.node=i,t.start=e.end,o=n.next()}}}}async function renderText(e){renderTextual(e,{checkWeb:!0,checkPaths:!1})}function nativeSanitize(e){const t=document.createElement("span");return t.textContent=e,t.innerHTML}const ansiPrefix="";function renderTextual(e,t){var r,s;const{host:n,sanitizer:i,source:o}=e,a=o.includes(ansiPrefix)?i.sanitize(Private$g.ansiSpan(o),{allowedTags:["span"]}):nativeSanitize(o),l=document.createElement("pre");l.innerHTML=a;const c=l.textContent,d=[];t.checkWeb&&d.push("web"),t.checkPaths&&d.push("paths");const h=d.join("-");let u,p=Private$g.autoLinkCache.get(h);if(p||(p=/* @__PURE__ */new WeakMap,Private$g.autoLinkCache.set(h,p)),c){let e;if(null===(s=null===(r=i.getAutolink)||void 0===r?void 0:r.call(i))||void 0===s||s){const r=getApplicableLinkCache(p.get(n),c);if(r){const{cachedNodes:s,addedText:n}=r,i=autolink(n,t),o=s[s.length-1],a=i[0];if(o instanceof Text&&a instanceof Text){const t=o;t.data+=a.data,e=[...s.slice(0,-1),t,...i.slice(1)]}else e=[...s,...i]}else e=autolink(c,t);p.set(n,{preTextContent:c,linkedNodes:e.map(e=>e.cloneNode(!0))})}else e=[document.createTextNode(a)];u=mergeNodes(Array.from(l.childNodes),e)}else u=document.createElement("pre");n.appendChild(u)}function getApplicableLinkCache(e,t){if(!e)return null;if(t.length<e.preTextContent.length)return null;let r=t.substring(e.preTextContent.length),s=e.linkedNodes;const n=e.linkedNodes[e.linkedNodes.length-1];if(e.preTextContent.endsWith("\n")||r.startsWith("\n"));else{if(!(n instanceof Text))return null;s=s.slice(0,-1),r=n.textContent+r}return t.startsWith(e.preTextContent)?{cachedNodes:s,addedText:r}:null}async function renderError(e){const{host:t,linkHandler:r,resolver:s}=e;renderTextual(e,{checkWeb:!0,checkPaths:!0}),s&&await Private$g.handlePaths(t,s,r)}function mergeNodes(e,t){const r=document.createElement("pre");let s=!1;const n=[];for(let i of alignedNodes(e,t)){if(!i[0]){n.push(i[1]),s=i[1].nodeType!==Node.TEXT_NODE;continue}if(!i[1]){n.push(i[0]),s=!1;continue}let[e,t]=i;const r=n[n.length-1];if(s&&t.href===r.href)r.appendChild(e);else{t.nodeType!==Node.TEXT_NODE?(t.textContent="",t.appendChild(e),n.push(t),s=!0):(n.push(e),s=!1)}}for(const i of n)r.appendChild(i);return r}function hardenAnchorLinks(e,t){const r=e.getElementsByTagName("a");for(let s=0;s<r.length;s++){const e=r[s];if(!(e instanceof HTMLAnchorElement))continue;const n=e.href,i=t&&t.isLocal?t.isLocal(n):libExports$2.URLExt.isLocal(n);e.target||(e.target=i?"_self":"_blank"),i||(e.rel="noopener")}}var Private$g,Private$f;!function(e){async function t(e,t,r){const s=e.getAttribute(t)||"",n=r.isLocal?r.isLocal(s):libExports$2.URLExt.isLocal(s);if(s&&n)try{const n=await r.resolveUrl(s,{attribute:t,tag:e.localName});let i=await r.getDownloadUrl(n);"data:"!==libExports$2.URLExt.parse(i).protocol&&(i+=(/\?/.test(i)?"&":"?")+/* @__PURE__ */(new Date).getTime()),e.setAttribute(t,i)}catch(i){throw e.setAttribute(t,""),i}}async function r(e,t,r){let s=e.getAttribute("href")||"";const n=t.isLocal?t.isLocal(s):libExports$2.URLExt.isLocal(s);if(!s||!n)return;const i=e.hash;if(i){if(i===s)return void(e.target="_self");s=s.replace(i,"")}return t.resolveUrl(s,{attribute:"href",tag:"a"}).then(s=>{const n=decodeURIComponent(s);return r&&r.handleLink(e,n,i),t.getDownloadUrl(s)}).then(t=>{e.href=t+i}).catch(t=>{e.href=""})}e.autoLinkCache=/* @__PURE__ */new Map,e.evalInnerHTMLScriptTags=function(e){const t=Array.from(e.getElementsByTagName("script"));for(const r of t){if(!r.parentNode)continue;const e=document.createElement("script"),t=r.attributes;for(let r=0,s=t.length;r<s;++r){const{name:s,value:n}=t[r];e.setAttribute(s,n)}e.textContent=r.textContent,r.parentNode.replaceChild(e,r)}},e.handleDefaults=function(e){const t=e.getElementsByTagName("img");for(let r=0;r<t.length;r++)t[r].alt||(t[r].alt="Image")},e.handleUrls=async function(e,s,n){const i=[],o=e.querySelectorAll("*[src]");for(let r=0;r<o.length;r++)i.push(t(o[r],"src",s));const a=e.getElementsByTagName("a");for(let t=0;t<a.length;t++)i.push(r(a[t],s,n));const l=e.getElementsByTagName("link");for(let r=0;r<l.length;r++)i.push(t(l[r],"href",s));return Promise.all(i)},e.handlePaths=async function(e,t,r){const s=Array.from(e.querySelectorAll("a[data-path]"));return Promise.all(s.map(e=>async function(e,t,r){let s=e.dataset.path||"",n=e.dataset.locator?"#"+e.dataset.locator:"";delete e.dataset.path,delete e.dataset.locator;const i=!0,o=t.isLocal?t.isLocal(s,i):libExports$2.URLExt.isLocal(s,i);if(!(s&&o&&t.resolvePath&&r&&r.handlePath))return void e.replaceWith(...e.childNodes);try{const i=await t.resolvePath(s);if(!i)return void console.log("Path resolution bailing: does not exist");r.handlePath(e,i.path,i.scope,n),e.href=i.path+n}catch(a){console.warn("Path anchor error:",a),e.href="#linking-failed-see-console"}}(e,t,r)))},e.headerAnchors=function(e,t){const r=["h1","h2","h3","h4","h5","h6"];for(const s of r){const r=e.getElementsByTagName(s);for(let e=0;e<r.length;e++){const s=r[e],n=renderMarkdown.createHeaderId(s);t?s.id=n:s.setAttribute("data-jupyter-id",n);const i=document.createElement("a");i.target="_self",i.textContent="",i.href="#"+n,i.classList.add("jp-InternalAnchorLink"),s.appendChild(i)}}};const s=["ansi-black","ansi-red","ansi-green","ansi-yellow","ansi-blue","ansi-magenta","ansi-cyan","ansi-white","ansi-black-intense","ansi-red-intense","ansi-green-intense","ansi-yellow-intense","ansi-blue-intense","ansi-magenta-intense","ansi-cyan-intense","ansi-white-intense"];function n(e,t,r,n,i,o,a){if(e){const l=[],c=[];n&&"number"==typeof t&&0<=t&&t<8&&(t+=8),o&&([t,r]=[r,t]),"number"==typeof t?l.push(s[t]+"-fg"):t.length?c.push(`color: rgb(${t})`):o&&l.push("ansi-default-inverse-fg"),"number"==typeof r?l.push(s[r]+"-bg"):r.length?c.push(`background-color: rgb(${r})`):o&&l.push("ansi-default-inverse-bg"),n&&l.push("ansi-bold"),i&&l.push("ansi-underline"),l.length||c.length?(a.push("<span"),l.length&&a.push(` class="${l.join(" ")}"`),c.length&&a.push(` style="${c.join("; ")}"`),a.push(">"),a.push(e),a.push("</span>")):a.push(e)}}function i(e){let t,r,s;const n=e.shift();if(2===n&&e.length>=3){if(t=e.shift(),r=e.shift(),s=e.shift(),[t,r,s].some(e=>e<0||255<e))throw new RangeError("Invalid range for RGB colors")}else{if(!(5===n&&e.length>=1))throw new RangeError("Invalid extended color specification");{const n=e.shift();if(n<0)throw new RangeError("Color index must be >= 0");if(n<16)return n;if(n<232)t=Math.floor((n-16)/36),t=t>0?55+40*t:0,r=Math.floor((n-16)%36/6),r=r>0?55+40*r:0,s=(n-16)%6,s=s>0?55+40*s:0;else{if(!(n<256))throw new RangeError("Color index must be < 256");t=r=s=10*(n-232)+8}}}return[t,r,s]}e.ansiSpan=function(e){const t=/\x1b\[(.*?)([@-~])/g;let r,s=[],o=[],a=!1,l=!1,c=!1;const d=[],h=[];let u=0;for(e=escape$1(e),e+="[m";r=t.exec(e);){if("m"===r[2]){const e=r[1].split(";");for(let t=0;t<e.length;t++){const r=e[t];if(""===r)h.push(0);else{if(-1===r.search(/^\d+$/)){h.length=0;break}h.push(parseInt(r,10))}}}for(n(e.substring(u,r.index),s,o,a,l,c,d),u=t.lastIndex;h.length;){const e=h.shift();switch(e){case 0:s=o=[],a=!1,l=!1,c=!1;break;case 1:case 5:a=!0;break;case 4:l=!0;break;case 7:c=!0;break;case 21:case 22:a=!1;break;case 24:l=!1;break;case 27:c=!1;break;case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:s=e-30;break;case 38:try{s=i(h)}catch(p){h.length=0}break;case 39:s=[];break;case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:o=e-40;break;case 48:try{o=i(h)}catch(p){h.length=0}break;case 49:o=[];break;case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:s=e-90+8;break;case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:o=e-100+8}}}return d.join("")}}(Private$g||(Private$g={}));class RenderedCommon extends Widget{constructor(e){var t,r;super(),this.mimeType=e.mimeType,this.sanitizer=e.sanitizer,this.resolver=e.resolver,this.linkHandler=e.linkHandler,this.translator=null!==(t=e.translator)&&void 0!==t?t:nullTranslator,this.latexTypesetter=e.latexTypesetter,this.markdownParser=null!==(r=e.markdownParser)&&void 0!==r?r:null,this.node.dataset.mimeType=this.mimeType}async renderModel(e,t){if(!t)for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.toggleClass("jp-mod-trusted",e.trusted),await this.render(e);const{fragment:r}=e.metadata;r&&this.setFragment(r)}setFragment(e){}}class RenderedHTMLCommon extends RenderedCommon{constructor(e){super(e),this.addClass("jp-RenderedHTMLCommon")}setFragment(e){let t;try{t=this.node.querySelector(e.startsWith("#")?`#${CSS.escape(e.slice(1))}`:e)}catch(r){console.warn("Unable to set URI fragment identifier.",r)}t&&t.scrollIntoView()}}class RenderedHTML extends RenderedHTMLCommon{constructor(e){super(e),this._rendered=Promise.resolve(),this.addClass("jp-RenderedHTML")}render(e){return this._rendered=renderHTML({host:this.node,source:String(e.data[this.mimeType]),trusted:e.trusted,resolver:this.resolver,sanitizer:this.sanitizer,linkHandler:this.linkHandler,shouldTypeset:this.isAttached,latexTypesetter:this.latexTypesetter,translator:this.translator})}onAfterAttach(e){this._rendered.then(()=>{this.latexTypesetter&&Private$f.typeset(this.node,this.latexTypesetter,this.resolver)}).catch(console.warn)}}class RenderedLatex extends RenderedCommon{constructor(e){super(e),this._rendered=Promise.resolve(),this.addClass("jp-RenderedLatex")}render(e){return this._rendered=renderLatex({host:this.node,source:String(e.data[this.mimeType]),shouldTypeset:this.isAttached,latexTypesetter:this.latexTypesetter,resolver:this.resolver})}onAfterAttach(e){this._rendered.then(()=>{this.latexTypesetter&&Private$f.typeset(this.node,this.latexTypesetter,this.resolver)}).catch(console.warn)}}class RenderedImage extends RenderedCommon{constructor(e){super(e),this.addClass("jp-RenderedImage")}render(e){const t=e.metadata[this.mimeType];return renderImage({host:this.node,mimeType:this.mimeType,source:String(e.data[this.mimeType]),width:t&&t.width,height:t&&t.height,needsBackground:e.metadata.needs_background,unconfined:t&&t.unconfined})}}class RenderedMarkdown extends RenderedHTMLCommon{constructor(e){super(e),this._rendered=Promise.resolve(),this.addClass("jp-RenderedMarkdown")}render(e){return this._rendered=renderMarkdown({host:this.node,source:String(e.data[this.mimeType]),trusted:e.trusted,resolver:this.resolver,sanitizer:this.sanitizer,linkHandler:this.linkHandler,shouldTypeset:this.isAttached,latexTypesetter:this.latexTypesetter,markdownParser:this.markdownParser,translator:this.translator})}async renderModel(e){await super.renderModel(e,!0)}onAfterAttach(e){this._rendered.then(()=>{this.latexTypesetter&&Private$f.typeset(this.node,this.latexTypesetter,this.resolver)}).catch(console.warn)}}class RenderedSVG extends RenderedCommon{constructor(e){super(e),this._rendered=Promise.resolve(),this.addClass("jp-RenderedSVG")}render(e){const t=e.metadata[this.mimeType];return this._rendered=renderSVG({host:this.node,source:String(e.data[this.mimeType]),trusted:e.trusted,unconfined:t&&t.unconfined,translator:this.translator})}onAfterAttach(e){this._rendered.then(()=>{this.latexTypesetter&&Private$f.typeset(this.node,this.latexTypesetter,this.resolver)}).catch(console.warn)}}class RenderedText extends RenderedCommon{constructor(e){super(e),this.addClass("jp-RenderedText")}render(e){return renderText({host:this.node,sanitizer:this.sanitizer,source:String(e.data[this.mimeType]),translator:this.translator})}}class RenderedError extends RenderedCommon{constructor(e){super(e),this.addClass("jp-RenderedText")}render(e){return renderError({host:this.node,sanitizer:this.sanitizer,source:String(e.data[this.mimeType]),linkHandler:this.linkHandler,resolver:this.resolver,translator:this.translator})}}class RenderedJavaScript extends RenderedCommon{constructor(e){super(e),this.addClass("jp-RenderedJavaScript")}render(e){const t=this.translator.load("jupyterlab");return renderText({host:this.node,sanitizer:this.sanitizer,source:t.__("JavaScript output is disabled in JupyterLab"),translator:this.translator})}}(Private$f||(Private$f={})).typeset=function(e,t,r){const s=t.typeset(e);s instanceof Promise?s.then(()=>hardenAnchorLinks(e,r)).catch(console.warn):hardenAnchorLinks(e,r)};const htmlRendererFactory={safe:!0,mimeTypes:["text/html"],defaultRank:50,createRenderer:e=>new RenderedHTML(e)},imageRendererFactory={safe:!0,mimeTypes:["image/bmp","image/png","image/jpeg","image/gif","image/webp"],defaultRank:90,createRenderer:e=>new RenderedImage(e)},latexRendererFactory={safe:!0,mimeTypes:["text/latex"],defaultRank:70,createRenderer:e=>new RenderedLatex(e)},markdownRendererFactory={safe:!0,mimeTypes:["text/markdown"],defaultRank:60,createRenderer:e=>new RenderedMarkdown(e)},svgRendererFactory={safe:!1,mimeTypes:["image/svg+xml"],defaultRank:80,createRenderer:e=>new RenderedSVG(e)},errorRendererFactory={safe:!0,mimeTypes:["application/vnd.jupyter.stderr"],defaultRank:110,createRenderer:e=>new RenderedError(e)},textRendererFactory={safe:!0,mimeTypes:["text/plain","application/vnd.jupyter.stdout"],defaultRank:120,createRenderer:e=>new RenderedText(e)},javaScriptRendererFactory={safe:!1,mimeTypes:["text/javascript","application/javascript"],defaultRank:110,createRenderer:e=>new RenderedJavaScript(e)},standardRendererFactories=[htmlRendererFactory,markdownRendererFactory,latexRendererFactory,svgRendererFactory,imageRendererFactory,javaScriptRendererFactory,errorRendererFactory,textRendererFactory];class MimeModel{constructor(e={}){this.trusted=!!e.trusted,this._data=e.data||{},this._metadata=e.metadata||{},this._callback=e.callback||Private$e.noOp}get data(){return this._data}get metadata(){return this._metadata}setData(e){this._data=e.data||this._data,this._metadata=e.metadata||this._metadata,this._callback(e)}}var Private$e,OutputModel2,Private$d;(Private$e||(Private$e={})).noOp=function(){};class OutputModel{constructor(e){this._changed=new Signal(this),this._raw={},this._text=void 0;const{data:t,metadata:r,trusted:s}=Private$d.getBundleOptions(e);this._rawData=t,void 0!==e.value&&isStream(e.value)&&(this._text=new ObservableString("string"==typeof e.value.text?e.value.text:e.value.text.join(""))),this._metadata=new ObservableJSON({values:r}),this._rawMetadata=r,this.trusted=s;const n=e.value;for(const i in n)switch(i){case"data":case"metadata":break;default:this._raw[i]=Private$d.extract(n,i)}this.type=n.output_type,isExecuteResult(n)?this.executionCount=n.execution_count:this.executionCount=null}get changed(){return this._changed}dispose(){var e;null===(e=this._text)||void 0===e||e.dispose(),this._metadata.dispose(),Signal.clearData(this)}get data(){return Private$d.getData(this.toJSON())}get streamText(){return this._text}get metadata(){return this._rawMetadata}setData(e){e.data&&(this._rawData=e.data),e.metadata&&(this._updateObservable(this._metadata,e.metadata),this._rawMetadata=e.metadata),this._changed.emit()}toJSON(){const e={};for(const t in this._raw)e[t]=Private$d.extract(this._raw,t);switch(void 0!==this._text&&(e.text=this._text.text),this.type){case"display_data":case"execute_result":case"update_display_data":e.data=this._rawData,e.metadata=this.metadata}return delete e.transient,e}_updateObservable(e,t){const r=e.keys(),s=Object.keys(t);for(const n of r)-1===s.indexOf(n)&&e.delete(n);for(const n of s){const r=e.get(n),s=t[n];r!==s&&e.set(n,s)}}}function _classes(e){return e.map(e=>e&&"object"==typeof e?Object.keys(e).map(t=>!!e[t]&&t):"string"==typeof e?e.split(/\s+/):[]).reduce((e,t)=>e.concat(t),[]).filter(e=>!!e)}function classes(...e){return _classes(e).join(" ")}function getReactAttrs(e,{ignore:t=[]}={}){return e.getAttributeNames().reduce((r,s)=>("style"===s||t.includes(s)||(s.startsWith("data")||s.startsWith("aria")?r[s]=e.getAttribute(s):r[libExports$2.Text.camelCase(s)]=e.getAttribute(s)),r),{})}function Button$2(e){const{minimal:r,small:s,children:n,...i}=e;return t.createElement("button",{...i,className:classes(e.className,r?"jp-mod-minimal":"",s?"jp-mod-small":"","jp-Button")},n)}OutputModel2=OutputModel||(OutputModel={}),OutputModel2.getData=function(e){return Private$d.getData(e)},OutputModel2.getMetadata=function(e){return Private$d.getMetadata(e)},function(e){function t(e){let t={};if(isExecuteResult(e)||isDisplayData(e)||isDisplayUpdate(e))t=e.data;else if(isStream(e))"stderr"===e.name?t["application/vnd.jupyter.stderr"]=e.text:t["application/vnd.jupyter.stdout"]=e.text;else if(isError(e)){t["application/vnd.jupyter.error"]=e;const r=e.traceback.join("\n");t["application/vnd.jupyter.stderr"]=r||`${e.ename}: ${e.evalue}`}return function(e){const t=/* @__PURE__ */Object.create(null);for(const r in e)t[r]=s(e,r);return t}(t)}function r(e){const t=/* @__PURE__ */Object.create(null);if(isExecuteResult(e)||isDisplayData(e))for(const r in e.metadata)t[r]=s(e.metadata,r);return t}function s(e,t){const r=e[t];return void 0===r||JSONExt.isPrimitive(r)?r:JSON.parse(JSON.stringify(r))}e.getData=t,e.getMetadata=r,e.getBundleOptions=function(e){return{data:t(e.value),metadata:r(e.value),trusted:!!e.trusted}},e.extract=s}(Private$d||(Private$d={}));const badSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20class='jp-icon0'%20fill='%23000'%20d='M24%2020.188l-8.315-8.209%208.2-8.282-3.697-3.697-8.212%208.318-8.31-8.203-3.666%203.666%208.321%208.24-8.206%208.313%203.666%203.666%208.237-8.318%208.285%208.203z'%20/%3e%3c/svg%3e",blankSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23000'%20fill-opacity='0.0'%20d='M24%2020.188l-8.315-8.209%208.2-8.282-3.697-3.697-8.212%208.318-8.31-8.203-3.666%203.666%208.321%208.24-8.206%208.313%203.666%203.666%208.237-8.318%208.285%208.203z'%20/%3e%3c/svg%3e",refreshSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2018%2018'%3e%3cpath%20fill='%23616161'%20d='M9%2013.5c-2.49%200-4.5-2.01-4.5-4.5S6.51%204.5%209%204.5c1.24%200%202.36.52%203.17%201.33L10%208h5V3l-1.76%201.76A6%206%200%200%200%209%203C5.69%203%203.01%205.69%203.01%209S5.69%2015%209%2015a5.98%205.98%200%200%200%205.9-5h-1.52c-.46%202-2.24%203.5-4.38%203.5'%20class='jp-icon3'/%3e%3c/svg%3e";var lib$6={},typestyle={};let uniqueId=0;const CSS_NUMBER=/* @__PURE__ */Object.create(null),CSS_NUMBER_KEYS=["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","columns","counter-increment","counter-reset","flex","flex-grow","flex-positive","flex-shrink","flex-negative","flex-order","font-weight","grid-area","grid-column","grid-column-end","grid-column-span","grid-column-start","grid-row","grid-row-end","grid-row-span","grid-row-start","line-clamp","line-height","opacity","order","orphans","tab-size","widows","z-index","zoom","fill-opacity","flood-opacity","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width"];for(const r of CSS_NUMBER_KEYS)for(const e of["-webkit-","-ms-","-moz-","-o-",""])CSS_NUMBER[e+r]=!0;function hyphenate(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`).replace(/^ms-/,"-ms-")}function stringHash(e){let t=5381,r=e.length;for(;r--;)t=33*t^e.charCodeAt(r);return(t>>>0).toString(36)}function styleToString(e,t){return t&&"number"==typeof t&&!CSS_NUMBER[e]?`${e}:${t}px`:`${e}:${t}`}function sortTuples(e){return e.sort((e,t)=>e[0]>t[0]?1:-1)}function parseStyles(e,t){const r=[],s=[];for(const n of Object.keys(e)){const t=n.trim(),i=e[n];36!==t.charCodeAt(0)&&null!=i&&("object"!=typeof i||Array.isArray(i)?r.push([hyphenate(t),i]):s.push([t,i]))}return{style:stringifyProperties(sortTuples(r)),nested:t?s:sortTuples(s),isUnique:!!e.$unique}}function stringifyProperties(e){return e.map(([e,t])=>Array.isArray(t)?t.map(t=>styleToString(e,t)).join(";"):styleToString(e,t)).join(";")}function interpolate(e,t){return-1===e.indexOf("&")?`${t} ${e}`:e.replace(/&/g,t)}function stylize(e,t,r,s,n){const{style:i,nested:o,isUnique:a}=parseStyles(t,""!==e);let l=i;if(64===e.charCodeAt(0)){const t={selector:e,styles:[],rules:[],style:n?"":i};r.push(t),i&&n&&t.styles.push({selector:n,style:i,isUnique:a});for(const[e,r]of o)l+=e+stylize(e,r,t.rules,t.styles,n)}else{const t=n?interpolate(e,n):e;i&&s.push({selector:t,style:i,isUnique:a});for(const[e,n]of o)l+=e+stylize(e,n,r,s,t)}return l}function composeStylize(e,t,r,s,n,i){for(const{selector:o,style:a,isUnique:l}of s){const r=i?interpolate(o,n):o,s=l?`u\0${(++uniqueId).toString(36)}`:`s\0${t}\0${a}`,c=new Style(a,s);c.add(new Selector(r,`k\0${t}\0${r}`)),e.add(c)}for(const{selector:o,style:a,rules:l,styles:c}of r){const r=new Rule(o,a,`r\0${t}\0${o}\0${a}`);composeStylize(r,t,l,c,n,i),e.add(r)}}function join(e){let t="";for(let r=0;r<e.length;r++)t+=e[r];return t}const noopChanges={add:()=>{},change:()=>{},remove:()=>{}};class Cache{constructor(e=noopChanges){this.changes=e,this.sheet=[],this.changeId=0,this._keys=[],this._children=/* @__PURE__ */Object.create(null),this._counters=/* @__PURE__ */Object.create(null)}add(e){const t=this._counters[e.id]||0,r=this._children[e.id]||e.clone();if(this._counters[e.id]=t+1,0===t)this._children[r.id]=r,this._keys.push(r.id),this.sheet.push(r.getStyles()),this.changeId++,this.changes.add(r,this._keys.length-1);else if(r instanceof Cache&&e instanceof Cache){const t=this._keys.indexOf(e.id),s=r.changeId;r.merge(e),r.changeId!==s&&(this.sheet.splice(t,1,r.getStyles()),this.changeId++,this.changes.change(r,t,t))}}remove(e){const t=this._counters[e.id];if(t){this._counters[e.id]=t-1;const r=this._children[e.id],s=this._keys.indexOf(r.id);if(1===t)delete this._counters[e.id],delete this._children[e.id],this._keys.splice(s,1),this.sheet.splice(s,1),this.changeId++,this.changes.remove(r,s);else if(r instanceof Cache&&e instanceof Cache){const t=r.changeId;r.unmerge(e),r.changeId!==t&&(this.sheet.splice(s,1,r.getStyles()),this.changeId++,this.changes.change(r,s,s))}}}values(){return this._keys.map(e=>this._children[e])}merge(e){for(const t of e.values())this.add(t);return this}unmerge(e){for(const t of e.values())this.remove(t);return this}clone(){return(new Cache).merge(this)}}class Selector{constructor(e,t){this.selector=e,this.id=t}getStyles(){return this.selector}clone(){return this}}class Style extends Cache{constructor(e,t){super(),this.style=e,this.id=t}getStyles(){return`${this.sheet.join(",")}{${this.style}}`}clone(){return new Style(this.style,this.id).merge(this)}}class Rule extends Cache{constructor(e,t,r){super(),this.rule=e,this.style=t,this.id=r}getStyles(){return`${this.rule}{${this.style}${join(this.sheet)}}`}clone(){return new Rule(this.rule,this.style,this.id).merge(this)}}function key(e,t){return`f${stringHash(e)}`}class FreeStyle extends Cache{constructor(e,t){super(t),this.id=e}registerStyle(e){const t=[],r=[],s=stylize("&",e,t,r),n=key(s);return composeStylize(this,s,t,r,`.${n}`,!0),n}registerKeyframes(e){return this.registerHashRule("@keyframes",e)}registerHashRule(e,t){const r=[],s=[],n=stylize("",t,r,s),i=key(n),o=new Rule(`${e} ${i}`,"",`h\0${n}\0${e}`);return composeStylize(o,n,r,s,"",!1),this.add(o),i}registerRule(e,t){const r=[],s=[];composeStylize(this,stylize(e,t,r,s),r,s,"",!1)}registerCss(e){return this.registerRule("",e)}getStyles(){return join(this.sheet)}clone(){return new FreeStyle(this.id,this.changes).merge(this)}}function create$b(e){return new FreeStyle(`f${(++uniqueId).toString(36)}`,e)}const dist_es2015=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,Cache:Cache,FreeStyle:FreeStyle,Rule:Rule,Selector:Selector,Style:Style,create:create$b},Symbol.toStringTag,{value:"Module"})),require$$0=/* @__PURE__ */getAugmentedNamespace(dist_es2015);var formatting={},hasRequiredFormatting;function requireFormatting(){if(hasRequiredFormatting)return formatting;return hasRequiredFormatting=1,Object.defineProperty(formatting,"__esModule",{value:!0}),formatting.convertToStyles=function e(t){var r={};for(var s in t){var n=t[s];if("$nest"===s){var i=n;for(var o in i){var a=i[o];r[o]=e(a)}}else"$debugName"===s?r.$displayName=n:r[s]=n}return r},formatting.convertToKeyframes=function(e){var t={};for(var r in e)"$debugName"!==r&&(t[r]=e[r]);return e.$debugName&&(t.$displayName=e.$debugName),t},formatting}var utilities={},hasRequiredUtilities,hasRequiredTypestyle;function requireUtilities(){if(hasRequiredUtilities)return utilities;function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var s={},n=0,i=t;n<i.length;n++){var o=i[n];if(null!=o&&!1!==o)for(var a in o){var l=o[a];(l||0===l)&&("$nest"===a&&l?s[a]=s.$nest?e(s.$nest,l):l:-1!==a.indexOf("&")||0===a.indexOf("@media")?s[a]=s[a]?e(s[a],l):l:s[a]=l)}}return s}hasRequiredUtilities=1,Object.defineProperty(utilities,"__esModule",{value:!0}),utilities.raf="undefined"==typeof requestAnimationFrame?function(e){return setTimeout(e)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window),utilities.classes=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map(function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return!!e[t]&&t}):[e]}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return!!e}).join(" ")},utilities.extend=e,utilities.media=function(r){for(var s,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=[];return r.type&&o.push(r.type),r.orientation&&o.push("(orientation: "+r.orientation+")"),r.minWidth&&o.push("(min-width: "+t(r.minWidth)+")"),r.maxWidth&&o.push("(max-width: "+t(r.maxWidth)+")"),r.minHeight&&o.push("(min-height: "+t(r.minHeight)+")"),r.maxHeight&&o.push("(max-height: "+t(r.maxHeight)+")"),r.prefersColorScheme&&o.push("(prefers-color-scheme: "+r.prefersColorScheme+")"),{$nest:(s={},s["@media "+o.join(" and ")]=e.apply(void 0,n),s)}};var t=function(e){return"string"==typeof e?e:e+"px"};return utilities}function requireTypestyle(){if(hasRequiredTypestyle)return typestyle;hasRequiredTypestyle=1,Object.defineProperty(typestyle,"__esModule",{value:!0});var e=require$$0,t=requireFormatting(),r=requireUtilities(),s=function(){return e.create()},n=function(){function e(e){var n=this,i=e.autoGenerateTag;this.cssRaw=function(e){e&&(n._raw+=e||"",n._pendingRawChange=!0,n._styleUpdated())},this.cssRule=function(e){for(var s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];var o=t.convertToStyles(r.extend.apply(void 0,s));n._freeStyle.registerRule(e,o),n._styleUpdated()},this.forceRenderStyles=function(){var e=n._getTag();e&&(e.textContent=n.getStyles())},this.fontFace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=n._freeStyle,s=0,i=e;s<i.length;s++){var o=i[s];r.registerRule("@font-face",o)}n._styleUpdated()},this.getStyles=function(){return(n._raw||"")+n._freeStyle.getStyles()},this.keyframes=function(e){var r=t.convertToKeyframes(e),s=n._freeStyle.registerKeyframes(r);return n._styleUpdated(),s},this.reinit=function(){var e=s();n._freeStyle=e,n._lastFreeStyleChangeId=e.changeId,n._raw="",n._pendingRawChange=!1;var t=n._getTag();t&&(t.textContent="")},this.setStylesTarget=function(e){n._tag&&(n._tag.textContent=""),n._tag=e,n.forceRenderStyles()},this.stylesheet=function(e){for(var t={},r=0,s=Object.getOwnPropertyNames(e);r<s.length;r++){var i=s[r],o=e[i];o&&(o.$debugName=i,t[i]=n.style(o))}return t};var o=s();this._autoGenerateTag=i,this._freeStyle=o,this._lastFreeStyleChangeId=o.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return e.prototype._afterAllSync=function(e){var t=this;this._pending++;var s=this._pending;r.raf(function(){s===t._pending&&e()})},e.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var e="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(e),this._tag=e,e}},e.prototype._styleUpdated=function(){var e=this,t=this._freeStyle.changeId,r=this._lastFreeStyleChangeId;(this._pendingRawChange||t!==r)&&(this._lastFreeStyleChangeId=t,this._pendingRawChange=!1,this._afterAllSync(function(){return e.forceRenderStyles()}))},e.prototype.style=function(){var e=this._freeStyle.registerStyle(t.convertToStyles(r.extend.apply(void 0,arguments)));return this._styleUpdated(),e},e}();return typestyle.TypeStyle=n,typestyle}var types={},hasRequiredTypes,hasRequiredLib$6;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0})),types}function requireLib$6(){if(hasRequiredLib$6)return lib$6;hasRequiredLib$6=1,Object.defineProperty(lib$6,"__esModule",{value:!0});var e=requireTypestyle();lib$6.TypeStyle=e.TypeStyle;var t=requireTypes();lib$6.types=t;var r=requireUtilities();lib$6.extend=r.extend,lib$6.classes=r.classes,lib$6.media=r.media;var s=new e.TypeStyle({autoGenerateTag:!0});return lib$6.setStylesTarget=s.setStylesTarget,lib$6.cssRaw=s.cssRaw,lib$6.cssRule=s.cssRule,lib$6.forceRenderStyles=s.forceRenderStyles,lib$6.fontFace=s.fontFace,lib$6.getStyles=s.getStyles,lib$6.keyframes=s.keyframes,lib$6.reinit=s.reinit,lib$6.style=s.style,lib$6.stylesheet=s.stylesheet,lib$6.createTypeStyle=function(t){var r=new e.TypeStyle({autoGenerateTag:!1});return t&&r.setStylesTarget(t),r},lib$6}var libExports=requireLib$6(),LabIconStyle,Private$c;!function(e){const t={breadCrumb:{container:{$nest:{"&:first-child svg":{bottom:"1px",marginLeft:"0px",position:"relative"},"&:hover":{backgroundColor:"var(--jp-layout-color2)"},".jp-mod-dropTarget&":{backgroundColor:"var(--jp-brand-color2)",opacity:.7}}},element:{borderRadius:"var(--jp-border-radius)",cursor:"pointer",margin:"0px 2px",padding:"0px 2px",height:"16px",width:"16px",verticalAlign:"middle"}},commandPaletteHeader:{container:{height:"14px",margin:"0 14px 0 auto"},element:{height:"14px",width:"14px"},options:{elementPosition:"center"}},commandPaletteItem:{element:{height:"16px",width:"16px"},options:{elementPosition:"center"}},launcherCard:{container:{height:"52px",width:"52px"},element:{height:"52px",width:"52px"},options:{elementPosition:"center"}},launcherSection:{container:{boxSizing:"border-box",marginRight:"12px",height:"32px",width:"32px"},element:{height:"32px",width:"32px"},options:{elementPosition:"center"}},listing:{container:{flex:"0 0 20px",marginRight:"4px",position:"relative"},element:{height:"16px",width:"16px"},options:{elementPosition:"center"}},listingHeaderItem:{container:{display:"inline",height:"16px",width:"16px"},element:{height:"auto",margin:"-2px 0 0 0",width:"20px"},options:{elementPosition:"center"}},mainAreaTab:{container:{$nest:{".lm-DockPanel-tabBar &":{marginRight:"4px"}}},element:{$nest:{".lm-DockPanel-tabBar &":{height:"14px",width:"14px"}}},options:{elementPosition:"center"}},menuItem:{container:{display:"inline-block",verticalAlign:"middle"},element:{height:"16px",width:"16px"},options:{elementPosition:"center"}},runningItem:{container:{margin:"0px 4px 0px 4px"},element:{height:"16px",width:"16px"},options:{elementPosition:"center"}},select:{container:{pointerEvents:"none"},element:{position:"absolute",height:"auto",width:"16px"}},settingsEditor:{container:{display:"flex",flex:"0 0 20px",margin:"0 3px 0 0",position:"relative",height:"20px",width:"20px"},element:{height:"16px",width:"16px"},options:{elementPosition:"center"}},sideBar:{element:{height:"auto",width:"20px"},options:{elementPosition:"center"}},splash:{container:{animation:"0.3s fade-in linear forwards",height:"100%",width:"100%",zIndex:1},element:{width:"100px"},options:{elementPosition:"center"}},statusBar:{element:{left:"0px",top:"0px",height:"18px",width:"20px",position:"relative"}},toolbarButton:{container:{display:"inline-block",verticalAlign:"middle"},element:{height:"16px",width:"16px"},options:{elementPosition:"center"}}};function r(e){return{container:{alignItems:"center",display:"flex"},element:{display:"block",...e}}}const s={center:r({margin:"0 auto",width:"100%"}),top:r({margin:"0 0 auto 0"}),right:r({margin:"0 0 0 auto"}),bottom:r({margin:"auto 0 0 0"}),left:r({margin:"0 auto 0 0"}),"top right":r({margin:"0 0 auto auto"}),"bottom right":r({margin:"auto 0 0 auto"}),"bottom left":r({margin:"auto auto 0 0"}),"top left":r({margin:"0 auto 0 auto"})};function n(e){return{element:{height:e,width:e}}}const i={small:n("14px"),normal:n("16px"),large:n("20px"),xlarge:n("24px")};function o(e){const t=Object.assign({},...e.map(e=>e.options));return t.elementPosition&&e.unshift(s[t.elementPosition]),t.elementSize&&e.unshift(i[t.elementSize]),function(e){return{container:Object.assign({},...e.map(e=>e.container)),element:Object.assign({},...e.map(e=>e.element))}}(e)}const a=/* @__PURE__ */new Map;e.styleClass=function(e){if(!e||0===Object.keys(e).length)return"";let{elementPosition:r,elementSize:s,stylesheet:n,...i}=e;const l={...r&&{elementPosition:r},...s&&{elementSize:s}},c="string"==typeof n&&0===Object.keys(i).length,d=c?[n,r,s].join(","):"";if(c&&a.has(d))return a.get(d);const h=function(e){return e?(Array.isArray(e)||(e=[e]),e.map(e=>"string"==typeof e?t[e]:e)):[]}(n);h.push({element:i,options:l});const u=function(e){var t;return libExports.style({...e.container,$nest:{...null===(t=e.container)||void 0===t?void 0:t.$nest,svg:e.element}})}(o(h));return c&&a.set(d,u),u}}(LabIconStyle||(LabIconStyle={}));class LabIcon{static remove(e){for(;e.firstChild;)e.firstChild.remove();return e.className="",e}static resolve({icon:e}){if(e instanceof LabIcon)return e;if("string"==typeof e){const t=LabIcon._instances.get(e);return t||(LabIcon._debug&&console.warn(`Lookup failed for icon, creating loading icon. icon: ${e}`),new LabIcon({name:e,svgstr:refreshSvgstr,_loading:!0}))}return new LabIcon(e)}static resolveElement({icon:e,iconClass:t,fallback:r,...s}){return Private$c.isResolvable(e)?LabIcon.resolve({icon:e}).element(s):!t&&r?r.element(s):(s.className=classes(t,s.className),Private$c.blankElement(s))}static resolveReact({icon:e,iconClass:r,fallback:s,...n}){if(!Private$c.isResolvable(e))return!r&&s?t.createElement(s.react,{...n}):(n.className=classes(r,n.className),t.createElement(Private$c.blankReact,{...n}));const i=LabIcon.resolve({icon:e});return t.createElement(i.react,{...n})}static resolveSvg({name:e,svgstr:t}){const r=(new DOMParser).parseFromString(Private$c.svgstrShim(t),"image/svg+xml"),s=r.querySelector("parsererror");if(s){const r=`SVG HTML was malformed for LabIcon instance.\nname: ${e}, svgstr: ${t}`;return LabIcon._debug?(console.error(r),s):(console.warn(r),null)}return r.documentElement}static toggleDebug(e){LabIcon._debug=null!=e?e:!LabIcon._debug}constructor({name:e,svgstr:t,render:r,unrender:s,_loading:n=!1}){if(this._props={},this._svgReplaced=new Signal(this),this._svgElement=void 0,this._svgInnerHTML=void 0,this._svgReactAttrs=void 0,!e||!t)return console.error(`When defining a new LabIcon, name and svgstr must both be non-empty strings. name: ${e}, svgstr: ${t}`),badIcon;if(this._loading=n,LabIcon._instances.has(e)){const r=LabIcon._instances.get(e);return this._loading?(r.svgstr=t,this._loading=!1,r):(LabIcon._debug&&console.warn(`Redefining previously loaded icon svgstr. name: ${e}, svgstrOld: ${r.svgstr}, svgstr: ${t}`),r.svgstr=t,r)}this.name=e,this.react=this._initReact(e),this.svgstr=t,this._initRender({render:r,unrender:s}),LabIcon._instances.set(this.name,this)}bindprops(e){const t=Object.create(this);return t._props=e,t.react=t._initReact(t.name+"_bind"),t}element(e={}){var t;let{className:r,container:s,label:n,title:i,tag:o="div",...a}={...this._props,...e};const l=null==s?void 0:s.firstChild;if((null===(t=null==l?void 0:l.dataset)||void 0===t?void 0:t.iconId)===this._uuid)return l;if(!this.svgElement)return document.createElement("div");if(s)for(;s.firstChild;)s.firstChild.remove();else o&&(s=document.createElement(o));const c=this.svgElement.cloneNode(!0);return s?(null!=n&&(s.textContent=n),Private$c.initContainer({container:s,className:r,styleProps:a,title:i}),s.appendChild(c),s):(n&&console.warn(),c)}render(e,t){var r;let s=null===(r=null==t?void 0:t.children)||void 0===r?void 0:r[0];"string"!=typeof s&&(s=void 0),this.element({container:e,label:s,...null==t?void 0:t.props})}get svgElement(){return void 0===this._svgElement&&(this._svgElement=this._initSvg({uuid:this._uuid})),this._svgElement}get svgInnerHTML(){return void 0===this._svgInnerHTML&&(null===this.svgElement?this._svgInnerHTML=null:this._svgInnerHTML=this.svgElement.innerHTML),this._svgInnerHTML}get svgReactAttrs(){return void 0===this._svgReactAttrs&&(null===this.svgElement?this._svgReactAttrs=null:this._svgReactAttrs=getReactAttrs(this.svgElement,{ignore:["data-icon-id"]})),this._svgReactAttrs}get svgstr(){return this._svgstr}set svgstr(e){this._svgstr=e;const t=UUID.uuid4(),r=this._uuid;this._uuid=t,this._svgElement=void 0,this._svgInnerHTML=void 0,this._svgReactAttrs=void 0,document.querySelectorAll(`[data-icon-id="${r}"]`).forEach(e=>{this.svgElement&&e.replaceWith(this.svgElement.cloneNode(!0))}),this._svgReplaced.emit()}_initReact(e){const r=t.forwardRef((e={},r)=>{const{className:s,container:n,label:i,title:o,slot:a,tag:l="div",...c}={...this._props,...e},[,d]=t.useState(this._uuid);t.useEffect(()=>{const e=()=>{d(this._uuid)};return this._svgReplaced.connect(e),()=>{this._svgReplaced.disconnect(e)}});const h=null!=l?l:t.Fragment;if(!this.svgInnerHTML||!this.svgReactAttrs)return t.createElement(t.Fragment,null);const u={...this.svgReactAttrs};l||Object.assign(u,{className:s||c?classes(s,LabIconStyle.styleClass(c)):void 0,title:o,slot:a});const p=t.createElement("svg",{...u,...this.svgReactAttrs,dangerouslySetInnerHTML:{__html:this.svgInnerHTML},ref:r});if(n)return Private$c.initContainer({container:n,className:s,styleProps:c,title:o}),t.createElement(t.Fragment,null,p,i);{let e={};return h!==t.Fragment&&(e={className:s||c?classes(s,LabIconStyle.styleClass(c)):void 0,title:o,slot:a}),t.createElement(h,{...e},p,i)}});return r.displayName=`LabIcon_${e}`,r}_initRender({render:e,unrender:t}){e?(this.render=e,t&&(this.unrender=t)):t&&console.warn("In _initRender, ignoring unrender arg since render is undefined")}_initSvg({title:e,uuid:t}={}){const r=LabIcon.resolveSvg(this);return r?("parsererror"!==r.tagName&&(r.dataset.icon=this.name,t&&(r.dataset.iconId=t),e?Private$c.setTitleSvg(r,e):r.setAttribute("aria-hidden","true")),r):r}}LabIcon._debug=!1,LabIcon._instances=/* @__PURE__ */new Map,function(e){function r({container:e,className:t,styleProps:r,title:s}){null!=s&&(e.title=s);const n=LabIconStyle.styleClass(r);if(null!=t){const r=classes(t,n);return e.className=r,r}return n?(e.classList.add(n),n):""}e.blankElement=function({className:t="",container:r,label:s,title:n,tag:i="div",slot:o,...a}){if((null==r?void 0:r.className)===t)return r;if(r)for(;r.firstChild;)r.firstChild.remove();else r=document.createElement(null!=i?i:"div");return null!=s&&(r.textContent=s),e.initContainer({container:r,className:t,styleProps:a,title:n}),r},e.blankReact=t.forwardRef(({className:e="",container:s,label:n,title:i,tag:o="div",...a},l)=>{const c=null!=o?o:"div";return s?(r({container:s,className:e,styleProps:a,title:i}),t.createElement(t.Fragment,null)):t.createElement(c,{className:classes(e,LabIconStyle.styleClass(a))},l&&blankIcon.react({ref:l}),n)}),e.blankReact.displayName="BlankReact",e.initContainer=r,e.isResolvable=function(e){return!(!e||!("string"==typeof e||e.name&&e.svgstr))},e.setTitleSvg=function(e,t){const r=e.getElementsByTagName("title");if(r.length)r[0].textContent=t;else{const r=document.createElement("title");r.textContent=t,e.appendChild(r)}},e.svgstrShim=function(e,t=!0){const[,r,s]=decodeURIComponent(e).replace(/>\s*\n\s*</g,"><").replace(/\s*\n\s*/g," ").match(t?/^(?:data:.*?(;base64)?,)?(.*)/:/(?:(base64).*)?(<svg.*)/);return r?atob(s):s};class s{constructor(e,t){this._icon=e,this._rendererOptions=t}render(e,t){}}e.Renderer=s;e.ElementRenderer=class extends s{render(e,t){var r,s;let n=null===(r=null==t?void 0:t.children)||void 0===r?void 0:r[0];"string"!=typeof n&&(n=void 0),this._icon.element({container:e,label:n,...null===(s=this._rendererOptions)||void 0===s?void 0:s.props,...null==t?void 0:t.props})}};e.ReactRenderer=class extends s{constructor(){super(...arguments),this._rootDOM=null}render(e,r){var s,n;let i=null===(s=null==r?void 0:r.children)||void 0===s?void 0:s[0];"string"!=typeof i&&(i=void 0);const o=this._icon;null!==this._rootDOM&&this._rootDOM.unmount(),this._rootDOM=clientExports.createRoot(e),this._rootDOM.render(t.createElement(o.react,{container:e,label:i,...null===(n=this._rendererOptions)||void 0===n?void 0:n.props,...null==r?void 0:r.props}))}unrender(e){null!==this._rootDOM&&(this._rootDOM.unmount(),this._rootDOM=null)}}}(Private$c||(Private$c={}));const badIcon=new LabIcon({name:"ui-components:bad",svgstr:badSvgstr}),blankIcon=new LabIcon({name:"ui-components:blank",svgstr:blankSvgstr}),addAboveSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='14'%20height='14'%20fill='none'%20viewBox='0%200%2014%2014'%3e%3cg%20clip-path='url(%23addabovea)'%3e%3cpath%20fill='%23616161'%20stroke='%23616161'%20stroke-width='.7'%20d='M4.75%204.93h1.875v1.876c0%20.206.169.375.375.375a.376.376%200%200%200%20.375-.375V4.93H9.25a.376.376%200%200%200%20.375-.375.376.376%200%200%200-.375-.375H7.375V2.306A.376.376%200%200%200%207%201.93a.376.376%200%200%200-.375.375V4.18H4.75a.376.376%200%200%200-.375.375c0%20.206.169.375.375.375Z'%20class='jp-icon3'/%3e%3c/g%3e%3cpath%20fill='%23616161'%20fill-rule='evenodd'%20d='M11.5%209.5v2h-9v-2zM12%208a1%201%200%200%201%201%201v3a1%201%200%200%201-1%201H2a1%201%200%200%201-1-1V9a1%201%200%200%201%201-1z'%20class='jp-icon3'%20clip-rule='evenodd'/%3e%3cdefs%3e%3cclipPath%20id='addabovea'%3e%3cpath%20fill='%23fff'%20d='M10%201.556H4v6h6z'%20class='jp-icon3'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",addBelowSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='14'%20height='14'%20fill='none'%20viewBox='0%200%2014%2014'%3e%3cg%20clip-path='url(%23addbelowa)'%3e%3cpath%20fill='%23616161'%20stroke='%23616161'%20stroke-width='.7'%20d='M9.25%2010.07H7.375V8.193A.376.376%200%200%200%207%207.82a.376.376%200%200%200-.375.375v1.875H4.75a.376.376%200%200%200-.375.375c0%20.207.169.375.375.375h1.875v1.875c0%20.207.169.375.375.375a.376.376%200%200%200%20.375-.375V10.82H9.25a.376.376%200%200%200%20.375-.375.376.376%200%200%200-.375-.375Z'%20class='jp-icon3'/%3e%3c/g%3e%3cpath%20fill='%23616161'%20fill-rule='evenodd'%20d='M2.5%205.5v-2h9v2zM2%207a1%201%200%200%201-1-1V3a1%201%200%200%201%201-1h10a1%201%200%200%201%201%201v3a1%201%200%200%201-1%201z'%20class='jp-icon3'%20clip-rule='evenodd'/%3e%3cdefs%3e%3cclipPath%20id='addbelowa'%3e%3cpath%20fill='%23fff'%20d='M4%2013.444h6v-6H4z'%20class='jp-icon3'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",addSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M19%2013h-6v6h-2v-6H5v-2h6V5h2v6h6z'%20class='jp-icon3'/%3e%3c/svg%3e",audioSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20class='jp-icon3%20jp-icon-selectable'%20fill='%23616161'%20d='M13,4V20a1,1,0,0,1-2,0V4a1,1,0,0,1,2,0ZM8,5A1,1,0,0,0,7,6V18a1,1,0,0,0,2,0V6A1,1,0,0,0,8,5ZM4,7A1,1,0,0,0,3,8v8a1,1,0,0,0,2,0V8A1,1,0,0,0,4,7ZM16,5a1,1,0,0,0-1,1V18a1,1,0,0,0,2,0V6A1,1,0,0,0,16,5Zm4,2a1,1,0,0,0-1,1v8a1,1,0,0,0,2,0V8A1,1,0,0,0,20,7Z'/%3e%3c/svg%3e",bellSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20version='1.1'%20viewBox='0%200%2016%2016'%3e%3cpath%20fill='%23333'%20d='M8%20.29c-1.4%200-2.7.73-3.6%201.8-1.2%201.5-1.4%203.4-1.5%205.2-.18%202.2-.44%204-2.3%205.3l.28%201.3h5c.026.66.32%201.1.71%201.5.84.61%202%20.61%202.8%200%20.52-.4.6-1%20.71-1.5h5l.28-1.3c-1.9-.97-2.2-3.3-2.3-5.3-.13-1.8-.26-3.7-1.5-5.2-.85-1-2.2-1.8-3.6-1.8zm0%201.4c.88%200%201.9.55%202.5%201.3.88%201.1%201.1%202.7%201.2%204.4.13%201.7.23%203.6%201.3%205.2H3c1.1-1.6%201.2-3.4%201.3-5.2.13-1.7.3-3.3%201.2-4.4.59-.72%201.6-1.3%202.5-1.3m-.74%2012h1.5c-.001.28.015.79-.74.79-.73.002-.72-.53-.74-.79z'%20class='jp-icon2%20jp-icon-selectable'/%3e%3c/svg%3e",breakpointSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20fill='none'%20viewBox='0%200%2016%2016'%3e%3cg%20fill='var(--jp-error-color1,%20%23d32f2f)'%3e%3ccircle%20cx='10'%20cy='7'%20r='6'%20/%3e%3c/g%3e%3c/svg%3e",bugDotSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='none'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='%23616161'%20class='jp-icon3%20jp-icon-selectable'%3e%3cpath%20fill-rule='evenodd'%20d='M17.19%208H20v2h-2.09c.05.33.09.66.09%201v1h2v2h-2v.027a4.5%204.5%200%200%200-3.545%206.447A5.997%205.997%200%200%201%206.81%2018H4v-2h2.09c-.05-.33-.09-.66-.09-1v-1H4v-2h2v-1c0-.34.04-.67.09-1H4V8h2.81c.45-.78%201.07-1.45%201.81-1.96L7%204.41%208.41%203l2.18%202.17c.45-.11.92-.17%201.41-.17s.96.06%201.42.17L15.59%203%2017%204.41l-1.63%201.63c.75.51%201.37%201.18%201.82%201.96M10%2016h4v-2h-4zm0-4h4v-2h-4z'%20clip-rule='evenodd'/%3e%3cpath%20d='M22%2018.5a3.5%203.5%200%201%201-7%200%203.5%203.5%200%200%201%207%200'/%3e%3c/g%3e%3c/svg%3e",bugSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M20%208h-2.81a6%206%200%200%200-1.82-1.96L17%204.41%2015.59%203l-2.17%202.17C12.96%205.06%2012.49%205%2012%205s-.96.06-1.41.17L8.41%203%207%204.41l1.62%201.63C7.88%206.55%207.26%207.22%206.81%208H4v2h2.09c-.05.33-.09.66-.09%201v1H4v2h2v1c0%20.34.04.67.09%201H4v2h2.81c1.04%201.79%202.97%203%205.19%203s4.15-1.21%205.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6%208h-4v-2h4zm0-4h-4v-2h4z'%20class='jp-icon3%20jp-icon-selectable'/%3e%3c/svg%3e",buildSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M14.9%2017.45c1.35%200%202.45-1.1%202.45-2.45s-1.1-2.45-2.45-2.45c-1.36%200-2.45%201.1-2.45%202.45s1.09%202.45%202.45%202.45m5.2-1.77%201.48%201.16c.13.11.17.29.08.45l-1.4%202.42a.35.35%200%200%201-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.27%201.85c-.02.17-.17.3-.34.3h-2.8c-.18%200-.32-.13-.35-.3l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.75.7c-.15.06-.34%200-.42-.15l-1.4-2.42a.35.35%200%200%201%20.08-.45l1.48-1.16-.05-.68.05-.69-1.48-1.15a.35.35%200%200%201-.08-.45l1.4-2.42c.08-.16.27-.22.42-.16l1.75.71c.36-.28.75-.52%201.18-.69l.26-1.86c.03-.16.17-.29.35-.29h2.8c.17%200%20.32.13.34.29l.27%201.86c.42.17.82.41%201.18.69l1.74-.71c.17-.06.34%200%20.43.16l1.4%202.42c.09.15.05.34-.08.45l-1.48%201.15.05.69zM7.33%207.445A1.566%201.566%200%200%200%207.904%205.3a1.575%201.575%200%201%200-.574%202.145m2.327-2.65%201.21.157c.096.025.173.12.171.236v1.8a.214.214%200%200%201-.183.223l-1.195.17-.42.75.43%201.126c.037.106%200%20.22-.096.275l-1.559.9a.23.23%200%200%201-.294-.05l-.734-.95-.878-.001-.762.96c-.058.08-.173.1-.275.043l-1.56-.901a.23.23%200%200%201-.101-.276l.452-1.116-.246-.366-.194-.396-1.192-.166a.23.23%200%200%201-.189-.226V5.186c.002-.117.077-.206.175-.217l1.204-.175.446-.766-.456-1.11a.23.23%200%200%201%20.104-.28l1.56-.9a.225.225%200%200%201%20.285.054l.76.936.86.01.745-.949a.214.214%200%200%201%20.284-.048l1.56.9a.24.24%200%200%201%20.118.267l-.47%201.126.246.366z'%20class='jp-icon3'/%3e%3c/svg%3e",caretDownEmptySvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2018%2018'%3e%3cpath%20fill='%23616161'%20d='M5.2%205.9%209%209.7l3.8-3.8L14%207.1l-4.9%205-4.9-5z'%20class='jp-icon3'%20shape-rendering='geometricPrecision'/%3e%3c/svg%3e",caretDownEmptyThinSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2020%2020'%3e%3cpath%20fill='%23616161'%20d='M9.9%2013.6%203.6%207.4l.8-.8%205.5%205.6%205.5-5.5.7.7z'%20class='jp-icon3'%20shape-rendering='geometricPrecision'/%3e%3c/svg%3e",caretDownSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2018%2018'%3e%3cpath%20fill='%23616161'%20d='M5.2%207.5%209%2011.2l3.8-3.8H5.2z'%20class='jp-icon3'%20shape-rendering='geometricPrecision'/%3e%3c/svg%3e",caretLeftSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2018%2018'%3e%3cpath%20fill='%23616161'%20d='M10.8%2012.8%207.1%209l3.8-3.8v7.6z'%20class='jp-icon3'%20shape-rendering='geometricPrecision'/%3e%3c/svg%3e",caretRightSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2018%2018'%3e%3cpath%20fill='%23616161'%20d='M7.2%205.2%2010.9%209l-3.8%203.8V5.2z'%20class='jp-icon3'%20shape-rendering='geometricPrecision'/%3e%3c/svg%3e",caretUpEmptyThinSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2020%2020'%3e%3cpath%20fill='%23616161'%20d='M15.4%2013.3%209.9%207.7l-5.5%205.5-.8-.7%206.3-6.2%206.2%206.3z'%20class='jp-icon3'%20shape-rendering='geometricPrecision'/%3e%3c/svg%3e",caretUpSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2018%2018'%3e%3cpath%20fill='%23616161'%20d='M5.2%2010.5%209%206.8l3.8%203.8H5.2z'%20class='jp-icon3'%20shape-rendering='geometricPrecision'/%3e%3c/svg%3e",caseSensitiveSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2020%2020'%3e%3cpath%20fill='%23414141'%20d='M2%202h16v16H2z'%20class='jp-icon2'/%3e%3cpath%20fill='%23FFF'%20d='M7.6%208h.9l3.5%208h-1.1l-.9-2H6l-.9%202H4zM8%209.1%206.4%2013h3.2zm8.6.7c-.2.1-.4.1-.7.1-.2%200-.4-.1-.6-.2-.1-.1-.2-.4-.2-.7-.3.3-.6.5-.9.7-.3.1-.7.2-1.1.2-.3%200-.5%200-.7-.1l-.6-.3c-.2-.1-.3-.3-.4-.5s-.1-.4-.1-.7.1-.6.2-.8.3-.4.4-.5c.1%200%20.3-.1.6-.2.2-.1.5-.1.7-.2.3-.1.5-.1.7-.1s.4-.1.6-.1.3-.1.4-.2.2-.2.2-.4c0-1-1.1-1-1.3-1-.4%200-1.4%200-1.4%201.2h-.9c0-.4.1-.7.2-1%20.1-.2.3-.4.5-.6s.5-.3.8-.3c.3-.1.6-.1.9-.1s.5%200%20.8.1c.3%200%20.5.1.7.2s.4.3.5.5.1.4.1.8V9c0%20.1.1.2.3.2h.3zm-1.4-2.9c-1.2.6-3.1.2-3.1%201.4%200%201.4%203.1%201%203.1-.5z'%20class='jp-icon-accent2'/%3e%3c/svg%3e",checkSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M9%2016.17%204.83%2012l-1.42%201.41L9%2019%2021%207l-1.41-1.41z'%20class='jp-icon3%20jp-icon-selectable'/%3e%3c/svg%3e",circleEmptySvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M12%202C6.47%202%202%206.47%202%2012s4.47%2010%2010%2010%2010-4.47%2010-10S17.53%202%2012%202m0%2018c-4.41%200-8-3.59-8-8s3.59-8%208-8%208%203.59%208%208-3.59%208-8%208'%20class='jp-icon3'/%3e%3c/svg%3e",circleSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2018%2018'%3e%3ccircle%20cx='9'%20cy='9'%20r='8'%20fill='%23616161'%20class='jp-icon3'/%3e%3c/svg%3e",cleaningSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M16%2011h-1V3c0-1.1-.9-2-2-2h-2c-1.1%200-2%20.9-2%202v8H8c-2.76%200-5%202.24-5%205v7h18v-7c0-2.76-2.24-5-5-5m3%2010h-2v-3c0-.55-.45-1-1-1s-1%20.45-1%201v3h-2v-3c0-.55-.45-1-1-1s-1%20.45-1%201v3H9v-3c0-.55-.45-1-1-1s-1%20.45-1%201v3H5v-5c0-1.65%201.35-3%203-3h8c1.65%200%203%201.35%203%203z'%20class='jp-icon3'/%3e%3c/svg%3e",clearSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cmask%20id='cleara'%3e%3cpath%20fill='%23fff'%20d='M0%200h24v24H0z'/%3e%3ccircle%20cx='12'%20cy='12'%20r='8'%20fill='%23000'/%3e%3c/mask%3e%3cg%20fill='%23616161'%20class='jp-icon3'%3e%3cpath%20d='M4.929%206.343%206.343%204.93l12.728%2012.728-1.414%201.414z'/%3e%3ccircle%20cx='12'%20cy='12'%20r='10'%20mask='url(%23cleara)'/%3e%3c/g%3e%3c/svg%3e",closeAllSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='%23616161'%20class='jp-icon3'%3e%3cpath%20d='M16.48%2017.248A7.5%207.5%200%200%200%206.32%207.706a7%207%200%201%201%2010.16%209.542'/%3e%3cpath%20d='M19.16%2014.248A7.5%207.5%200%200%200%209%204.706a7%207%200%201%201%2010.16%209.542M16%2015a7%207%200%201%201-14%200%207%207%200%200%201%2014%200m-4.209-4L13%2012.209%2010.209%2015%2013%2017.791%2011.791%2019%209%2016.209%206.209%2019%205%2017.791%207.791%2015%205%2012.209%206.209%2011%209%2013.791z'/%3e%3c/g%3e%3c/svg%3e",closeSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3ccircle%20cx='12'%20cy='12'%20r='11'%20fill='none'%20class='jp-icon-none%20jp-icon-selectable-inverse%20jp-icon3-hover'/%3e%3cpath%20fill='%23616161'%20d='M19%206.41%2017.59%205%2012%2010.59%206.41%205%205%206.41%2010.59%2012%205%2017.59%206.41%2019%2012%2013.41%2017.59%2019%2019%2017.59%2013.41%2012z'%20class='jp-icon3%20jp-icon-selectable%20jp-icon-accent2-hover'/%3e%3ccircle%20cx='12'%20cy='12'%20r='7'%20fill='none'%20class='jp-icon-none%20jp-icon-busy'/%3e%3c/svg%3e",codeCheckSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M6.59%203.41%202%208l4.59%204.6L8%2011.18%204.82%208%208%204.82zm5.82%200L11%204.82%2014.18%208%2011%2011.18l1.41%201.42L17%208zm9.18%208.18-8.09%208.09L9.83%2016l-1.41%201.41%205.08%205.09L23%2013z'%20class='jp-icon3%20jp-icon-selectable'%20shape-rendering='geometricPrecision'/%3e%3c/svg%3e",codeSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='22'%20height='22'%20viewBox='0%200%2028%2028'%3e%3cpath%20fill='%23616161'%20d='M11.4%2018.6%206.8%2014l4.6-4.6L10%208l-6%206%206%206zm5.2%200%204.6-4.6-4.6-4.6L18%208l6%206-6%206z'%20class='jp-icon3'/%3e%3c/svg%3e",collapseAllSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='%23616161'%20class='jp-icon3'%3e%3cpath%20d='M8%202h12c1%200%202%201%202%202v12c0%201%200%202-2%202V4H6c0-2%201-2%202-2'/%3e%3cpath%20d='M18%208c0-1-1-2-2-2H4C3%206%202%207%202%208v12c0%201%201%202%202%202h12c1%200%202-1%202-2zm-2%200v12H4V8z'/%3e%3cpath%20d='M6%2013v2h8v-2z'/%3e%3c/g%3e%3c/svg%3e",collapseSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%208.5%2010.5'%3e%3cg%20fill='%23BDBDBD'%20class='jp-icon-output'%3e%3cpath%20d='M.019%200h8.458v1.064H.019zM0%209.52h8.491v1.059H0zm4.776-6.608H3.72V1.323h1.056z'/%3e%3cpath%20d='m4.244%205.243-1.06-1.167-1.06-1.167h4.24l-1.06%201.167zm.528%204.014H3.716V7.665h1.056z'/%3e%3cpath%20d='M4.242%205.332%205.302%206.5l1.06%201.167h-4.24L3.182%206.5z'/%3e%3c/g%3e%3c/svg%3e",consoleSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%20200%20200'%3e%3cpath%20fill='%230288D1'%20d='M20%2019.8h160v159.9H20z'%20class='jp-console-icon-background-color%20jp-icon-selectable'/%3e%3cpath%20fill='%23fff'%20d='M105%20127.3h40v12.8h-40zM51.1%2077%2074%2099.9l-23.3%2023.3%2010.5%2010.5%2023.3-23.3L95%2099.9%2084.5%2089.4%2061.6%2066.5z'%20class='jp-console-icon-color%20jp-icon-selectable-inverse'/%3e%3c/svg%3e",copySvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2018%2018'%3e%3cpath%20fill='%23616161'%20d='M11.9%201H3.2c-.8%200-1.5.7-1.5%201.5v10.2h1.5V2.5h8.7zm2.2%202.9h-8c-.8%200-1.5.7-1.5%201.5v10.2c0%20.8.7%201.5%201.5%201.5h8c.8%200%201.5-.7%201.5-1.5V5.4c-.1-.8-.7-1.5-1.5-1.5m0%2011.6h-8V5.4h8z'%20class='jp-icon3'/%3e%3c/svg%3e",copyrightSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M11.88%209.14c1.28.06%201.61%201.15%201.63%201.66h1.79c-.08-1.98-1.49-3.19-3.45-3.19C9.64%207.61%208%209%208%2012.14c0%201.94.93%204.24%203.84%204.24%202.22%200%203.41-1.65%203.44-2.95h-1.79c-.03.59-.45%201.38-1.63%201.44-1.31-.04-1.86-1.06-1.86-2.73%200-2.89%201.28-2.98%201.88-3M12%202C6.48%202%202%206.48%202%2012s4.48%2010%2010%2010%2010-4.48%2010-10S17.52%202%2012%202m0%2018c-4.41%200-8-3.59-8-8s3.59-8%208-8%208%203.59%208%208-3.59%208-8%208'%20class='jp-icon3'/%3e%3c/svg%3e",cutSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M9.64%207.64c.23-.5.36-1.05.36-1.64%200-2.21-1.79-4-4-4S2%203.79%202%206s1.79%204%204%204c.59%200%201.14-.13%201.64-.36L10%2012l-2.36%202.36C7.14%2014.13%206.59%2014%206%2014c-2.21%200-4%201.79-4%204s1.79%204%204%204%204-1.79%204-4c0-.59-.13-1.14-.36-1.64L12%2014l7%207h3v-1zM6%208c-1.1%200-2-.89-2-2s.9-2%202-2%202%20.89%202%202-.9%202-2%202m0%2012c-1.1%200-2-.89-2-2s.9-2%202-2%202%20.89%202%202-.9%202-2%202m6-7.5c-.28%200-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5M19%203l-6%206%202%202%207-7V3z'%20class='jp-icon3'/%3e%3c/svg%3e",deleteSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23626262'%20d='M6%2019c0%201.1.9%202%202%202h8c1.1%200%202-.9%202-2V7H6zM19%204h-3.5l-1-1h-5l-1%201H5v2h14z'%20class='jp-icon3'/%3e%3c/svg%3e",dockBottomSvgstr="data:image/svg+xml,%3csvg%20width='16'%20version='1.1'%20viewBox='0%200%2022%2022'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20class='jp-icon3'%20d='m19.8%2019.8v-17.6h-17.6v17.6zm-15.408-2.2v-3.8027h13.208v3.8027zm13.208-5.5301h-13.218v-7.6699h13.218z'%20fill='%23616161'/%3e%3c/svg%3e",dockLeftSvgstr="data:image/svg+xml,%3csvg%20width='16'%20version='1.1'%20viewBox='0%200%2022%2022'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20class='jp-icon3'%20d='m2.2%2019.8h17.6v-17.6h-17.6zm2.2-15.408h3.8027v13.208h-3.8027zm5.5301%2013.208v-13.218h7.6699v13.218z'%20fill='%23616161'/%3e%3c/svg%3e",dockRightSvgstr="data:image/svg+xml,%3csvg%20width='16'%20version='1.1'%20viewBox='0%200%2022%2022'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20class='jp-icon3'%20d='m19.8%202.2h-17.6v17.6h17.6zm-2.2%2015.408h-3.8027v-13.208h3.8027zm-5.5301-13.208v13.218h-7.6699v-13.218z'%20fill='%23616161'/%3e%3c/svg%3e",dockTopSvgstr="data:image/svg+xml,%3csvg%20width='16'%20version='1.1'%20viewBox='0%200%2022%2022'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20class='jp-icon3'%20d='m2.2%202.2v17.6h17.6v-17.6zm15.408%202.2v3.8027h-13.208v-3.8027zm-13.208%205.5301h13.218v7.6699h-13.218z'%20fill='%23616161'/%3e%3c/svg%3e",dotsSvgstr="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='16'%20version='1.1'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20class='jp-icon3'%20transform='rotate(90,12,12)'%20fill='%23616161'%3e%3ccircle%20cx='5'%20cy='12'%20r='2'/%3e%3ccircle%20cx='12'%20cy='12'%20r='2'/%3e%3ccircle%20cx='19'%20cy='12'%20r='2'/%3e%3c/g%3e%3c/svg%3e",downloadSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M19%209h-4V3H9v6H5l7%207zM5%2018v2h14v-2z'%20class='jp-icon3'/%3e%3c/svg%3e",duplicateSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='14'%20height='14'%20fill='none'%20viewBox='0%200%2014%2014'%3e%3cpath%20fill='%23616161'%20fill-rule='evenodd'%20d='M2.8.875h6.096c.305%200%20.554.264.554.587s-.25.587-.554.587H3.354c-.305%200-.554.264-.554.587V9.68c0%20.322-.25.587-.554.587s-.554-.264-.554-.587V2.049c0-.646.498-1.174%201.108-1.174M5.367%2011.9V4.55h5.716v7.35zM4.142%204.142c0-.451.365-.817.816-.817h6.534c.45%200%20.816.366.816.817v8.166a.817.817%200%200%201-.816.817H4.958a.817.817%200%200%201-.816-.817z'%20class='jp-icon3'%20clip-rule='evenodd'/%3e%3cpath%20fill='%23616161'%20stroke='%23616161'%20stroke-width='.5'%20d='M9.436%208.265H8.364v1.071a.215.215%200%200%201-.214.215.215.215%200%200%201-.214-.215v-1.07H6.864a.215.215%200%200%201-.214-.215c0-.118.096-.215.214-.215h1.072v-1.07a.214.214%200%201%201%20.428-.001v1.072h1.072c.118%200%20.214.096.214.214a.215.215%200%200%201-.214.214Z'%20class='jp-icon3'/%3e%3c/svg%3e",editSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M3%2017.25V21h3.75L17.81%209.94l-3.75-3.75zM20.71%207.04a.996.996%200%200%200%200-1.41l-2.34-2.34a.996.996%200%200%200-1.41%200l-1.83%201.83%203.75%203.75z'%20class='jp-icon3'/%3e%3c/svg%3e",ellipsesSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='%23616161'%20class='jp-icon3'%3e%3ccircle%20cx='5'%20cy='12'%20r='2'/%3e%3ccircle%20cx='12'%20cy='12'%20r='2'/%3e%3ccircle%20cx='19'%20cy='12'%20r='2'/%3e%3c/g%3e%3c/svg%3e",errorSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='%23616161'%20class='jp-icon3'%3e%3ccircle%20cx='12'%20cy='19'%20r='2'/%3e%3cpath%20d='M10%203h4v12h-4z'/%3e%3c/g%3e%3c/svg%3e",exceptionsSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='%23616161'%20class='jp-icon3'%3e%3cpath%20d='m12.039.5-.753%201.506L.5%2023.576l23.082-.001zm.001%204.017%208.528%2017.05-17.055.001z'/%3e%3cpath%20d='M11%208h2v10h-2zm0%2011h2v2h-2z'/%3e%3c/g%3e%3c/svg%3e",expandAllSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='%23616161'%20class='jp-icon3'%3e%3cpath%20d='M8%202h12c1%200%202%201%202%202v12c0%201%200%202-2%202V4H6c0-2%201-2%202-2'/%3e%3cpath%20d='M18%208c0-1-1-2-2-2H4C3%206%202%207%202%208v12c0%201%201%202%202%202h12c1%200%202-1%202-2zm-2%200v12H4V8z'/%3e%3cpath%20d='M11%2010H9v3H6v2h3v3h2v-3h3v-2h-3z'/%3e%3c/g%3e%3c/svg%3e",expandSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%208.5%2010.5'%3e%3cg%20fill='%23BDBDBD'%20class='jp-icon-output'%3e%3cpath%20d='M.019%200h8.458v1.064H.019zM0%209.521h8.491v1.059H0zm3.712-5.822h1.056v1.589H3.712z'/%3e%3cpath%20d='m4.244%201.368%201.06%201.167%201.06%201.167h-4.24l1.06-1.167zm-.532%203.92h1.056V6.88H3.712z'/%3e%3cpath%20d='m4.242%209.213-1.06-1.167-1.06-1.167h4.24l-1.06%201.167z'/%3e%3c/g%3e%3c/svg%3e",extensionSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M20.5%2011H19V7c0-1.1-.9-2-2-2h-4V3.5a2.5%202.5%200%200%200-5%200V5H4c-1.1%200-1.99.9-1.99%202v3.8H3.5c1.49%200%202.7%201.21%202.7%202.7s-1.21%202.7-2.7%202.7H2V20c0%201.1.9%202%202%202h3.8v-1.5c0-1.49%201.21-2.7%202.7-2.7s2.7%201.21%202.7%202.7V22H17c1.1%200%202-.9%202-2v-4h1.5a2.5%202.5%200%200%200%200-5'%20class='jp-icon3'/%3e%3c/svg%3e",fastForwardSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='m4%2018%208.5-6L4%206zm9-12v12l8.5-6z'%20class='jp-icon3'/%3e%3c/svg%3e",fileSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2022%2022'%3e%3cpath%20fill='%23616161'%20d='m19.3%208.2-5.5-5.5c-.3-.3-.7-.5-1.2-.5H3.9c-.8.1-1.6.9-1.6%201.8v14.1c0%20.9.7%201.6%201.6%201.6h14.2c.9%200%201.6-.7%201.6-1.6V9.4c.1-.5-.1-.9-.4-1.2m-5.8-3.3%203.4%203.6h-3.4zm3.9%2012.7H4.7c-.1%200-.2%200-.2-.2V4.7c0-.2.1-.3.2-.3h7.2v4.4s0%20.8.3%201.1%201.1.3%201.1.3h4.3v7.2s-.1.2-.2.2'%20class='jp-icon3%20jp-icon-selectable'/%3e%3c/svg%3e",fileUploadSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M9%2016h6v-6h4l-7-7-7%207h4zm-4%202h14v2H5z'%20class='jp-icon3'/%3e%3c/svg%3e",filterDotSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23FFF'%20d='M14%2012v7.88c.04.3-.06.62-.29.83a.996.996%200%200%201-1.41%200l-2.01-2.01a.99.99%200%200%201-.29-.83V12h-.03L4.21%204.62a1%201%200%200%201%20.17-1.4c.19-.14.4-.22.62-.22h14c.22%200%20.43.08.62.22a1%201%200%200%201%20.17%201.4L14.03%2012z'%20class='jp-icon3'/%3e%3ccircle%20cx='18'%20cy='17'%20r='3'%20fill='%23FFF'%20class='jp-icon-dot'/%3e%3c/svg%3e",filterListSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M10%2018h4v-2h-4zM3%206v2h18V6zm3%207h12v-2H6z'%20class='jp-icon3'/%3e%3c/svg%3e",filterSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23FFF'%20d='M14%2012v7.88c.04.3-.06.62-.29.83a.996.996%200%200%201-1.41%200l-2.01-2.01a.99.99%200%200%201-.29-.83V12h-.03L4.21%204.62a1%201%200%200%201%20.17-1.4c.19-.14.4-.22.62-.22h14c.22%200%20.43.08.62.22a1%201%200%200%201%20.17%201.4L14.03%2012z'%20class='jp-icon3'/%3e%3c/svg%3e",folderFavoriteSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='%23000'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M20%206h-8l-2-2H4c-1.1%200-2%20.9-2%202v12c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V8c0-1.1-.9-2-2-2m-2.06%2011L15%2015.28%2012.06%2017l.78-3.33-2.59-2.24%203.41-.29L15%208l1.34%203.14%203.41.29-2.59%202.24z'%20class='jp-icon3%20jp-icon-selectable'/%3e%3c/svg%3e",folderSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M10%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V8c0-1.1-.9-2-2-2h-8z'%20class='jp-icon3%20jp-icon-selectable'/%3e%3c/svg%3e",historySvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M13.5%208H12v5l4.28%202.54.72-1.21-3.5-2.08zM13%203a9%209%200%200%200-9%209H1l3.96%204.03L9%2012H6a7%207%200%200%201%207-7%207%207%200%200%201%207%207%207%207%200%200%201-7%207c-1.93%200-3.68-.79-4.94-2.06l-1.42%201.42A8.9%208.9%200%200%200%2013%2021a9%209%200%200%200%209-9%209%209%200%200%200-9-9'%20class='jp-icon3'/%3e%3c/svg%3e",homeSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='%23000'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M10%2020v-6h4v6h5v-8h3L12%203%202%2012h3v8z'%20class='jp-icon3%20jp-icon-selectable'/%3e%3c/svg%3e",html5Svgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%20512%20512'%3e%3cpath%20fill='%23000'%20d='M108.4%200h23v22.8h21.2V0h23v69h-23V46h-21v23h-23.2M206%2023h-20.3V0h63.7v23H229v46h-23m53.5-69h24.1l14.8%2024.3L313.2%200h24.1v69h-23V34.8l-16.1%2024.8-16.1-24.8V69h-22.6m89.2-69h23v46.2h32.6V69h-55.6'%20class='jp-icon0%20jp-icon-selectable'/%3e%3cpath%20fill='%23e44d26'%20d='m107.6%20471-33-370.4h362.8l-33%20370.2L255.7%20512'%20class='jp-icon-selectable'/%3e%3cpath%20fill='%23f16529'%20d='M256%20480.5V131h148.3L376%20447'%20class='jp-icon-selectable'/%3e%3cpath%20fill='%23ebebeb'%20d='M142%20176.3h114v45.4h-64.2l4.2%2046.5h60v45.3H154.4m2%2022.8H202l3.2%2036.3%2050.8%2013.6v47.4l-93.2-26'%20class='jp-icon-selectable-inverse'/%3e%3cpath%20fill='%23fff'%20d='M369.6%20176.3H255.8v45.4h109.6m-4.1%2046.5H255.8v45.4h56l-5.3%2059-50.7%2013.6v47.2l93-25.8'%20class='jp-icon-selectable-inverse'/%3e%3c/svg%3e",imageSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2022%2022'%3e%3cpath%20fill='%23FFF'%20d='M2.2%202.2h17.5v17.5H2.2z'%20class='jp-icon-brand4%20jp-icon-selectable-inverse'/%3e%3cpath%20fill='%233F51B5'%20d='M2.2%202.2v17.5h17.5l.1-17.5zm12.1%202.2c1.2%200%202.2%201%202.2%202.2s-1%202.2-2.2%202.2-2.2-1-2.2-2.2%201-2.2%202.2-2.2M4.4%2017.6l3.3-8.8%203.3%206.6%202.2-3.2%204.4%205.4z'%20class='jp-icon-brand0%20jp-icon-selectable'/%3e%3c/svg%3e",infoSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2050.978%2050.978'%3e%3cg%20fill='%23616161'%20class='jp-icon3'%3e%3cpath%20d='M43.52%207.458C38.711%202.648%2032.307%200%2025.489%200%2018.67%200%2012.266%202.648%207.458%207.458c-9.943%209.941-9.943%2026.119%200%2036.062%204.809%204.809%2011.212%207.456%2018.031%207.458h.002c6.816%200%2013.221-2.648%2018.029-7.458%204.809-4.809%207.457-11.212%207.457-18.03%200-6.82-2.649-13.224-7.457-18.032m-1.414%2034.647c-4.432%204.431-10.332%206.872-16.615%206.872h-.002c-6.285-.001-12.187-2.441-16.617-6.872-9.162-9.163-9.162-24.071%200-33.233C13.303%204.44%2019.204%202%2025.489%202c6.284%200%2012.186%202.44%2016.617%206.872%204.431%204.431%206.871%2010.332%206.871%2016.617%200%206.283-2.441%2012.186-6.871%2016.616'/%3e%3cpath%20d='M23.578%2032.218q-.034-2.602.496-3.972t2.272-3.253q.702-.805%201.367-1.575.939-1.13%201.436-2.175.496-1.061.495-2.5%200-1.643-.779-2.979-.848-1.319-2.806-1.369-2.703.085-3.55%201.832a5.3%205.3%200%200%200-.607%201.814%2011.3%2011.3%200%200%200-.207%202.174h-2.937q-.136-3.312%201.493-5.719%201.593-2.459%205.378-2.527%203.24.034%205.141%201.758%201.918%201.74%201.95%204.811%200%201.712-.41%202.911a7.6%207.6%200%200%201-1.268%202.243%2022%2022%200%200%201-1.73%202.002%2034%2034%200%200%200-1.987%202.346%205.2%205.2%200%200%200-.565%201.199q-.24%201.438-.171%202.979zm0%206.002v-3.484h3.076v3.484z'/%3e%3c/g%3e%3c/svg%3e",inspectorSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M20%204H4c-1.1%200-1.99.9-1.99%202L2%2018c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V6c0-1.1-.9-2-2-2m-5%2014H4v-4h11zm0-5H4V9h11zm5%205h-4V9h4z'%20class='jp-inspector-icon-color%20jp-icon-selectable'/%3e%3c/svg%3e",jsonSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2022%2022'%3e%3cg%20fill='%23F9A825'%20class='jp-json-icon-color%20jp-icon-selectable'%3e%3cpath%20d='M20.2%2011.8c-1.6%200-1.7.5-1.7%201%200%20.4.1.9.1%201.3.1.5.1.9.1%201.3%200%201.7-1.4%202.3-3.5%202.3h-.9v-1.9h.5c1.1%200%201.4%200%201.4-.8%200-.3%200-.6-.1-1%200-.4-.1-.8-.1-1.2%200-1.3%200-1.8%201.3-2-1.3-.2-1.3-.7-1.3-2%200-.4.1-.8.1-1.2.1-.4.1-.7.1-1%200-.8-.4-.7-1.4-.8h-.5V4.1h.9c2.2%200%203.5.7%203.5%202.3%200%20.4-.1.9-.1%201.3-.1.5-.1.9-.1%201.3%200%20.5.2%201%201.7%201zM1.8%2010.1c1.6%200%201.7-.5%201.7-1%200-.4-.1-.9-.1-1.3-.1-.5-.1-.9-.1-1.3%200-1.6%201.4-2.3%203.5-2.3h.9v1.9h-.5c-1%200-1.4%200-1.4.8%200%20.3%200%20.6.1%201%200%20.2.1.6.1%201%200%201.3%200%201.8-1.3%202C6%2011.2%206%2011.7%206%2013c0%20.4-.1.8-.1%201.2-.1.3-.1.7-.1%201%200%20.8.3.8%201.4.8h.5v1.9h-.9c-2.1%200-3.5-.6-3.5-2.3%200-.4.1-.9.1-1.3.1-.5.1-.9.1-1.3%200-.5-.2-1-1.7-1z'/%3e%3ccircle%20cx='11'%20cy='13.8'%20r='2.1'/%3e%3ccircle%20cx='11'%20cy='8.2'%20r='2.1'/%3e%3c/g%3e%3c/svg%3e",juliaSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%20325%20300'%3e%3cpath%20fill='%23cb3c33'%20d='M150.898%20225c0%2041.422-33.578%2075-75%2075s-75-33.578-75-75%2033.579-75%2075-75%2075%2033.578%2075%2075'%20class='jp-brand0%20jp-icon-selectable'/%3e%3cpath%20fill='%23389826'%20d='M237.5%2075c0%2041.422-33.578%2075-75%2075s-75-33.578-75-75%2033.578-75%2075-75%2075%2033.578%2075%2075'%20class='jp-brand0%20jp-icon-selectable'/%3e%3cpath%20fill='%239558b2'%20d='M324.102%20225c0%2041.422-33.579%2075-75%2075s-75-33.578-75-75%2033.578-75%2075-75%2075%2033.578%2075%2075'%20class='jp-brand0%20jp-icon-selectable'/%3e%3c/svg%3e",jupyterFaviconSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='152'%20height='165'%20version='1.1'%20viewBox='0%200%20152%20165'%3e%3cpath%20fill='%23F37726'%20d='M76.021%20140.163c-32.64%200-61.145-11.927-75.942-29.58%205.51%2015.84%2015.781%2029.567%2029.39%2039.278a80.17%2080.17%200%200%200%2046.57%2014.929%2080.17%2080.17%200%200%200%2046.57-14.929c13.61-9.711%2023.88-23.437%2029.391-39.278-14.833%2017.653-43.338%2029.58-75.979%2029.58m-.005-114.832c32.64%200%2061.146%2011.927%2075.943%2029.58a80.9%2080.9%200%200%200-29.391-39.278A80.16%2080.16%200%200%200%2075.998.705a80.16%2080.16%200%200%200-46.57%2014.928A80.9%2080.9%200%200%200%20.038%2054.912c14.832-17.617%2043.338-29.58%2075.978-29.58'%20class='jp-jupyter-icon-color'/%3e%3c/svg%3e",jupyterSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='39'%20height='51'%20viewBox='0%200%2039%2051'%3e%3cpath%20fill='%23F37726'%20d='M20.005%2038.114c-7.85%200-14.706-2.876-18.265-7.134a19.5%2019.5%200%200%200%207.069%209.473%2019.24%2019.24%200%200%200%2011.2%203.6c4.013%200%207.927-1.258%2011.2-3.6a19.5%2019.5%200%200%200%207.069-9.473c-3.567%204.258-10.423%207.134-18.273%207.134m-.002-27.694c7.85%200%2014.706%202.876%2018.265%207.133a19.5%2019.5%200%200%200-7.069-9.473A19.24%2019.24%200%200%200%2020%204.48a19.24%2019.24%200%200%200-11.2%203.6%2019.5%2019.5%200%200%200-7.069%209.473c3.567-4.248%2010.423-7.134%2018.273-7.134'%20class='jp-jupyter-icon-color'/%3e%3cpath%20fill='%23616161'%20d='M37.194%203.154a3%203%200%200%201-.426%201.672%202.96%202.96%200%200%201-1.275%201.153%202.93%202.93%200%200%201-3.238-.505%203%203%200%200%201-.776-3.21c.2-.553.558-1.033%201.029-1.38a2.93%202.93%200%200%201%203.733.209c.576.532.919%201.274.953%202.061M9.228%2046.393a3.77%203.77%200%200%201-.536%202.11%203.73%203.73%200%200%201-1.608%201.452%203.69%203.69%200%200%201-4.082-.638%203.75%203.75%200%200%201-1.097-1.875%203.8%203.8%200%200%201%20.122-2.173%203.74%203.74%200%200%201%201.299-1.739%203.696%203.696%200%200%201%204.704.268%203.76%203.76%200%200%201%201.198%202.595M2.635%209.456a2.17%202.17%200%200%201-1.227-.318%202.2%202.2%200%200%201-.845-.951A2.22%202.22%200%200%201%20.935%205.77a2.16%202.16%200%200%201%202.356-.577c.405.15.757.418%201.011.77a2.21%202.21%200%200%201-.156%202.783%202.17%202.17%200%200%201-1.511.71'%20class='jp-icon3'/%3e%3c/svg%3e",jupyterlabWordmarkSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='200'%20viewBox='0%200%201860.8%20475'%3e%3cpath%20fill='%234E4E4E'%20d='M53.324%20293.087c0%2048.7-3.7%2064.7-13.6%2076.4-10.8%2010-25%2015.5-39.7%2015.5l3.7%2029c22.8.3%2044.8-7.9%2061.9-23.1%2017.8-18.5%2024-44.1%2024-83.3v-184.3h-36.4v170.1zm271.42-22.179c0%2021%200%2039.5%201.7%2055.4h-31.8l-2.1-33.3h-.8c-6.7%2011.6-16.4%2021.3-28%2027.9s-24.8%2010-38.2%209.8c-31.4%200-69-17.7-69-89v-118.8h36.4v112.7c0%2038.7%2011.6%2064.7%2044.6%2064.7%2010.3-.2%2020.4-3.5%2028.9-9.4s15.1-14.3%2018.9-23.9c2.2-6.1%203.3-12.5%203.3-18.9v-125h36.4v147.8zm68.512-81.525c0-26-.8-47-1.7-66.7h32.7l1.7%2034.8h.8c7.1-12.5%2017.5-22.8%2030.1-29.7%2012.5-7%2026.7-10.3%2041-9.8%2048.3%200%2084.7%2041.7%2084.7%20103.3%200%2073.1-43.7%20109.2-91%20109.2-12.1.5-24.2-2.2-35-7.8s-19.9-13.9-26.6-24.2h-.8v110.5h-36v-220zm36%2054.2c.1%205.1.6%2010.1%201.7%2015.1%203%2012.3%209.9%2023.3%2019.8%2031.1s22.1%2012.1%2034.7%2012.1c38.5%200%2060.7-31.9%2060.7-78.5%200-40.7-21.1-75.6-59.5-75.6-12.9.4-25.3%205.1-35.3%2013.4-9.9%208.3-16.9%2019.7-19.6%2032.4-1.5%204.9-2.3%2010-2.5%2015.1zm217.572-120.485%2043.7%20120.1c4.5%2013.4%209.5%2029.4%2012.8%2041.7h.8c3.7-12.2%207.9-27.7%2012.8-42.4l39.7-119.2h38.5l-54.4%20144.8c-26%2069.7-43.7%20105.4-68.6%20127.2-12.5%2011.7-27.9%2020-44.6%2023.9l-9.1-31.1c11.7-3.9%2022.5-10.1%2031.8-18.1%2013.2-11.1%2023.7-25.2%2030.6-41.2%201.5-2.8%202.5-5.7%202.9-8.8-.3-3.3-1.2-6.6-2.5-9.7l-73.8-187.1h39.7zM890.649%2064.65v58.3h52v28.2h-52v109.5c0%2025%207%2039.5%2027.3%2039.5%207.1.1%2014.2-.7%2021.1-2.5l1.7%2027.7c-10.3%203.7-21.3%205.4-32.2%205-7.3.4-14.6-.7-21.3-3.4-6.8-2.7-12.9-6.8-17.9-12.1-10.3-10.9-14.1-29-14.1-52.9v-110.8h-31v-28.2h31v-48.7zm119.111%20166.711c.8%2050%2032.2%2070.6%2068.6%2070.6%2019%20.6%2037.9-3%2055.3-10.5l6.2%2026.4c-20.9%208.9-43.5%2013.1-66.2%2012.6-61.5%200-98.3-41.2-98.3-102.5%200-61.4%2035.5-109.6%2093.7-109.6%2065.2%200%2082.7%2058.3%2082.7%2095.7-.1%205.8-.5%2011.5-1.2%2017.2h-140.8zm106.6-26.4c.4-23.5-9.5-60.1-50.4-60.1-36.8%200-52.8%2034.4-55.7%2060.1zm88.317-18.505c0-23.9-.4-44.5-1.7-63.4h31.8l1.2%2039.9h1.7c9.1-27.3%2031-44.5%2055.3-44.5%203.5-.1%207%20.4%2010.3%201.2v34.8c-4.1-.9-8.2-1.3-12.4-1.2-25.6%200-43.7%2019.7-48.7%2047.4-1%205.7-1.6%2011.5-1.7%2017.2v108.3h-36v-139.7z'%20class='jp-icon2'/%3e%3cpath%20fill='%23F37726'%20d='M1352.3%20326.2h37V28h-37zm252.5%200c-2.5-13.9-3.4-31.1-3.4-48.7v-76c0-40.7-15.1-83.1-77.3-83.1-25.6%200-50%207.1-66.8%2018.1l8.4%2024.4c14.3-9.2%2034-15.1%2053-15.1%2041.6%200%2046.2%2030.2%2046.2%2047v4.2c-78.6-.4-122.3%2026.5-122.3%2075.6%200%2029.4%2021%2058.4%2062.2%2058.4%2029%200%2050.9-14.3%2062.2-30.2h1.3l2.9%2025.6h33.6zm-39.1-68.5c0%203.8-.8%208-2.1%2011.8-5.9%2017.2-22.7%2034-49.2%2034-18.9%200-34.9-11.3-34.9-35.3%200-39.5%2045.8-46.6%2086.2-45.8zm132.8%2068.5%201.7-33.6h1.3c15.1%2026.9%2038.7%2038.2%2068.1%2038.2%2045.4%200%2091.2-36.1%2091.2-108.8.4-61.7-35.3-103.7-85.7-103.7-32.8%200-56.3%2014.7-69.3%2037.4h-.8V28h-36.6v245.7c0%2018.1-.8%2038.6-1.7%2052.5zm6.3-118c0-5.9%201.3-10.9%202.1-15.1%207.6-28.1%2031.1-45.4%2056.3-45.4%2039.5%200%2060.5%2034.9%2060.5%2075.6%200%2046.6-23.1%2078.1-61.8%2078.1-26.9%200-48.3-17.6-55.5-43.3-.8-4.2-1.7-8.8-1.7-13.4v-36.5z'%20class='jp-jupyter-icon-color'/%3e%3c/svg%3e",kernelSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M15%209H9v6h6zm-2%204h-2v-2h2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1%200-2%20.9-2%202v2H3v2h2v2H3v2h2v2c0%201.1.9%202%202%202h2v2h2v-2h2v2h2v-2h2c1.1%200%202-.9%202-2v-2h2v-2h-2v-2zm-4%206H7V7h10z'%20class='jp-icon2'/%3e%3c/svg%3e",keyboardSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M20%205H4c-1.1%200-1.99.9-1.99%202L2%2017c0%201.1.9%202%202%202h16c1.1%200%202-.9%202-2V7c0-1.1-.9-2-2-2m-9%203h2v2h-2zm0%203h2v2h-2zM8%208h2v2H8zm0%203h2v2H8zm-1%202H5v-2h2zm0-3H5V8h2zm9%207H8v-2h8zm0-4h-2v-2h2zm0-3h-2V8h2zm3%203h-2v-2h2zm0-3h-2V8h2z'%20class='jp-icon3%20jp-icon-selectable'/%3e%3c/svg%3e",launchSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20viewBox='0%200%2032%2032'%3e%3cg%20fill='%23616161'%20class='jp-icon3%20jp-icon-selectable'%3e%3cpath%20d='M26%2028H6a2.003%202.003%200%200%201-2-2V6a2.003%202.003%200%200%201%202-2h10v2H6v20h20V16h2v10a2.003%202.003%200%200%201-2%202'/%3e%3cpath%20d='M20%202v2h6.586L18%2012.586%2019.414%2014%2028%205.414V12h2V2z'/%3e%3c/g%3e%3c/svg%3e",launcherSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M19%2019H5V5h7V3H5a2%202%200%200%200-2%202v14a2%202%200%200%200%202%202h14c1.1%200%202-.9%202-2v-7h-2zM14%203v2h3.59l-9.83%209.83%201.41%201.41L19%206.41V10h2V3z'%20class='jp-icon3%20jp-icon-selectable'/%3e%3c/svg%3e",lineFormSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23fff'%20d='M5.88%204.12%2013.76%2012l-7.88%207.88L8%2022l10-10L8%202z'/%3e%3c/svg%3e",linkSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M3.9%2012c0-1.71%201.39-3.1%203.1-3.1h4V7H7c-2.76%200-5%202.24-5%205s2.24%205%205%205h4v-1.9H7c-1.71%200-3.1-1.39-3.1-3.1M8%2013h8v-2H8zm9-6h-4v1.9h4c1.71%200%203.1%201.39%203.1%203.1s-1.39%203.1-3.1%203.1h-4V17h4c2.76%200%205-2.24%205-5s-2.24-5-5-5'%20class='jp-icon3'/%3e%3c/svg%3e",listSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M19%205v14H5V5zm1.1-2H3.9c-.5%200-.9.4-.9.9v16.2c0%20.4.4.9.9.9h16.2c.4%200%20.9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11%207h6v2h-6zm0%204h6v2h-6zm0%204h6v2h-6zM7%207h2v2H7zm0%204h2v2H7zm0%204h2v2H7z'%20class='jp-icon2%20jp-icon-selectable'/%3e%3c/svg%3e",lockSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2023'%3e%3cpath%20fill='%23333'%20d='M12%2017a2%202%200%200%200%202-2%202%202%200%200%200-2-2%202%202%200%200%200-2%202%202%202%200%200%200%202%202m6-9a2%202%200%200%201%202%202v10a2%202%200%200%201-2%202H6a2%202%200%200%201-2-2V10a2%202%200%200%201%202-2h1V6a5%205%200%200%201%205-5%205%205%200%200%201%205%205v2zm-6-5a3%203%200%200%200-3%203v2h6V6a3%203%200%200%200-3-3'%20class='jp-icon4'/%3e%3c/svg%3e",markdownSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2022%2022'%3e%3cpath%20fill='%237B1FA2'%20d='M5%2014.9h12l-6.1%206zm9.4-6.8c0-1.3-.1-2.9-.1-4.5-.4%201.4-.9%202.9-1.3%204.3l-1.3%204.3h-2L8.5%207.9c-.4-1.3-.7-2.9-1-4.3-.1%201.6-.1%203.2-.2%204.6L7%2012.4H4.8l.7-11h3.3L10%205c.4%201.2.7%202.7%201%203.9.3-1.2.7-2.6%201-3.9l1.2-3.7h3.3l.6%2011h-2.4z'%20class='jp-icon-contrast0%20jp-icon-selectable'/%3e%3c/svg%3e",mermaidSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20version='1.1'%20viewBox='0%200%20491%20675'%3e%3cpath%20fill='%23ff3670'%20d='M85%2092c-46%200-85%2037-85%2085v321c0%2046%2037%2085%2085%2085h321c46%200%2085-37%2085-85V177c0-46-37-85-85-85zm-2%20111c72-3.1%20139%2041%20162%20109%2025-67%2091-112%20162-109%202.4%2057-25%20111-72%20144-24%2016-39%2044-39%2074v51H192v-51c.08-29-15-57-39-74-47-32-75-86-72-144z'%20class='jp-icon-contrast2%20jp-icon-selectable'/%3e%3c/svg%3e",moveDownSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='14'%20height='14'%20fill='none'%20viewBox='0%200%2014%2014'%3e%3cpath%20fill='%23616161'%20d='M12.471%207.529a.748.748%200%200%200-1.057-1.058L7.75%2010.127V1.75a.75.75%200%200%200-1.5%200v8.378l-3.653-3.66a.753.753%200%201%200-1.065%201.064l4.76%204.76a1%201%200%200%200%201.415%200z'%20class='jp-icon3'/%3e%3c/svg%3e",moveUpSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='14'%20height='14'%20fill='none'%20viewBox='0%200%2014%2014'%3e%3cpath%20fill='%23616161'%20d='M1.529%206.471a.748.748%200%200%200%201.057%201.058L6.25%203.873v8.377a.75.75%200%200%200%201.5%200V3.873l3.653%203.659a.753.753%200%201%200%201.065-1.064l-4.76-4.76a1%201%200%200%200-1.415%200z'%20class='jp-icon3'/%3e%3c/svg%3e",newFolderSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M20%206h-8l-2-2H4c-1.11%200-1.99.89-1.99%202L2%2018c0%201.11.89%202%202%202h16c1.11%200%202-.89%202-2V8c0-1.11-.89-2-2-2m-1%208h-3v3h-2v-3h-3v-2h3V9h2v3h3z'%20class='jp-icon3'/%3e%3c/svg%3e",notTrustedSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20fill='none'%20viewBox='0%200%2025%2025'%3e%3cpath%20stroke='%23333'%20stroke-width='2'%20d='M4.86%2014.44c-1.034-2.67-.996-5.382-.61-7.24%201.232-.267%202.83-.797%204.351-1.355a92%2092%200%200%200%204.387-1.75%2068%2068%200%200%200%204.23%201.748c1.532.57%203.182%201.11%204.536%201.37.382%201.859.417%204.564-.615%207.228-1.109%202.862-3.472%205.743-8.139%207.494-4.667-1.75-7.03-4.632-8.14-7.494Zm11.824-5.12-7.368%207.365m7.368-.001L9.316%209.319'%20class='jp-icon2'/%3e%3c/svg%3e",notebookSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2022%2022'%3e%3cg%20fill='%23EF6C00'%20class='jp-notebook-icon-color%20jp-icon-selectable'%3e%3cpath%20d='M18.7%203.3v15.4H3.3V3.3zm1.5-1.5H1.8v18.3h18.3z'/%3e%3cpath%20d='m16.5%2016.5-5.4-4.3-5.6%204.3v-11h11z'/%3e%3c/g%3e%3c/svg%3e",numberingSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='22'%20height='22'%20viewBox='0%200%2028%2028'%3e%3cpath%20fill='%23616161'%20d='M4%2019h2v.5H5v1h1v.5H4v1h3v-4H4zm1-9h1V6H4v1h1zm-1%203h1.8L4%2015.1v.9h3v-1H5.2L7%2012.9V12H4zm5-6v2h14V7zm0%2014h14v-2H9zm0-6h14v-2H9z'%20class='jp-icon3'/%3e%3c/svg%3e",offlineBoltSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M12%202.02c-5.51%200-9.98%204.47-9.98%209.98s4.47%209.98%209.98%209.98%209.98-4.47%209.98-9.98S17.51%202.02%2012%202.02M11.48%2020v-6.26H8L13%204v6.26h3.35z'%20class='jp-icon3'/%3e%3c/svg%3e",openKernelSourceSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M5%202h10l5%205v13a2%202%200%200%201-2%202H5a2%202%200%200%201-2-2v-6h1v2l4-3-4-3v2H3V4a2%202%200%200%201%202-2m7%2016h4v-2h-4zm0-4h6v-2h-6zm0-4h6V8h-6zm-2%204a1%201%200%201%200%200-2%201%201%200%200%200%200%202m-7-2v2H1v-2z'%20class='jp-icon3'/%3e%3c/svg%3e",paletteSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cg%20fill='%23616161'%20class='jp-icon3'%3e%3cpath%20d='M18%2013v7H4V6h5.02c.05-.71.22-1.38.48-2H4c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h14c1.1%200%202-.9%202-2v-5zm1.3-4.11c.44-.7.7-1.51.7-2.39C20%204.01%2017.99%202%2015.5%202S11%204.01%2011%206.5s2.01%204.5%204.49%204.5c.88%200%201.7-.26%202.39-.7L21%2013.42%2022.42%2012zM15.5%209a2.5%202.5%200%200%201%200-5%202.5%202.5%200%200%201%200%205'/%3e%3cpath%20fill-rule='evenodd'%20d='M4%206h5.019a6.5%206.5%200%200%200%203.015%206H9v2h7v-1.019c.57-.043%201.12-.16%201.64-.341L18%2013v7H4zm4%202H6v2h2zm-2%204h2v2H6zm2%204H6v2h2zm1%200h7v2H9z'%20clip-rule='evenodd'/%3e%3c/g%3e%3c/svg%3e",pasteSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M19%202h-4.18C14.4.84%2013.3%200%2012%200S9.6.84%209.18%202H5c-1.1%200-2%20.9-2%202v16c0%201.1.9%202%202%202h14c1.1%200%202-.9%202-2V4c0-1.1-.9-2-2-2m-7%200c.55%200%201%20.45%201%201s-.45%201-1%201-1-.45-1-1%20.45-1%201-1m7%2018H5V4h2v3h10V4h2z'%20class='jp-icon3'/%3e%3c/svg%3e",pauseSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M7%206h4v12H7Zm6%200h4v12h-4z'%20class='jp-icon3'/%3e%3c/svg%3e",pdfSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2022%2022'%3e%3cpath%20fill='%23FF2A2A'%20d='m17.933%2013.667%203.987%203.987-1.117%201.117-2.51-2.51-1.066%201.067%202.36%202.36-1.117%201.117-2.36-2.36-2.43%202.429-1.477-1.478zm-6.163-3.93-3.496%203.496.53.53q.905.906%201.83.932.929.031%201.784-.825.852-.852.822-1.773t-.94-1.83zm-.36-2.594%201.557%201.558q1.305%201.305%201.754%202.13.456.825.468%201.727.015.79-.296%201.493-.31.702-.951%201.343-.649.648-1.355.963-.702.31-1.493.295-.905-.015-1.738-.472-.829-.46-2.118-1.75L5.68%2012.874zm-5.76-5.76L8.1%203.835Q9.195%204.93%209.291%206q.103%201.07-.795%201.968-.901.902-1.976.802-1.067-.1-2.16-1.193l-.975-.975L1.397%208.59-.08%207.113Zm.406%202.548-1.6%201.6.817.818q.43.43.871.457.445.023.829-.361t.357-.825-.457-.871z'%20class='jp-icon-selectable'/%3e%3c/svg%3e",pythonSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='-10%20-10%20131.161%20132.389'%3e%3cpath%20fill='%23306998'%20d='M54.919%200c-4.584.022-8.961.413-12.813%201.095C30.76%203.099%2028.7%207.295%2028.7%2015.032v10.219h26.813v3.406H18.638c-7.793%200-14.616%204.684-16.75%2013.594-2.462%2010.213-2.571%2016.586%200%2027.25%201.905%207.938%206.457%2013.594%2014.25%2013.594h9.218v-12.25c0-8.85%207.657-16.657%2016.75-16.657h26.782c7.454%200%2013.406-6.138%2013.406-13.625v-25.53c0-7.267-6.13-12.726-13.406-13.938C64.282.328%2059.502-.02%2054.918%200m-14.5%208.22c2.77%200%205.031%202.298%205.031%205.125%200%202.816-2.262%205.093-5.031%205.093-2.78%200-5.031-2.277-5.031-5.093%200-2.827%202.251-5.125%205.03-5.125'%20class='jp-icon-selectable'/%3e%3cpath%20fill='%23ffd43b'%20d='M85.638%2028.657v11.906c0%209.231-7.826%2017-16.75%2017H42.106c-7.336%200-13.406%206.279-13.406%2013.625V96.72c0%207.266%206.319%2011.54%2013.406%2013.625%208.488%202.495%2016.627%202.946%2026.782%200%206.75-1.955%2013.406-5.888%2013.406-13.625V86.5H55.513v-3.405H95.7c7.793%200%2010.696-5.436%2013.406-13.594%202.8-8.399%202.68-16.476%200-27.25-1.925-7.758-5.604-13.594-13.406-13.594zM70.575%2093.313c2.78%200%205.031%202.278%205.031%205.094%200%202.827-2.251%205.125-5.031%205.125-2.77%200-5.031-2.298-5.031-5.125%200-2.816%202.261-5.094%205.031-5.094'%20class='jp-icon-selectable'/%3e%3c/svg%3e",rKernelSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20preserveAspectRatio='xMidYMid'%20width='16'%20height='16'%20viewBox='0%200%20724%20561'%3e%3cpath%20class='jp-icon-selectable'%20d='M361.453,485.937%20C162.329,485.937%200.906,377.828%200.906,244.469%20C0.906,111.109%20162.329,3.000%20361.453,3.000%20C560.578,3.000%20722.000,111.109%20722.000,244.469%20C722.000,377.828%20560.578,485.937%20361.453,485.937%20ZM416.641,97.406%20C265.289,97.406%20142.594,171.314%20142.594,262.484%20C142.594,353.654%20265.289,427.562%20416.641,427.562%20C567.992,427.562%20679.687,377.033%20679.687,262.484%20C679.687,147.971%20567.992,97.406%20416.641,97.406%20Z'%20fill='rgb(179,179,179)'%20fill-rule='evenodd'/%3e%3cpath%20class='jp-icon-selectable'%20d='M550.000,377.000%20C550.000,377.000%20571.822,383.585%20584.500,390.000%20C588.899,392.226%20596.510,396.668%20602.000,402.500%20C607.378,408.212%20610.000,414.000%20610.000,414.000%20L696.000,559.000%20L557.000,559.062%20L492.000,437.000%20C492.000,437.000%20478.690,414.131%20470.500,407.500%20C463.668,401.969%20460.755,400.000%20454.000,400.000%20C449.298,400.000%20420.974,400.000%20420.974,400.000%20L421.000,558.974%20L298.000,559.026%20L298.000,152.938%20L545.000,152.938%20C545.000,152.938%20657.500,154.967%20657.500,262.000%20C657.500,369.033%20550.000,377.000%20550.000,377.000%20ZM496.500,241.024%20L422.037,240.976%20L422.000,310.026%20L496.500,310.002%20C496.500,310.002%20531.000,309.895%20531.000,274.877%20C531.000,239.155%20496.500,241.024%20496.500,241.024%20Z'%20fill='rgb(52,101,176)'%20fill-rule='evenodd'/%3e%3c/svg%3e",reactSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='150%20150%20541.9%20295.3'%3e%3cg%20fill='%2361DAFB'%20class='jp-icon-brand2%20jp-icon-selectable'%3e%3cpath%20d='M666.3%20296.5c0-32.5-40.7-63.3-103.1-82.4%2014.4-63.6%208-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6%200%208.3.9%2011.4%202.6%2013.6%207.8%2019.5%2037.5%2014.9%2075.7-1.1%209.4-2.9%2019.3-5.1%2029.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50%2032.6-30.3%2063.2-46.9%2084-46.9V78c-27.5%200-63.5%2019.6-99.9%2053.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7%200%2051.4%2016.5%2084%2046.6-14%2014.7-28%2031.4-41.3%2049.9-22.6%202.4-44%206.1-63.6%2011-2.3-10-4-19.7-5.2-29-4.7-38.2%201.1-67.9%2014.6-75.8%203-1.8%206.9-2.6%2011.5-2.6V78.5c-8.4%200-16%201.8-22.6%205.6-28.1%2016.2-34.4%2066.7-19.9%20130.1-62.2%2019.2-102.7%2049.9-102.7%2082.3%200%2032.5%2040.7%2063.3%20103.1%2082.4-14.4%2063.6-8%20114.2%2020.2%20130.4%206.5%203.8%2014.1%205.6%2022.5%205.6%2027.5%200%2063.5-19.6%2099.9-53.6%2036.4%2033.8%2072.4%2053.2%2099.9%2053.2%208.4%200%2016-1.8%2022.6-5.6%2028.1-16.2%2034.4-66.7%2019.9-130.1%2062-19.1%20102.5-49.9%20102.5-82.3m-130.2-66.7c-3.7%2012.9-8.3%2026.2-13.5%2039.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4%2014.2%202.1%2027.9%204.7%2041%207.9m-45.8%20106.5c-7.8%2013.5-15.8%2026.3-24.1%2038.2-14.9%201.3-30%202-45.2%202-15.1%200-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8%206.2-13.4%2013.2-26.8%2020.7-39.9%207.8-13.5%2015.8-26.3%2024.1-38.2%2014.9-1.3%2030-2%2045.2-2%2015.1%200%2030.2.7%2045%201.9%208.3%2011.9%2016.4%2024.6%2024.2%2038%207.6%2013.1%2014.5%2026.4%2020.8%2039.8-6.3%2013.4-13.2%2026.8-20.7%2039.9m32.3-13c5.4%2013.4%2010%2026.8%2013.8%2039.8-13.1%203.2-26.9%205.9-41.2%208%204.9-7.7%209.8-15.6%2014.4-23.7%204.6-8%208.9-16.1%2013-24.1M421.2%20430c-9.3-9.6-18.6-20.3-27.8-32%209%20.4%2018.2.7%2027.5.7%209.4%200%2018.7-.2%2027.8-.7-9%2011.7-18.3%2022.4-27.5%2032m-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9%203.7-12.9%208.3-26.2%2013.5-39.5%204.1%208%208.4%2016%2013.1%2024q7.05%2012%2014.4%2023.4M420.7%20163c9.3%209.6%2018.6%2020.3%2027.8%2032-9-.4-18.2-.7-27.5-.7-9.4%200-18.7.2-27.8.7%209-11.7%2018.3-22.4%2027.5-32m-74%2058.9c-4.9%207.7-9.8%2015.6-14.4%2023.7-4.6%208-8.9%2016-13%2024-5.4-13.4-10-26.8-13.8-39.8%2013.1-3.1%2026.9-5.8%2041.2-7.9m-90.5%20125.2c-35.4-15.1-58.3-34.9-58.3-50.6s22.9-35.6%2058.3-50.6c8.6-3.7%2018-7%2027.7-10.1%205.7%2019.6%2013.2%2040%2022.5%2060.9-9.2%2020.8-16.6%2041.1-22.2%2060.6-9.9-3.1-19.3-6.5-28-10.2M310%20490c-13.6-7.8-19.5-37.5-14.9-75.7%201.1-9.4%202.9-19.3%205.1-29.4%2019.6%204.8%2041%208.5%2063.5%2010.9%2013.5%2018.5%2027.5%2035.3%2041.6%2050-32.6%2030.3-63.2%2046.9-84%2046.9-4.5-.1-8.3-1-11.3-2.7m237.2-76.2c4.7%2038.2-1.1%2067.9-14.6%2075.8-3%201.8-6.9%202.6-11.5%202.6-20.7%200-51.4-16.5-84-46.6%2014-14.7%2028-31.4%2041.3-49.9%2022.6-2.4%2044-6.1%2063.6-11%202.3%2010.1%204.1%2019.8%205.2%2029.1m38.5-66.7c-8.6%203.7-18%207-27.7%2010.1-5.7-19.6-13.2-40-22.5-60.9%209.2-20.8%2016.6-41.1%2022.2-60.6%209.9%203.1%2019.3%206.5%2028.1%2010.2%2035.4%2015.1%2058.3%2034.9%2058.3%2050.6-.1%2015.7-23%2035.6-58.4%2050.6M320.8%2078.4'/%3e%3ccircle%20cx='420.9'%20cy='296.5'%20r='45.7'/%3e%3c/g%3e%3c/svg%3e",redoSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M18.4%2010.6C16.55%208.99%2014.15%208%2011.5%208c-4.65%200-8.58%203.03-9.96%207.22L3.9%2016a8%208%200%200%201%207.6-5.5c1.95%200%203.73.72%205.12%201.88L13%2016h9V7z'%20class='jp-icon3'/%3e%3c/svg%3e",regexSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2020%2020'%3e%3cpath%20fill='%23414141'%20d='M2%202h16v16H2z'%20class='jp-icon2'/%3e%3cg%20fill='%23FFF'%20class='jp-icon-accent2'%3e%3ccircle%20cx='5.5'%20cy='14.5'%20r='1.5'/%3e%3cpath%20d='M12%204h1v8h-1z'/%3e%3cpath%20d='m8.786%209.567%206.928-4%20.5.866-6.928%204z'/%3e%3cpath%20d='m8.786%206.433.5-.866%206.928%204-.5.866z'/%3e%3c/g%3e%3c/svg%3e",runSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M8%205v14l11-7z'%20class='jp-icon3'/%3e%3c/svg%3e",runningSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%20512%20512'%3e%3cpath%20fill='%23616161'%20d='M256%208C119%208%208%20119%208%20256s111%20248%20248%20248%20248-111%20248-248S393%208%20256%208m96%20328c0%208.8-7.2%2016-16%2016H176c-8.8%200-16-7.2-16-16V176c0-8.8%207.2-16%2016-16h160c8.8%200%2016%207.2%2016%2016z'%20class='jp-icon3'/%3e%3c/svg%3e",saveSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M17%203H5a2%202%200%200%200-2%202v14a2%202%200%200%200%202%202h14c1.1%200%202-.9%202-2V7zm-5%2016c-1.66%200-3-1.34-3-3s1.34-3%203-3%203%201.34%203%203-1.34%203-3%203m3-10H5V5h10z'%20class='jp-icon3'/%3e%3c/svg%3e",searchSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2018%2018'%3e%3cpath%20fill='%23616161'%20d='M12.1%2010.9h-.7l-.2-.2c.8-.9%201.3-2.2%201.3-3.5%200-3-2.4-5.4-5.4-5.4S1.8%204.2%201.8%207.1s2.4%205.4%205.4%205.4c1.3%200%202.5-.5%203.5-1.3l.2.2v.7l4.1%204.1%201.2-1.2zm-5%200c-2.1%200-3.7-1.7-3.7-3.7s1.7-3.7%203.7-3.7%203.7%201.7%203.7%203.7-1.6%203.7-3.7%203.7'%20class='jp-icon3'/%3e%3c/svg%3e",selectedBreakpointSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20fill='none'%20viewBox='0%200%2016%2016'%3e%3ccircle%20cx='10'%20cy='7'%20r='6'%20fill='var(--jp-warn-color1,%20%23f57c00)'%20/%3e%3ccircle%20cx='10'%20cy='7'%20r='4'%20stroke='var(--jp-layout-color0,%20%23fff)'%20stroke-width='1.3'%20/%3e%3c/svg%3e",settingsSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M19.43%2012.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49%201c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.49.49%200%200%200%2014%202h-4c-.25%200-.46.18-.49.42l-.38%202.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49%200-.61.22l-2%203.46c-.13.22-.07.49.12.64l2.11%201.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11%201.65c-.19.15-.24.42-.12.64l2%203.46c.12.22.39.3.61.22l2.49-1c.52.4%201.08.73%201.69.98l.38%202.65c.03.24.24.42.49.42h4c.25%200%20.46-.18.49-.42l.38-2.65c.61-.25%201.17-.59%201.69-.98l2.49%201c.23.09.49%200%20.61-.22l2-3.46c.12-.22.07-.49-.12-.64zM12%2015.5c-1.93%200-3.5-1.57-3.5-3.5s1.57-3.5%203.5-3.5%203.5%201.57%203.5%203.5-1.57%203.5-3.5%203.5'%20class='jp-icon3%20jp-icon-selectable'/%3e%3c/svg%3e",shareSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M18%202c-1.645%200-3%201.355-3%203%200%20.191.022.377.057.559L7.922%209.72A2.97%202.97%200%200%200%206%209c-1.645%200-3%201.355-3%203s1.355%203%203%203c.732%200%201.399-.278%201.922-.72l7.135%204.16A3%203%200%200%200%2015%2019c0%201.645%201.355%203%203%203s3-1.355%203-3-1.355-3-3-3a2.97%202.97%200%200%200-1.922.723l-7.135-4.164C8.978%2012.377%209%2012.19%209%2012s-.022-.377-.057-.559l7.135-4.162C16.601%207.722%2017.268%208%2018%208c1.645%200%203-1.355%203-3s-1.355-3-3-3m0%202c.564%200%201%20.436%201%201s-.436%201-1%201-1-.436-1-1%20.436-1%201-1M6%2011c.564%200%201%20.436%201%201s-.436%201-1%201-1-.436-1-1%20.436-1%201-1m12%207c.564%200%201%20.436%201%201s-.436%201-1%201-1-.436-1-1%20.436-1%201-1'%20class='jp-icon3'/%3e%3c/svg%3e",spreadsheetSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2022%2022'%3e%3cpath%20fill='%234CAF50'%20d='M2.2%202.2v17.6h17.6V2.2zm15.4%207.7h-5.5V4.4h5.5zM9.9%204.4v5.5H4.4V4.4zm-5.5%207.7h5.5v5.5H4.4zm7.7%205.5v-5.5h5.5v5.5z'%20class='jp-icon-contrast1%20jp-icon-selectable'/%3e%3c/svg%3e",stepIntoSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%3e%3cpath%20fill='%23616161'%20d='M8%209.532h.542l3.905-3.905-1.061-1.06-2.637%202.61V1H7.251v6.177l-2.637-2.61-1.061%201.06%203.905%203.905zm1.956%203.481a2%202%200%201%201-4%200%202%202%200%200%201%204%200'%20class='jp-icon3'/%3e%3c/svg%3e",stepOutSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%3e%3cpath%20fill='%23616161'%20d='M8%201h-.542L3.553%204.905l1.061%201.06%202.637-2.61v6.177h1.498V3.355l2.637%202.61%201.061-1.06L8.542%201zm1.956%2012.013a2%202%200%201%201-4%200%202%202%200%200%201%204%200'%20class='jp-icon3'/%3e%3c/svg%3e",stepOverSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%3e%3cpath%20fill='%23616161'%20d='M14.25%205.75v-4h-1.5v2.542c-1.145-1.359-2.911-2.209-4.84-2.209-3.177%200-5.92%202.307-6.16%205.398l-.02.269h1.5l.022-.226c.212-2.195%202.202-3.94%204.656-3.94%201.736%200%203.244.875%204.05%202.166h-2.83v1.5h4.163l.962-.975V5.75zM8%2014a2%202%200%201%200%200-4%202%202%200%200%200%200%204'%20class='jp-icon3'/%3e%3c/svg%3e",stopSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M6%206h12v12H6z'%20class='jp-icon3'/%3e%3c/svg%3e",tabSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M21%203H3c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h18c1.1%200%202-.9%202-2V5c0-1.1-.9-2-2-2m0%2016H3V5h10v4h8z'%20class='jp-icon3'/%3e%3c/svg%3e",tableRowsSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M21%208H3V4h18zm0%202H3v4h18zm0%206H3v4h18z'%20class='jp-icon3'/%3e%3c/svg%3e",tagSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='28'%20height='28'%20viewBox='0%200%2043%2028'%3e%3cpath%20fill='%23616161'%20d='M28.833%2012.334%2033%2016.501l4.166-4.167zM16.21%2021.61c-.523.52-1.366.52-1.885%200l-7.342-6.885c-.41-.386-.9-1.115-.935-1.677-.095-1.52-.028-4.429.018-5.971A1.093%201.093%200%200%201%207.118%206.03c1.97-.046%206.146-.095%206.534.293l8.085%207.315c.519.52.048%201.833-.475%202.356zM9.775%208.265a1.126%201.126%200%201%200-1.593%201.592%201.126%201.126%200%200%200%201.593-1.592'%20class='jp-icon3'/%3e%3c/svg%3e",terminalSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23333'%20d='M2%202h20v20H2z'%20class='jp-terminal-icon-background-color%20jp-icon-selectable'/%3e%3cpath%20fill='%23fff'%20d='M9.01%2014.762q0-.246-.077-.434a.9.9%200%200%200-.234-.351%201.6%201.6%200%200%200-.422-.288%205%205%200%200%200-.627-.263q-.592-.211-1.078-.446a3.5%203.5%200%200%201-.832-.544%202.2%202.2%200%200%201-.528-.721%202.4%202.4%200%200%201-.187-.985q0-.498.17-.908a2.1%202.1%200%200%201%20.48-.72q.31-.306.75-.493.44-.188.979-.24V7.11h.937v1.272q.527.07.95.287.421.217.714.568.3.345.457.82.165.47.164%201.055H8.998q0-.709-.323-1.072-.322-.37-.873-.37-.299%200-.521.083a.9.9%200%200%200-.358.223.9.9%200%200%200-.21.334q-.066.194-.065.421%200%20.23.064.41a.9.9%200%200%200%20.229.329q.165.152.428.293.263.134.656.275.591.223%201.072.463.48.235.82.55.346.312.528.727.187.41.187.973%200%20.515-.17.932-.17.41-.486.709t-.762.48a3.7%203.7%200%200%201-.996.229v1.148h-.931V17.1a4%204%200%200%201-.967-.217%202.6%202.6%200%200%201-.832-.504%202.4%202.4%200%200%201-.574-.826q-.217-.505-.217-1.207h1.635q0%20.421.123.709.123.281.316.45.2.165.451.235.252.07.516.07.627%200%20.949-.292a.98.98%200%200%200%20.322-.756m8.36%203.51h-5.343V17h5.344z'%20class='jp-terminal-icon-color%20jp-icon-selectable-inverse'/%3e%3c/svg%3e",textEditorSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M15%2015H3v2h12zm0-8H3v2h12zM3%2013h18v-2H3zm0%208h18v-2H3zM3%203v2h18V3z'%20class='jp-text-editor-icon-color%20jp-icon-selectable'/%3e%3c/svg%3e",tocSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M7%205h14v2H7zm0%208v-2h14v2zM4%204.5A1.5%201.5%200%200%201%205.5%206%201.5%201.5%200%200%201%204%207.5%201.5%201.5%200%200%201%202.5%206%201.5%201.5%200%200%201%204%204.5m0%206A1.5%201.5%200%200%201%205.5%2012%201.5%201.5%200%200%201%204%2013.5%201.5%201.5%200%200%201%202.5%2012%201.5%201.5%200%200%201%204%2010.5M7%2019v-2h14v2zm-3-2.5A1.5%201.5%200%200%201%205.5%2018%201.5%201.5%200%200%201%204%2019.5%201.5%201.5%200%200%201%202.5%2018%201.5%201.5%200%200%201%204%2016.5'%20class='jp-icon3%20jp-icon-selectable'/%3e%3c/svg%3e",treeViewSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M22%2011V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z'%20class='jp-icon3'/%3e%3c/svg%3e",trustedSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20fill='none'%20viewBox='0%200%2024%2025'%3e%3cpath%20stroke='%23333'%20stroke-width='2'%20d='M3.86%2014.44c-1.034-2.67-.996-5.382-.61-7.24%201.232-.267%202.83-.797%204.351-1.355a92%2092%200%200%200%204.387-1.75%2068%2068%200%200%200%204.23%201.748c1.532.57%203.182%201.11%204.536%201.37.382%201.859.417%204.564-.615%207.228-1.109%202.862-3.472%205.743-8.139%207.494-4.667-1.75-7.03-4.632-8.14-7.494Z'%20class='jp-icon2'/%3e%3cpath%20fill='%23333'%20stroke='%23333'%20d='m10.86%2014.733-2.133-1.866-.727.63L10.86%2016%2016%2010.5l-.721-.632z'%20class='jp-icon2'/%3e%3c/svg%3e",undoSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M12.5%208c-2.65%200-5.05.99-6.9%202.6L2%207v9h9l-3.62-3.62c1.39-1.16%203.16-1.88%205.12-1.88%203.54%200%206.55%202.31%207.6%205.5l2.37-.78C21.08%2011.03%2017.15%208%2012.5%208'%20class='jp-icon3'/%3e%3c/svg%3e",userSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M16%207a4%204%200%201%201-8%200%204%204%200%200%201%208%200m-4%207a7%207%200%200%200-7%207h14a7%207%200%200%200-7-7'%20class='jp-icon3'/%3e%3c/svg%3e",usersSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20version='1.1'%20viewBox='0%200%2036%2024'%3e%3cg%20fill='%23616161'%20class='jp-icon3'%20transform='translate(-3.628%20.1)scale(1.7327)'%3e%3cpath%20d='M18.279%205.265c-1.58%200-2.964.85-3.718%202.115a6.7%206.7%200%200%201%202.81%202.21h5.23a4.32%204.32%200%200%200-4.322-4.325m2.186-2.875a2.19%202.19%200%200%201-2.188%202.188%202.19%202.19%200%200%201-2.189-2.189A2.19%202.19%200%200%201%2018.277.201a2.19%202.19%200%200%201%202.188%202.188M5.385%206.633a3.02%203.02%200%200%200-3.02%203.02h4.22a6.7%206.7%200%200%201%201.44-1.467%203.02%203.02%200%200%200-2.64-1.553m1.53-2.01a1.53%201.53%200%200%201-1.529%201.53%201.53%201.53%200%200%201-1.53-1.53%201.53%201.53%200%200%201%201.53-1.53%201.53%201.53%200%200%201%201.53%201.53m-.781%208.912a5.865%205.865%200%200%201%2011.73%200z'/%3e%3ccircle%20cx='12'%20cy='3.768'%20r='2.969'/%3e%3c/g%3e%3c/svg%3e",variableSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20fill='none'%20viewBox='0%200%2016%2016'%3e%3cpath%20fill='%23007ACC'%20fill-rule='evenodd'%20d='m1.5%204-.5.5v8l.5.5H4v-1H2V5h2V4zm13%209%20.5-.5v-8l-.5-.5H12v1h2v7h-2v1zM8.797%205l-4.5%202L4%207.457v2.5l.243.429%202.5%201.5.46.028%204.5-2L12%209.457v-2.5l-.243-.429-2.5-1.5zM5%208.34v1.334l1.5.9V9.24zm2.5.942v1.406L11%209.131V7.726zm2.918-2.391-1.452-.872-3.384%201.504%201.452.871z'%20clip-rule='evenodd'/%3e%3c/svg%3e",vegaSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2022%2022'%3e%3cg%20fill='%23212121'%20class='jp-icon1%20jp-icon-selectable'%3e%3cpath%20d='m10.6%205.4%202.2-3.2H2.2v7.3l4-6.6z'/%3e%3cpath%20d='m15.8%202.2-4.4%206.6L7%206.3l-4.8%208v5.5h17.6V2.2zm-7%2015.4H5.5v-4.4h3.3zm4.4%200H9.8V9.8h3.4zm4.4%200h-3.4V6.5h3.4z'/%3e%3c/g%3e%3c/svg%3e",videoSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2024%2024'%3e%3cpath%20class='jp-icon3%20jp-icon-selectable'%20fill='%23616161'%20d='M18%203v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8%2017H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10%208h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z'/%3e%3cpath%20d='M0%200h24v24H0z'%20fill='none'/%3e%3c/svg%3e",viewBreakpointSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='%23616161'%20d='M5%202h10l5%205v13a2%202%200%200%201-2%202H5a2%202%200%200%201-2-2v-6h1v2l4-3-4-3v2H3V4a2%202%200%200%201%202-2m7%2016h4v-2h-4zm0-4h6v-2h-6zm0-4h6V8h-6zm-2%204a1%201%200%201%200%200-2%201%201%200%200%200%200%202m-7-2v2H1v-2z'%20class='jp-icon3'/%3e%3c/svg%3e",wordSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2020%2020'%3e%3cpath%20fill='%23414141'%20d='M2%202h16v16H2z'%20class='jp-icon2'/%3e%3cpath%20fill='%23fff'%20d='M4.57%208.8q.068-1.89%202.42-1.89%201.16%200%201.68.42.567.41.567%201.16v3.47q0%20.462.514.462.103%200%20.2-.023v.714q-.399.103-.651.103-.452%200-.693-.22-.231-.2-.284-.662-.956.872-2%20.872-.903%200-1.47-.472-.525-.472-.525-1.26%200-.262.045-.472.057-.22.116-.378.068-.168.231-.304l.262-.242q.116-.091.368-.168.262-.091.4-.126.135-.045.471-.103t.504-.08l.567-.08q.556-.068.777-.22.22-.153.22-.442v-.252q0-.43-.357-.662-.336-.23-.976-.23-.662%200-.998.261-.336.252-.399.798zm1.89%203.68q.788%200%201.26-.41.504-.42.504-.903v-1.05q-.284.136-.861.231l-.987.158q-.42.068-.766.326-.336.252-.336.704t.304.704.861.252zm3.97-7.88h.945v3.15q.651-.976%201.89-.976%201.16%200%201.89.84.682.84.682%202.31t-.704%202.42q-.704.882-1.89.882-1.26%200-1.89-1.02v.766h-.85zm2.62%203.04q-.746%200-1.16.64-.452.63-.452%201.68t.452%201.68%201.16.63q.777%200%201.26-.63.494-.64.494-1.68%200-1.05-.472-1.68-.462-.64-1.26-.64zm-9.89%208.2%2013.6.008c.007%200%200-2.6%200-2.6%200-.008-1.15%200-1.15%200-.007%200-.008%201.5-.008%201.5l-11.3-.001-.006-1.5c0-.008-1.17.001-1.17.001z'%20class='jp-icon-accent2'/%3e%3c/svg%3e",yamlSvgstr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20viewBox='0%200%2022%2022'%3e%3cg%20fill='%23D81B60'%20class='jp-icon-contrast2%20jp-icon-selectable'%3e%3cpath%20d='M7.2%2018.6v-5.4L3%205.6h3.3l1.4%203.1c.3.9.6%201.6%201%202.5.3-.8.6-1.6%201-2.5l1.4-3.1h3.4l-4.4%207.6v5.5z'/%3e%3ccircle%20cx='17.6'%20cy='16.5'%20r='2.1'/%3e%3ccircle%20cx='17.6'%20cy='11'%20r='2.1'/%3e%3c/g%3e%3c/svg%3e";new LabIcon({name:"ui-components:add-above",svgstr:addAboveSvgstr}),new LabIcon({name:"ui-components:add-below",svgstr:addBelowSvgstr});const addIcon=new LabIcon({name:"ui-components:add",svgstr:addSvgstr});new LabIcon({name:"ui-components:audio",svgstr:audioSvgstr}),new LabIcon({name:"ui-components:bell",svgstr:bellSvgstr}),new LabIcon({name:"ui-components:breakpoint",svgstr:breakpointSvgstr}),new LabIcon({name:"ui-components:bug-dot",svgstr:bugDotSvgstr}),new LabIcon({name:"ui-components:bug",svgstr:bugSvgstr}),new LabIcon({name:"ui-components:build",svgstr:buildSvgstr});const caretDownEmptyIcon=new LabIcon({name:"ui-components:caret-down-empty",svgstr:caretDownEmptySvgstr}),caretDownEmptyThinIcon=new LabIcon({name:"ui-components:caret-down-empty-thin",svgstr:caretDownEmptyThinSvgstr}),caretDownIcon=new LabIcon({name:"ui-components:caret-down",svgstr:caretDownSvgstr});new LabIcon({name:"ui-components:caret-left",svgstr:caretLeftSvgstr});const caretRightIcon=new LabIcon({name:"ui-components:caret-right",svgstr:caretRightSvgstr}),caretUpEmptyThinIcon=new LabIcon({name:"ui-components:caret-up-empty-thin",svgstr:caretUpEmptyThinSvgstr});new LabIcon({name:"ui-components:caret-up",svgstr:caretUpSvgstr});const caseSensitiveIcon=new LabIcon({name:"ui-components:case-sensitive",svgstr:caseSensitiveSvgstr});new LabIcon({name:"ui-components:check",svgstr:checkSvgstr});const circleEmptyIcon=new LabIcon({name:"ui-components:circle-empty",svgstr:circleEmptySvgstr}),circleIcon=new LabIcon({name:"ui-components:circle",svgstr:circleSvgstr});new LabIcon({name:"ui-components:cleaning",svgstr:cleaningSvgstr}),new LabIcon({name:"ui-components:clear",svgstr:clearSvgstr}),new LabIcon({name:"ui-components:close-all",svgstr:closeAllSvgstr});const closeIcon=new LabIcon({name:"ui-components:close",svgstr:closeSvgstr});new LabIcon({name:"ui-components:code-check",svgstr:codeCheckSvgstr}),new LabIcon({name:"ui-components:code",svgstr:codeSvgstr}),new LabIcon({name:"ui-components:collapse-all",svgstr:collapseAllSvgstr});const collapseIcon=new LabIcon({name:"ui-components:collapse",svgstr:collapseSvgstr}),consoleIcon=new LabIcon({name:"ui-components:console",svgstr:consoleSvgstr});new LabIcon({name:"ui-components:copy",svgstr:copySvgstr}),new LabIcon({name:"ui-components:copyright",svgstr:copyrightSvgstr}),new LabIcon({name:"ui-components:cut",svgstr:cutSvgstr}),new LabIcon({name:"ui-components:delete",svgstr:deleteSvgstr}),new LabIcon({name:"ui-components:dock-bottom",svgstr:dockBottomSvgstr}),new LabIcon({name:"ui-components:dock-left",svgstr:dockLeftSvgstr}),new LabIcon({name:"ui-components:dock-right",svgstr:dockRightSvgstr}),new LabIcon({name:"ui-components:dock-top",svgstr:dockTopSvgstr}),new LabIcon({name:"ui-components:dots",svgstr:dotsSvgstr}),new LabIcon({name:"ui-components:download",svgstr:downloadSvgstr}),new LabIcon({name:"ui-components:duplicate",svgstr:duplicateSvgstr}),new LabIcon({name:"ui-components:edit",svgstr:editSvgstr});const ellipsesIcon=new LabIcon({name:"ui-components:ellipses",svgstr:ellipsesSvgstr});new LabIcon({name:"ui-components:error",svgstr:errorSvgstr}),new LabIcon({name:"ui-components:exceptions",svgstr:exceptionsSvgstr}),new LabIcon({name:"ui-components:expand-all",svgstr:expandAllSvgstr});const expandIcon=new LabIcon({name:"ui-components:expand",svgstr:expandSvgstr});new LabIcon({name:"ui-components:extension",svgstr:extensionSvgstr}),new LabIcon({name:"ui-components:fast-forward",svgstr:fastForwardSvgstr}),new LabIcon({name:"ui-components:file",svgstr:fileSvgstr}),new LabIcon({name:"ui-components:file-upload",svgstr:fileUploadSvgstr});const filterDotIcon=new LabIcon({name:"ui-components:filter-dot",svgstr:filterDotSvgstr}),filterIcon=new LabIcon({name:"ui-components:filter",svgstr:filterSvgstr});new LabIcon({name:"ui-components:filter-list",svgstr:filterListSvgstr}),new LabIcon({name:"ui-components:folder-favorite",svgstr:folderFavoriteSvgstr}),new LabIcon({name:"ui-components:folder",svgstr:folderSvgstr}),new LabIcon({name:"ui-components:history",svgstr:historySvgstr}),new LabIcon({name:"ui-components:home",svgstr:homeSvgstr}),new LabIcon({name:"ui-components:html5",svgstr:html5Svgstr}),new LabIcon({name:"ui-components:image",svgstr:imageSvgstr}),new LabIcon({name:"ui-components:info",svgstr:infoSvgstr}),new LabIcon({name:"ui-components:inspector",svgstr:inspectorSvgstr}),new LabIcon({name:"ui-components:json",svgstr:jsonSvgstr}),new LabIcon({name:"ui-components:julia",svgstr:juliaSvgstr}),new LabIcon({name:"ui-components:jupyter-favicon",svgstr:jupyterFaviconSvgstr}),new LabIcon({name:"ui-components:jupyter",svgstr:jupyterSvgstr}),new LabIcon({name:"ui-components:jupyterlab-wordmark",svgstr:jupyterlabWordmarkSvgstr});const kernelIcon=new LabIcon({name:"ui-components:kernel",svgstr:kernelSvgstr});new LabIcon({name:"ui-components:keyboard",svgstr:keyboardSvgstr}),new LabIcon({name:"ui-components:launch",svgstr:launchSvgstr}),new LabIcon({name:"ui-components:launcher",svgstr:launcherSvgstr}),new LabIcon({name:"ui-components:line-form",svgstr:lineFormSvgstr}),new LabIcon({name:"ui-components:link",svgstr:linkSvgstr}),new LabIcon({name:"ui-components:list",svgstr:listSvgstr}),new LabIcon({name:"ui-components:lock",svgstr:lockSvgstr}),new LabIcon({name:"ui-components:markdown",svgstr:markdownSvgstr}),new LabIcon({name:"ui-components:mermaid",svgstr:mermaidSvgstr}),new LabIcon({name:"ui-components:move-down",svgstr:moveDownSvgstr}),new LabIcon({name:"ui-components:move-up",svgstr:moveUpSvgstr}),new LabIcon({name:"ui-components:new-folder",svgstr:newFolderSvgstr}),new LabIcon({name:"ui-components:not-trusted",svgstr:notTrustedSvgstr}),new LabIcon({name:"ui-components:notebook",svgstr:notebookSvgstr}),new LabIcon({name:"ui-components:numbering",svgstr:numberingSvgstr});const offlineBoltIcon=new LabIcon({name:"ui-components:offline-bolt",svgstr:offlineBoltSvgstr});new LabIcon({name:"ui-components:open-kernel-source",svgstr:openKernelSourceSvgstr}),new LabIcon({name:"ui-components:palette",svgstr:paletteSvgstr}),new LabIcon({name:"ui-components:paste",svgstr:pasteSvgstr}),new LabIcon({name:"ui-components:pause",svgstr:pauseSvgstr}),new LabIcon({name:"ui-components:pdf",svgstr:pdfSvgstr}),new LabIcon({name:"ui-components:python",svgstr:pythonSvgstr}),new LabIcon({name:"ui-components:r-kernel",svgstr:rKernelSvgstr}),new LabIcon({name:"ui-components:react",svgstr:reactSvgstr}),new LabIcon({name:"ui-components:redo",svgstr:redoSvgstr});const refreshIcon=new LabIcon({name:"ui-components:refresh",svgstr:refreshSvgstr}),regexIcon=new LabIcon({name:"ui-components:regex",svgstr:regexSvgstr}),runIcon=new LabIcon({name:"ui-components:run",svgstr:runSvgstr});new LabIcon({name:"ui-components:running",svgstr:runningSvgstr}),new LabIcon({name:"ui-components:save",svgstr:saveSvgstr}),new LabIcon({name:"ui-components:search",svgstr:searchSvgstr}),new LabIcon({name:"ui-components:selected-breakpoint",svgstr:selectedBreakpointSvgstr}),new LabIcon({name:"ui-components:settings",svgstr:settingsSvgstr}),new LabIcon({name:"ui-components:share",svgstr:shareSvgstr}),new LabIcon({name:"ui-components:spreadsheet",svgstr:spreadsheetSvgstr}),new LabIcon({name:"ui-components:step-into",svgstr:stepIntoSvgstr}),new LabIcon({name:"ui-components:step-out",svgstr:stepOutSvgstr}),new LabIcon({name:"ui-components:step-over",svgstr:stepOverSvgstr});const stopIcon=new LabIcon({name:"ui-components:stop",svgstr:stopSvgstr});new LabIcon({name:"ui-components:tab",svgstr:tabSvgstr}),new LabIcon({name:"ui-components:table-rows",svgstr:tableRowsSvgstr}),new LabIcon({name:"ui-components:tag",svgstr:tagSvgstr}),new LabIcon({name:"ui-components:terminal",svgstr:terminalSvgstr}),new LabIcon({name:"ui-components:text-editor",svgstr:textEditorSvgstr}),new LabIcon({name:"ui-components:toc",svgstr:tocSvgstr}),new LabIcon({name:"ui-components:tree-view",svgstr:treeViewSvgstr}),new LabIcon({name:"ui-components:trusted",svgstr:trustedSvgstr}),new LabIcon({name:"ui-components:undo",svgstr:undoSvgstr}),new LabIcon({name:"ui-components:user",svgstr:userSvgstr}),new LabIcon({name:"ui-components:users",svgstr:usersSvgstr}),new LabIcon({name:"ui-components:variable",svgstr:variableSvgstr}),new LabIcon({name:"ui-components:vega",svgstr:vegaSvgstr}),new LabIcon({name:"ui-components:video",svgstr:videoSvgstr}),new LabIcon({name:"ui-components:view-breakpoint",svgstr:viewBreakpointSvgstr});const wordIcon=new LabIcon({name:"ui-components:word",svgstr:wordSvgstr});function clamp(e,t,r){return isNaN(e)||e<=t?t:e>=r?r:e}function normalize(e,t,r){return isNaN(e)||e<=t?0:e>=r?1:e/(r-t)}function denormalize(e,t,r){return isNaN(e)?t:t+e*(r-t)}function degreesToRadians(e){return e*(Math.PI/180)}function radiansToDegrees(e){return e*(180/Math.PI)}function getHexStringForByte(e){const t=Math.round(clamp(e,0,255)).toString(16);return 1===t.length?"0"+t:t}function lerp(e,t,r){return isNaN(e)||e<=0?t:e>=1?r:t+e*(r-t)}function lerpAnglesInDegrees(e,t,r){if(e<=0)return t%360;if(e>=1)return r%360;const s=(t-r+360)%360;return s<=(r-t+360)%360?(t-s*e+360)%360:(t+s*e+360)%360}function roundToPrecisionSmall(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}new LabIcon({name:"ui-components:yaml",svgstr:yamlSvgstr});class ColorHSL{constructor(e,t,r){this.h=e,this.s=t,this.l=r}static fromObject(e){return!e||isNaN(e.h)||isNaN(e.s)||isNaN(e.l)?null:new ColorHSL(e.h,e.s,e.l)}equalValue(e){return this.h===e.h&&this.s===e.s&&this.l===e.l}roundToPrecision(e){return new ColorHSL(roundToPrecisionSmall(this.h,e),roundToPrecisionSmall(this.s,e),roundToPrecisionSmall(this.l,e))}toObject(){return{h:this.h,s:this.s,l:this.l}}}class ColorHSV{constructor(e,t,r){this.h=e,this.s=t,this.v=r}static fromObject(e){return!e||isNaN(e.h)||isNaN(e.s)||isNaN(e.v)?null:new ColorHSV(e.h,e.s,e.v)}equalValue(e){return this.h===e.h&&this.s===e.s&&this.v===e.v}roundToPrecision(e){return new ColorHSV(roundToPrecisionSmall(this.h,e),roundToPrecisionSmall(this.s,e),roundToPrecisionSmall(this.v,e))}toObject(){return{h:this.h,s:this.s,v:this.v}}}class ColorLAB{constructor(e,t,r){this.l=e,this.a=t,this.b=r}static fromObject(e){return!e||isNaN(e.l)||isNaN(e.a)||isNaN(e.b)?null:new ColorLAB(e.l,e.a,e.b)}equalValue(e){return this.l===e.l&&this.a===e.a&&this.b===e.b}roundToPrecision(e){return new ColorLAB(roundToPrecisionSmall(this.l,e),roundToPrecisionSmall(this.a,e),roundToPrecisionSmall(this.b,e))}toObject(){return{l:this.l,a:this.a,b:this.b}}}ColorLAB.epsilon=216/24389,ColorLAB.kappa=24389/27;class ColorLCH{constructor(e,t,r){this.l=e,this.c=t,this.h=r}static fromObject(e){return!e||isNaN(e.l)||isNaN(e.c)||isNaN(e.h)?null:new ColorLCH(e.l,e.c,e.h)}equalValue(e){return this.l===e.l&&this.c===e.c&&this.h===e.h}roundToPrecision(e){return new ColorLCH(roundToPrecisionSmall(this.l,e),roundToPrecisionSmall(this.c,e),roundToPrecisionSmall(this.h,e))}toObject(){return{l:this.l,c:this.c,h:this.h}}}class ColorRGBA64{constructor(e,t,r,s){this.r=e,this.g=t,this.b=r,this.a="number"!=typeof s||isNaN(s)?1:s}static fromObject(e){return!e||isNaN(e.r)||isNaN(e.g)||isNaN(e.b)?null:new ColorRGBA64(e.r,e.g,e.b,e.a)}equalValue(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}toStringHexRGB(){return"#"+[this.r,this.g,this.b].map(this.formatHexValue).join("")}toStringHexRGBA(){return this.toStringHexRGB()+this.formatHexValue(this.a)}toStringHexARGB(){return"#"+[this.a,this.r,this.g,this.b].map(this.formatHexValue).join("")}toStringWebRGB(){return`rgb(${Math.round(denormalize(this.r,0,255))},${Math.round(denormalize(this.g,0,255))},${Math.round(denormalize(this.b,0,255))})`}toStringWebRGBA(){return`rgba(${Math.round(denormalize(this.r,0,255))},${Math.round(denormalize(this.g,0,255))},${Math.round(denormalize(this.b,0,255))},${clamp(this.a,0,1)})`}roundToPrecision(e){return new ColorRGBA64(roundToPrecisionSmall(this.r,e),roundToPrecisionSmall(this.g,e),roundToPrecisionSmall(this.b,e),roundToPrecisionSmall(this.a,e))}clamp(){return new ColorRGBA64(clamp(this.r,0,1),clamp(this.g,0,1),clamp(this.b,0,1),clamp(this.a,0,1))}toObject(){return{r:this.r,g:this.g,b:this.b,a:this.a}}formatHexValue(e){return getHexStringForByte(denormalize(e,0,255))}}class ColorXYZ{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromObject(e){return!e||isNaN(e.x)||isNaN(e.y)||isNaN(e.z)?null:new ColorXYZ(e.x,e.y,e.z)}equalValue(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}roundToPrecision(e){return new ColorXYZ(roundToPrecisionSmall(this.x,e),roundToPrecisionSmall(this.y,e),roundToPrecisionSmall(this.z,e))}toObject(){return{x:this.x,y:this.y,z:this.z}}}function rgbToLinearLuminance(e){return.2126*e.r+.7152*e.g+.0722*e.b}function rgbToRelativeLuminance(e){function t(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return rgbToLinearLuminance(new ColorRGBA64(t(e.r),t(e.g),t(e.b),1))}ColorXYZ.whitePoint=new ColorXYZ(.95047,1,1.08883);const calculateContrastRatio=(e,t)=>(e+.05)/(t+.05);function contrastRatio(e,t){const r=rgbToRelativeLuminance(e),s=rgbToRelativeLuminance(t);return r>s?calculateContrastRatio(r,s):calculateContrastRatio(s,r)}function rgbToHSL(e){const t=Math.max(e.r,e.g,e.b),r=Math.min(e.r,e.g,e.b),s=t-r;let n=0;0!==s&&(n=t===e.r?(e.g-e.b)/s%6*60:t===e.g?60*((e.b-e.r)/s+2):60*((e.r-e.g)/s+4)),n<0&&(n+=360);const i=(t+r)/2;let o=0;return 0!==s&&(o=s/(1-Math.abs(2*i-1))),new ColorHSL(n,o,i)}function hslToRGB(e,t=1){const r=(1-Math.abs(2*e.l-1))*e.s,s=r*(1-Math.abs(e.h/60%2-1)),n=e.l-r/2;let i=0,o=0,a=0;return e.h<60?(i=r,o=s,a=0):e.h<120?(i=s,o=r,a=0):e.h<180?(i=0,o=r,a=s):e.h<240?(i=0,o=s,a=r):e.h<300?(i=s,o=0,a=r):e.h<360&&(i=r,o=0,a=s),new ColorRGBA64(i+n,o+n,a+n,t)}function rgbToHSV(e){const t=Math.max(e.r,e.g,e.b),r=t-Math.min(e.r,e.g,e.b);let s=0;0!==r&&(s=t===e.r?(e.g-e.b)/r%6*60:t===e.g?60*((e.b-e.r)/r+2):60*((e.r-e.g)/r+4)),s<0&&(s+=360);let n=0;return 0!==t&&(n=r/t),new ColorHSV(s,n,t)}function hsvToRGB(e,t=1){const r=e.s*e.v,s=r*(1-Math.abs(e.h/60%2-1)),n=e.v-r;let i=0,o=0,a=0;return e.h<60?(i=r,o=s,a=0):e.h<120?(i=s,o=r,a=0):e.h<180?(i=0,o=r,a=s):e.h<240?(i=0,o=s,a=r):e.h<300?(i=s,o=0,a=r):e.h<360&&(i=r,o=0,a=s),new ColorRGBA64(i+n,o+n,a+n,t)}function lchToLAB(e){let t=0,r=0;return 0!==e.h&&(t=Math.cos(degreesToRadians(e.h))*e.c,r=Math.sin(degreesToRadians(e.h))*e.c),new ColorLAB(e.l,t,r)}function labToLCH(e){let t=0;(Math.abs(e.b)>.001||Math.abs(e.a)>.001)&&(t=radiansToDegrees(Math.atan2(e.b,e.a))),t<0&&(t+=360);const r=Math.sqrt(e.a*e.a+e.b*e.b);return new ColorLCH(e.l,r,t)}function labToXYZ(e){const t=(e.l+16)/116,r=t+e.a/500,s=t-e.b/200,n=Math.pow(r,3),i=Math.pow(t,3),o=Math.pow(s,3);let a=0;a=n>ColorLAB.epsilon?n:(116*r-16)/ColorLAB.kappa;let l=0;l=e.l>ColorLAB.epsilon*ColorLAB.kappa?i:e.l/ColorLAB.kappa;let c=0;return c=o>ColorLAB.epsilon?o:(116*s-16)/ColorLAB.kappa,a=ColorXYZ.whitePoint.x*a,l=ColorXYZ.whitePoint.y*l,c=ColorXYZ.whitePoint.z*c,new ColorXYZ(a,l,c)}function xyzToLAB(e){function t(e){return e>ColorLAB.epsilon?Math.pow(e,1/3):(ColorLAB.kappa*e+16)/116}const r=t(e.x/ColorXYZ.whitePoint.x),s=t(e.y/ColorXYZ.whitePoint.y),n=t(e.z/ColorXYZ.whitePoint.z);return new ColorLAB(116*s-16,500*(r-s),200*(s-n))}function rgbToXYZ(e){function t(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}const r=t(e.r),s=t(e.g),n=t(e.b);return new ColorXYZ(.4124564*r+.3575761*s+.1804375*n,.2126729*r+.7151522*s+.072175*n,.0193339*r+.119192*s+.9503041*n)}function xyzToRGB(e,t=1){function r(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055}const s=r(3.2404542*e.x-1.5371385*e.y-.4985314*e.z),n=r(-.969266*e.x+1.8760108*e.y+.041556*e.z),i=r(.0556434*e.x-.2040259*e.y+1.0572252*e.z);return new ColorRGBA64(s,n,i,t)}function rgbToLAB(e){return xyzToLAB(rgbToXYZ(e))}function labToRGB(e,t=1){return xyzToRGB(labToXYZ(e),t)}function rgbToLCH(e){return labToLCH(rgbToLAB(e))}function lchToRGB(e,t=1){return labToRGB(lchToLAB(e),t)}function saturateViaLCH(e,t,r=18){const s=rgbToLCH(e);let n=s.c+t*r;return n<0&&(n=0),lchToRGB(new ColorLCH(s.l,n,s.h))}function blendMultiplyChannel(e,t){return e*t}function blendMultiply(e,t){return new ColorRGBA64(blendMultiplyChannel(e.r,t.r),blendMultiplyChannel(e.g,t.g),blendMultiplyChannel(e.b,t.b),1)}function blendOverlayChannel(e,t){return clamp(e<.5?2*t*e:1-2*(1-t)*(1-e),0,1)}function blendOverlay(e,t){return new ColorRGBA64(blendOverlayChannel(e.r,t.r),blendOverlayChannel(e.g,t.g),blendOverlayChannel(e.b,t.b),1)}var ColorBlendMode,ColorBlendMode2,ColorInterpolationSpace,ColorInterpolationSpace2;function interpolateRGB(e,t,r){return isNaN(e)||e<=0?t:e>=1?r:new ColorRGBA64(lerp(e,t.r,r.r),lerp(e,t.g,r.g),lerp(e,t.b,r.b),lerp(e,t.a,r.a))}function interpolateHSL(e,t,r){return isNaN(e)||e<=0?t:e>=1?r:new ColorHSL(lerpAnglesInDegrees(e,t.h,r.h),lerp(e,t.s,r.s),lerp(e,t.l,r.l))}function interpolateHSV(e,t,r){return isNaN(e)||e<=0?t:e>=1?r:new ColorHSV(lerpAnglesInDegrees(e,t.h,r.h),lerp(e,t.s,r.s),lerp(e,t.v,r.v))}function interpolateXYZ(e,t,r){return isNaN(e)||e<=0?t:e>=1?r:new ColorXYZ(lerp(e,t.x,r.x),lerp(e,t.y,r.y),lerp(e,t.z,r.z))}function interpolateLAB(e,t,r){return isNaN(e)||e<=0?t:e>=1?r:new ColorLAB(lerp(e,t.l,r.l),lerp(e,t.a,r.a),lerp(e,t.b,r.b))}function interpolateLCH(e,t,r){return isNaN(e)||e<=0?t:e>=1?r:new ColorLCH(lerp(e,t.l,r.l),lerp(e,t.c,r.c),lerpAnglesInDegrees(e,t.h,r.h))}function interpolateByColorSpace(e,t,r,s){if(isNaN(e)||e<=0)return r;if(e>=1)return s;switch(t){case ColorInterpolationSpace.HSL:return hslToRGB(interpolateHSL(e,rgbToHSL(r),rgbToHSL(s)));case ColorInterpolationSpace.HSV:return hsvToRGB(interpolateHSV(e,rgbToHSV(r),rgbToHSV(s)));case ColorInterpolationSpace.XYZ:return xyzToRGB(interpolateXYZ(e,rgbToXYZ(r),rgbToXYZ(s)));case ColorInterpolationSpace.LAB:return labToRGB(interpolateLAB(e,rgbToLAB(r),rgbToLAB(s)));case ColorInterpolationSpace.LCH:return lchToRGB(interpolateLCH(e,rgbToLCH(r),rgbToLCH(s)));default:return interpolateRGB(e,r,s)}}ColorBlendMode2=ColorBlendMode||(ColorBlendMode={}),ColorBlendMode2[ColorBlendMode2.Burn=0]="Burn",ColorBlendMode2[ColorBlendMode2.Color=1]="Color",ColorBlendMode2[ColorBlendMode2.Darken=2]="Darken",ColorBlendMode2[ColorBlendMode2.Dodge=3]="Dodge",ColorBlendMode2[ColorBlendMode2.Lighten=4]="Lighten",ColorBlendMode2[ColorBlendMode2.Multiply=5]="Multiply",ColorBlendMode2[ColorBlendMode2.Overlay=6]="Overlay",ColorBlendMode2[ColorBlendMode2.Screen=7]="Screen",ColorInterpolationSpace2=ColorInterpolationSpace||(ColorInterpolationSpace={}),ColorInterpolationSpace2[ColorInterpolationSpace2.RGB=0]="RGB",ColorInterpolationSpace2[ColorInterpolationSpace2.HSL=1]="HSL",ColorInterpolationSpace2[ColorInterpolationSpace2.HSV=2]="HSV",ColorInterpolationSpace2[ColorInterpolationSpace2.XYZ=3]="XYZ",ColorInterpolationSpace2[ColorInterpolationSpace2.LAB=4]="LAB",ColorInterpolationSpace2[ColorInterpolationSpace2.LCH=5]="LCH";class ColorScale{constructor(e){if(null==e||0===e.length)throw new Error("The stops argument must be non-empty");this.stops=this.sortColorScaleStops(e)}static createBalancedColorScale(e){if(null==e||0===e.length)throw new Error("The colors argument must be non-empty");const t=new Array(e.length);for(let r=0;r<e.length;r++)0===r?t[r]={color:e[r],position:0}:r===e.length-1?t[r]={color:e[r],position:1}:t[r]={color:e[r],position:r*(1/(e.length-1))};return new ColorScale(t)}getColor(e,t=ColorInterpolationSpace.RGB){if(1===this.stops.length)return this.stops[0].color;if(e<=0)return this.stops[0].color;if(e>=1)return this.stops[this.stops.length-1].color;let r=0;for(let n=0;n<this.stops.length;n++)this.stops[n].position<=e&&(r=n);let s=r+1;s>=this.stops.length&&(s=this.stops.length-1);return interpolateByColorSpace((e-this.stops[r].position)*(1/(this.stops[s].position-this.stops[r].position)),t,this.stops[r].color,this.stops[s].color)}trim(e,t,r=ColorInterpolationSpace.RGB){if(e<0||t>1||t<e)throw new Error("Invalid bounds");if(e===t)return new ColorScale([{color:this.getColor(e,r),position:0}]);const s=[];for(let o=0;o<this.stops.length;o++)this.stops[o].position>=e&&this.stops[o].position<=t&&s.push(this.stops[o]);if(0===s.length)return new ColorScale([{color:this.getColor(e),position:e},{color:this.getColor(t),position:t}]);s[0].position!==e&&s.unshift({color:this.getColor(e),position:e}),s[s.length-1].position!==t&&s.push({color:this.getColor(t),position:t});const n=t-e,i=new Array(s.length);for(let o=0;o<s.length;o++)i[o]={color:s[o].color,position:(s[o].position-e)/n};return new ColorScale(i)}findNextColor(e,t,r=!1,s=ColorInterpolationSpace.RGB,n=.005,i=32){isNaN(e)||e<=0?e=0:e>=1&&(e=1);const o=this.getColor(e,s),a=r?0:1;if(contrastRatio(o,this.getColor(a,s))<=t)return a;let l=r?0:e,c=r?e:0,d=a,h=0;for(;h<=i;){d=Math.abs(c-l)/2+l;const e=contrastRatio(o,this.getColor(d,s));if(Math.abs(e-t)<=n)return d;e>t?r?l=d:c=d:r?c=d:l=d,h++}return d}clone(){const e=new Array(this.stops.length);for(let t=0;t<e.length;t++)e[t]={color:this.stops[t].color,position:this.stops[t].position};return new ColorScale(e)}sortColorScaleStops(e){return e.sort((e,t)=>{const r=e.position,s=t.position;return r<s?-1:r>s?1:0})}}const namedColorsConfigs={aliceblue:{r:.941176,g:.972549,b:1},antiquewhite:{r:.980392,g:.921569,b:.843137},aqua:{r:0,g:1,b:1},aquamarine:{r:.498039,g:1,b:.831373},azure:{r:.941176,g:1,b:1},beige:{r:.960784,g:.960784,b:.862745},bisque:{r:1,g:.894118,b:.768627},black:{r:0,g:0,b:0},blanchedalmond:{r:1,g:.921569,b:.803922},blue:{r:0,g:0,b:1},blueviolet:{r:.541176,g:.168627,b:.886275},brown:{r:.647059,g:.164706,b:.164706},burlywood:{r:.870588,g:.721569,b:.529412},cadetblue:{r:.372549,g:.619608,b:.627451},chartreuse:{r:.498039,g:1,b:0},chocolate:{r:.823529,g:.411765,b:.117647},coral:{r:1,g:.498039,b:.313725},cornflowerblue:{r:.392157,g:.584314,b:.929412},cornsilk:{r:1,g:.972549,b:.862745},crimson:{r:.862745,g:.078431,b:.235294},cyan:{r:0,g:1,b:1},darkblue:{r:0,g:0,b:.545098},darkcyan:{r:0,g:.545098,b:.545098},darkgoldenrod:{r:.721569,g:.52549,b:.043137},darkgray:{r:.662745,g:.662745,b:.662745},darkgreen:{r:0,g:.392157,b:0},darkgrey:{r:.662745,g:.662745,b:.662745},darkkhaki:{r:.741176,g:.717647,b:.419608},darkmagenta:{r:.545098,g:0,b:.545098},darkolivegreen:{r:.333333,g:.419608,b:.184314},darkorange:{r:1,g:.54902,b:0},darkorchid:{r:.6,g:.196078,b:.8},darkred:{r:.545098,g:0,b:0},darksalmon:{r:.913725,g:.588235,b:.478431},darkseagreen:{r:.560784,g:.737255,b:.560784},darkslateblue:{r:.282353,g:.239216,b:.545098},darkslategray:{r:.184314,g:.309804,b:.309804},darkslategrey:{r:.184314,g:.309804,b:.309804},darkturquoise:{r:0,g:.807843,b:.819608},darkviolet:{r:.580392,g:0,b:.827451},deeppink:{r:1,g:.078431,b:.576471},deepskyblue:{r:0,g:.74902,b:1},dimgray:{r:.411765,g:.411765,b:.411765},dimgrey:{r:.411765,g:.411765,b:.411765},dodgerblue:{r:.117647,g:.564706,b:1},firebrick:{r:.698039,g:.133333,b:.133333},floralwhite:{r:1,g:.980392,b:.941176},forestgreen:{r:.133333,g:.545098,b:.133333},fuchsia:{r:1,g:0,b:1},gainsboro:{r:.862745,g:.862745,b:.862745},ghostwhite:{r:.972549,g:.972549,b:1},gold:{r:1,g:.843137,b:0},goldenrod:{r:.854902,g:.647059,b:.12549},gray:{r:.501961,g:.501961,b:.501961},green:{r:0,g:.501961,b:0},greenyellow:{r:.678431,g:1,b:.184314},grey:{r:.501961,g:.501961,b:.501961},honeydew:{r:.941176,g:1,b:.941176},hotpink:{r:1,g:.411765,b:.705882},indianred:{r:.803922,g:.360784,b:.360784},indigo:{r:.294118,g:0,b:.509804},ivory:{r:1,g:1,b:.941176},khaki:{r:.941176,g:.901961,b:.54902},lavender:{r:.901961,g:.901961,b:.980392},lavenderblush:{r:1,g:.941176,b:.960784},lawngreen:{r:.486275,g:.988235,b:0},lemonchiffon:{r:1,g:.980392,b:.803922},lightblue:{r:.678431,g:.847059,b:.901961},lightcoral:{r:.941176,g:.501961,b:.501961},lightcyan:{r:.878431,g:1,b:1},lightgoldenrodyellow:{r:.980392,g:.980392,b:.823529},lightgray:{r:.827451,g:.827451,b:.827451},lightgreen:{r:.564706,g:.933333,b:.564706},lightgrey:{r:.827451,g:.827451,b:.827451},lightpink:{r:1,g:.713725,b:.756863},lightsalmon:{r:1,g:.627451,b:.478431},lightseagreen:{r:.12549,g:.698039,b:.666667},lightskyblue:{r:.529412,g:.807843,b:.980392},lightslategray:{r:.466667,g:.533333,b:.6},lightslategrey:{r:.466667,g:.533333,b:.6},lightsteelblue:{r:.690196,g:.768627,b:.870588},lightyellow:{r:1,g:1,b:.878431},lime:{r:0,g:1,b:0},limegreen:{r:.196078,g:.803922,b:.196078},linen:{r:.980392,g:.941176,b:.901961},magenta:{r:1,g:0,b:1},maroon:{r:.501961,g:0,b:0},mediumaquamarine:{r:.4,g:.803922,b:.666667},mediumblue:{r:0,g:0,b:.803922},mediumorchid:{r:.729412,g:.333333,b:.827451},mediumpurple:{r:.576471,g:.439216,b:.858824},mediumseagreen:{r:.235294,g:.701961,b:.443137},mediumslateblue:{r:.482353,g:.407843,b:.933333},mediumspringgreen:{r:0,g:.980392,b:.603922},mediumturquoise:{r:.282353,g:.819608,b:.8},mediumvioletred:{r:.780392,g:.082353,b:.521569},midnightblue:{r:.098039,g:.098039,b:.439216},mintcream:{r:.960784,g:1,b:.980392},mistyrose:{r:1,g:.894118,b:.882353},moccasin:{r:1,g:.894118,b:.709804},navajowhite:{r:1,g:.870588,b:.678431},navy:{r:0,g:0,b:.501961},oldlace:{r:.992157,g:.960784,b:.901961},olive:{r:.501961,g:.501961,b:0},olivedrab:{r:.419608,g:.556863,b:.137255},orange:{r:1,g:.647059,b:0},orangered:{r:1,g:.270588,b:0},orchid:{r:.854902,g:.439216,b:.839216},palegoldenrod:{r:.933333,g:.909804,b:.666667},palegreen:{r:.596078,g:.984314,b:.596078},paleturquoise:{r:.686275,g:.933333,b:.933333},palevioletred:{r:.858824,g:.439216,b:.576471},papayawhip:{r:1,g:.937255,b:.835294},peachpuff:{r:1,g:.854902,b:.72549},peru:{r:.803922,g:.521569,b:.247059},pink:{r:1,g:.752941,b:.796078},plum:{r:.866667,g:.627451,b:.866667},powderblue:{r:.690196,g:.878431,b:.901961},purple:{r:.501961,g:0,b:.501961},red:{r:1,g:0,b:0},rosybrown:{r:.737255,g:.560784,b:.560784},royalblue:{r:.254902,g:.411765,b:.882353},saddlebrown:{r:.545098,g:.270588,b:.07451},salmon:{r:.980392,g:.501961,b:.447059},sandybrown:{r:.956863,g:.643137,b:.376471},seagreen:{r:.180392,g:.545098,b:.341176},seashell:{r:1,g:.960784,b:.933333},sienna:{r:.627451,g:.321569,b:.176471},silver:{r:.752941,g:.752941,b:.752941},skyblue:{r:.529412,g:.807843,b:.921569},slateblue:{r:.415686,g:.352941,b:.803922},slategray:{r:.439216,g:.501961,b:.564706},slategrey:{r:.439216,g:.501961,b:.564706},snow:{r:1,g:.980392,b:.980392},springgreen:{r:0,g:1,b:.498039},steelblue:{r:.27451,g:.509804,b:.705882},tan:{r:.823529,g:.705882,b:.54902},teal:{r:0,g:.501961,b:.501961},thistle:{r:.847059,g:.74902,b:.847059},tomato:{r:1,g:.388235,b:.278431},transparent:{r:0,g:0,b:0,a:0},turquoise:{r:.25098,g:.878431,b:.815686},violet:{r:.933333,g:.509804,b:.933333},wheat:{r:.960784,g:.870588,b:.701961},white:{r:1,g:1,b:1},whitesmoke:{r:.960784,g:.960784,b:.960784},yellow:{r:1,g:1,b:0},yellowgreen:{r:.603922,g:.803922,b:.196078}},webRGBRegex=/^rgb\(\s*((?:(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*){2}(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*)\)$/i,webRGBARegex=/^rgba\(\s*((?:(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*){3}(?:0|1|0?\.\d*)\s*)\)$/i,hexRGBRegex=/^#((?:[0-9a-f]{6}|[0-9a-f]{3}))$/i,hexRGBARegex=/^#((?:[0-9a-f]{8}|[0-9a-f]{4}))$/i;function isColorStringHexRGB(e){return hexRGBRegex.test(e)}function isColorStringHexARGB(e){return hexRGBARegex.test(e)}function isColorStringHexRGBA(e){return isColorStringHexARGB(e)}function isColorStringWebRGB(e){return webRGBRegex.test(e)}function isColorStringWebRGBA(e){return webRGBARegex.test(e)}function isColorNamed(e){return namedColorsConfigs.hasOwnProperty(e)}function parseColorHexRGB(e){const t=hexRGBRegex.exec(e);if(null===t)return null;let r=t[1];if(3===r.length){const e=r.charAt(0),t=r.charAt(1),s=r.charAt(2);r=e.concat(e,t,t,s,s)}const s=parseInt(r,16);return isNaN(s)?null:new ColorRGBA64(normalize((16711680&s)>>>16,0,255),normalize((65280&s)>>>8,0,255),normalize(255&s,0,255),1)}function parseColorHexARGB(e){const t=hexRGBARegex.exec(e);if(null===t)return null;let r=t[1];if(4===r.length){const e=r.charAt(0),t=r.charAt(1),s=r.charAt(2),n=r.charAt(3);r=e.concat(e,t,t,s,s,n,n)}const s=parseInt(r,16);return isNaN(s)?null:new ColorRGBA64(normalize((16711680&s)>>>16,0,255),normalize((65280&s)>>>8,0,255),normalize(255&s,0,255),normalize((4278190080&s)>>>24,0,255))}function parseColorWebRGB(e){const t=webRGBRegex.exec(e);if(null===t)return null;const r=t[1].split(",");return new ColorRGBA64(normalize(Number(r[0]),0,255),normalize(Number(r[1]),0,255),normalize(Number(r[2]),0,255),1)}function parseColorWebRGBA(e){const t=webRGBARegex.exec(e);if(null===t)return null;const r=t[1].split(",");return 4===r.length?new ColorRGBA64(normalize(Number(r[0]),0,255),normalize(Number(r[1]),0,255),normalize(Number(r[2]),0,255),Number(r[3])):null}function parseColorNamed(e){const t=namedColorsConfigs[e.toLowerCase()];return t?new ColorRGBA64(t.r,t.g,t.b,t.hasOwnProperty("a")?t.a:void 0):null}function parseColor(e){const t=e.toLowerCase();return isColorStringHexRGB(t)?parseColorHexRGB(t):isColorStringHexRGBA(t)?parseColorHexARGB(t):isColorStringWebRGB(t)?parseColorWebRGB(t):isColorStringWebRGBA(t)?parseColorWebRGBA(t):isColorNamed(t)?parseColorNamed(t):null}class ColorPalette{constructor(e){this.config=Object.assign({},ColorPalette.defaultPaletteConfig,e),this.palette=[],this.updatePaletteColors()}updatePaletteGenerationValues(e){let t=!1;for(const r in e)this.config[r]&&(this.config[r].equalValue?this.config[r].equalValue(e[r])||(this.config[r]=e[r],t=!0):e[r]!==this.config[r]&&(this.config[r]=e[r],t=!0));return t&&this.updatePaletteColors(),t}updatePaletteColors(){const e=this.generatePaletteColorScale();for(let t=0;t<this.config.steps;t++)this.palette[t]=e.getColor(t/(this.config.steps-1),this.config.interpolationMode)}generatePaletteColorScale(){const e=rgbToHSL(this.config.baseColor),t=new ColorScale([{position:0,color:this.config.scaleColorLight},{position:.5,color:this.config.baseColor},{position:1,color:this.config.scaleColorDark}]).trim(this.config.clipLight,1-this.config.clipDark);let r=t.getColor(0),s=t.getColor(1);if(e.s>=this.config.saturationAdjustmentCutoff&&(r=saturateViaLCH(r,this.config.saturationLight),s=saturateViaLCH(s,this.config.saturationDark)),0!==this.config.multiplyLight){const e=blendMultiply(this.config.baseColor,r);r=interpolateByColorSpace(this.config.multiplyLight,this.config.interpolationMode,r,e)}if(0!==this.config.multiplyDark){const e=blendMultiply(this.config.baseColor,s);s=interpolateByColorSpace(this.config.multiplyDark,this.config.interpolationMode,s,e)}if(0!==this.config.overlayLight){const e=blendOverlay(this.config.baseColor,r);r=interpolateByColorSpace(this.config.overlayLight,this.config.interpolationMode,r,e)}if(0!==this.config.overlayDark){const e=blendOverlay(this.config.baseColor,s);s=interpolateByColorSpace(this.config.overlayDark,this.config.interpolationMode,s,e)}return this.config.baseScalePosition?this.config.baseScalePosition<=0?new ColorScale([{position:0,color:this.config.baseColor},{position:1,color:s.clamp()}]):this.config.baseScalePosition>=1?new ColorScale([{position:0,color:r.clamp()},{position:1,color:this.config.baseColor}]):new ColorScale([{position:0,color:r.clamp()},{position:this.config.baseScalePosition,color:this.config.baseColor},{position:1,color:s.clamp()}]):new ColorScale([{position:0,color:r.clamp()},{position:.5,color:this.config.baseColor},{position:1,color:s.clamp()}])}}ColorPalette.defaultPaletteConfig={baseColor:parseColorHexRGB("#808080"),steps:11,interpolationMode:ColorInterpolationSpace.RGB,scaleColorLight:new ColorRGBA64(1,1,1,1),scaleColorDark:new ColorRGBA64(0,0,0,1),clipLight:.185,clipDark:.16,saturationAdjustmentCutoff:.05,saturationLight:.35,saturationDark:1.25,overlayLight:0,overlayDark:.25,multiplyLight:0,multiplyDark:0,baseScalePosition:.5},ColorPalette.greyscalePaletteConfig={baseColor:parseColorHexRGB("#808080"),steps:11,interpolationMode:ColorInterpolationSpace.RGB,scaleColorLight:new ColorRGBA64(1,1,1,1),scaleColorDark:new ColorRGBA64(0,0,0,1),clipLight:0,clipDark:0,saturationAdjustmentCutoff:0,saturationLight:0,saturationDark:0,overlayLight:0,overlayDark:0,multiplyLight:0,multiplyDark:0,baseScalePosition:.5},ColorPalette.defaultPaletteConfig.scaleColorLight,ColorPalette.defaultPaletteConfig.scaleColorDark;class ComponentStateColorPalette{constructor(e){this.palette=[],this.config=Object.assign({},ComponentStateColorPalette.defaultPaletteConfig,e),this.regenPalettes()}regenPalettes(){let e=this.config.steps;(isNaN(e)||e<3)&&(e=3);const t=.14,r=new ColorRGBA64(t,t,t,1),s=new ColorPalette(Object.assign(Object.assign({},ColorPalette.greyscalePaletteConfig),{baseColor:r,baseScalePosition:86/94,steps:e})).palette,n=(rgbToLinearLuminance(this.config.baseColor)+rgbToHSL(this.config.baseColor).l)/2,i=this.matchRelativeLuminanceIndex(n,s)/(e-1),o=this.matchRelativeLuminanceIndex(t,s)/(e-1),a=rgbToHSL(this.config.baseColor),l=hslToRGB(ColorHSL.fromObject({h:a.h,s:a.s,l:t})),c=hslToRGB(ColorHSL.fromObject({h:a.h,s:a.s,l:.06})),d=new Array(5);d[0]={position:0,color:new ColorRGBA64(1,1,1,1)},d[1]={position:i,color:this.config.baseColor},d[2]={position:o,color:l},d[3]={position:.99,color:c},d[4]={position:1,color:new ColorRGBA64(0,0,0,1)};const h=new ColorScale(d);this.palette=new Array(e);for(let u=0;u<e;u++){const t=h.getColor(u/(e-1),ColorInterpolationSpace.RGB);this.palette[u]=t}}matchRelativeLuminanceIndex(e,t){let r=Number.MAX_VALUE,s=0,n=0;const i=t.length;for(;n<i;n++){const i=Math.abs(rgbToLinearLuminance(t[n])-e);i<r&&(r=i,s=n)}return s}}function contrast$1(e,t){const r=e.relativeLuminance>t.relativeLuminance?e:t,s=e.relativeLuminance>t.relativeLuminance?t:e;return(r.relativeLuminance+.05)/(s.relativeLuminance+.05)}ComponentStateColorPalette.defaultPaletteConfig={baseColor:parseColorHexRGB("#808080"),steps:94};const SwatchRGB$1=Object.freeze({create:(e,t,r)=>new SwatchRGBImpl$1(e,t,r),from:e=>new SwatchRGBImpl$1(e.r,e.g,e.b)});function isSwatchRGB$1(e){const t={r:0,g:0,b:0,toColorString:()=>"",contrast:()=>0,relativeLuminance:0};for(const r in t)if(typeof t[r]!=typeof e[r])return!1;return!0}let SwatchRGBImpl$1=class e extends ColorRGBA64{constructor(e,t,r){super(e,t,r,1),this.toColorString=this.toStringHexRGB,this.contrast=contrast$1.bind(null,this),this.createCSS=this.toColorString,this.relativeLuminance=rgbToRelativeLuminance(this)}static fromObject(t){return new e(t.r,t.g,t.b)}};function baseLayerLuminanceSwatch$1(e){return SwatchRGB$1.create(e,e,e)}const StandardLuminance$1={DarkMode:.23},target$1=(-.1+Math.sqrt(.21))/2;function isDark$1(e){return e.relativeLuminance<=target$1}const $global=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return new Function("return this")()}catch(e){return{}}}();void 0===$global.trustedTypes&&($global.trustedTypes={createPolicy:(e,t)=>t});const propConfig={configurable:!1,enumerable:!1,writable:!1};void 0===$global.FAST&&Reflect.defineProperty($global,"FAST",Object.assign({value:/* @__PURE__ */Object.create(null)},propConfig));const FAST=$global.FAST;if(void 0===FAST.getById){const e=/* @__PURE__ */Object.create(null);Reflect.defineProperty(FAST,"getById",Object.assign({value(t,r){let s=e[t];return void 0===s&&(s=r?e[t]=r():null),s}},propConfig))}const emptyArray=Object.freeze([]);function createMetadataLocator(){const e=/* @__PURE__ */new WeakMap;return function(t){let r=e.get(t);if(void 0===r){let s=Reflect.getPrototypeOf(t);for(;void 0===r&&null!==s;)r=e.get(s),s=Reflect.getPrototypeOf(s);r=void 0===r?[]:r.slice(0),e.set(t,r)}return r}}const updateQueue=$global.FAST.getById(1,()=>{const e=[],t=[];function r(){if(t.length)throw t.shift()}function s(e){try{e.call()}catch(s){t.push(s),setTimeout(r,0)}}function n(){let t=0;for(;t<e.length;)if(s(e[t]),t++,t>1024){for(let r=0,s=e.length-t;r<s;r++)e[r]=e[r+t];e.length-=t,t=0}e.length=0}return Object.freeze({enqueue:function(t){e.length<1&&$global.requestAnimationFrame(n),e.push(t)},process:n})}),fastHTMLPolicy=$global.trustedTypes.createPolicy("fast-html",{createHTML:e=>e});let htmlPolicy=fastHTMLPolicy;const marker=`fast-${Math.random().toString(36).substring(2,8)}`,_interpolationStart=`${marker}{`,_interpolationEnd=`}${marker}`,DOM=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(e){if(htmlPolicy!==fastHTMLPolicy)throw new Error("The HTML policy can only be set once.");htmlPolicy=e},createHTML:e=>htmlPolicy.createHTML(e),isMarker:e=>e&&8===e.nodeType&&e.data.startsWith(marker),extractDirectiveIndexFromMarker:e=>parseInt(e.data.replace(`${marker}:`,"")),createInterpolationPlaceholder:e=>`${_interpolationStart}${e}${_interpolationEnd}`,createCustomAttributePlaceholder(e,t){return`${e}="${this.createInterpolationPlaceholder(t)}"`},createBlockPlaceholder:e=>`\x3c!--${marker}:${e}--\x3e`,queueUpdate:updateQueue.enqueue,processUpdates:updateQueue.process,nextUpdate:()=>new Promise(updateQueue.enqueue),setAttribute(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)},setBooleanAttribute(e,t,r){r?e.setAttribute(t,""):e.removeAttribute(t)},removeChildNodes(e){for(let t=e.firstChild;null!==t;t=e.firstChild)e.removeChild(t)},createTemplateWalker:e=>document.createTreeWalker(e,133,null,!1)});class SubscriberSet{constructor(e,t){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=e,this.sub1=t}has(e){return void 0===this.spillover?this.sub1===e||this.sub2===e:-1!==this.spillover.indexOf(e)}subscribe(e){const t=this.spillover;if(void 0===t){if(this.has(e))return;if(void 0===this.sub1)return void(this.sub1=e);if(void 0===this.sub2)return void(this.sub2=e);this.spillover=[this.sub1,this.sub2,e],this.sub1=void 0,this.sub2=void 0}else{-1===t.indexOf(e)&&t.push(e)}}unsubscribe(e){const t=this.spillover;if(void 0===t)this.sub1===e?this.sub1=void 0:this.sub2===e&&(this.sub2=void 0);else{const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}notify(e){const t=this.spillover,r=this.source;if(void 0===t){const t=this.sub1,s=this.sub2;void 0!==t&&t.handleChange(r,e),void 0!==s&&s.handleChange(r,e)}else for(let s=0,n=t.length;s<n;++s)t[s].handleChange(r,e)}}class PropertyChangeNotifier{constructor(e){this.subscribers={},this.sourceSubscribers=null,this.source=e}notify(e){var t;const r=this.subscribers[e];void 0!==r&&r.notify(e),null===(t=this.sourceSubscribers)||void 0===t||t.notify(e)}subscribe(e,t){var r;if(t){let r=this.subscribers[t];void 0===r&&(this.subscribers[t]=r=new SubscriberSet(this.source)),r.subscribe(e)}else this.sourceSubscribers=null!==(r=this.sourceSubscribers)&&void 0!==r?r:new SubscriberSet(this.source),this.sourceSubscribers.subscribe(e)}unsubscribe(e,t){var r;if(t){const r=this.subscribers[t];void 0!==r&&r.unsubscribe(e)}else null===(r=this.sourceSubscribers)||void 0===r||r.unsubscribe(e)}}const Observable$1=FAST.getById(2,()=>{const e=/(:|&&|\|\||if)/,t=/* @__PURE__ */new WeakMap,r=DOM.queueUpdate;let s,n=e=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function i(e){let r=e.$fastController||t.get(e);return void 0===r&&(Array.isArray(e)?r=n(e):t.set(e,r=new PropertyChangeNotifier(e))),r}const o=createMetadataLocator();class a{constructor(e){this.name=e,this.field=`_${e}`,this.callback=`${e}Changed`}getValue(e){return void 0!==s&&s.watch(e,this.name),e[this.field]}setValue(e,t){const r=this.field,s=e[r];if(s!==t){e[r]=t;const n=e[this.callback];"function"==typeof n&&n.call(e,s,t),i(e).notify(this.name)}}}class l extends SubscriberSet{constructor(e,t,r=!1){super(e,t),this.binding=e,this.isVolatileBinding=r,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(e,t){this.needsRefresh&&null!==this.last&&this.disconnect();const r=s;s=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const n=this.binding(e,t);return s=r,n}disconnect(){if(null!==this.last){let e=this.first;for(;void 0!==e;)e.notifier.unsubscribe(this,e.propertyName),e=e.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(e,t){const r=this.last,n=i(e),o=null===r?this.first:{};if(o.propertySource=e,o.propertyName=t,o.notifier=n,n.subscribe(this,t),null!==r){if(!this.needsRefresh){let t;s=void 0,t=r.propertySource[r.propertyName],s=this,e===t&&(this.needsRefresh=!0)}r.next=o}this.last=o}handleChange(){this.needsQueue&&(this.needsQueue=!1,r(this))}call(){null!==this.last&&(this.needsQueue=!0,this.notify(this))}records(){let e=this.first;return{next:()=>{const t=e;return void 0===t?{value:void 0,done:!0}:(e=e.next,{value:t,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(e){n=e},getNotifier:i,track(e,t){void 0!==s&&s.watch(e,t)},trackVolatile(){void 0!==s&&(s.needsRefresh=!0)},notify(e,t){i(e).notify(t)},defineProperty(e,t){"string"==typeof t&&(t=new a(t)),o(e).push(t),Reflect.defineProperty(e,t.name,{enumerable:!0,get:function(){return t.getValue(this)},set:function(e){t.setValue(this,e)}})},getAccessors:o,binding(e,t,r=this.isVolatileBinding(e)){return new l(e,t,r)},isVolatileBinding:t=>e.test(t.toString())})});function observable(e,t){Observable$1.defineProperty(e,t)}function volatile(e,t,r){return Object.assign({},r,{get:function(){return Observable$1.trackVolatile(),r.get.apply(this)}})}const contextEvent=FAST.getById(3,()=>{let e=null;return{get:()=>e,set(t){e=t}}});class ExecutionContext{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return contextEvent.get()}get isEven(){return this.index%2==0}get isOdd(){return this.index%2!=0}get isFirst(){return 0===this.index}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(e){contextEvent.set(e)}}Observable$1.defineProperty(ExecutionContext.prototype,"index"),Observable$1.defineProperty(ExecutionContext.prototype,"length");const defaultExecutionContext=Object.seal(new ExecutionContext);class HTMLDirective{constructor(){this.targetIndex=0}}class TargetedHTMLDirective extends HTMLDirective{constructor(){super(...arguments),this.createPlaceholder=DOM.createInterpolationPlaceholder}}class AttachedBehaviorHTMLDirective extends HTMLDirective{constructor(e,t,r){super(),this.name=e,this.behavior=t,this.options=r}createPlaceholder(e){return DOM.createCustomAttributePlaceholder(this.name,e)}createBehavior(e){return new this.behavior(e,this.options)}}function normalBind(e,t){this.source=e,this.context=t,null===this.bindingObserver&&(this.bindingObserver=Observable$1.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(e,t))}function triggerBind(e,t){this.source=e,this.context=t,this.target.addEventListener(this.targetName,this)}function normalUnbind(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function contentUnbind(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const e=this.target.$fastView;void 0!==e&&e.isComposed&&(e.unbind(),e.needsBindOnly=!0)}function triggerUnbind(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function updateAttributeTarget(e){DOM.setAttribute(this.target,this.targetName,e)}function updateBooleanAttributeTarget(e){DOM.setBooleanAttribute(this.target,this.targetName,e)}function updateContentTarget(e){if(null==e&&(e=""),e.create){this.target.textContent="";let t=this.target.$fastView;void 0===t?t=e.create():this.target.$fastTemplate!==e&&(t.isComposed&&(t.remove(),t.unbind()),t=e.create()),t.isComposed?t.needsBindOnly&&(t.needsBindOnly=!1,t.bind(this.source,this.context)):(t.isComposed=!0,t.bind(this.source,this.context),t.insertBefore(this.target),this.target.$fastView=t,this.target.$fastTemplate=e)}else{const t=this.target.$fastView;void 0!==t&&t.isComposed&&(t.isComposed=!1,t.remove(),t.needsBindOnly?t.needsBindOnly=!1:t.unbind()),this.target.textContent=e}}function updatePropertyTarget(e){this.target[this.targetName]=e}function updateClassTarget(e){const t=this.classVersions||/* @__PURE__ */Object.create(null),r=this.target;let s=this.version||0;if(null!=e&&e.length){const n=e.split(/\s+/);for(let e=0,i=n.length;e<i;++e){const i=n[e];""!==i&&(t[i]=s,r.classList.add(i))}}if(this.classVersions=t,this.version=s+1,0!==s){s-=1;for(const e in t)t[e]===s&&r.classList.remove(e)}}class HTMLBindingDirective extends TargetedHTMLDirective{constructor(e){super(),this.binding=e,this.bind=normalBind,this.unbind=normalUnbind,this.updateTarget=updateAttributeTarget,this.isBindingVolatile=Observable$1.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(e){if(this.originalTargetName=e,void 0!==e)switch(e[0]){case":":if(this.cleanedTargetName=e.substr(1),this.updateTarget=updatePropertyTarget,"innerHTML"===this.cleanedTargetName){const e=this.binding;this.binding=(t,r)=>DOM.createHTML(e(t,r))}break;case"?":this.cleanedTargetName=e.substr(1),this.updateTarget=updateBooleanAttributeTarget;break;case"@":this.cleanedTargetName=e.substr(1),this.bind=triggerBind,this.unbind=triggerUnbind;break;default:this.cleanedTargetName=e,"class"===e&&(this.updateTarget=updateClassTarget)}}targetAtContent(){this.updateTarget=updateContentTarget,this.unbind=contentUnbind}createBehavior(e){return new BindingBehavior(e,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class BindingBehavior{constructor(e,t,r,s,n,i,o){this.source=null,this.context=null,this.bindingObserver=null,this.target=e,this.binding=t,this.isBindingVolatile=r,this.bind=s,this.unbind=n,this.updateTarget=i,this.targetName=o}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(e){ExecutionContext.setEvent(e);const t=this.binding(this.source,this.context);ExecutionContext.setEvent(null),!0!==t&&e.preventDefault()}}let sharedContext=null;class CompilationContext{addFactory(e){e.targetIndex=this.targetIndex,this.behaviorFactories.push(e)}captureContentBinding(e){e.targetAtContent(),this.addFactory(e)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){sharedContext=this}static borrow(e){const t=sharedContext||new CompilationContext;return t.directives=e,t.reset(),sharedContext=null,t}}function createAggregateBinding(e){if(1===e.length)return e[0];let t;const r=e.length,s=e.map(e=>"string"==typeof e?()=>e:(t=e.targetName||t,e.binding)),n=new HTMLBindingDirective((e,t)=>{let n="";for(let i=0;i<r;++i)n+=s[i](e,t);return n});return n.targetName=t,n}const interpolationEndLength=_interpolationEnd.length;function parseContent(e,t){const r=t.split(_interpolationStart);if(1===r.length)return null;const s=[];for(let n=0,i=r.length;n<i;++n){const t=r[n],i=t.indexOf(_interpolationEnd);let o;if(-1===i)o=t;else{const r=parseInt(t.substring(0,i));s.push(e.directives[r]),o=t.substring(i+interpolationEndLength)}""!==o&&s.push(o)}return s}function compileAttributes(e,t,r=!1){const s=t.attributes;for(let n=0,i=s.length;n<i;++n){const o=s[n],a=o.value,l=parseContent(e,a);let c=null;null===l?r&&(c=new HTMLBindingDirective(()=>a),c.targetName=o.name):c=createAggregateBinding(l),null!==c&&(t.removeAttributeNode(o),n--,i--,e.addFactory(c))}}function compileContent(e,t,r){const s=parseContent(e,t.textContent);if(null!==s){let n=t;for(let i=0,o=s.length;i<o;++i){const o=s[i],a=0===i?t:n.parentNode.insertBefore(document.createTextNode(""),n.nextSibling);"string"==typeof o?a.textContent=o:(a.textContent=" ",e.captureContentBinding(o)),n=a,e.targetIndex++,a!==t&&r.nextNode()}e.targetIndex--}}function compileTemplate(e,t){const r=e.content;document.adoptNode(r);const s=CompilationContext.borrow(t);compileAttributes(s,e,!0);const n=s.behaviorFactories;s.reset();const i=DOM.createTemplateWalker(r);let o;for(;o=i.nextNode();)switch(s.targetIndex++,o.nodeType){case 1:compileAttributes(s,o);break;case 3:compileContent(s,o,i);break;case 8:DOM.isMarker(o)&&s.addFactory(t[DOM.extractDirectiveIndexFromMarker(o)])}let a=0;(DOM.isMarker(r.firstChild)||1===r.childNodes.length&&t.length)&&(r.insertBefore(document.createComment(""),r.firstChild),a=-1);const l=s.behaviorFactories;return s.release(),{fragment:r,viewBehaviorFactories:l,hostBehaviorFactories:n,targetOffset:a}}const range=document.createRange();class HTMLView{constructor(e,t){this.fragment=e,this.behaviors=t,this.source=null,this.context=null,this.firstChild=e.firstChild,this.lastChild=e.lastChild}appendTo(e){e.appendChild(this.fragment)}insertBefore(e){if(this.fragment.hasChildNodes())e.parentNode.insertBefore(this.fragment,e);else{const t=this.lastChild;if(e.previousSibling===t)return;const r=e.parentNode;let s,n=this.firstChild;for(;n!==t;)s=n.nextSibling,r.insertBefore(n,e),n=s;r.insertBefore(t,e)}}remove(){const e=this.fragment,t=this.lastChild;let r,s=this.firstChild;for(;s!==t;)r=s.nextSibling,e.appendChild(s),s=r;e.appendChild(t)}dispose(){const e=this.firstChild.parentNode,t=this.lastChild;let r,s=this.firstChild;for(;s!==t;)r=s.nextSibling,e.removeChild(s),s=r;e.removeChild(t);const n=this.behaviors,i=this.source;for(let o=0,a=n.length;o<a;++o)n[o].unbind(i)}bind(e,t){const r=this.behaviors;if(this.source!==e)if(null!==this.source){const s=this.source;this.source=e,this.context=t;for(let n=0,i=r.length;n<i;++n){const i=r[n];i.unbind(s),i.bind(e,t)}}else{this.source=e,this.context=t;for(let s=0,n=r.length;s<n;++s)r[s].bind(e,t)}}unbind(){if(null===this.source)return;const e=this.behaviors,t=this.source;for(let r=0,s=e.length;r<s;++r)e[r].unbind(t);this.source=null}static disposeContiguousBatch(e){if(0!==e.length){range.setStartBefore(e[0].firstChild),range.setEndAfter(e[e.length-1].lastChild),range.deleteContents();for(let t=0,r=e.length;t<r;++t){const r=e[t],s=r.behaviors,n=r.source;for(let e=0,t=s.length;e<t;++e)s[e].unbind(n)}}}}class ViewTemplate{constructor(e,t){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=e,this.directives=t}create(e){if(null===this.fragment){let e;const t=this.html;if("string"==typeof t){e=document.createElement("template"),e.innerHTML=DOM.createHTML(t);const r=e.content.firstElementChild;null!==r&&"TEMPLATE"===r.tagName&&(e=r)}else e=t;const r=compileTemplate(e,this.directives);this.fragment=r.fragment,this.viewBehaviorFactories=r.viewBehaviorFactories,this.hostBehaviorFactories=r.hostBehaviorFactories,this.targetOffset=r.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const t=this.fragment.cloneNode(!0),r=this.viewBehaviorFactories,s=new Array(this.behaviorCount),n=DOM.createTemplateWalker(t);let i=0,o=this.targetOffset,a=n.nextNode();for(let l=r.length;i<l;++i){const e=r[i],t=e.targetIndex;for(;null!==a;){if(o===t){s[i]=e.createBehavior(a);break}a=n.nextNode(),o++}}if(this.hasHostBehaviors){const t=this.hostBehaviorFactories;for(let r=0,n=t.length;r<n;++r,++i)s[i]=t[r].createBehavior(e)}return new HTMLView(t,s)}render(e,t,r){"string"==typeof t&&(t=document.getElementById(t)),void 0===r&&(r=t);const s=this.create(r);return s.bind(e,defaultExecutionContext),s.appendTo(t),s}}const lastAttributeNameRegex=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function html(e,...t){const r=[];let s="";for(let n=0,i=e.length-1;n<i;++n){const i=e[n];let o=t[n];if(s+=i,o instanceof ViewTemplate){const e=o;o=()=>e}if("function"==typeof o&&(o=new HTMLBindingDirective(o)),o instanceof TargetedHTMLDirective){const e=lastAttributeNameRegex.exec(i);null!==e&&(o.targetName=e[2])}o instanceof HTMLDirective?(s+=o.createPlaceholder(r.length),r.push(o)):s+=o}return s+=e[e.length-1],new ViewTemplate(s,r)}class ElementStyles{constructor(){this.targets=/* @__PURE__ */new WeakSet}addStylesTo(e){this.targets.add(e)}removeStylesFrom(e){this.targets.delete(e)}isAttachedTo(e){return this.targets.has(e)}withBehaviors(...e){return this.behaviors=null===this.behaviors?e:this.behaviors.concat(e),this}}function reduceStyles(e){return e.map(e=>e instanceof ElementStyles?reduceStyles(e.styles):[e]).reduce((e,t)=>e.concat(t),[])}function reduceBehaviors(e){return e.map(e=>e instanceof ElementStyles?e.behaviors:null).reduce((e,t)=>null===t?e:(null===e&&(e=[]),e.concat(t)),null)}ElementStyles.create=(()=>{if(DOM.supportsAdoptedStyleSheets){const e=/* @__PURE__ */new Map;return t=>new AdoptedStyleSheetsStyles(t,e)}return e=>new StyleElementStyles(e)})();const prependToAdoptedStyleSheetsSymbol=/* @__PURE__ */Symbol("prependToAdoptedStyleSheets");function separateSheetsToPrepend(e){const t=[],r=[];return e.forEach(e=>(e[prependToAdoptedStyleSheetsSymbol]?t:r).push(e)),{prepend:t,append:r}}let addAdoptedStyleSheets=(e,t)=>{const{prepend:r,append:s}=separateSheetsToPrepend(t);e.adoptedStyleSheets=[...r,...e.adoptedStyleSheets,...s]},removeAdoptedStyleSheets=(e,t)=>{e.adoptedStyleSheets=e.adoptedStyleSheets.filter(e=>-1===t.indexOf(e))};if(DOM.supportsAdoptedStyleSheets)try{document.adoptedStyleSheets.push(),document.adoptedStyleSheets.splice(),addAdoptedStyleSheets=(e,t)=>{const{prepend:r,append:s}=separateSheetsToPrepend(t);e.adoptedStyleSheets.splice(0,0,...r),e.adoptedStyleSheets.push(...s)},removeAdoptedStyleSheets=(e,t)=>{for(const r of t){const t=e.adoptedStyleSheets.indexOf(r);-1!==t&&e.adoptedStyleSheets.splice(t,1)}}}catch(e){}class AdoptedStyleSheetsStyles extends ElementStyles{constructor(e,t){super(),this.styles=e,this.styleSheetCache=t,this._styleSheets=void 0,this.behaviors=reduceBehaviors(e)}get styleSheets(){if(void 0===this._styleSheets){const e=this.styles,t=this.styleSheetCache;this._styleSheets=reduceStyles(e).map(e=>{if(e instanceof CSSStyleSheet)return e;let r=t.get(e);return void 0===r&&(r=new CSSStyleSheet,r.replaceSync(e),t.set(e,r)),r})}return this._styleSheets}addStylesTo(e){addAdoptedStyleSheets(e,this.styleSheets),super.addStylesTo(e)}removeStylesFrom(e){removeAdoptedStyleSheets(e,this.styleSheets),super.removeStylesFrom(e)}}let styleClassId=0;function getNextStyleClass(){return"fast-style-class-"+ ++styleClassId}class StyleElementStyles extends ElementStyles{constructor(e){super(),this.styles=e,this.behaviors=null,this.behaviors=reduceBehaviors(e),this.styleSheets=reduceStyles(e),this.styleClass=getNextStyleClass()}addStylesTo(e){const t=this.styleSheets,r=this.styleClass;e=this.normalizeTarget(e);for(let s=0;s<t.length;s++){const n=document.createElement("style");n.innerHTML=t[s],n.className=r,e.append(n)}super.addStylesTo(e)}removeStylesFrom(e){const t=(e=this.normalizeTarget(e)).querySelectorAll(`.${this.styleClass}`);for(let r=0,s=t.length;r<s;++r)e.removeChild(t[r]);super.removeStylesFrom(e)}isAttachedTo(e){return super.isAttachedTo(this.normalizeTarget(e))}normalizeTarget(e){return e===document?document.body:e}}const AttributeConfiguration=Object.freeze({locate:createMetadataLocator()}),booleanConverter={toView:e=>e?"true":"false",fromView:e=>null!=e&&"false"!==e&&!1!==e&&0!==e},nullableNumberConverter={toView(e){if(null==e)return null;const t=1*e;return isNaN(t)?null:t.toString()},fromView(e){if(null==e)return null;const t=1*e;return isNaN(t)?null:t}};class AttributeDefinition{constructor(e,t,r=t.toLowerCase(),s="reflect",n){this.guards=/* @__PURE__ */new Set,this.Owner=e,this.name=t,this.attribute=r,this.mode=s,this.converter=n,this.fieldName=`_${t}`,this.callbackName=`${t}Changed`,this.hasCallback=this.callbackName in e.prototype,"boolean"===s&&void 0===n&&(this.converter=booleanConverter)}setValue(e,t){const r=e[this.fieldName],s=this.converter;void 0!==s&&(t=s.fromView(t)),r!==t&&(e[this.fieldName]=t,this.tryReflectToAttribute(e),this.hasCallback&&e[this.callbackName](r,t),e.$fastController.notify(this.name))}getValue(e){return Observable$1.track(e,this.name),e[this.fieldName]}onAttributeChangedCallback(e,t){this.guards.has(e)||(this.guards.add(e),this.setValue(e,t),this.guards.delete(e))}tryReflectToAttribute(e){const t=this.mode,r=this.guards;r.has(e)||"fromView"===t||DOM.queueUpdate(()=>{r.add(e);const s=e[this.fieldName];switch(t){case"reflect":const t=this.converter;DOM.setAttribute(e,this.attribute,void 0!==t?t.toView(s):s);break;case"boolean":DOM.setBooleanAttribute(e,this.attribute,s)}r.delete(e)})}static collect(e,...t){const r=[];t.push(AttributeConfiguration.locate(e));for(let s=0,n=t.length;s<n;++s){const n=t[s];if(void 0!==n)for(let t=0,s=n.length;t<s;++t){const s=n[t];"string"==typeof s?r.push(new AttributeDefinition(e,s)):r.push(new AttributeDefinition(e,s.property,s.attribute,s.mode,s.converter))}}return r}}function attr(e,t){let r;function s(e,t){arguments.length>1&&(r.property=t),AttributeConfiguration.locate(e.constructor).push(r)}return arguments.length>1?(r={},void s(e,t)):(r=void 0===e?{}:e,s)}const defaultShadowOptions={mode:"open"},defaultElementOptions={},fastRegistry=FAST.getById(4,()=>{const e=/* @__PURE__ */new Map;return Object.freeze({register:t=>!e.has(t.type)&&(e.set(t.type,t),!0),getByType:t=>e.get(t)})});class FASTElementDefinition{constructor(e,t=e.definition){"string"==typeof t&&(t={name:t}),this.type=e,this.name=t.name,this.template=t.template;const r=AttributeDefinition.collect(e,t.attributes),s=new Array(r.length),n={},i={};for(let o=0,a=r.length;o<a;++o){const e=r[o];s[o]=e.attribute,n[e.name]=e,i[e.attribute]=e}this.attributes=r,this.observedAttributes=s,this.propertyLookup=n,this.attributeLookup=i,this.shadowOptions=void 0===t.shadowOptions?defaultShadowOptions:null===t.shadowOptions?void 0:Object.assign(Object.assign({},defaultShadowOptions),t.shadowOptions),this.elementOptions=void 0===t.elementOptions?defaultElementOptions:Object.assign(Object.assign({},defaultElementOptions),t.elementOptions),this.styles=void 0===t.styles?void 0:Array.isArray(t.styles)?ElementStyles.create(t.styles):t.styles instanceof ElementStyles?t.styles:ElementStyles.create([t.styles])}get isDefined(){return!!fastRegistry.getByType(this.type)}define(e=customElements){const t=this.type;if(fastRegistry.register(this)){const e=this.attributes,r=t.prototype;for(let t=0,s=e.length;t<s;++t)Observable$1.defineProperty(r,e[t]);Reflect.defineProperty(t,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return e.get(this.name)||e.define(this.name,t,this.elementOptions),this}}FASTElementDefinition.forType=fastRegistry.getByType;const shadowRoots=/* @__PURE__ */new WeakMap,defaultEventOptions={bubbles:!0,composed:!0,cancelable:!0};function getShadowRoot(e){return e.shadowRoot||shadowRoots.get(e)||null}class Controller extends PropertyChangeNotifier{constructor(e,t){super(e),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=e,this.definition=t;const r=t.shadowOptions;if(void 0!==r){const t=e.attachShadow(r);"closed"===r.mode&&shadowRoots.set(e,t)}const s=Observable$1.getAccessors(e);if(s.length>0){const t=this.boundObservables=/* @__PURE__ */Object.create(null);for(let r=0,n=s.length;r<n;++r){const n=s[r].name,i=e[n];void 0!==i&&(delete e[n],t[n]=i)}}}get isConnected(){return Observable$1.track(this,"isConnected"),this._isConnected}setIsConnected(e){this._isConnected=e,Observable$1.notify(this,"isConnected")}get template(){return this._template}set template(e){this._template!==e&&(this._template=e,this.needsInitialization||this.renderTemplate(e))}get styles(){return this._styles}set styles(e){this._styles!==e&&(null!==this._styles&&this.removeStyles(this._styles),this._styles=e,this.needsInitialization||null===e||this.addStyles(e))}addStyles(e){const t=getShadowRoot(this.element)||this.element.getRootNode();if(e instanceof HTMLStyleElement)t.append(e);else if(!e.isAttachedTo(t)){const r=e.behaviors;e.addStylesTo(t),null!==r&&this.addBehaviors(r)}}removeStyles(e){const t=getShadowRoot(this.element)||this.element.getRootNode();if(e instanceof HTMLStyleElement)t.removeChild(e);else if(e.isAttachedTo(t)){const r=e.behaviors;e.removeStylesFrom(t),null!==r&&this.removeBehaviors(r)}}addBehaviors(e){const t=this.behaviors||(this.behaviors=/* @__PURE__ */new Map),r=e.length,s=[];for(let n=0;n<r;++n){const r=e[n];t.has(r)?t.set(r,t.get(r)+1):(t.set(r,1),s.push(r))}if(this._isConnected){const e=this.element;for(let t=0;t<s.length;++t)s[t].bind(e,defaultExecutionContext)}}removeBehaviors(e,t=!1){const r=this.behaviors;if(null===r)return;const s=e.length,n=[];for(let i=0;i<s;++i){const s=e[i];if(r.has(s)){const e=r.get(s)-1;0===e||t?r.delete(s)&&n.push(s):r.set(s,e)}}if(this._isConnected){const e=this.element;for(let t=0;t<n.length;++t)n[t].unbind(e)}}onConnectedCallback(){if(this._isConnected)return;const e=this.element;this.needsInitialization?this.finishInitialization():null!==this.view&&this.view.bind(e,defaultExecutionContext);const t=this.behaviors;if(null!==t)for(const[r]of t)r.bind(e,defaultExecutionContext);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const e=this.view;null!==e&&e.unbind();const t=this.behaviors;if(null!==t){const e=this.element;for(const[r]of t)r.unbind(e)}}onAttributeChangedCallback(e,t,r){const s=this.definition.attributeLookup[e];void 0!==s&&s.onAttributeChangedCallback(this.element,r)}emit(e,t,r){return!!this._isConnected&&this.element.dispatchEvent(new CustomEvent(e,Object.assign(Object.assign({detail:t},defaultEventOptions),r)))}finishInitialization(){const e=this.element,t=this.boundObservables;if(null!==t){const r=Object.keys(t);for(let s=0,n=r.length;s<n;++s){const n=r[s];e[n]=t[n]}this.boundObservables=null}const r=this.definition;null===this._template&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():r.template&&(this._template=r.template||null)),null!==this._template&&this.renderTemplate(this._template),null===this._styles&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():r.styles&&(this._styles=r.styles||null)),null!==this._styles&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(e){const t=this.element,r=getShadowRoot(t)||t;null!==this.view?(this.view.dispose(),this.view=null):this.needsInitialization||DOM.removeChildNodes(r),e&&(this.view=e.render(t,r,t))}static forCustomElement(e){const t=e.$fastController;if(void 0!==t)return t;const r=FASTElementDefinition.forType(e.constructor);if(void 0===r)throw new Error("Missing FASTElement definition.");return e.$fastController=new Controller(e,r)}}function createFASTElement(e){return class extends e{constructor(){super(),Controller.forCustomElement(this)}$emit(e,t,r){return this.$fastController.emit(e,t,r)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(e,t,r){this.$fastController.onAttributeChangedCallback(e,t,r)}}}const FASTElement=Object.assign(createFASTElement(HTMLElement),{from:e=>createFASTElement(e),define:(e,t)=>new FASTElementDefinition(e,t).define().type});class CSSDirective{createCSS(){return""}createBehavior(){}}function collectStyles(e,t){const r=[];let s="";const n=[];for(let i=0,o=e.length-1;i<o;++i){s+=e[i];let o=t[i];if(o instanceof CSSDirective){const e=o.createBehavior();o=o.createCSS(),e&&n.push(e)}o instanceof ElementStyles||o instanceof CSSStyleSheet?(""!==s.trim()&&(r.push(s),s=""),r.push(o)):s+=o}return s+=e[e.length-1],""!==s.trim()&&r.push(s),{styles:r,behaviors:n}}function css(e,...t){const{styles:r,behaviors:s}=collectStyles(e,t),n=ElementStyles.create(r);return s.length&&n.withBehaviors(...s),n}class CSSPartial extends CSSDirective{constructor(e,t){super(),this.behaviors=t,this.css="";const r=e.reduce((e,t)=>("string"==typeof t?this.css+=t:e.push(t),e),[]);r.length&&(this.styles=ElementStyles.create(r))}createBehavior(){return this}createCSS(){return this.css}bind(e){this.styles&&e.$fastController.addStyles(this.styles),this.behaviors.length&&e.$fastController.addBehaviors(this.behaviors)}unbind(e){this.styles&&e.$fastController.removeStyles(this.styles),this.behaviors.length&&e.$fastController.removeBehaviors(this.behaviors)}}function cssPartial(e,...t){const{styles:r,behaviors:s}=collectStyles(e,t);return new CSSPartial(r,s)}class RefBehavior{constructor(e,t){this.target=e,this.propertyName=t}bind(e){e[this.propertyName]=this.target}unbind(){}}function ref(e){return new AttachedBehaviorHTMLDirective("fast-ref",RefBehavior,e)}function elements(e){return e?function(t,r,s){return 1===t.nodeType&&t.matches(e)}:function(e,t,r){return 1===e.nodeType}}class NodeObservationBehavior{constructor(e,t){this.target=e,this.options=t,this.source=null}bind(e){const t=this.options.property;this.shouldUpdate=Observable$1.getAccessors(e).some(e=>e.name===t),this.source=e,this.updateTarget(this.computeNodes()),this.shouldUpdate&&this.observe()}unbind(){this.updateTarget(emptyArray),this.source=null,this.shouldUpdate&&this.disconnect()}handleEvent(){this.updateTarget(this.computeNodes())}computeNodes(){let e=this.getNodes();return void 0!==this.options.filter&&(e=e.filter(this.options.filter)),e}updateTarget(e){this.source[this.options.property]=e}}class SlottedBehavior extends NodeObservationBehavior{constructor(e,t){super(e,t)}observe(){this.target.addEventListener("slotchange",this)}disconnect(){this.target.removeEventListener("slotchange",this)}getNodes(){return this.target.assignedNodes(this.options)}}function slotted(e){return"string"==typeof e&&(e={property:e}),new AttachedBehaviorHTMLDirective("fast-slotted",SlottedBehavior,e)}class ChildrenBehavior extends NodeObservationBehavior{constructor(e,t){super(e,t),this.observer=null,t.childList=!0}observe(){null===this.observer&&(this.observer=new MutationObserver(this.handleEvent.bind(this))),this.observer.observe(this.target,this.options)}disconnect(){this.observer.disconnect()}getNodes(){return"subtree"in this.options?Array.from(this.target.querySelectorAll(this.options.selector)):Array.from(this.target.childNodes)}}function children(e){return"string"==typeof e&&(e={property:e}),new AttachedBehaviorHTMLDirective("fast-children",ChildrenBehavior,e)}class StartEnd{handleStartContentChange(){this.startContainer.classList.toggle("start",this.start.assignedNodes().length>0)}handleEndContentChange(){this.endContainer.classList.toggle("end",this.end.assignedNodes().length>0)}}const endSlotTemplate=(e,t)=>html`
    <span
        part="end"
        ${ref("endContainer")}
        class=${e=>t.end?"end":void 0}
    >
        <slot name="end" ${ref("end")} @slotchange="${e=>e.handleEndContentChange()}">
            ${t.end||""}
        </slot>
    </span>
`,startSlotTemplate=(e,t)=>html`
    <span
        part="start"
        ${ref("startContainer")}
        class="${e=>t.start?"start":void 0}"
    >
        <slot
            name="start"
            ${ref("start")}
            @slotchange="${e=>e.handleStartContentChange()}"
        >
            ${t.start||""}
        </slot>
    </span>
`;function __decorate$1(e,t,r,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}html`
    <span part="end" ${ref("endContainer")}>
        <slot
            name="end"
            ${ref("end")}
            @slotchange="${e=>e.handleEndContentChange()}"
        ></slot>
    </span>
`,html`
    <span part="start" ${ref("startContainer")}>
        <slot
            name="start"
            ${ref("start")}
            @slotchange="${e=>e.handleStartContentChange()}"
        ></slot>
    </span>
`;const metadataByTarget=/* @__PURE__ */new Map;"metadata"in Reflect||(Reflect.metadata=function(e,t){return function(r){Reflect.defineMetadata(e,t,r)}},Reflect.defineMetadata=function(e,t,r){let s=metadataByTarget.get(r);void 0===s&&metadataByTarget.set(r,s=/* @__PURE__ */new Map),s.set(e,t)},Reflect.getOwnMetadata=function(e,t){const r=metadataByTarget.get(t);if(void 0!==r)return r.get(e)});class ResolverBuilder{constructor(e,t){this.container=e,this.key=t}instance(e){return this.registerResolver(0,e)}singleton(e){return this.registerResolver(1,e)}transient(e){return this.registerResolver(2,e)}callback(e){return this.registerResolver(3,e)}cachedCallback(e){return this.registerResolver(3,cacheCallbackResult(e))}aliasTo(e){return this.registerResolver(5,e)}registerResolver(e,t){const{container:r,key:s}=this;return this.container=this.key=void 0,r.registerResolver(s,new ResolverImpl(s,e,t))}}function cloneArrayWithPossibleProps(e){const t=e.slice(),r=Object.keys(e),s=r.length;let n;for(let i=0;i<s;++i)n=r[i],isArrayIndex(n)||(t[n]=e[n]);return t}const DefaultResolver=Object.freeze({none(e){throw Error(`${e.toString()} not registered, did you forget to add @singleton()?`)},singleton:e=>new ResolverImpl(e,1,e),transient:e=>new ResolverImpl(e,2,e)}),ContainerConfiguration=Object.freeze({default:Object.freeze({parentLocator:()=>null,responsibleForOwnerRequests:!1,defaultResolver:DefaultResolver.singleton})}),dependencyLookup=/* @__PURE__ */new Map;function getParamTypes(e){return t=>Reflect.getOwnMetadata(e,t)}let rootDOMContainer=null;const DI=Object.freeze({createContainer:e=>new ContainerImpl(null,Object.assign({},ContainerConfiguration.default,e)),findResponsibleContainer(e){const t=e.$$container$$;return t&&t.responsibleForOwnerRequests?t:DI.findParentContainer(e)},findParentContainer(e){const t=new CustomEvent(DILocateParentEventType,{bubbles:!0,composed:!0,cancelable:!0,detail:{container:void 0}});return e.dispatchEvent(t),t.detail.container||DI.getOrCreateDOMContainer()},getOrCreateDOMContainer:(e,t)=>e?e.$$container$$||new ContainerImpl(e,Object.assign({},ContainerConfiguration.default,t,{parentLocator:DI.findParentContainer})):rootDOMContainer||(rootDOMContainer=new ContainerImpl(null,Object.assign({},ContainerConfiguration.default,t,{parentLocator:()=>null}))),getDesignParamtypes:getParamTypes("design:paramtypes"),getAnnotationParamtypes:getParamTypes("di:paramtypes"),getOrCreateAnnotationParamTypes(e){let t=this.getAnnotationParamtypes(e);return void 0===t&&Reflect.defineMetadata("di:paramtypes",t=[],e),t},getDependencies(e){let t=dependencyLookup.get(e);if(void 0===t){const r=e.inject;if(void 0===r){const r=DI.getDesignParamtypes(e),s=DI.getAnnotationParamtypes(e);if(void 0===r)if(void 0===s){const r=Object.getPrototypeOf(e);t="function"==typeof r&&r!==Function.prototype?cloneArrayWithPossibleProps(DI.getDependencies(r)):[]}else t=cloneArrayWithPossibleProps(s);else if(void 0===s)t=cloneArrayWithPossibleProps(r);else{t=cloneArrayWithPossibleProps(r);let e,n=s.length;for(let r=0;r<n;++r)e=s[r],void 0!==e&&(t[r]=e);const i=Object.keys(s);let o;n=i.length;for(let r=0;r<n;++r)o=i[r],isArrayIndex(o)||(t[o]=s[o])}}else t=cloneArrayWithPossibleProps(r);dependencyLookup.set(e,t)}return t},defineProperty(e,t,r,s=!1){const n=`$di_${t}`;Reflect.defineProperty(e,t,{get:function(){let e=this[n];if(void 0===e){const i=this instanceof HTMLElement?DI.findResponsibleContainer(this):DI.getOrCreateDOMContainer();if(e=i.get(r),this[n]=e,s&&this instanceof FASTElement){const s=this.$fastController,i=()=>{DI.findResponsibleContainer(this).get(r)!==this[n]&&(this[n]=e,s.notify(t))};s.subscribe({handleChange:i},"isConnected")}}return e}})},createInterface(e,t){const r="function"==typeof e?e:t,s="string"==typeof e?e:e&&"friendlyName"in e&&e.friendlyName||defaultFriendlyName,n="string"!=typeof e&&(e&&"respectConnection"in e&&e.respectConnection||!1),i=function(e,t,r){if(null==e||void 0!==new.target)throw new Error(`No registration for interface: '${i.friendlyName}'`);if(t)DI.defineProperty(e,t,i,n);else{DI.getOrCreateAnnotationParamTypes(e)[r]=i}};return i.$isInterface=!0,i.friendlyName=null==s?"(anonymous)":s,null!=r&&(i.register=function(e,t){return r(new ResolverBuilder(e,null!=t?t:i))}),i.toString=function(){return`InterfaceSymbol<${i.friendlyName}>`},i},inject:(...e)=>function(t,r,s){if("number"==typeof s){const r=DI.getOrCreateAnnotationParamTypes(t),n=e[0];void 0!==n&&(r[s]=n)}else if(r)DI.defineProperty(t,r,e[0]);else{const r=s?DI.getOrCreateAnnotationParamTypes(s.value):DI.getOrCreateAnnotationParamTypes(t);let n;for(let t=0;t<e.length;++t)n=e[t],void 0!==n&&(r[t]=n)}},transient:e=>(e.register=function(t){return Registration.transient(e,e).register(t)},e.registerInRequestor=!1,e),singleton:(e,t=defaultSingletonOptions)=>(e.register=function(t){return Registration.singleton(e,e).register(t)},e.registerInRequestor=t.scoped,e)}),Container=DI.createInterface("Container");DI.inject;const defaultSingletonOptions={scoped:!1};class ResolverImpl{constructor(e,t,r){this.key=e,this.strategy=t,this.state=r,this.resolving=!1}get $isResolver(){return!0}register(e){return e.registerResolver(this.key,this)}resolve(e,t){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`Cyclic dependency found: ${this.state.name}`);return this.resolving=!0,this.state=e.getFactory(this.state).construct(t),this.strategy=0,this.resolving=!1,this.state;case 2:{const r=e.getFactory(this.state);if(null===r)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return r.construct(t)}case 3:return this.state(e,t,this);case 4:return this.state[0].resolve(e,t);case 5:return t.get(this.state);default:throw new Error(`Invalid resolver strategy specified: ${this.strategy}.`)}}getFactory(e){var t,r,s;switch(this.strategy){case 1:case 2:return e.getFactory(this.state);case 5:return null!==(s=null===(r=null===(t=e.getResolver(this.state))||void 0===t?void 0:t.getFactory)||void 0===r?void 0:r.call(t,e))&&void 0!==s?s:null;default:return null}}}function containerGetKey(e){return this.get(e)}function transformInstance(e,t){return t(e)}class FactoryImpl{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){let r;return r=void 0===t?new this.Type(...this.dependencies.map(containerGetKey,e)):new this.Type(...this.dependencies.map(containerGetKey,e),...t),null==this.transformers?r:this.transformers.reduce(transformInstance,r)}registerTransformer(e){(this.transformers||(this.transformers=[])).push(e)}}const containerResolver={$isResolver:!0,resolve:(e,t)=>t};function isRegistry(e){return"function"==typeof e.register}function isSelfRegistry(e){return isRegistry(e)&&"boolean"==typeof e.registerInRequestor}function isRegisterInRequester(e){return isSelfRegistry(e)&&e.registerInRequestor}function isClass(e){return void 0!==e.prototype}const InstrinsicTypeNames=/* @__PURE__ */new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]),DILocateParentEventType="__DI_LOCATE_PARENT__",factories=/* @__PURE__ */new Map;class ContainerImpl{constructor(e,t){this.owner=e,this.config=t,this._parent=void 0,this.registerDepth=0,this.context=null,null!==e&&(e.$$container$$=this),this.resolvers=/* @__PURE__ */new Map,this.resolvers.set(Container,containerResolver),e instanceof Node&&e.addEventListener(DILocateParentEventType,e=>{e.composedPath()[0]!==this.owner&&(e.detail.container=this,e.stopImmediatePropagation())})}get parent(){return void 0===this._parent&&(this._parent=this.config.parentLocator(this.owner)),this._parent}get depth(){return null===this.parent?0:this.parent.depth+1}get responsibleForOwnerRequests(){return this.config.responsibleForOwnerRequests}registerWithContext(e,...t){return this.context=e,this.register(...t),this.context=null,this}register(...e){if(100===++this.registerDepth)throw new Error("Unable to autoregister dependency");let t,r,s,n,i;const o=this.context;for(let a=0,l=e.length;a<l;++a)if(t=e[a],isObject$1(t))if(isRegistry(t))t.register(this,o);else if(isClass(t))Registration.singleton(t,t).register(this);else for(r=Object.keys(t),n=0,i=r.length;n<i;++n)s=t[r[n]],isObject$1(s)&&(isRegistry(s)?s.register(this,o):this.register(s));return--this.registerDepth,this}registerResolver(e,t){validateKey(e);const r=this.resolvers,s=r.get(e);return null==s?r.set(e,t):s instanceof ResolverImpl&&4===s.strategy?s.state.push(t):r.set(e,new ResolverImpl(e,4,[s,t])),t}registerTransformer(e,t){const r=this.getResolver(e);if(null==r)return!1;if(r.getFactory){const e=r.getFactory(this);return null!=e&&(e.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(validateKey(e),void 0!==e.resolve)return e;let r,s=this;for(;null!=s;){if(r=s.resolvers.get(e),null!=r)return r;if(null==s.parent){const r=isRegisterInRequester(e)?this:s;return t?this.jitRegister(e,r):null}s=s.parent}return null}has(e,t=!1){return!!this.resolvers.has(e)||!(!t||null==this.parent)&&this.parent.has(e,!0)}get(e){if(validateKey(e),e.$isResolver)return e.resolve(this,this);let t,r=this;for(;null!=r;){if(t=r.resolvers.get(e),null!=t)return t.resolve(r,this);if(null==r.parent){const s=isRegisterInRequester(e)?this:r;return t=this.jitRegister(e,s),t.resolve(r,this)}r=r.parent}throw new Error(`Unable to resolve key: ${String(e)}`)}getAll(e,t=!1){validateKey(e);const r=this;let s,n=r;if(t){let t=emptyArray;for(;null!=n;)s=n.resolvers.get(e),null!=s&&(t=t.concat(buildAllResponse(s,n,r))),n=n.parent;return t}for(;null!=n;){if(s=n.resolvers.get(e),null!=s)return buildAllResponse(s,n,r);if(n=n.parent,null==n)return emptyArray}return emptyArray}getFactory(e){let t=factories.get(e);if(void 0===t){if(isNativeFunction(e))throw new Error(`${e.name} is a native function and therefore cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.`);factories.set(e,t=new FactoryImpl(e,DI.getDependencies(e)))}return t}registerFactory(e,t){factories.set(e,t)}createChild(e){return new ContainerImpl(null,Object.assign({},this.config,e,{parentLocator:()=>this}))}jitRegister(e,t){if("function"!=typeof e)throw new Error(`Attempted to jitRegister something that is not a constructor: '${e}'. Did you forget to register this dependency?`);if(InstrinsicTypeNames.has(e.name))throw new Error(`Attempted to jitRegister an intrinsic type: ${e.name}. Did you forget to add @inject(Key)`);if(isRegistry(e)){const r=e.register(t);if(!(r instanceof Object)||null==r.resolve){const r=t.resolvers.get(e);if(null!=r)return r;throw new Error("A valid resolver was not returned from the static register method")}return r}if(e.$isInterface)throw new Error(`Attempted to jitRegister an interface: ${e.friendlyName}`);{const r=this.config.defaultResolver(e,t);return t.resolvers.set(e,r),r}}}const cache=/* @__PURE__ */new WeakMap;function cacheCallbackResult(e){return function(t,r,s){if(cache.has(s))return cache.get(s);const n=e(t,r,s);return cache.set(s,n),n}}const Registration=Object.freeze({instance:(e,t)=>new ResolverImpl(e,0,t),singleton:(e,t)=>new ResolverImpl(e,1,t),transient:(e,t)=>new ResolverImpl(e,2,t),callback:(e,t)=>new ResolverImpl(e,3,t),cachedCallback:(e,t)=>new ResolverImpl(e,3,cacheCallbackResult(t)),aliasTo:(e,t)=>new ResolverImpl(t,5,e)});function validateKey(e){if(null==e)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function buildAllResponse(e,t,r){if(e instanceof ResolverImpl&&4===e.strategy){const s=e.state;let n=s.length;const i=new Array(n);for(;n--;)i[n]=s[n].resolve(t,r);return i}return[e.resolve(t,r)]}const defaultFriendlyName="(anonymous)";function isObject$1(e){return"object"==typeof e&&null!==e||"function"==typeof e}const isNativeFunction=/* @__PURE__ */function(){const e=/* @__PURE__ */new WeakMap;let t=!1,r="",s=0;return function(n){return t=e.get(n),void 0===t&&(r=n.toString(),s=r.length,t=s>=29&&s<=100&&125===r.charCodeAt(s-1)&&r.charCodeAt(s-2)<=32&&93===r.charCodeAt(s-3)&&101===r.charCodeAt(s-4)&&100===r.charCodeAt(s-5)&&111===r.charCodeAt(s-6)&&99===r.charCodeAt(s-7)&&32===r.charCodeAt(s-8)&&101===r.charCodeAt(s-9)&&118===r.charCodeAt(s-10)&&105===r.charCodeAt(s-11)&&116===r.charCodeAt(s-12)&&97===r.charCodeAt(s-13)&&110===r.charCodeAt(s-14)&&88===r.charCodeAt(s-15),e.set(n,t)),t}}(),isNumericLookup={};function isArrayIndex(e){switch(typeof e){case"number":return e>=0&&(0|e)===e;case"string":{const t=isNumericLookup[e];if(void 0!==t)return t;const r=e.length;if(0===r)return isNumericLookup[e]=!1;let s=0;for(let n=0;n<r;++n)if(s=e.charCodeAt(n),0===n&&48===s&&r>1||s<48||s>57)return isNumericLookup[e]=!1;return isNumericLookup[e]=!0}default:return!1}}function presentationKeyFromTag(e){return`${e.toLowerCase()}:presentation`}const presentationRegistry=/* @__PURE__ */new Map,ComponentPresentation=Object.freeze({define(e,t,r){const s=presentationKeyFromTag(e);void 0===presentationRegistry.get(s)?presentationRegistry.set(s,t):presentationRegistry.set(s,!1),r.register(Registration.instance(s,t))},forTag(e,t){const r=presentationKeyFromTag(e),s=presentationRegistry.get(r);if(!1===s){return DI.findResponsibleContainer(t).get(r)}return s||null}});class DefaultComponentPresentation{constructor(e,t){this.template=e||null,this.styles=void 0===t?null:Array.isArray(t)?ElementStyles.create(t):t instanceof ElementStyles?t:ElementStyles.create([t])}applyTo(e){const t=e.$fastController;null===t.template&&(t.template=this.template),null===t.styles&&(t.styles=this.styles)}}class FoundationElement extends FASTElement{constructor(){super(...arguments),this._presentation=void 0}get $presentation(){return void 0===this._presentation&&(this._presentation=ComponentPresentation.forTag(this.tagName,this)),this._presentation}templateChanged(){void 0!==this.template&&(this.$fastController.template=this.template)}stylesChanged(){void 0!==this.styles&&(this.$fastController.styles=this.styles)}connectedCallback(){null!==this.$presentation&&this.$presentation.applyTo(this),super.connectedCallback()}static compose(e){return(t={})=>new FoundationElementRegistry(this===FoundationElement?class extends FoundationElement{}:this,e,t)}}function resolveOption(e,t,r){return"function"==typeof e?e(t,r):e}__decorate$1([observable],FoundationElement.prototype,"template",void 0),__decorate$1([observable],FoundationElement.prototype,"styles",void 0);class FoundationElementRegistry{constructor(e,t,r){this.type=e,this.elementDefinition=t,this.overrideDefinition=r,this.definition=Object.assign(Object.assign({},this.elementDefinition),this.overrideDefinition)}register(e,t){const r=this.definition,s=this.overrideDefinition,n=`${r.prefix||t.elementPrefix}-${r.baseName}`;t.tryDefineElement({name:n,type:this.type,baseClass:this.elementDefinition.baseClass,callback:e=>{const t=new DefaultComponentPresentation(resolveOption(r.template,e,r),resolveOption(r.styles,e,r));e.definePresentation(t);let n=resolveOption(r.shadowOptions,e,r);e.shadowRootMode&&(n?s.shadowOptions||(n.mode=e.shadowRootMode):null!==n&&(n={mode:e.shadowRootMode})),e.defineElement({elementOptions:resolveOption(r.elementOptions,e,r),shadowOptions:n,attributes:resolveOption(r.attributes,e,r)})}})}}function applyMixins(e,...t){const r=AttributeConfiguration.locate(e);t.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{"constructor"!==r&&Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r))});AttributeConfiguration.locate(t).forEach(e=>r.push(e))})}const Orientation={horizontal:"horizontal",vertical:"vertical"};function canUseDOM(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function isHTMLElement(...e){return e.every(e=>e instanceof HTMLElement)}function getDisplayedNodes(e,t){if(!e||!t||!isHTMLElement(e))return;return Array.from(e.querySelectorAll(t)).filter(e=>null!==e.offsetParent)}function getNonce(){const e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}let _canUseFocusVisible;function canUseFocusVisible(){if("boolean"==typeof _canUseFocusVisible)return _canUseFocusVisible;if(!canUseDOM())return _canUseFocusVisible=!1,_canUseFocusVisible;const t=document.createElement("style"),r=getNonce();null!==r&&t.setAttribute("nonce",r),document.head.appendChild(t);try{t.sheet.insertRule("foo:focus-visible {color:inherit}",0),_canUseFocusVisible=!0}catch(e){_canUseFocusVisible=!1}finally{document.head.removeChild(t)}return _canUseFocusVisible}var KeyCodes,KeyCodes2;KeyCodes2=KeyCodes||(KeyCodes={}),KeyCodes2[KeyCodes2.alt=18]="alt",KeyCodes2[KeyCodes2.arrowDown=40]="arrowDown",KeyCodes2[KeyCodes2.arrowLeft=37]="arrowLeft",KeyCodes2[KeyCodes2.arrowRight=39]="arrowRight",KeyCodes2[KeyCodes2.arrowUp=38]="arrowUp",KeyCodes2[KeyCodes2.back=8]="back",KeyCodes2[KeyCodes2.backSlash=220]="backSlash",KeyCodes2[KeyCodes2.break=19]="break",KeyCodes2[KeyCodes2.capsLock=20]="capsLock",KeyCodes2[KeyCodes2.closeBracket=221]="closeBracket",KeyCodes2[KeyCodes2.colon=186]="colon",KeyCodes2[KeyCodes2.colon2=59]="colon2",KeyCodes2[KeyCodes2.comma=188]="comma",KeyCodes2[KeyCodes2.ctrl=17]="ctrl",KeyCodes2[KeyCodes2.delete=46]="delete",KeyCodes2[KeyCodes2.end=35]="end",KeyCodes2[KeyCodes2.enter=13]="enter",KeyCodes2[KeyCodes2.equals=187]="equals",KeyCodes2[KeyCodes2.equals2=61]="equals2",KeyCodes2[KeyCodes2.equals3=107]="equals3",KeyCodes2[KeyCodes2.escape=27]="escape",KeyCodes2[KeyCodes2.forwardSlash=191]="forwardSlash",KeyCodes2[KeyCodes2.function1=112]="function1",KeyCodes2[KeyCodes2.function10=121]="function10",KeyCodes2[KeyCodes2.function11=122]="function11",KeyCodes2[KeyCodes2.function12=123]="function12",KeyCodes2[KeyCodes2.function2=113]="function2",KeyCodes2[KeyCodes2.function3=114]="function3",KeyCodes2[KeyCodes2.function4=115]="function4",KeyCodes2[KeyCodes2.function5=116]="function5",KeyCodes2[KeyCodes2.function6=117]="function6",KeyCodes2[KeyCodes2.function7=118]="function7",KeyCodes2[KeyCodes2.function8=119]="function8",KeyCodes2[KeyCodes2.function9=120]="function9",KeyCodes2[KeyCodes2.home=36]="home",KeyCodes2[KeyCodes2.insert=45]="insert",KeyCodes2[KeyCodes2.menu=93]="menu",KeyCodes2[KeyCodes2.minus=189]="minus",KeyCodes2[KeyCodes2.minus2=109]="minus2",KeyCodes2[KeyCodes2.numLock=144]="numLock",KeyCodes2[KeyCodes2.numPad0=96]="numPad0",KeyCodes2[KeyCodes2.numPad1=97]="numPad1",KeyCodes2[KeyCodes2.numPad2=98]="numPad2",KeyCodes2[KeyCodes2.numPad3=99]="numPad3",KeyCodes2[KeyCodes2.numPad4=100]="numPad4",KeyCodes2[KeyCodes2.numPad5=101]="numPad5",KeyCodes2[KeyCodes2.numPad6=102]="numPad6",KeyCodes2[KeyCodes2.numPad7=103]="numPad7",KeyCodes2[KeyCodes2.numPad8=104]="numPad8",KeyCodes2[KeyCodes2.numPad9=105]="numPad9",KeyCodes2[KeyCodes2.numPadDivide=111]="numPadDivide",KeyCodes2[KeyCodes2.numPadDot=110]="numPadDot",KeyCodes2[KeyCodes2.numPadMinus=109]="numPadMinus",KeyCodes2[KeyCodes2.numPadMultiply=106]="numPadMultiply",KeyCodes2[KeyCodes2.numPadPlus=107]="numPadPlus",KeyCodes2[KeyCodes2.openBracket=219]="openBracket",KeyCodes2[KeyCodes2.pageDown=34]="pageDown",KeyCodes2[KeyCodes2.pageUp=33]="pageUp",KeyCodes2[KeyCodes2.period=190]="period",KeyCodes2[KeyCodes2.print=44]="print",KeyCodes2[KeyCodes2.quote=222]="quote",KeyCodes2[KeyCodes2.scrollLock=145]="scrollLock",KeyCodes2[KeyCodes2.shift=16]="shift",KeyCodes2[KeyCodes2.space=32]="space",KeyCodes2[KeyCodes2.tab=9]="tab",KeyCodes2[KeyCodes2.tilde=192]="tilde",KeyCodes2[KeyCodes2.windowsLeft=91]="windowsLeft",KeyCodes2[KeyCodes2.windowsOpera=219]="windowsOpera",KeyCodes2[KeyCodes2.windowsRight=92]="windowsRight";const keyArrowDown="ArrowDown",keyArrowLeft="ArrowLeft",keyArrowRight="ArrowRight",keyArrowUp="ArrowUp",keyEnter="Enter",keyEscape="Escape",keyHome="Home",keyEnd="End",keyFunction2="F2",keyPageDown="PageDown",keyPageUp="PageUp",keySpace=" ",keyTab="Tab",keyBackspace="Backspace",keyDelete="Delete",ArrowKeys={ArrowDown:keyArrowDown,ArrowLeft:keyArrowLeft,ArrowRight:keyArrowRight,ArrowUp:keyArrowUp};var Direction,Direction2,SystemColors,SystemColors2;function wrapInBounds(e,t,r){return r<e?t:r>t?e:r}function limit(e,t,r){return Math.min(Math.max(r,e),t)}function inRange(e,t,r=0){return[t,r]=[t,r].sort((e,t)=>e-t),t<=e&&e<r}Direction2=Direction||(Direction={}),Direction2.ltr="ltr",Direction2.rtl="rtl",SystemColors2=SystemColors||(SystemColors={}),SystemColors2.Canvas="Canvas",SystemColors2.CanvasText="CanvasText",SystemColors2.LinkText="LinkText",SystemColors2.VisitedText="VisitedText",SystemColors2.ActiveText="ActiveText",SystemColors2.ButtonFace="ButtonFace",SystemColors2.ButtonText="ButtonText",SystemColors2.Field="Field",SystemColors2.FieldText="FieldText",SystemColors2.Highlight="Highlight",SystemColors2.HighlightText="HighlightText",SystemColors2.GrayText="GrayText";class ARIAGlobalStatesAndProperties{}__decorate$1([attr({attribute:"aria-atomic"})],ARIAGlobalStatesAndProperties.prototype,"ariaAtomic",void 0),__decorate$1([attr({attribute:"aria-busy"})],ARIAGlobalStatesAndProperties.prototype,"ariaBusy",void 0),__decorate$1([attr({attribute:"aria-controls"})],ARIAGlobalStatesAndProperties.prototype,"ariaControls",void 0),__decorate$1([attr({attribute:"aria-current"})],ARIAGlobalStatesAndProperties.prototype,"ariaCurrent",void 0),__decorate$1([attr({attribute:"aria-describedby"})],ARIAGlobalStatesAndProperties.prototype,"ariaDescribedby",void 0),__decorate$1([attr({attribute:"aria-details"})],ARIAGlobalStatesAndProperties.prototype,"ariaDetails",void 0),__decorate$1([attr({attribute:"aria-disabled"})],ARIAGlobalStatesAndProperties.prototype,"ariaDisabled",void 0),__decorate$1([attr({attribute:"aria-errormessage"})],ARIAGlobalStatesAndProperties.prototype,"ariaErrormessage",void 0),__decorate$1([attr({attribute:"aria-flowto"})],ARIAGlobalStatesAndProperties.prototype,"ariaFlowto",void 0),__decorate$1([attr({attribute:"aria-haspopup"})],ARIAGlobalStatesAndProperties.prototype,"ariaHaspopup",void 0),__decorate$1([attr({attribute:"aria-hidden"})],ARIAGlobalStatesAndProperties.prototype,"ariaHidden",void 0),__decorate$1([attr({attribute:"aria-invalid"})],ARIAGlobalStatesAndProperties.prototype,"ariaInvalid",void 0),__decorate$1([attr({attribute:"aria-keyshortcuts"})],ARIAGlobalStatesAndProperties.prototype,"ariaKeyshortcuts",void 0),__decorate$1([attr({attribute:"aria-label"})],ARIAGlobalStatesAndProperties.prototype,"ariaLabel",void 0),__decorate$1([attr({attribute:"aria-labelledby"})],ARIAGlobalStatesAndProperties.prototype,"ariaLabelledby",void 0),__decorate$1([attr({attribute:"aria-live"})],ARIAGlobalStatesAndProperties.prototype,"ariaLive",void 0),__decorate$1([attr({attribute:"aria-owns"})],ARIAGlobalStatesAndProperties.prototype,"ariaOwns",void 0),__decorate$1([attr({attribute:"aria-relevant"})],ARIAGlobalStatesAndProperties.prototype,"ariaRelevant",void 0),__decorate$1([attr({attribute:"aria-roledescription"})],ARIAGlobalStatesAndProperties.prototype,"ariaRoledescription",void 0);const getDirection=e=>{const t=e.closest("[dir]");return null!==t&&"rtl"===t.dir?Direction.rtl:Direction.ltr},buttonTemplate=(e,t)=>html`
    <button
        class="control"
        part="control"
        ?autofocus="${e=>e.autofocus}"
        ?disabled="${e=>e.disabled}"
        form="${e=>e.formId}"
        formaction="${e=>e.formaction}"
        formenctype="${e=>e.formenctype}"
        formmethod="${e=>e.formmethod}"
        formnovalidate="${e=>e.formnovalidate}"
        formtarget="${e=>e.formtarget}"
        name="${e=>e.name}"
        type="${e=>e.type}"
        value="${e=>e.value}"
        aria-atomic="${e=>e.ariaAtomic}"
        aria-busy="${e=>e.ariaBusy}"
        aria-controls="${e=>e.ariaControls}"
        aria-current="${e=>e.ariaCurrent}"
        aria-describedby="${e=>e.ariaDescribedby}"
        aria-details="${e=>e.ariaDetails}"
        aria-disabled="${e=>e.ariaDisabled}"
        aria-errormessage="${e=>e.ariaErrormessage}"
        aria-expanded="${e=>e.ariaExpanded}"
        aria-flowto="${e=>e.ariaFlowto}"
        aria-haspopup="${e=>e.ariaHaspopup}"
        aria-hidden="${e=>e.ariaHidden}"
        aria-invalid="${e=>e.ariaInvalid}"
        aria-keyshortcuts="${e=>e.ariaKeyshortcuts}"
        aria-label="${e=>e.ariaLabel}"
        aria-labelledby="${e=>e.ariaLabelledby}"
        aria-live="${e=>e.ariaLive}"
        aria-owns="${e=>e.ariaOwns}"
        aria-pressed="${e=>e.ariaPressed}"
        aria-relevant="${e=>e.ariaRelevant}"
        aria-roledescription="${e=>e.ariaRoledescription}"
        ${ref("control")}
    >
        ${startSlotTemplate(e,t)}
        <span class="content" part="content">
            <slot ${slotted("defaultSlottedContent")}></slot>
        </span>
        ${endSlotTemplate(e,t)}
    </button>
`,proxySlotName="form-associated-proxy",ElementInternalsKey="ElementInternals",supportsElementInternals=ElementInternalsKey in window&&"setFormValue"in window[ElementInternalsKey].prototype,InternalsMap=/* @__PURE__ */new WeakMap;function FormAssociated(e){const t=class extends e{constructor(...e){super(...e),this.dirtyValue=!1,this.disabled=!1,this.proxyEventsToBlock=["change","click"],this.proxyInitialized=!1,this.required=!1,this.initialValue=this.initialValue||"",this.elementInternals||(this.formResetCallback=this.formResetCallback.bind(this))}static get formAssociated(){return supportsElementInternals}get validity(){return this.elementInternals?this.elementInternals.validity:this.proxy.validity}get form(){return this.elementInternals?this.elementInternals.form:this.proxy.form}get validationMessage(){return this.elementInternals?this.elementInternals.validationMessage:this.proxy.validationMessage}get willValidate(){return this.elementInternals?this.elementInternals.willValidate:this.proxy.willValidate}get labels(){if(this.elementInternals)return Object.freeze(Array.from(this.elementInternals.labels));if(this.proxy instanceof HTMLElement&&this.proxy.ownerDocument&&this.id){const e=this.proxy.labels,t=Array.from(this.proxy.getRootNode().querySelectorAll(`[for='${this.id}']`)),r=e?t.concat(Array.from(e)):t;return Object.freeze(r)}return emptyArray}valueChanged(e,t){this.dirtyValue=!0,this.proxy instanceof HTMLElement&&(this.proxy.value=this.value),this.currentValue=this.value,this.setFormValue(this.value),this.validate()}currentValueChanged(){this.value=this.currentValue}initialValueChanged(e,t){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}disabledChanged(e,t){this.proxy instanceof HTMLElement&&(this.proxy.disabled=this.disabled),DOM.queueUpdate(()=>this.classList.toggle("disabled",this.disabled))}nameChanged(e,t){this.proxy instanceof HTMLElement&&(this.proxy.name=this.name)}requiredChanged(e,t){this.proxy instanceof HTMLElement&&(this.proxy.required=this.required),DOM.queueUpdate(()=>this.classList.toggle("required",this.required)),this.validate()}get elementInternals(){if(!supportsElementInternals)return null;let e=InternalsMap.get(this);return e||(e=this.attachInternals(),InternalsMap.set(this,e)),e}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this._keypressHandler),this.value||(this.value=this.initialValue,this.dirtyValue=!1),this.elementInternals||(this.attachProxy(),this.form&&this.form.addEventListener("reset",this.formResetCallback))}disconnectedCallback(){super.disconnectedCallback(),this.proxyEventsToBlock.forEach(e=>this.proxy.removeEventListener(e,this.stopPropagation)),!this.elementInternals&&this.form&&this.form.removeEventListener("reset",this.formResetCallback)}checkValidity(){return this.elementInternals?this.elementInternals.checkValidity():this.proxy.checkValidity()}reportValidity(){return this.elementInternals?this.elementInternals.reportValidity():this.proxy.reportValidity()}setValidity(e,t,r){this.elementInternals?this.elementInternals.setValidity(e,t,r):"string"==typeof t&&this.proxy.setCustomValidity(t)}formDisabledCallback(e){this.disabled=e}formResetCallback(){this.value=this.initialValue,this.dirtyValue=!1}attachProxy(){var e;this.proxyInitialized||(this.proxyInitialized=!0,this.proxy.style.display="none",this.proxyEventsToBlock.forEach(e=>this.proxy.addEventListener(e,this.stopPropagation)),this.proxy.disabled=this.disabled,this.proxy.required=this.required,"string"==typeof this.name&&(this.proxy.name=this.name),"string"==typeof this.value&&(this.proxy.value=this.value),this.proxy.setAttribute("slot",proxySlotName),this.proxySlot=document.createElement("slot"),this.proxySlot.setAttribute("name",proxySlotName)),null===(e=this.shadowRoot)||void 0===e||e.appendChild(this.proxySlot),this.appendChild(this.proxy)}detachProxy(){var e;this.removeChild(this.proxy),null===(e=this.shadowRoot)||void 0===e||e.removeChild(this.proxySlot)}validate(e){this.proxy instanceof HTMLElement&&this.setValidity(this.proxy.validity,this.proxy.validationMessage,e)}setFormValue(e,t){this.elementInternals&&this.elementInternals.setFormValue(e,t||e)}_keypressHandler(e){if(e.key===keyEnter)if(this.form instanceof HTMLFormElement){const e=this.form.querySelector("[type=submit]");null==e||e.click()}}stopPropagation(e){e.stopPropagation()}};return attr({mode:"boolean"})(t.prototype,"disabled"),attr({mode:"fromView",attribute:"value"})(t.prototype,"initialValue"),attr({attribute:"current-value"})(t.prototype,"currentValue"),attr(t.prototype,"name"),attr({mode:"boolean"})(t.prototype,"required"),observable(t.prototype,"value"),t}function CheckableFormAssociated(e){class t extends(FormAssociated(e)){}class r extends t{constructor(...e){super(e),this.dirtyChecked=!1,this.checkedAttribute=!1,this.checked=!1,this.dirtyChecked=!1}checkedAttributeChanged(){this.defaultChecked=this.checkedAttribute}defaultCheckedChanged(){this.dirtyChecked||(this.checked=this.defaultChecked,this.dirtyChecked=!1)}checkedChanged(e,t){this.dirtyChecked||(this.dirtyChecked=!0),this.currentChecked=this.checked,this.updateForm(),this.proxy instanceof HTMLInputElement&&(this.proxy.checked=this.checked),void 0!==e&&this.$emit("change"),this.validate()}currentCheckedChanged(e,t){this.checked=this.currentChecked}updateForm(){const e=this.checked?this.value:null;this.setFormValue(e,e)}connectedCallback(){super.connectedCallback(),this.updateForm()}formResetCallback(){super.formResetCallback(),this.checked=!!this.checkedAttribute,this.dirtyChecked=!1}}return attr({attribute:"checked",mode:"boolean"})(r.prototype,"checkedAttribute"),attr({attribute:"current-checked",converter:booleanConverter})(r.prototype,"currentChecked"),observable(r.prototype,"defaultChecked"),observable(r.prototype,"checked"),r}class _Button extends FoundationElement{}class FormAssociatedButton extends(FormAssociated(_Button)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}let Button$1=class extends FormAssociatedButton{constructor(){super(...arguments),this.handleClick=e=>{var t;this.disabled&&(null===(t=this.defaultSlottedContent)||void 0===t?void 0:t.length)<=1&&e.stopPropagation()},this.handleSubmission=()=>{if(!this.form)return;const e=this.proxy.isConnected;e||this.attachProxy(),"function"==typeof this.form.requestSubmit?this.form.requestSubmit(this.proxy):this.proxy.click(),e||this.detachProxy()},this.handleFormReset=()=>{var e;null===(e=this.form)||void 0===e||e.reset()},this.handleUnsupportedDelegatesFocus=()=>{var e;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(null===(e=this.$fastController.definition.shadowOptions)||void 0===e?void 0:e.delegatesFocus)&&(this.focus=()=>{this.control.focus()})}}formactionChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formAction=this.formaction)}formenctypeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formEnctype=this.formenctype)}formmethodChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formMethod=this.formmethod)}formnovalidateChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formNoValidate=this.formnovalidate)}formtargetChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formTarget=this.formtarget)}typeChanged(e,t){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type),"submit"===t&&this.addEventListener("click",this.handleSubmission),"submit"===e&&this.removeEventListener("click",this.handleSubmission),"reset"===t&&this.addEventListener("click",this.handleFormReset),"reset"===e&&this.removeEventListener("click",this.handleFormReset)}validate(){super.validate(this.control)}connectedCallback(){var e;super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.handleUnsupportedDelegatesFocus();const t=Array.from(null===(e=this.control)||void 0===e?void 0:e.children);t&&t.forEach(e=>{e.addEventListener("click",this.handleClick)})}disconnectedCallback(){var e;super.disconnectedCallback();const t=Array.from(null===(e=this.control)||void 0===e?void 0:e.children);t&&t.forEach(e=>{e.removeEventListener("click",this.handleClick)})}};__decorate$1([attr({mode:"boolean"})],Button$1.prototype,"autofocus",void 0),__decorate$1([attr({attribute:"form"})],Button$1.prototype,"formId",void 0),__decorate$1([attr],Button$1.prototype,"formaction",void 0),__decorate$1([attr],Button$1.prototype,"formenctype",void 0),__decorate$1([attr],Button$1.prototype,"formmethod",void 0),__decorate$1([attr({mode:"boolean"})],Button$1.prototype,"formnovalidate",void 0),__decorate$1([attr],Button$1.prototype,"formtarget",void 0),__decorate$1([attr],Button$1.prototype,"type",void 0),__decorate$1([observable],Button$1.prototype,"defaultSlottedContent",void 0);class DelegatesARIAButton{}function composedParent(e){const t=e.parentElement;if(t)return t;{const t=e.getRootNode();if(t.host instanceof HTMLElement)return t.host}return null}function composedContains(e,t){let r=t;for(;null!==r;){if(r===e)return!0;r=composedParent(r)}return!1}__decorate$1([attr({attribute:"aria-expanded"})],DelegatesARIAButton.prototype,"ariaExpanded",void 0),__decorate$1([attr({attribute:"aria-pressed"})],DelegatesARIAButton.prototype,"ariaPressed",void 0),applyMixins(DelegatesARIAButton,ARIAGlobalStatesAndProperties),applyMixins(Button$1,StartEnd,DelegatesARIAButton);const defaultElement=document.createElement("div");function isFastElement(e){return e instanceof FASTElement}class QueuedStyleSheetTarget{setProperty(e,t){DOM.queueUpdate(()=>this.target.setProperty(e,t))}removeProperty(e){DOM.queueUpdate(()=>this.target.removeProperty(e))}}class ConstructableStyleSheetTarget extends QueuedStyleSheetTarget{constructor(e){super();const t=new CSSStyleSheet;t[prependToAdoptedStyleSheetsSymbol]=!0,this.target=t.cssRules[t.insertRule(":host{}")].style,e.$fastController.addStyles(ElementStyles.create([t]))}}class DocumentStyleSheetTarget extends QueuedStyleSheetTarget{constructor(){super();const e=new CSSStyleSheet;this.target=e.cssRules[e.insertRule(":root{}")].style,document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}class HeadStyleElementStyleSheetTarget extends QueuedStyleSheetTarget{constructor(){super(),this.style=document.createElement("style"),document.head.appendChild(this.style);const{sheet:e}=this.style;if(e){const t=e.insertRule(":root{}",e.cssRules.length);this.target=e.cssRules[t].style}}}class StyleElementStyleSheetTarget{constructor(e){this.store=/* @__PURE__ */new Map,this.target=null;const t=e.$fastController;this.style=document.createElement("style"),t.addStyles(this.style),Observable$1.getNotifier(t).subscribe(this,"isConnected"),this.handleChange(t,"isConnected")}targetChanged(){if(null!==this.target)for(const[e,t]of this.store.entries())this.target.setProperty(e,t)}setProperty(e,t){this.store.set(e,t),DOM.queueUpdate(()=>{null!==this.target&&this.target.setProperty(e,t)})}removeProperty(e){this.store.delete(e),DOM.queueUpdate(()=>{null!==this.target&&this.target.removeProperty(e)})}handleChange(e,t){const{sheet:r}=this.style;if(r){const e=r.insertRule(":host{}",r.cssRules.length);this.target=r.cssRules[e].style}else this.target=null}}__decorate$1([observable],StyleElementStyleSheetTarget.prototype,"target",void 0);class ElementStyleSheetTarget{constructor(e){this.target=e.style}setProperty(e,t){DOM.queueUpdate(()=>this.target.setProperty(e,t))}removeProperty(e){DOM.queueUpdate(()=>this.target.removeProperty(e))}}class RootStyleSheetTarget{setProperty(e,t){RootStyleSheetTarget.properties[e]=t;for(const r of RootStyleSheetTarget.roots.values())PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(r)).setProperty(e,t)}removeProperty(e){delete RootStyleSheetTarget.properties[e];for(const t of RootStyleSheetTarget.roots.values())PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(t)).removeProperty(e)}static registerRoot(e){const{roots:t}=RootStyleSheetTarget;if(!t.has(e)){t.add(e);const r=PropertyTargetManager.getOrCreate(this.normalizeRoot(e));for(const e in RootStyleSheetTarget.properties)r.setProperty(e,RootStyleSheetTarget.properties[e])}}static unregisterRoot(e){const{roots:t}=RootStyleSheetTarget;if(t.has(e)){t.delete(e);const r=PropertyTargetManager.getOrCreate(RootStyleSheetTarget.normalizeRoot(e));for(const e in RootStyleSheetTarget.properties)r.removeProperty(e)}}static normalizeRoot(e){return e===defaultElement?document:e}}RootStyleSheetTarget.roots=/* @__PURE__ */new Set,RootStyleSheetTarget.properties={};const propertyTargetCache=/* @__PURE__ */new WeakMap,propertyTargetCtor=DOM.supportsAdoptedStyleSheets?ConstructableStyleSheetTarget:StyleElementStyleSheetTarget,PropertyTargetManager=Object.freeze({getOrCreate(e){if(propertyTargetCache.has(e))return propertyTargetCache.get(e);let t;return t=e===defaultElement?new RootStyleSheetTarget:e instanceof Document?DOM.supportsAdoptedStyleSheets?new DocumentStyleSheetTarget:new HeadStyleElementStyleSheetTarget:isFastElement(e)?new propertyTargetCtor(e):new ElementStyleSheetTarget(e),propertyTargetCache.set(e,t),t}});class DesignTokenImpl extends CSSDirective{constructor(e){super(),this.subscribers=/* @__PURE__ */new WeakMap,this._appliedTo=/* @__PURE__ */new Set,this.name=e.name,null!==e.cssCustomPropertyName&&(this.cssCustomProperty=`--${e.cssCustomPropertyName}`,this.cssVar=`var(${this.cssCustomProperty})`),this.id=DesignTokenImpl.uniqueId(),DesignTokenImpl.tokensById.set(this.id,this)}get appliedTo(){return[...this._appliedTo]}static from(e){return new DesignTokenImpl({name:"string"==typeof e?e:e.name,cssCustomPropertyName:"string"==typeof e?e:void 0===e.cssCustomPropertyName?e.name:e.cssCustomPropertyName})}static isCSSDesignToken(e){return"string"==typeof e.cssCustomProperty}static isDerivedDesignTokenValue(e){return"function"==typeof e}static getTokenById(e){return DesignTokenImpl.tokensById.get(e)}getOrCreateSubscriberSet(e=this){return this.subscribers.get(e)||this.subscribers.set(e,/* @__PURE__ */new Set)&&this.subscribers.get(e)}createCSS(){return this.cssVar||""}getValueFor(e){const t=DesignTokenNode.getOrCreate(e).get(this);if(void 0!==t)return t;throw new Error(`Value could not be retrieved for token named "${this.name}". Ensure the value is set for ${e} or an ancestor of ${e}.`)}setValueFor(e,t){return this._appliedTo.add(e),t instanceof DesignTokenImpl&&(t=this.alias(t)),DesignTokenNode.getOrCreate(e).set(this,t),this}deleteValueFor(e){return this._appliedTo.delete(e),DesignTokenNode.existsFor(e)&&DesignTokenNode.getOrCreate(e).delete(this),this}withDefault(e){return this.setValueFor(defaultElement,e),this}subscribe(e,t){const r=this.getOrCreateSubscriberSet(t);t&&!DesignTokenNode.existsFor(t)&&DesignTokenNode.getOrCreate(t),r.has(e)||r.add(e)}unsubscribe(e,t){const r=this.subscribers.get(t||this);r&&r.has(e)&&r.delete(e)}notify(e){const t=Object.freeze({token:this,target:e});this.subscribers.has(this)&&this.subscribers.get(this).forEach(e=>e.handleChange(t)),this.subscribers.has(e)&&this.subscribers.get(e).forEach(e=>e.handleChange(t))}alias(e){return t=>e.getValueFor(t)}}DesignTokenImpl.uniqueId=/* @__PURE__ */(()=>{let e=0;return()=>(e++,e.toString(16))})(),DesignTokenImpl.tokensById=/* @__PURE__ */new Map;class CustomPropertyReflector{startReflection(e,t){e.subscribe(this,t),this.handleChange({token:e,target:t})}stopReflection(e,t){e.unsubscribe(this,t),this.remove(e,t)}handleChange(e){const{token:t,target:r}=e;this.add(t,r)}add(e,t){PropertyTargetManager.getOrCreate(t).setProperty(e.cssCustomProperty,this.resolveCSSValue(DesignTokenNode.getOrCreate(t).get(e)))}remove(e,t){PropertyTargetManager.getOrCreate(t).removeProperty(e.cssCustomProperty)}resolveCSSValue(e){return e&&"function"==typeof e.createCSS?e.createCSS():e}}class DesignTokenBindingObserver{constructor(e,t,r){this.source=e,this.token=t,this.node=r,this.dependencies=/* @__PURE__ */new Set,this.observer=Observable$1.binding(e,this,!1),this.observer.handleChange=this.observer.call,this.handleChange()}disconnect(){this.observer.disconnect()}handleChange(){this.node.store.set(this.token,this.observer.observe(this.node.target,defaultExecutionContext))}}class Store{constructor(){this.values=/* @__PURE__ */new Map}set(e,t){this.values.get(e)!==t&&(this.values.set(e,t),Observable$1.getNotifier(this).notify(e.id))}get(e){return Observable$1.track(this,e.id),this.values.get(e)}delete(e){this.values.delete(e)}all(){return this.values.entries()}}const nodeCache=/* @__PURE__ */new WeakMap,childToParent=/* @__PURE__ */new WeakMap;class DesignTokenNode{constructor(e){this.target=e,this.store=new Store,this.children=[],this.assignedValues=/* @__PURE__ */new Map,this.reflecting=/* @__PURE__ */new Set,this.bindingObservers=/* @__PURE__ */new Map,this.tokenValueChangeHandler={handleChange:(e,t)=>{const r=DesignTokenImpl.getTokenById(t);r&&(r.notify(this.target),this.updateCSSTokenReflection(e,r))}},nodeCache.set(e,this),Observable$1.getNotifier(this.store).subscribe(this.tokenValueChangeHandler),e instanceof FASTElement?e.$fastController.addBehaviors([this]):e.isConnected&&this.bind()}static getOrCreate(e){return nodeCache.get(e)||new DesignTokenNode(e)}static existsFor(e){return nodeCache.has(e)}static findParent(e){if(defaultElement!==e.target){let t=composedParent(e.target);for(;null!==t;){if(nodeCache.has(t))return nodeCache.get(t);t=composedParent(t)}return DesignTokenNode.getOrCreate(defaultElement)}return null}static findClosestAssignedNode(e,t){let r=t;do{if(r.has(e))return r;r=r.parent?r.parent:r.target!==defaultElement?DesignTokenNode.getOrCreate(defaultElement):null}while(null!==r);return null}get parent(){return childToParent.get(this)||null}updateCSSTokenReflection(e,t){if(DesignTokenImpl.isCSSDesignToken(t)){const r=this.parent,s=this.isReflecting(t);if(r){const n=r.get(t),i=e.get(t);n===i||s?n===i&&s&&this.stopReflectToCSS(t):this.reflectToCSS(t)}else s||this.reflectToCSS(t)}}has(e){return this.assignedValues.has(e)}get(e){const t=this.store.get(e);if(void 0!==t)return t;const r=this.getRaw(e);return void 0!==r?(this.hydrate(e,r),this.get(e)):void 0}getRaw(e){var t;return this.assignedValues.has(e)?this.assignedValues.get(e):null===(t=DesignTokenNode.findClosestAssignedNode(e,this))||void 0===t?void 0:t.getRaw(e)}set(e,t){DesignTokenImpl.isDerivedDesignTokenValue(this.assignedValues.get(e))&&this.tearDownBindingObserver(e),this.assignedValues.set(e,t),DesignTokenImpl.isDerivedDesignTokenValue(t)?this.setupBindingObserver(e,t):this.store.set(e,t)}delete(e){this.assignedValues.delete(e),this.tearDownBindingObserver(e);const t=this.getRaw(e);t?this.hydrate(e,t):this.store.delete(e)}bind(){const e=DesignTokenNode.findParent(this);e&&e.appendChild(this);for(const t of this.assignedValues.keys())t.notify(this.target)}unbind(){if(this.parent){childToParent.get(this).removeChild(this)}}appendChild(e){e.parent&&childToParent.get(e).removeChild(e);const t=this.children.filter(t=>e.contains(t));childToParent.set(e,this),this.children.push(e),t.forEach(t=>e.appendChild(t)),Observable$1.getNotifier(this.store).subscribe(e);for(const[r,s]of this.store.all())e.hydrate(r,this.bindingObservers.has(r)?this.getRaw(r):s)}removeChild(e){const t=this.children.indexOf(e);return-1!==t&&this.children.splice(t,1),Observable$1.getNotifier(this.store).unsubscribe(e),e.parent===this&&childToParent.delete(e)}contains(e){return composedContains(this.target,e.target)}reflectToCSS(e){this.isReflecting(e)||(this.reflecting.add(e),DesignTokenNode.cssCustomPropertyReflector.startReflection(e,this.target))}stopReflectToCSS(e){this.isReflecting(e)&&(this.reflecting.delete(e),DesignTokenNode.cssCustomPropertyReflector.stopReflection(e,this.target))}isReflecting(e){return this.reflecting.has(e)}handleChange(e,t){const r=DesignTokenImpl.getTokenById(t);r&&(this.hydrate(r,this.getRaw(r)),this.updateCSSTokenReflection(this.store,r))}hydrate(e,t){if(!this.has(e)){const r=this.bindingObservers.get(e);DesignTokenImpl.isDerivedDesignTokenValue(t)?r?r.source!==t&&(this.tearDownBindingObserver(e),this.setupBindingObserver(e,t)):this.setupBindingObserver(e,t):(r&&this.tearDownBindingObserver(e),this.store.set(e,t))}}setupBindingObserver(e,t){const r=new DesignTokenBindingObserver(t,e,this);return this.bindingObservers.set(e,r),r}tearDownBindingObserver(e){return!!this.bindingObservers.has(e)&&(this.bindingObservers.get(e).disconnect(),this.bindingObservers.delete(e),!0)}}function create$a(e){return DesignTokenImpl.from(e)}DesignTokenNode.cssCustomPropertyReflector=new CustomPropertyReflector,__decorate$1([observable],DesignTokenNode.prototype,"children",void 0);const DesignToken=Object.freeze({create:create$a,notifyConnection:e=>!(!e.isConnected||!DesignTokenNode.existsFor(e))&&(DesignTokenNode.getOrCreate(e).bind(),!0),notifyDisconnection:e=>!(e.isConnected||!DesignTokenNode.existsFor(e))&&(DesignTokenNode.getOrCreate(e).unbind(),!0),registerRoot(e=defaultElement){RootStyleSheetTarget.registerRoot(e)},unregisterRoot(e=defaultElement){RootStyleSheetTarget.unregisterRoot(e)}}),ElementDisambiguation=Object.freeze({definitionCallbackOnly:null,ignoreDuplicate:/* @__PURE__ */Symbol()}),elementTypesByTag=/* @__PURE__ */new Map,elementTagsByType=/* @__PURE__ */new Map;let rootDesignSystem=null;const designSystemKey=DI.createInterface(e=>e.cachedCallback(e=>(null===rootDesignSystem&&(rootDesignSystem=new DefaultDesignSystem(null,e)),rootDesignSystem))),DesignSystem=Object.freeze({tagFor:e=>elementTagsByType.get(e),responsibleFor(e){const t=e.$$designSystem$$;if(t)return t;return DI.findResponsibleContainer(e).get(designSystemKey)},getOrCreate(e){if(!e)return null===rootDesignSystem&&(rootDesignSystem=DI.getOrCreateDOMContainer().get(designSystemKey)),rootDesignSystem;const t=e.$$designSystem$$;if(t)return t;const r=DI.getOrCreateDOMContainer(e);if(r.has(designSystemKey,!1))return r.get(designSystemKey);{const t=new DefaultDesignSystem(e,r);return r.register(Registration.instance(designSystemKey,t)),t}}});function extractTryDefineElementParams(e,t,r){return"string"==typeof e?{name:e,type:t,callback:r}:e}class DefaultDesignSystem{constructor(e,t){this.owner=e,this.container=t,this.designTokensInitialized=!1,this.prefix="fast",this.shadowRootMode=void 0,this.disambiguate=()=>ElementDisambiguation.definitionCallbackOnly,null!==e&&(e.$$designSystem$$=this)}withPrefix(e){return this.prefix=e,this}withShadowRootMode(e){return this.shadowRootMode=e,this}withElementDisambiguation(e){return this.disambiguate=e,this}withDesignTokenRoot(e){return this.designTokenRoot=e,this}register(...e){const t=this.container,r=[],s=this.disambiguate,n=this.shadowRootMode,i={elementPrefix:this.prefix,tryDefineElement(e,i,o){const a=extractTryDefineElementParams(e,i,o),{name:l,callback:c,baseClass:d}=a;let{type:h}=a,u=l,p=elementTypesByTag.get(u),g=!0;for(;p;){const e=s(u,h,p);switch(e){case ElementDisambiguation.ignoreDuplicate:return;case ElementDisambiguation.definitionCallbackOnly:g=!1,p=void 0;break;default:u=e,p=elementTypesByTag.get(u)}}g&&((elementTagsByType.has(h)||h===FoundationElement)&&(h=class extends h{}),elementTypesByTag.set(u,h),elementTagsByType.set(h,u),d&&elementTagsByType.set(d,u)),r.push(new ElementDefinitionEntry(t,u,h,n,c,g))}};this.designTokensInitialized||(this.designTokensInitialized=!0,null!==this.designTokenRoot&&DesignToken.registerRoot(this.designTokenRoot)),t.registerWithContext(i,...e);for(const o of r)o.callback(o),o.willDefine&&null!==o.definition&&o.definition.define();return this}}class ElementDefinitionEntry{constructor(e,t,r,s,n,i){this.container=e,this.name=t,this.type=r,this.shadowRootMode=s,this.callback=n,this.willDefine=i,this.definition=null}definePresentation(e){ComponentPresentation.define(this.name,e,this.container)}defineElement(e){this.definition=new FASTElementDefinition(this.type,Object.assign(Object.assign({},e),{name:this.name}))}tagFor(e){return DesignSystem.tagFor(e)}}const toolbarTemplate=(e,t)=>html`
    <template
        aria-label="${e=>e.ariaLabel}"
        aria-labelledby="${e=>e.ariaLabelledby}"
        aria-orientation="${e=>e.orientation}"
        orientation="${e=>e.orientation}"
        role="toolbar"
        @mousedown="${(e,t)=>e.mouseDownHandler(t.event)}"
        @focusin="${(e,t)=>e.focusinHandler(t.event)}"
        @keydown="${(e,t)=>e.keydownHandler(t.event)}"
        ${children({property:"childItems",attributeFilter:["disabled","hidden"],filter:elements(),subtree:!0})}
    >
        <slot name="label"></slot>
        <div class="positioning-region" part="positioning-region">
            ${startSlotTemplate(e,t)}
            <slot
                ${slotted({filter:elements(),property:"slottedItems"})}
            ></slot>
            ${endSlotTemplate(e,t)}
        </div>
    </template>
`;class MatchMediaBehavior{constructor(e){this.listenerCache=/* @__PURE__ */new WeakMap,this.query=e}bind(e){const{query:t}=this,r=this.constructListener(e);r.bind(t)(),t.addListener(r),this.listenerCache.set(e,r)}unbind(e){const t=this.listenerCache.get(e);t&&(this.query.removeListener(t),this.listenerCache.delete(e))}}class MatchMediaStyleSheetBehavior extends MatchMediaBehavior{constructor(e,t){super(e),this.styles=t}static with(e){return t=>new MatchMediaStyleSheetBehavior(e,t)}constructListener(e){let t=!1;const r=this.styles;return function(){const{matches:s}=this;s&&!t?(e.$fastController.addStyles(r),t=s):!s&&t&&(e.$fastController.removeStyles(r),t=s)}}unbind(e){super.unbind(e),e.$fastController.removeStyles(this.styles)}}const forcedColorsStylesheetBehavior=MatchMediaStyleSheetBehavior.with(window.matchMedia("(forced-colors)"));MatchMediaStyleSheetBehavior.with(window.matchMedia("(prefers-color-scheme: dark)")),MatchMediaStyleSheetBehavior.with(window.matchMedia("(prefers-color-scheme: light)"));class PropertyStyleSheetBehavior{constructor(e,t,r){this.propertyName=e,this.value=t,this.styles=r}bind(e){Observable$1.getNotifier(e).subscribe(this,this.propertyName),this.handleChange(e,this.propertyName)}unbind(e){Observable$1.getNotifier(e).unsubscribe(this,this.propertyName),e.$fastController.removeStyles(this.styles)}handleChange(e,t){e[t]===this.value?e.$fastController.addStyles(this.styles):e.$fastController.removeStyles(this.styles)}}const disabledCursor="not-allowed",hidden=":host([hidden]){display:none}";function display(e){return`${hidden}:host{display:${e}}`}const focusVisible=canUseFocusVisible()?"focus-visible":"focus";function binarySearch$1(e,t,r=0,s=e.length-1){if(s===r)return e[r];const n=Math.floor((s-r)/2)+r;return t(e[n])?binarySearch$1(e,t,r,n):binarySearch$1(e,t,n+1,s)}function directionByIsDark$1(e){return isDark$1(e)?-1:1}function create$9(e,t,r){return"number"==typeof e?PaletteRGB$1.from(SwatchRGB$1.create(e,t,r)):PaletteRGB$1.from(e)}function from$2(e){return isSwatchRGB$1(e)?PaletteRGBImpl$1.from(e):PaletteRGBImpl$1.from(SwatchRGB$1.create(e.r,e.g,e.b))}const PaletteRGB$1=Object.freeze({create:create$9,from:from$2});let PaletteRGBImpl$1=class e{constructor(e,t){this.closestIndexCache=/* @__PURE__ */new Map,this.source=e,this.swatches=t,this.reversedSwatches=Object.freeze([...this.swatches].reverse()),this.lastIndex=this.swatches.length-1}colorContrast(e,t,r,s){void 0===r&&(r=this.closestIndexOf(e));let n=this.swatches;const i=this.lastIndex;let o=r;void 0===s&&(s=directionByIsDark$1(e));return-1===s&&(n=this.reversedSwatches,o=i-o),binarySearch$1(n,r=>contrast$1(e,r)>=t,o,i)}get(e){return this.swatches[e]||this.swatches[clamp(e,0,this.lastIndex)]}closestIndexOf(e){if(this.closestIndexCache.has(e.relativeLuminance))return this.closestIndexCache.get(e.relativeLuminance);let t=this.swatches.indexOf(e);if(-1!==t)return this.closestIndexCache.set(e.relativeLuminance,t),t;const r=this.swatches.reduce((t,r)=>Math.abs(r.relativeLuminance-e.relativeLuminance)<Math.abs(t.relativeLuminance-e.relativeLuminance)?r:t);return t=this.swatches.indexOf(r),this.closestIndexCache.set(e.relativeLuminance,t),t}static from(t){return new e(t,Object.freeze(new ComponentStateColorPalette({baseColor:ColorRGBA64.fromObject(t)}).palette.map(e=>{const t=parseColorHexRGB(e.toStringHexRGB());return SwatchRGB$1.create(t.r,t.g,t.b)})))}};function accentFill$1(e,t,r,s,n,i,o,a,l){const c=e.source,d=t.closestIndexOf(r)>=Math.max(o,a,l)?-1:1,h=e.closestIndexOf(c),u=h+-1*d*s,p=u+d*n,g=u+d*i;return{rest:e.get(u),hover:e.get(h),active:e.get(p),focus:e.get(g)}}function accentForeground$1(e,t,r,s,n,i,o){const a=e.source,l=e.closestIndexOf(a),c=directionByIsDark$1(t),d=l+(1===c?Math.min(s,n):Math.max(c*s,c*n)),h=e.colorContrast(t,r,d,c),u=e.closestIndexOf(h),p=u+c*Math.abs(s-n);let g,m;return(1===c?s<n:c*s>c*n)?(g=u,m=p):(g=p,m=u),{rest:e.get(g),hover:e.get(m),active:e.get(g+c*i),focus:e.get(g+c*o)}}const white$1=SwatchRGB$1.create(1,1,1),black$1=SwatchRGB$1.create(0,0,0),middleGrey$1=SwatchRGB$1.from(parseColorHexRGB("#808080")),accentBase$1=SwatchRGB$1.from(parseColorHexRGB("#DA1A5F")),errorBase$1=SwatchRGB$1.from(parseColorHexRGB("#D32F2F"));function foregroundOnAccent$1(e,t){return e.contrast(white$1)>=t?white$1:black$1}function neutralFill$1(e,t,r,s,n,i){const o=e.closestIndexOf(t),a=o>=Math.max(r,s,n,i)?-1:1;return{rest:e.get(o+a*r),hover:e.get(o+a*s),active:e.get(o+a*n),focus:e.get(o+a*i)}}function neutralFillInput$1(e,t,r,s,n,i){const o=directionByIsDark$1(t),a=e.closestIndexOf(t);return{rest:e.get(a-o*r),hover:e.get(a-o*s),active:e.get(a-o*n),focus:e.get(a-o*i)}}function neutralFillLayer$1(e,t,r){const s=e.closestIndexOf(t);return e.get(s-(s<r?-1*r:r))}function neutralFillStealth$1(e,t,r,s,n,i,o,a,l,c){const d=Math.max(r,s,n,i,o,a,l,c),h=e.closestIndexOf(t),u=h>=d?-1:1;return{rest:e.get(h+u*r),hover:e.get(h+u*s),active:e.get(h+u*n),focus:e.get(h+u*i)}}function neutralFillContrast$1(e,t,r,s,n,i){const o=directionByIsDark$1(t),a=e.closestIndexOf(e.colorContrast(t,4.5)),l=a+o*Math.abs(r-s);let c,d;return(1===o?r<s:o*r>o*s)?(c=a,d=l):(c=l,d=a),{rest:e.get(c),hover:e.get(d),active:e.get(c+o*n),focus:e.get(c+o*i)}}function focusStrokeOuter$3(e,t){return e.colorContrast(t,3.5)}function focusStrokeInner$3(e,t,r){return e.colorContrast(r,3.5,e.closestIndexOf(e.source),-1*directionByIsDark$1(t))}function neutralForeground$1(e,t){return e.colorContrast(t,14)}function neutralForegroundHint$3(e,t){return e.colorContrast(t,4.5)}function neutralLayerCardContainer$1(e,t,r){return e.get(e.closestIndexOf(baseLayerLuminanceSwatch$1(t))+r)}function neutralLayerFloating$3(e,t,r){const s=e.closestIndexOf(baseLayerLuminanceSwatch$1(t))-r;return e.get(s-r)}function neutralLayer1$3(e,t){return e.get(e.closestIndexOf(baseLayerLuminanceSwatch$1(t)))}function neutralLayer2Index$1(e,t,r,s,n,i){return Math.max(e.closestIndexOf(baseLayerLuminanceSwatch$1(t))+r,s,n,i)}function neutralLayer2$1(e,t,r,s,n,i){return e.get(neutralLayer2Index$1(e,t,r,s,n,i))}function neutralLayer3$1(e,t,r,s,n,i){return e.get(neutralLayer2Index$1(e,t,r,s,n,i)+r)}function neutralLayer4$1(e,t,r,s,n,i){return e.get(neutralLayer2Index$1(e,t,r,s,n,i)+2*r)}function neutralStroke$1(e,t,r,s,n,i){const o=e.closestIndexOf(t),a=directionByIsDark$1(t),l=o+a*r,c=l+a*(s-r),d=l+a*(n-r),h=l+a*(i-r);return{rest:e.get(l),hover:e.get(c),active:e.get(d),focus:e.get(h)}}function neutralStrokeDivider$1(e,t,r){return e.get(e.closestIndexOf(t)+directionByIsDark$1(t)*r)}function errorFillAlgorithm$1(e,t,r,s,n,i,o,a,l){const c=e.source,d=t.closestIndexOf(r)>=Math.max(o,a,l)?-1:1,h=e.closestIndexOf(c),u=h+-1*d*s,p=u+d*n,g=u+d*i;return{rest:e.get(u),hover:e.get(h),active:e.get(p),focus:e.get(g)}}function errorForegroundAlgorithm$1(e,t,r,s,n,i,o){const a=e.source,l=e.closestIndexOf(a),c=isDark$1(t)?-1:1,d=l+(1===c?Math.min(s,n):Math.max(c*s,c*n)),h=e.colorContrast(t,r,d,c),u=e.closestIndexOf(h),p=u+c*Math.abs(s-n);let g,m;return(1===c?s<n:c*s>c*n)?(g=u,m=p):(g=p,m=u),{rest:e.get(g),hover:e.get(m),active:e.get(g+c*i),focus:e.get(g+c*o)}}function foregroundOnErrorAlgorithm$1(e,t){return e.contrast(white$1)>=t?white$1:black$1}const{create:create$8}=DesignToken;function createNonCss$1(e){return DesignToken.create({name:e,cssCustomPropertyName:null})}const bodyFont$1=create$8("body-font").withDefault('aktiv-grotesk, "Segoe UI", Arial, Helvetica, sans-serif'),baseHeightMultiplier$1=create$8("base-height-multiplier").withDefault(10),baseHorizontalSpacingMultiplier$1=create$8("base-horizontal-spacing-multiplier").withDefault(3),baseLayerLuminance$1=create$8("base-layer-luminance").withDefault(StandardLuminance$1.DarkMode),controlCornerRadius$1=create$8("control-corner-radius").withDefault(4),density$1=create$8("density").withDefault(0),designUnit$1=create$8("design-unit").withDefault(4),elementScale$1=create$8("element-scale").withDefault(0),direction$1=create$8("direction").withDefault(Direction.ltr),disabledOpacity$1=create$8("disabled-opacity").withDefault(.4),strokeWidth$1=create$8("stroke-width").withDefault(1),focusStrokeWidth$1=create$8("focus-stroke-width").withDefault(2),typeRampBaseFontSize$1=create$8("type-ramp-base-font-size").withDefault("14px"),typeRampBaseLineHeight$1=create$8("type-ramp-base-line-height").withDefault("20px"),typeRampMinus1FontSize$1=create$8("type-ramp-minus-1-font-size").withDefault("12px"),typeRampMinus1LineHeight$1=create$8("type-ramp-minus-1-line-height").withDefault("16px"),typeRampMinus2FontSize$1=create$8("type-ramp-minus-2-font-size").withDefault("10px"),typeRampMinus2LineHeight$1=create$8("type-ramp-minus-2-line-height").withDefault("16px"),typeRampPlus1FontSize$1=create$8("type-ramp-plus-1-font-size").withDefault("16px"),typeRampPlus1LineHeight$1=create$8("type-ramp-plus-1-line-height").withDefault("24px"),typeRampPlus2FontSize$1=create$8("type-ramp-plus-2-font-size").withDefault("20px"),typeRampPlus2LineHeight$1=create$8("type-ramp-plus-2-line-height").withDefault("28px"),typeRampPlus3FontSize$1=create$8("type-ramp-plus-3-font-size").withDefault("28px"),typeRampPlus3LineHeight$1=create$8("type-ramp-plus-3-line-height").withDefault("36px"),typeRampPlus4FontSize$1=create$8("type-ramp-plus-4-font-size").withDefault("34px"),typeRampPlus4LineHeight$1=create$8("type-ramp-plus-4-line-height").withDefault("44px"),typeRampPlus5FontSize$1=create$8("type-ramp-plus-5-font-size").withDefault("46px"),typeRampPlus5LineHeight$1=create$8("type-ramp-plus-5-line-height").withDefault("56px"),typeRampPlus6FontSize$1=create$8("type-ramp-plus-6-font-size").withDefault("60px"),typeRampPlus6LineHeight$1=create$8("type-ramp-plus-6-line-height").withDefault("72px"),accentFillRestDelta$1=createNonCss$1("accent-fill-rest-delta").withDefault(0),accentFillHoverDelta$1=createNonCss$1("accent-fill-hover-delta").withDefault(4),accentFillActiveDelta$1=createNonCss$1("accent-fill-active-delta").withDefault(-5),accentFillFocusDelta$1=createNonCss$1("accent-fill-focus-delta").withDefault(0),accentForegroundRestDelta$1=createNonCss$1("accent-foreground-rest-delta").withDefault(0),accentForegroundHoverDelta$1=createNonCss$1("accent-foreground-hover-delta").withDefault(6),accentForegroundActiveDelta$1=createNonCss$1("accent-foreground-active-delta").withDefault(-4),accentForegroundFocusDelta$1=createNonCss$1("accent-foreground-focus-delta").withDefault(0),neutralFillRestDelta$1=createNonCss$1("neutral-fill-rest-delta").withDefault(7),neutralFillHoverDelta$1=createNonCss$1("neutral-fill-hover-delta").withDefault(10),neutralFillActiveDelta$1=createNonCss$1("neutral-fill-active-delta").withDefault(5),neutralFillFocusDelta$1=createNonCss$1("neutral-fill-focus-delta").withDefault(0),neutralFillInputRestDelta$1=createNonCss$1("neutral-fill-input-rest-delta").withDefault(0),neutralFillInputHoverDelta$1=createNonCss$1("neutral-fill-input-hover-delta").withDefault(0),neutralFillInputActiveDelta$1=createNonCss$1("neutral-fill-input-active-delta").withDefault(0),neutralFillInputFocusDelta$1=createNonCss$1("neutral-fill-input-focus-delta").withDefault(0),neutralFillStealthRestDelta$1=createNonCss$1("neutral-fill-stealth-rest-delta").withDefault(0),neutralFillStealthHoverDelta$1=createNonCss$1("neutral-fill-stealth-hover-delta").withDefault(5),neutralFillStealthActiveDelta$1=createNonCss$1("neutral-fill-stealth-active-delta").withDefault(3),neutralFillStealthFocusDelta$1=createNonCss$1("neutral-fill-stealth-focus-delta").withDefault(0),neutralFillStrongRestDelta$1=createNonCss$1("neutral-fill-strong-rest-delta").withDefault(0),neutralFillStrongHoverDelta$1=createNonCss$1("neutral-fill-strong-hover-delta").withDefault(8),neutralFillStrongActiveDelta$1=createNonCss$1("neutral-fill-strong-active-delta").withDefault(-5),neutralFillStrongFocusDelta$1=createNonCss$1("neutral-fill-strong-focus-delta").withDefault(0),neutralFillLayerRestDelta$1=createNonCss$1("neutral-fill-layer-rest-delta").withDefault(3),neutralStrokeRestDelta$1=createNonCss$1("neutral-stroke-rest-delta").withDefault(25),neutralStrokeHoverDelta$1=createNonCss$1("neutral-stroke-hover-delta").withDefault(40),neutralStrokeActiveDelta$1=createNonCss$1("neutral-stroke-active-delta").withDefault(16),neutralStrokeFocusDelta$1=createNonCss$1("neutral-stroke-focus-delta").withDefault(25),neutralStrokeDividerRestDelta$1=createNonCss$1("neutral-stroke-divider-rest-delta").withDefault(8),neutralColor$1=create$8("neutral-color").withDefault(middleGrey$1),neutralPalette$1=createNonCss$1("neutral-palette").withDefault(e=>PaletteRGB$1.from(neutralColor$1.getValueFor(e))),accentColor$1=create$8("accent-color").withDefault(accentBase$1),accentPalette$1=createNonCss$1("accent-palette").withDefault(e=>PaletteRGB$1.from(accentColor$1.getValueFor(e))),neutralLayerCardContainerRecipe$1=createNonCss$1("neutral-layer-card-container-recipe").withDefault({evaluate:e=>neutralLayerCardContainer$1(neutralPalette$1.getValueFor(e),baseLayerLuminance$1.getValueFor(e),neutralFillLayerRestDelta$1.getValueFor(e))});create$8("neutral-layer-card-container").withDefault(e=>neutralLayerCardContainerRecipe$1.getValueFor(e).evaluate(e));const neutralLayerFloatingRecipe$1=createNonCss$1("neutral-layer-floating-recipe").withDefault({evaluate:e=>neutralLayerFloating$3(neutralPalette$1.getValueFor(e),baseLayerLuminance$1.getValueFor(e),neutralFillLayerRestDelta$1.getValueFor(e))}),neutralLayerFloating$2=create$8("neutral-layer-floating").withDefault(e=>neutralLayerFloatingRecipe$1.getValueFor(e).evaluate(e)),neutralLayer1Recipe$1=createNonCss$1("neutral-layer-1-recipe").withDefault({evaluate:e=>neutralLayer1$3(neutralPalette$1.getValueFor(e),baseLayerLuminance$1.getValueFor(e))}),neutralLayer1$2=create$8("neutral-layer-1").withDefault(e=>neutralLayer1Recipe$1.getValueFor(e).evaluate(e)),neutralLayer2Recipe$1=createNonCss$1("neutral-layer-2-recipe").withDefault({evaluate:e=>neutralLayer2$1(neutralPalette$1.getValueFor(e),baseLayerLuminance$1.getValueFor(e),neutralFillLayerRestDelta$1.getValueFor(e),neutralFillRestDelta$1.getValueFor(e),neutralFillHoverDelta$1.getValueFor(e),neutralFillActiveDelta$1.getValueFor(e))});create$8("neutral-layer-2").withDefault(e=>neutralLayer2Recipe$1.getValueFor(e).evaluate(e));const neutralLayer3Recipe$1=createNonCss$1("neutral-layer-3-recipe").withDefault({evaluate:e=>neutralLayer3$1(neutralPalette$1.getValueFor(e),baseLayerLuminance$1.getValueFor(e),neutralFillLayerRestDelta$1.getValueFor(e),neutralFillRestDelta$1.getValueFor(e),neutralFillHoverDelta$1.getValueFor(e),neutralFillActiveDelta$1.getValueFor(e))});create$8("neutral-layer-3").withDefault(e=>neutralLayer3Recipe$1.getValueFor(e).evaluate(e));const neutralLayer4Recipe$1=createNonCss$1("neutral-layer-4-recipe").withDefault({evaluate:e=>neutralLayer4$1(neutralPalette$1.getValueFor(e),baseLayerLuminance$1.getValueFor(e),neutralFillLayerRestDelta$1.getValueFor(e),neutralFillRestDelta$1.getValueFor(e),neutralFillHoverDelta$1.getValueFor(e),neutralFillActiveDelta$1.getValueFor(e))});create$8("neutral-layer-4").withDefault(e=>neutralLayer4Recipe$1.getValueFor(e).evaluate(e));const fillColor$1=create$8("fill-color").withDefault(e=>neutralLayer1$2.getValueFor(e));var ContrastTarget$1,ContrastTarget2;ContrastTarget2=ContrastTarget$1||(ContrastTarget$1={}),ContrastTarget2[ContrastTarget2.normal=4.5]="normal",ContrastTarget2[ContrastTarget2.large=7]="large";const accentFillRecipe$1=create$8({name:"accent-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>accentFill$1(accentPalette$1.getValueFor(e),neutralPalette$1.getValueFor(e),t||fillColor$1.getValueFor(e),accentFillHoverDelta$1.getValueFor(e),accentFillActiveDelta$1.getValueFor(e),accentFillFocusDelta$1.getValueFor(e),neutralFillRestDelta$1.getValueFor(e),neutralFillHoverDelta$1.getValueFor(e),neutralFillActiveDelta$1.getValueFor(e))}),accentFillRest$1=create$8("accent-fill-rest").withDefault(e=>accentFillRecipe$1.getValueFor(e).evaluate(e).rest),accentFillHover$1=create$8("accent-fill-hover").withDefault(e=>accentFillRecipe$1.getValueFor(e).evaluate(e).hover),accentFillActive$1=create$8("accent-fill-active").withDefault(e=>accentFillRecipe$1.getValueFor(e).evaluate(e).active),accentFillFocus$1=create$8("accent-fill-focus").withDefault(e=>accentFillRecipe$1.getValueFor(e).evaluate(e).focus),foregroundOnAccentByContrast$1=e=>(t,r)=>foregroundOnAccent$1(r||accentFillRest$1.getValueFor(t),e),foregroundOnAccentRecipe$1=createNonCss$1("foreground-on-accent-recipe").withDefault({evaluate:(e,t)=>foregroundOnAccentByContrast$1(ContrastTarget$1.normal)(e,t)}),foregroundOnAccentRest$1=create$8("foreground-on-accent-rest").withDefault(e=>foregroundOnAccentRecipe$1.getValueFor(e).evaluate(e,accentFillRest$1.getValueFor(e))),foregroundOnAccentHover$1=create$8("foreground-on-accent-hover").withDefault(e=>foregroundOnAccentRecipe$1.getValueFor(e).evaluate(e,accentFillHover$1.getValueFor(e))),foregroundOnAccentActive$1=create$8("foreground-on-accent-active").withDefault(e=>foregroundOnAccentRecipe$1.getValueFor(e).evaluate(e,accentFillActive$1.getValueFor(e))),foregroundOnAccentFocus$1=create$8("foreground-on-accent-focus").withDefault(e=>foregroundOnAccentRecipe$1.getValueFor(e).evaluate(e,accentFillFocus$1.getValueFor(e))),foregroundOnAccentLargeRecipe$1=createNonCss$1("foreground-on-accent-large-recipe").withDefault({evaluate:(e,t)=>foregroundOnAccentByContrast$1(ContrastTarget$1.large)(e,t)});create$8("foreground-on-accent-rest-large").withDefault(e=>foregroundOnAccentLargeRecipe$1.getValueFor(e).evaluate(e,accentFillRest$1.getValueFor(e))),create$8("foreground-on-accent-hover-large").withDefault(e=>foregroundOnAccentLargeRecipe$1.getValueFor(e).evaluate(e,accentFillHover$1.getValueFor(e))),create$8("foreground-on-accent-active-large").withDefault(e=>foregroundOnAccentLargeRecipe$1.getValueFor(e).evaluate(e,accentFillActive$1.getValueFor(e))),create$8("foreground-on-accent-focus-large").withDefault(e=>foregroundOnAccentLargeRecipe$1.getValueFor(e).evaluate(e,accentFillFocus$1.getValueFor(e)));const accentForegroundByContrast$1=e=>(t,r)=>accentForeground$1(accentPalette$1.getValueFor(t),r||fillColor$1.getValueFor(t),e,accentForegroundRestDelta$1.getValueFor(t),accentForegroundHoverDelta$1.getValueFor(t),accentForegroundActiveDelta$1.getValueFor(t),accentForegroundFocusDelta$1.getValueFor(t)),accentForegroundRecipe$1=create$8({name:"accent-foreground-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>accentForegroundByContrast$1(ContrastTarget$1.normal)(e,t)}),accentForegroundRest$1=create$8("accent-foreground-rest").withDefault(e=>accentForegroundRecipe$1.getValueFor(e).evaluate(e).rest),accentForegroundHover$1=create$8("accent-foreground-hover").withDefault(e=>accentForegroundRecipe$1.getValueFor(e).evaluate(e).hover),accentForegroundActive$1=create$8("accent-foreground-active").withDefault(e=>accentForegroundRecipe$1.getValueFor(e).evaluate(e).active),accentForegroundFocus$1=create$8("accent-foreground-focus").withDefault(e=>accentForegroundRecipe$1.getValueFor(e).evaluate(e).focus),neutralFillRecipe$1=create$8({name:"neutral-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>neutralFill$1(neutralPalette$1.getValueFor(e),t||fillColor$1.getValueFor(e),neutralFillRestDelta$1.getValueFor(e),neutralFillHoverDelta$1.getValueFor(e),neutralFillActiveDelta$1.getValueFor(e),neutralFillFocusDelta$1.getValueFor(e))}),neutralFillRest$1=create$8("neutral-fill-rest").withDefault(e=>neutralFillRecipe$1.getValueFor(e).evaluate(e).rest),neutralFillHover$1=create$8("neutral-fill-hover").withDefault(e=>neutralFillRecipe$1.getValueFor(e).evaluate(e).hover),neutralFillActive$1=create$8("neutral-fill-active").withDefault(e=>neutralFillRecipe$1.getValueFor(e).evaluate(e).active);create$8("neutral-fill-focus").withDefault(e=>neutralFillRecipe$1.getValueFor(e).evaluate(e).focus);const neutralFillInputRecipe$1=create$8({name:"neutral-fill-input-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>neutralFillInput$1(neutralPalette$1.getValueFor(e),t||fillColor$1.getValueFor(e),neutralFillInputRestDelta$1.getValueFor(e),neutralFillInputHoverDelta$1.getValueFor(e),neutralFillInputActiveDelta$1.getValueFor(e),neutralFillInputFocusDelta$1.getValueFor(e))}),neutralFillInputRest$1=create$8("neutral-fill-input-rest").withDefault(e=>neutralFillInputRecipe$1.getValueFor(e).evaluate(e).rest),neutralFillInputHover$1=create$8("neutral-fill-input-hover").withDefault(e=>neutralFillInputRecipe$1.getValueFor(e).evaluate(e).hover),neutralFillInputActive$1=create$8("neutral-fill-input-active").withDefault(e=>neutralFillInputRecipe$1.getValueFor(e).evaluate(e).active);create$8("neutral-fill-input-focus").withDefault(e=>neutralFillInputRecipe$1.getValueFor(e).evaluate(e).focus);const neutralFillStealthRecipe$1=create$8({name:"neutral-fill-stealth-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>neutralFillStealth$1(neutralPalette$1.getValueFor(e),t||fillColor$1.getValueFor(e),neutralFillStealthRestDelta$1.getValueFor(e),neutralFillStealthHoverDelta$1.getValueFor(e),neutralFillStealthActiveDelta$1.getValueFor(e),neutralFillStealthFocusDelta$1.getValueFor(e),neutralFillRestDelta$1.getValueFor(e),neutralFillHoverDelta$1.getValueFor(e),neutralFillActiveDelta$1.getValueFor(e),neutralFillFocusDelta$1.getValueFor(e))}),neutralFillStealthRest$1=create$8("neutral-fill-stealth-rest").withDefault(e=>neutralFillStealthRecipe$1.getValueFor(e).evaluate(e).rest),neutralFillStealthHover$1=create$8("neutral-fill-stealth-hover").withDefault(e=>neutralFillStealthRecipe$1.getValueFor(e).evaluate(e).hover),neutralFillStealthActive$1=create$8("neutral-fill-stealth-active").withDefault(e=>neutralFillStealthRecipe$1.getValueFor(e).evaluate(e).active),neutralFillStealthFocus$1=create$8("neutral-fill-stealth-focus").withDefault(e=>neutralFillStealthRecipe$1.getValueFor(e).evaluate(e).focus),neutralFillStrongRecipe$1=create$8({name:"neutral-fill-strong-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>neutralFillContrast$1(neutralPalette$1.getValueFor(e),t||fillColor$1.getValueFor(e),neutralFillStrongRestDelta$1.getValueFor(e),neutralFillStrongHoverDelta$1.getValueFor(e),neutralFillStrongActiveDelta$1.getValueFor(e),neutralFillStrongFocusDelta$1.getValueFor(e))}),neutralFillStrongRest$1=create$8("neutral-fill-strong-rest").withDefault(e=>neutralFillStrongRecipe$1.getValueFor(e).evaluate(e).rest),neutralFillStrongHover$1=create$8("neutral-fill-strong-hover").withDefault(e=>neutralFillStrongRecipe$1.getValueFor(e).evaluate(e).hover),neutralFillStrongActive$1=create$8("neutral-fill-strong-active").withDefault(e=>neutralFillStrongRecipe$1.getValueFor(e).evaluate(e).active),neutralFillStrongFocus$1=create$8("neutral-fill-strong-focus").withDefault(e=>neutralFillStrongRecipe$1.getValueFor(e).evaluate(e).focus),neutralFillLayerRecipe$1=createNonCss$1("neutral-fill-layer-recipe").withDefault({evaluate:(e,t)=>neutralFillLayer$1(neutralPalette$1.getValueFor(e),t||fillColor$1.getValueFor(e),neutralFillLayerRestDelta$1.getValueFor(e))});create$8("neutral-fill-layer-rest").withDefault(e=>neutralFillLayerRecipe$1.getValueFor(e).evaluate(e));const focusStrokeOuterRecipe$1=createNonCss$1("focus-stroke-outer-recipe").withDefault({evaluate:e=>focusStrokeOuter$3(neutralPalette$1.getValueFor(e),fillColor$1.getValueFor(e))}),focusStrokeOuter$2=create$8("focus-stroke-outer").withDefault(e=>focusStrokeOuterRecipe$1.getValueFor(e).evaluate(e)),focusStrokeInnerRecipe$1=createNonCss$1("focus-stroke-inner-recipe").withDefault({evaluate:e=>focusStrokeInner$3(accentPalette$1.getValueFor(e),fillColor$1.getValueFor(e),focusStrokeOuter$2.getValueFor(e))}),focusStrokeInner$2=create$8("focus-stroke-inner").withDefault(e=>focusStrokeInnerRecipe$1.getValueFor(e).evaluate(e)),neutralForegroundHintRecipe$1=createNonCss$1("neutral-foreground-hint-recipe").withDefault({evaluate:e=>neutralForegroundHint$3(neutralPalette$1.getValueFor(e),fillColor$1.getValueFor(e))}),neutralForegroundHint$2=create$8("neutral-foreground-hint").withDefault(e=>neutralForegroundHintRecipe$1.getValueFor(e).evaluate(e)),neutralForegroundRecipe$1=createNonCss$1("neutral-foreground-recipe").withDefault({evaluate:e=>neutralForeground$1(neutralPalette$1.getValueFor(e),fillColor$1.getValueFor(e))}),neutralForegroundRest$1=create$8("neutral-foreground-rest").withDefault(e=>neutralForegroundRecipe$1.getValueFor(e).evaluate(e)),neutralStrokeRecipe$1=create$8({name:"neutral-stroke-recipe",cssCustomPropertyName:null}).withDefault({evaluate:e=>neutralStroke$1(neutralPalette$1.getValueFor(e),fillColor$1.getValueFor(e),neutralStrokeRestDelta$1.getValueFor(e),neutralStrokeHoverDelta$1.getValueFor(e),neutralStrokeActiveDelta$1.getValueFor(e),neutralStrokeFocusDelta$1.getValueFor(e))}),neutralStrokeRest$1=create$8("neutral-stroke-rest").withDefault(e=>neutralStrokeRecipe$1.getValueFor(e).evaluate(e).rest),neutralStrokeHover$1=create$8("neutral-stroke-hover").withDefault(e=>neutralStrokeRecipe$1.getValueFor(e).evaluate(e).hover),neutralStrokeActive$1=create$8("neutral-stroke-active").withDefault(e=>neutralStrokeRecipe$1.getValueFor(e).evaluate(e).active);create$8("neutral-stroke-focus").withDefault(e=>neutralStrokeRecipe$1.getValueFor(e).evaluate(e).focus);const neutralStrokeDividerRecipe$1=createNonCss$1("neutral-stroke-divider-recipe").withDefault({evaluate:(e,t)=>neutralStrokeDivider$1(neutralPalette$1.getValueFor(e),t||fillColor$1.getValueFor(e),neutralStrokeDividerRestDelta$1.getValueFor(e))}),neutralStrokeDividerRest$1=create$8("neutral-stroke-divider-rest").withDefault(e=>neutralStrokeDividerRecipe$1.getValueFor(e).evaluate(e)),heightNumberAsToken$1=DesignToken.create({name:"height-number",cssCustomPropertyName:null}).withDefault(e=>(baseHeightMultiplier$1.getValueFor(e)+density$1.getValueFor(e))*designUnit$1.getValueFor(e)),errorColor$1=create$8("error-color").withDefault(errorBase$1),errorPalette$1=createNonCss$1("error-palette").withDefault(e=>PaletteRGB$1.from(errorColor$1.getValueFor(e))),errorFillRecipe$1=create$8({name:"error-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>errorFillAlgorithm$1(errorPalette$1.getValueFor(e),neutralPalette$1.getValueFor(e),t||fillColor$1.getValueFor(e),accentFillHoverDelta$1.getValueFor(e),accentFillActiveDelta$1.getValueFor(e),accentFillFocusDelta$1.getValueFor(e),neutralFillRestDelta$1.getValueFor(e),neutralFillHoverDelta$1.getValueFor(e),neutralFillActiveDelta$1.getValueFor(e))}),errorFillRest$1=create$8("error-fill-rest").withDefault(e=>errorFillRecipe$1.getValueFor(e).evaluate(e).rest),errorFillHover$1=create$8("error-fill-hover").withDefault(e=>errorFillRecipe$1.getValueFor(e).evaluate(e).hover),errorFillActive$1=create$8("error-fill-active").withDefault(e=>errorFillRecipe$1.getValueFor(e).evaluate(e).active),errorFillFocus$1=create$8("error-fill-focus").withDefault(e=>errorFillRecipe$1.getValueFor(e).evaluate(e).focus),foregroundOnErrorByContrast$1=e=>(t,r)=>foregroundOnErrorAlgorithm$1(r||errorFillRest$1.getValueFor(t),e),foregroundOnErrorRecipe$1=create$8({name:"foreground-on-error-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>foregroundOnErrorByContrast$1(ContrastTarget$1.normal)(e,t)});create$8("foreground-on-error-rest").withDefault(e=>foregroundOnErrorRecipe$1.getValueFor(e).evaluate(e,errorFillRest$1.getValueFor(e))),create$8("foreground-on-error-hover").withDefault(e=>foregroundOnErrorRecipe$1.getValueFor(e).evaluate(e,errorFillHover$1.getValueFor(e))),create$8("foreground-on-error-active").withDefault(e=>foregroundOnErrorRecipe$1.getValueFor(e).evaluate(e,errorFillActive$1.getValueFor(e))),create$8("foreground-on-error-focus").withDefault(e=>foregroundOnErrorRecipe$1.getValueFor(e).evaluate(e,errorFillFocus$1.getValueFor(e)));const foregroundOnErrorLargeRecipe$1=create$8({name:"foreground-on-error-large-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>foregroundOnErrorByContrast$1(ContrastTarget$1.large)(e,t)});create$8("foreground-on-error-rest-large").withDefault(e=>foregroundOnErrorLargeRecipe$1.getValueFor(e).evaluate(e,errorFillRest$1.getValueFor(e))),create$8("foreground-on-error-hover-large").withDefault(e=>foregroundOnErrorLargeRecipe$1.getValueFor(e).evaluate(e,errorFillHover$1.getValueFor(e))),create$8("foreground-on-error-active-large").withDefault(e=>foregroundOnErrorLargeRecipe$1.getValueFor(e).evaluate(e,errorFillActive$1.getValueFor(e))),create$8("foreground-on-error-focus-large").withDefault(e=>foregroundOnErrorLargeRecipe$1.getValueFor(e).evaluate(e,errorFillFocus$1.getValueFor(e)));const errorForegroundByContrast$1=e=>(t,r)=>errorForegroundAlgorithm$1(errorPalette$1.getValueFor(t),r||fillColor$1.getValueFor(t),e,accentForegroundRestDelta$1.getValueFor(t),accentForegroundHoverDelta$1.getValueFor(t),accentForegroundActiveDelta$1.getValueFor(t),accentForegroundFocusDelta$1.getValueFor(t)),errorForegroundRecipe$1=create$8({name:"error-foreground-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>errorForegroundByContrast$1(ContrastTarget$1.normal)(e,t)});create$8("error-foreground-rest").withDefault(e=>errorForegroundRecipe$1.getValueFor(e).evaluate(e).rest),create$8("error-foreground-hover").withDefault(e=>errorForegroundRecipe$1.getValueFor(e).evaluate(e).hover);const errorForegroundActive$1=create$8("error-foreground-active").withDefault(e=>errorForegroundRecipe$1.getValueFor(e).evaluate(e).active);create$8("error-foreground-focus").withDefault(e=>errorForegroundRecipe$1.getValueFor(e).evaluate(e).focus);const heightNumber$1=cssPartial`(${baseHeightMultiplier$1} + ${density$1} + ${elementScale$1}) * ${designUnit$1}`;function __decorate(e,t,r,s){var n,i=arguments.length,o=i<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}"function"==typeof SuppressedError&&SuppressedError;const BaseButtonStyles$1=css`
  ${display("inline-flex")} :host {
    font-family: ${bodyFont$1};
    outline: none;
    font-size: ${typeRampBaseFontSize$1};
    line-height: ${typeRampBaseLineHeight$1};
    height: calc(${heightNumber$1} * 1px);
    min-width: calc(${heightNumber$1} * 1px);
    background-color: ${neutralFillRest$1};
    color: ${neutralForegroundRest$1};
    border-radius: calc(${controlCornerRadius$1} * 1px);
    fill: currentcolor;
    cursor: pointer;
    margin: calc((${focusStrokeWidth$1} + 2) * 1px);
  }

  .control {
    background: transparent;
    height: inherit;
    flex-grow: 1;
    box-sizing: border-box;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    padding: 0
      max(
        1px,
        calc((10 + (${designUnit$1} * 2 * (${density$1} + ${elementScale$1})))) * 1px
      );
    white-space: nowrap;
    outline: none;
    text-decoration: none;
    border: calc(${strokeWidth$1} * 1px) solid transparent;
    color: inherit;
    border-radius: inherit;
    fill: inherit;
    cursor: inherit;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
  }

  :host(:hover) {
    background-color: ${neutralFillHover$1};
  }

  :host(:active) {
    background-color: ${neutralFillActive$1};
  }

  :host([aria-pressed='true']) {
    box-shadow: inset 0px 0px 2px 2px ${neutralFillStrongActive$1};
  }

  :host([minimal]),
  :host([scale='xsmall']) {
    --element-scale: -4;
  }

  :host([scale='small']) {
    --element-scale: -2;
  }

  :host([scale='medium']) {
    --element-scale: 0;
  }

  :host([scale='large']) {
    --element-scale: 2;
  }

  :host([scale='xlarge']) {
    --element-scale: 4;
  }

  /* prettier-ignore */
  .control:${focusVisible} {
      outline: calc(${focusStrokeWidth$1} * 1px) solid ${neutralFillStrongFocus$1};
      outline-offset: 2px;
      -moz-outline-radius: 0px;
    }

  .control::-moz-focus-inner {
    border: 0;
  }

  .start,
  .end {
    display: flex;
  }

  .control.icon-only {
    padding: 0;
    line-height: 0;
  }

  ::slotted(svg) {
    ${""} width: 16px;
    height: 16px;
    pointer-events: none;
  }

  .start {
    margin-inline-end: 11px;
  }

  .end {
    margin-inline-start: 11px;
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host .control {
      background-color: ${SystemColors.ButtonFace};
      border-color: ${SystemColors.ButtonText};
      color: ${SystemColors.ButtonText};
      fill: currentColor;
    }

    :host(:hover) .control {
      forced-color-adjust: none;
      background-color: ${SystemColors.Highlight};
      color: ${SystemColors.HighlightText};
    }

    /* prettier-ignore */
    .control:${focusVisible} {
          forced-color-adjust: none;
          background-color: ${SystemColors.Highlight};
          outline-color: ${SystemColors.ButtonText};
          color: ${SystemColors.HighlightText};
        }

    .control:hover,
    :host([appearance='outline']) .control:hover {
      border-color: ${SystemColors.ButtonText};
    }

    :host([href]) .control {
      border-color: ${SystemColors.LinkText};
      color: ${SystemColors.LinkText};
    }

    :host([href]) .control:hover,
        :host([href]) .control:${focusVisible} {
      forced-color-adjust: none;
      background: ${SystemColors.ButtonFace};
      outline-color: ${SystemColors.LinkText};
      color: ${SystemColors.LinkText};
      fill: currentColor;
    }
  `)),AccentButtonStyles$1=css`
  :host([appearance='accent']) {
    background: ${accentFillRest$1};
    color: ${foregroundOnAccentRest$1};
  }

  :host([appearance='accent']:hover) {
    background: ${accentFillHover$1};
    color: ${foregroundOnAccentHover$1};
  }

  :host([appearance='accent'][aria-pressed='true']) {
    box-shadow: inset 0px 0px 2px 2px ${accentForegroundActive$1};
  }

  :host([appearance='accent']:active) .control:active {
    background: ${accentFillActive$1};
    color: ${foregroundOnAccentActive$1};
  }

  :host([appearance="accent"]) .control:${focusVisible} {
    outline-color: ${accentFillFocus$1};
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance='accent']) .control {
      forced-color-adjust: none;
      background: ${SystemColors.Highlight};
      color: ${SystemColors.HighlightText};
    }

    :host([appearance='accent']) .control:hover,
    :host([appearance='accent']:active) .control:active {
      background: ${SystemColors.HighlightText};
      border-color: ${SystemColors.Highlight};
      color: ${SystemColors.Highlight};
    }

    :host([appearance="accent"]) .control:${focusVisible} {
      outline-color: ${SystemColors.Highlight};
    }

    :host([appearance='accent'][href]) .control {
      background: ${SystemColors.LinkText};
      color: ${SystemColors.HighlightText};
    }

    :host([appearance='accent'][href]) .control:hover {
      background: ${SystemColors.ButtonFace};
      border-color: ${SystemColors.LinkText};
      box-shadow: none;
      color: ${SystemColors.LinkText};
      fill: currentColor;
    }

    :host([appearance="accent"][href]) .control:${focusVisible} {
      outline-color: ${SystemColors.HighlightText};
    }
  `)),ErrorButtonStyles$1=css`
  :host([appearance='error']) {
    background: ${errorFillRest$1};
    color: ${foregroundOnAccentRest$1};
  }

  :host([appearance='error']:hover) {
    background: ${errorFillHover$1};
    color: ${foregroundOnAccentHover$1};
  }

  :host([appearance='error'][aria-pressed='true']) {
    box-shadow: inset 0px 0px 2px 2px ${errorForegroundActive$1};
  }

  :host([appearance='error']:active) .control:active {
    background: ${errorFillActive$1};
    color: ${foregroundOnAccentActive$1};
  }

  :host([appearance="error"]) .control:${focusVisible} {
    outline-color: ${errorFillFocus$1};
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance='error']) .control {
      forced-color-adjust: none;
      background: ${SystemColors.Highlight};
      color: ${SystemColors.HighlightText};
    }

    :host([appearance='error']) .control:hover,
    :host([appearance='error']:active) .control:active {
      background: ${SystemColors.HighlightText};
      border-color: ${SystemColors.Highlight};
      color: ${SystemColors.Highlight};
    }

    :host([appearance="error"]) .control:${focusVisible} {
      outline-color: ${SystemColors.Highlight};
    }

    :host([appearance='error'][href]) .control {
      background: ${SystemColors.LinkText};
      color: ${SystemColors.HighlightText};
    }

    :host([appearance='error'][href]) .control:hover {
      background: ${SystemColors.ButtonFace};
      border-color: ${SystemColors.LinkText};
      box-shadow: none;
      color: ${SystemColors.LinkText};
      fill: currentColor;
    }

    :host([appearance="error"][href]) .control:${focusVisible} {
      outline-color: ${SystemColors.HighlightText};
    }
  `)),HypertextStyles$1=css`
  :host([appearance='hypertext']) {
    font-size: inherit;
    line-height: inherit;
    height: auto;
    min-width: 0;
    background: transparent;
  }

  :host([appearance='hypertext']) .control {
    display: inline;
    padding: 0;
    border: none;
    box-shadow: none;
    border-radius: 0;
    line-height: 1;
  }

  :host a.control:not(:link) {
    background-color: transparent;
    cursor: default;
  }
  :host([appearance='hypertext']) .control:link,
  :host([appearance='hypertext']) .control:visited {
    background: transparent;
    color: ${accentForegroundRest$1};
    border-bottom: calc(${strokeWidth$1} * 1px) solid ${accentForegroundRest$1};
  }

  :host([appearance='hypertext']:hover),
  :host([appearance='hypertext']) .control:hover {
    background: transparent;
    border-bottom-color: ${accentForegroundHover$1};
  }

  :host([appearance='hypertext']:active),
  :host([appearance='hypertext']) .control:active {
    background: transparent;
    border-bottom-color: ${accentForegroundActive$1};
  }

  :host([appearance="hypertext"]) .control:${focusVisible} {
    outline-color: transparent;
    border-bottom: calc(${focusStrokeWidth$1} * 1px) solid ${focusStrokeOuter$2};
    margin-bottom: calc(calc(${strokeWidth$1} - ${focusStrokeWidth$1}) * 1px);
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance='hypertext']:hover) {
      background-color: ${SystemColors.ButtonFace};
      color: ${SystemColors.ButtonText};
    }
    :host([appearance="hypertext"][href]) .control:hover,
        :host([appearance="hypertext"][href]) .control:active,
        :host([appearance="hypertext"][href]) .control:${focusVisible} {
      color: ${SystemColors.LinkText};
      border-bottom-color: ${SystemColors.LinkText};
      box-shadow: none;
    }
  `)),LightweightButtonStyles$1=css`
  :host([appearance='lightweight']) {
    background: transparent;
    color: ${accentForegroundRest$1};
  }

  :host([appearance='lightweight']) .control {
    padding: 0;
    height: initial;
    border: none;
    box-shadow: none;
    border-radius: 0;
  }

  :host([appearance='lightweight']:hover) {
    background: transparent;
    color: ${accentForegroundHover$1};
  }

  :host([appearance='lightweight']:active) {
    background: transparent;
    color: ${accentForegroundActive$1};
  }

  :host([appearance='lightweight']) .content {
    position: relative;
  }

  :host([appearance='lightweight']) .content::before {
    content: '';
    display: block;
    height: calc(${strokeWidth$1} * 1px);
    position: absolute;
    top: calc(1em + 4px);
    width: 100%;
  }

  :host([appearance='lightweight']:hover) .content::before {
    background: ${accentForegroundHover$1};
  }

  :host([appearance='lightweight']:active) .content::before {
    background: ${accentForegroundActive$1};
  }

  :host([appearance="lightweight"]) .control:${focusVisible} {
    outline-color: transparent;
  }

  :host([appearance="lightweight"]) .control:${focusVisible} .content::before {
    background: ${neutralForegroundRest$1};
    height: calc(${focusStrokeWidth$1} * 1px);
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance="lightweight"]) .control:hover,
        :host([appearance="lightweight"]) .control:${focusVisible} {
      forced-color-adjust: none;
      background: ${SystemColors.ButtonFace};
      color: ${SystemColors.Highlight};
    }
    :host([appearance="lightweight"]) .control:hover .content::before,
        :host([appearance="lightweight"]) .control:${focusVisible} .content::before {
      background: ${SystemColors.Highlight};
    }

    :host([appearance="lightweight"][href]) .control:hover,
        :host([appearance="lightweight"][href]) .control:${focusVisible} {
      background: ${SystemColors.ButtonFace};
      box-shadow: none;
      color: ${SystemColors.LinkText};
    }

    :host([appearance="lightweight"][href]) .control:hover .content::before,
        :host([appearance="lightweight"][href]) .control:${focusVisible} .content::before {
      background: ${SystemColors.LinkText};
    }
  `)),OutlineButtonStyles$1=css`
  :host([appearance='outline']) {
    background: transparent;
    border-color: ${accentFillRest$1};
  }

  :host([appearance='outline']:hover) {
    border-color: ${accentFillHover$1};
  }

  :host([appearance='outline']:active) {
    border-color: ${accentFillActive$1};
  }

  :host([appearance='outline']) .control {
    border-color: inherit;
  }

  :host([appearance="outline"]) .control:${focusVisible} {
    outline-color: ${accentFillFocus$1};
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance='outline']) .control {
      border-color: ${SystemColors.ButtonText};
    }
    :host([appearance="outline"]) .control:${focusVisible} {
      forced-color-adjust: none;
      background-color: ${SystemColors.Highlight};
      outline-color: ${SystemColors.ButtonText};
      color: ${SystemColors.HighlightText};
      fill: currentColor;
    }
    :host([appearance='outline'][href]) .control {
      background: ${SystemColors.ButtonFace};
      border-color: ${SystemColors.LinkText};
      color: ${SystemColors.LinkText};
      fill: currentColor;
    }
    :host([appearance="outline"][href]) .control:hover,
        :host([appearance="outline"][href]) .control:${focusVisible} {
      forced-color-adjust: none;
      outline-color: ${SystemColors.LinkText};
    }
  `)),StealthButtonStyles$1=css`
  :host([appearance='stealth']),
  :host([appearance='stealth'][disabled]:active),
  :host([appearance='stealth'][disabled]:hover) {
    background: transparent;
  }

  :host([appearance='stealth']:hover) {
    background: ${neutralFillStealthHover$1};
  }

  :host([appearance='stealth']:active) {
    background: ${neutralFillStealthActive$1};
  }

  :host([appearance='stealth']) .control:${focusVisible} {
    outline-color: ${accentFillFocus$1};
  }

  /* Make the focus outline displayed within the button if
     it is in a start or end slot; e.g. in a tree item
     This will make the focus outline bounded within the container.
   */
  :host([appearance='stealth'][slot="end"]) .control:${focusVisible},
  :host([appearance='stealth'][slot="start"]) .control:${focusVisible} {
    outline-offset: -2px;
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance='stealth']),
    :host([appearance='stealth']) .control {
      forced-color-adjust: none;
      background: ${SystemColors.ButtonFace};
      border-color: transparent;
      color: ${SystemColors.ButtonText};
      fill: currentColor;
    }

    :host([appearance='stealth']:hover) .control {
      background: ${SystemColors.Highlight};
      border-color: ${SystemColors.Highlight};
      color: ${SystemColors.HighlightText};
      fill: currentColor;
    }

    :host([appearance="stealth"]:${focusVisible}) .control {
      outline-color: ${SystemColors.Highlight};
      color: ${SystemColors.HighlightText};
      fill: currentColor;
    }

    :host([appearance='stealth'][href]) .control {
      color: ${SystemColors.LinkText};
    }

    :host([appearance="stealth"][href]:hover) .control,
        :host([appearance="stealth"][href]:${focusVisible}) .control {
      background: ${SystemColors.LinkText};
      border-color: ${SystemColors.LinkText};
      color: ${SystemColors.HighlightText};
      fill: currentColor;
    }

    :host([appearance="stealth"][href]:${focusVisible}) .control {
      forced-color-adjust: none;
      box-shadow: 0 0 0 1px ${SystemColors.LinkText};
    }
  `));function appearanceBehavior$1(e,t){return new PropertyStyleSheetBehavior("appearance",e,t)}const buttonStyles$1=(e,t)=>css`
    :host([disabled]),
    :host([disabled]:hover),
    :host([disabled]:active) {
      opacity: ${disabledOpacity$1};
      background-color: ${neutralFillRest$1};
      cursor: ${disabledCursor};
    }

    ${BaseButtonStyles$1}
  `.withBehaviors(forcedColorsStylesheetBehavior(css`
      :host([disabled]),
      :host([disabled]) .control,
      :host([disabled]:hover),
      :host([disabled]:active) {
        forced-color-adjust: none;
        background-color: ${SystemColors.ButtonFace};
        outline-color: ${SystemColors.GrayText};
        color: ${SystemColors.GrayText};
        cursor: ${disabledCursor};
        opacity: 1;
      }
    `),appearanceBehavior$1("accent",css`
        :host([appearance='accent'][disabled]),
        :host([appearance='accent'][disabled]:hover),
        :host([appearance='accent'][disabled]:active) {
          background: ${accentFillRest$1};
        }

        ${AccentButtonStyles$1}
      `.withBehaviors(forcedColorsStylesheetBehavior(css`
          :host([appearance='accent'][disabled]) .control,
          :host([appearance='accent'][disabled]) .control:hover {
            background: ${SystemColors.ButtonFace};
            border-color: ${SystemColors.GrayText};
            color: ${SystemColors.GrayText};
          }
        `))),appearanceBehavior$1("error",css`
        :host([appearance='error'][disabled]),
        :host([appearance='error'][disabled]:hover),
        :host([appearance='error'][disabled]:active) {
          background: ${errorFillRest$1};
        }

        ${ErrorButtonStyles$1}
      `.withBehaviors(forcedColorsStylesheetBehavior(css`
          :host([appearance='error'][disabled]) .control,
          :host([appearance='error'][disabled]) .control:hover {
            background: ${SystemColors.ButtonFace};
            border-color: ${SystemColors.GrayText};
            color: ${SystemColors.GrayText};
          }
        `))),appearanceBehavior$1("lightweight",css`
        :host([appearance='lightweight'][disabled]:hover),
        :host([appearance='lightweight'][disabled]:active) {
          background-color: transparent;
          color: ${accentForegroundRest$1};
        }

        :host([appearance='lightweight'][disabled]) .content::before,
        :host([appearance='lightweight'][disabled]:hover) .content::before,
        :host([appearance='lightweight'][disabled]:active) .content::before {
          background: transparent;
        }

        ${LightweightButtonStyles$1}
      `.withBehaviors(forcedColorsStylesheetBehavior(css`
          :host([appearance='lightweight'].disabled) .control {
            forced-color-adjust: none;
            color: ${SystemColors.GrayText};
          }

          :host([appearance='lightweight'].disabled)
            .control:hover
            .content::before {
            background: none;
          }
        `))),appearanceBehavior$1("outline",css`
        :host([appearance='outline'][disabled]),
        :host([appearance='outline'][disabled]:hover),
        :host([appearance='outline'][disabled]:active) {
          background: transparent;
          border-color: ${accentFillRest$1};
        }

        ${OutlineButtonStyles$1}
      `.withBehaviors(forcedColorsStylesheetBehavior(css`
          :host([appearance='outline'][disabled]) .control {
            border-color: ${SystemColors.GrayText};
          }
        `))),appearanceBehavior$1("stealth",css`
        ${StealthButtonStyles$1}
      `.withBehaviors(forcedColorsStylesheetBehavior(css`
          :host([appearance='stealth'][disabled]) {
            background: ${SystemColors.ButtonFace};
          }

          :host([appearance='stealth'][disabled]) .control {
            background: ${SystemColors.ButtonFace};
            border-color: transparent;
            color: ${SystemColors.GrayText};
          }
        `))));let JupyterButton$1=class extends Button$1{constructor(){super(...arguments),this.appearance="neutral"}defaultSlottedContentChanged(e,t){const r=this.defaultSlottedContent.filter(e=>e.nodeType===Node.ELEMENT_NODE);1===r.length&&(r[0]instanceof SVGElement||r[0].classList.contains("fa")||r[0].classList.contains("fas"))?this.control.classList.add("icon-only"):this.control.classList.remove("icon-only")}};__decorate([attr],JupyterButton$1.prototype,"appearance",void 0),__decorate([attr({attribute:"minimal",mode:"boolean"})],JupyterButton$1.prototype,"minimal",void 0),__decorate([attr],JupyterButton$1.prototype,"scale",void 0);const jpButton$1=JupyterButton$1.compose({baseName:"button",baseClass:Button$1,template:buttonTemplate,styles:buttonStyles$1,shadowOptions:{delegatesFocus:!0}});var candidateSelectors=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],NoElement="undefined"==typeof Element,matches=NoElement?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,getRootNode=!NoElement&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},_isInert=function(e,t){var r;void 0===t&&(t=!0);var s=null==e||null===(r=e.getAttribute)||void 0===r?void 0:r.call(e,"inert");return""===s||"true"===s||t&&e&&_isInert(e.parentNode)},isInput=function(e){return"INPUT"===e.tagName},isHiddenInput=function(e){return isInput(e)&&"hidden"===e.type},isDetailsWithSummary=function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})},isNodeAttached=function(e){var t,r,s,n,i=e&&getRootNode(e),o=null===(t=i)||void 0===t?void 0:t.host,a=!1;if(i&&i!==e)for(a=!!(null!==(r=o)&&void 0!==r&&null!==(s=r.ownerDocument)&&void 0!==s&&s.contains(o)||null!=e&&null!==(n=e.ownerDocument)&&void 0!==n&&n.contains(e));!a&&o;){var l,c,d;a=!(null===(c=o=null===(l=i=getRootNode(o))||void 0===l?void 0:l.host)||void 0===c||null===(d=c.ownerDocument)||void 0===d||!d.contains(o))}return a},isZeroArea=function(e){var t=e.getBoundingClientRect(),r=t.width,s=t.height;return 0===r&&0===s},isHidden=function(e,t){var r=t.displayCheck,s=t.getShadowRoot;if("full-native"===r&&"checkVisibility"in e)return!e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});if("hidden"===getComputedStyle(e).visibility)return!0;var n=matches.call(e,"details>summary:first-of-type")?e.parentElement:e;if(matches.call(n,"details:not([open]) *"))return!0;if(r&&"full"!==r&&"full-native"!==r&&"legacy-full"!==r){if("non-zero-area"===r)return isZeroArea(e)}else{if("function"==typeof s){for(var i=e;e;){var o=e.parentElement,a=getRootNode(e);if(o&&!o.shadowRoot&&!0===s(o))return isZeroArea(e);e=e.assignedSlot?e.assignedSlot:o||a===e.ownerDocument?o:a.host}e=i}if(isNodeAttached(e))return!e.getClientRects().length;if("legacy-full"!==r)return!0}return!1},isDisabledFromFieldset=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var r=0;r<t.children.length;r++){var s=t.children.item(r);if("LEGEND"===s.tagName)return!!matches.call(t,"fieldset[disabled] *")||!s.contains(e)}return!0}t=t.parentElement}return!1},isNodeMatchingSelectorFocusable=function(e,t){return!(t.disabled||_isInert(t)||isHiddenInput(t)||isHidden(t,e)||isDetailsWithSummary(t)||isDisabledFromFieldset(t))},focusableCandidateSelector=/* @__PURE__ */candidateSelectors.concat("iframe").join(","),isFocusable=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==matches.call(e,focusableCandidateSelector)&&isNodeMatchingSelectorFocusable(t,e)};function provideJupyterDesignSystem$1(e){return DesignSystem.getOrCreate(e).withPrefix("jp")}function useProperties(t,r,s){reactExports.useEffect(()=>{if(void 0!==s&&t.current&&t.current[r]!==s)try{t.current[r]=s}catch(e){console.warn(e)}},[s,t.current])}provideJupyterDesignSystem$1().register(jpButton$1());const Button=reactExports.forwardRef((e,r)=>{const s=reactExports.useRef(null),{className:n,minimal:i,appearance:o,form:a,formaction:l,formenctype:c,formmethod:d,formtarget:h,type:u,autofocus:p,formnovalidate:g,defaultSlottedContent:m,disabled:f,required:v,..._}=e;return useProperties(s,"autofocus",e.autofocus),useProperties(s,"formnovalidate",e.formnovalidate),useProperties(s,"defaultSlottedContent",e.defaultSlottedContent),useProperties(s,"disabled",e.disabled),useProperties(s,"required",e.required),reactExports.useImperativeHandle(r,()=>s.current,[s.current]),t.createElement("jp-button",{ref:s,..._,appearance:e.appearance,form:e.form,formaction:e.formaction,formenctype:e.formenctype,formmethod:e.formmethod,formtarget:e.formtarget,type:e.type,class:e.className,exportparts:e.exportparts,for:e.htmlFor,part:e.part,tabindex:e.tabIndex,minimal:e.minimal?"":void 0,style:{...e.style}},e.children)});function contrast(e,t){const r=e.relativeLuminance>t.relativeLuminance?e:t,s=e.relativeLuminance>t.relativeLuminance?t:e;return(r.relativeLuminance+.05)/(s.relativeLuminance+.05)}const SwatchRGB=Object.freeze({create:(e,t,r)=>new SwatchRGBImpl(e,t,r),from:e=>new SwatchRGBImpl(e.r,e.g,e.b)});function isSwatchRGB(e){const t={r:0,g:0,b:0,toColorString:()=>"",contrast:()=>0,relativeLuminance:0};for(const r in t)if(typeof t[r]!=typeof e[r])return!1;return!0}class SwatchRGBImpl extends ColorRGBA64{constructor(e,t,r){super(e,t,r,1),this.toColorString=this.toStringHexRGB,this.contrast=contrast.bind(null,this),this.createCSS=this.toColorString,this.relativeLuminance=rgbToRelativeLuminance(this)}static fromObject(e){return new SwatchRGBImpl(e.r,e.g,e.b)}}function baseLayerLuminanceSwatch(e){return SwatchRGB.create(e,e,e)}const StandardLuminance={LightMode:1,DarkMode:.23},target=(-.1+Math.sqrt(.21))/2;function isDark(e){return e.relativeLuminance<=target}function binarySearch(e,t,r=0,s=e.length-1){if(s===r)return e[r];const n=Math.floor((s-r)/2)+r;return t(e[n])?binarySearch(e,t,r,n):binarySearch(e,t,n+1,s)}function directionByIsDark(e){return isDark(e)?-1:1}function create$7(e,t,r){return"number"==typeof e?PaletteRGB.from(SwatchRGB.create(e,t,r)):PaletteRGB.from(e)}function from$1(e){return isSwatchRGB(e)?PaletteRGBImpl.from(e):PaletteRGBImpl.from(SwatchRGB.create(e.r,e.g,e.b))}const PaletteRGB=Object.freeze({create:create$7,from:from$1});class PaletteRGBImpl{constructor(e,t){this.closestIndexCache=/* @__PURE__ */new Map,this.source=e,this.swatches=t,this.reversedSwatches=Object.freeze([...this.swatches].reverse()),this.lastIndex=this.swatches.length-1}colorContrast(e,t,r,s){void 0===r&&(r=this.closestIndexOf(e));let n=this.swatches;const i=this.lastIndex;let o=r;void 0===s&&(s=directionByIsDark(e));return-1===s&&(n=this.reversedSwatches,o=i-o),binarySearch(n,r=>contrast(e,r)>=t,o,i)}get(e){return this.swatches[e]||this.swatches[clamp(e,0,this.lastIndex)]}closestIndexOf(e){if(this.closestIndexCache.has(e.relativeLuminance))return this.closestIndexCache.get(e.relativeLuminance);let t=this.swatches.indexOf(e);if(-1!==t)return this.closestIndexCache.set(e.relativeLuminance,t),t;const r=this.swatches.reduce((t,r)=>Math.abs(r.relativeLuminance-e.relativeLuminance)<Math.abs(t.relativeLuminance-e.relativeLuminance)?r:t);return t=this.swatches.indexOf(r),this.closestIndexCache.set(e.relativeLuminance,t),t}static from(e){return new PaletteRGBImpl(e,Object.freeze(new ComponentStateColorPalette({baseColor:ColorRGBA64.fromObject(e)}).palette.map(e=>{const t=parseColorHexRGB(e.toStringHexRGB());return SwatchRGB.create(t.r,t.g,t.b)})))}}function accentFill(e,t,r,s,n,i,o,a,l){const c=e.source,d=t.closestIndexOf(r)>=Math.max(o,a,l)?-1:1,h=e.closestIndexOf(c),u=h+-1*d*s,p=u+d*n,g=u+d*i;return{rest:e.get(u),hover:e.get(h),active:e.get(p),focus:e.get(g)}}function accentForeground(e,t,r,s,n,i,o){const a=e.source,l=e.closestIndexOf(a),c=directionByIsDark(t),d=l+(1===c?Math.min(s,n):Math.max(c*s,c*n)),h=e.colorContrast(t,r,d,c),u=e.closestIndexOf(h),p=u+c*Math.abs(s-n);let g,m;return(1===c?s<n:c*s>c*n)?(g=u,m=p):(g=p,m=u),{rest:e.get(g),hover:e.get(m),active:e.get(g+c*i),focus:e.get(g+c*o)}}const white=SwatchRGB.create(1,1,1),black=SwatchRGB.create(0,0,0),middleGrey=SwatchRGB.from(parseColorHexRGB("#808080")),accentBase=SwatchRGB.from(parseColorHexRGB("#DA1A5F")),errorBase=SwatchRGB.from(parseColorHexRGB("#D32F2F"));function foregroundOnAccent(e,t){return e.contrast(white)>=t?white:black}function neutralFill(e,t,r,s,n,i){const o=e.closestIndexOf(t),a=o>=Math.max(r,s,n,i)?-1:1;return{rest:e.get(o+a*r),hover:e.get(o+a*s),active:e.get(o+a*n),focus:e.get(o+a*i)}}function neutralFillInput(e,t,r,s,n,i){const o=directionByIsDark(t),a=e.closestIndexOf(t);return{rest:e.get(a-o*r),hover:e.get(a-o*s),active:e.get(a-o*n),focus:e.get(a-o*i)}}function neutralFillLayer(e,t,r){const s=e.closestIndexOf(t);return e.get(s-(s<r?-1*r:r))}function neutralFillStealth(e,t,r,s,n,i,o,a,l,c){const d=Math.max(r,s,n,i,o,a,l,c),h=e.closestIndexOf(t),u=h>=d?-1:1;return{rest:e.get(h+u*r),hover:e.get(h+u*s),active:e.get(h+u*n),focus:e.get(h+u*i)}}function neutralFillContrast(e,t,r,s,n,i){const o=directionByIsDark(t),a=e.closestIndexOf(e.colorContrast(t,4.5)),l=a+o*Math.abs(r-s);let c,d;return(1===o?r<s:o*r>o*s)?(c=a,d=l):(c=l,d=a),{rest:e.get(c),hover:e.get(d),active:e.get(c+o*n),focus:e.get(c+o*i)}}function focusStrokeOuter$1(e,t){return e.colorContrast(t,3.5)}function focusStrokeInner$1(e,t,r){return e.colorContrast(r,3.5,e.closestIndexOf(e.source),-1*directionByIsDark(t))}function neutralForeground(e,t){return e.colorContrast(t,14)}function neutralForegroundHint$1(e,t){return e.colorContrast(t,4.5)}function neutralLayerCardContainer(e,t,r){return e.get(e.closestIndexOf(baseLayerLuminanceSwatch(t))+r)}function neutralLayerFloating$1(e,t,r){const s=e.closestIndexOf(baseLayerLuminanceSwatch(t))-r;return e.get(s-r)}function neutralLayer1$1(e,t){return e.get(e.closestIndexOf(baseLayerLuminanceSwatch(t)))}function neutralLayer2Index(e,t,r,s,n,i){return Math.max(e.closestIndexOf(baseLayerLuminanceSwatch(t))+r,s,n,i)}function neutralLayer2(e,t,r,s,n,i){return e.get(neutralLayer2Index(e,t,r,s,n,i))}function neutralLayer3(e,t,r,s,n,i){return e.get(neutralLayer2Index(e,t,r,s,n,i)+r)}function neutralLayer4(e,t,r,s,n,i){return e.get(neutralLayer2Index(e,t,r,s,n,i)+2*r)}function neutralStroke(e,t,r,s,n,i){const o=e.closestIndexOf(t),a=directionByIsDark(t),l=o+a*r,c=l+a*(s-r),d=l+a*(n-r),h=l+a*(i-r);return{rest:e.get(l),hover:e.get(c),active:e.get(d),focus:e.get(h)}}function neutralStrokeDivider(e,t,r){return e.get(e.closestIndexOf(t)+directionByIsDark(t)*r)}function errorFillAlgorithm(e,t,r,s,n,i,o,a,l){const c=e.source,d=t.closestIndexOf(r)>=Math.max(o,a,l)?-1:1,h=e.closestIndexOf(c),u=h+-1*d*s,p=u+d*n,g=u+d*i;return{rest:e.get(u),hover:e.get(h),active:e.get(p),focus:e.get(g)}}function errorForegroundAlgorithm(e,t,r,s,n,i,o){const a=e.source,l=e.closestIndexOf(a),c=isDark(t)?-1:1,d=l+(1===c?Math.min(s,n):Math.max(c*s,c*n)),h=e.colorContrast(t,r,d,c),u=e.closestIndexOf(h),p=u+c*Math.abs(s-n);let g,m;return(1===c?s<n:c*s>c*n)?(g=u,m=p):(g=p,m=u),{rest:e.get(g),hover:e.get(m),active:e.get(g+c*i),focus:e.get(g+c*o)}}function foregroundOnErrorAlgorithm(e,t){return e.contrast(white)>=t?white:black}const{create:create$6}=DesignToken;function createNonCss(e){return DesignToken.create({name:e,cssCustomPropertyName:null})}const bodyFont=create$6("body-font").withDefault('aktiv-grotesk, "Segoe UI", Arial, Helvetica, sans-serif'),baseHeightMultiplier=create$6("base-height-multiplier").withDefault(10),baseHorizontalSpacingMultiplier=create$6("base-horizontal-spacing-multiplier").withDefault(3),baseLayerLuminance=create$6("base-layer-luminance").withDefault(StandardLuminance.DarkMode),controlCornerRadius=create$6("control-corner-radius").withDefault(4),density=create$6("density").withDefault(0),designUnit=create$6("design-unit").withDefault(4),elementScale=create$6("element-scale").withDefault(0),direction=create$6("direction").withDefault(Direction.ltr),disabledOpacity=create$6("disabled-opacity").withDefault(.4),strokeWidth=create$6("stroke-width").withDefault(1),focusStrokeWidth=create$6("focus-stroke-width").withDefault(2),typeRampBaseFontSize=create$6("type-ramp-base-font-size").withDefault("14px"),typeRampBaseLineHeight=create$6("type-ramp-base-line-height").withDefault("20px"),typeRampMinus1FontSize=create$6("type-ramp-minus-1-font-size").withDefault("12px"),typeRampMinus1LineHeight=create$6("type-ramp-minus-1-line-height").withDefault("16px"),typeRampMinus2FontSize=create$6("type-ramp-minus-2-font-size").withDefault("10px"),typeRampMinus2LineHeight=create$6("type-ramp-minus-2-line-height").withDefault("16px"),typeRampPlus1FontSize=create$6("type-ramp-plus-1-font-size").withDefault("16px"),typeRampPlus1LineHeight=create$6("type-ramp-plus-1-line-height").withDefault("24px"),typeRampPlus2FontSize=create$6("type-ramp-plus-2-font-size").withDefault("20px"),typeRampPlus2LineHeight=create$6("type-ramp-plus-2-line-height").withDefault("28px"),typeRampPlus3FontSize=create$6("type-ramp-plus-3-font-size").withDefault("28px"),typeRampPlus3LineHeight=create$6("type-ramp-plus-3-line-height").withDefault("36px"),typeRampPlus4FontSize=create$6("type-ramp-plus-4-font-size").withDefault("34px"),typeRampPlus4LineHeight=create$6("type-ramp-plus-4-line-height").withDefault("44px"),typeRampPlus5FontSize=create$6("type-ramp-plus-5-font-size").withDefault("46px"),typeRampPlus5LineHeight=create$6("type-ramp-plus-5-line-height").withDefault("56px"),typeRampPlus6FontSize=create$6("type-ramp-plus-6-font-size").withDefault("60px"),typeRampPlus6LineHeight=create$6("type-ramp-plus-6-line-height").withDefault("72px"),accentFillRestDelta=createNonCss("accent-fill-rest-delta").withDefault(0),accentFillHoverDelta=createNonCss("accent-fill-hover-delta").withDefault(4),accentFillActiveDelta=createNonCss("accent-fill-active-delta").withDefault(-5),accentFillFocusDelta=createNonCss("accent-fill-focus-delta").withDefault(0),accentForegroundRestDelta=createNonCss("accent-foreground-rest-delta").withDefault(0),accentForegroundHoverDelta=createNonCss("accent-foreground-hover-delta").withDefault(6),accentForegroundActiveDelta=createNonCss("accent-foreground-active-delta").withDefault(-4),accentForegroundFocusDelta=createNonCss("accent-foreground-focus-delta").withDefault(0),neutralFillRestDelta=createNonCss("neutral-fill-rest-delta").withDefault(7),neutralFillHoverDelta=createNonCss("neutral-fill-hover-delta").withDefault(10),neutralFillActiveDelta=createNonCss("neutral-fill-active-delta").withDefault(5),neutralFillFocusDelta=createNonCss("neutral-fill-focus-delta").withDefault(0),neutralFillInputRestDelta=createNonCss("neutral-fill-input-rest-delta").withDefault(0),neutralFillInputHoverDelta=createNonCss("neutral-fill-input-hover-delta").withDefault(0),neutralFillInputActiveDelta=createNonCss("neutral-fill-input-active-delta").withDefault(0),neutralFillInputFocusDelta=createNonCss("neutral-fill-input-focus-delta").withDefault(0),neutralFillStealthRestDelta=createNonCss("neutral-fill-stealth-rest-delta").withDefault(0),neutralFillStealthHoverDelta=createNonCss("neutral-fill-stealth-hover-delta").withDefault(5),neutralFillStealthActiveDelta=createNonCss("neutral-fill-stealth-active-delta").withDefault(3),neutralFillStealthFocusDelta=createNonCss("neutral-fill-stealth-focus-delta").withDefault(0),neutralFillStrongRestDelta=createNonCss("neutral-fill-strong-rest-delta").withDefault(0),neutralFillStrongHoverDelta=createNonCss("neutral-fill-strong-hover-delta").withDefault(8),neutralFillStrongActiveDelta=createNonCss("neutral-fill-strong-active-delta").withDefault(-5),neutralFillStrongFocusDelta=createNonCss("neutral-fill-strong-focus-delta").withDefault(0),neutralFillLayerRestDelta=createNonCss("neutral-fill-layer-rest-delta").withDefault(3),neutralStrokeRestDelta=createNonCss("neutral-stroke-rest-delta").withDefault(25),neutralStrokeHoverDelta=createNonCss("neutral-stroke-hover-delta").withDefault(40),neutralStrokeActiveDelta=createNonCss("neutral-stroke-active-delta").withDefault(16),neutralStrokeFocusDelta=createNonCss("neutral-stroke-focus-delta").withDefault(25),neutralStrokeDividerRestDelta=createNonCss("neutral-stroke-divider-rest-delta").withDefault(8),neutralColor=create$6("neutral-color").withDefault(middleGrey),neutralPalette=createNonCss("neutral-palette").withDefault(e=>PaletteRGB.from(neutralColor.getValueFor(e))),accentColor=create$6("accent-color").withDefault(accentBase),accentPalette=createNonCss("accent-palette").withDefault(e=>PaletteRGB.from(accentColor.getValueFor(e))),neutralLayerCardContainerRecipe=createNonCss("neutral-layer-card-container-recipe").withDefault({evaluate:e=>neutralLayerCardContainer(neutralPalette.getValueFor(e),baseLayerLuminance.getValueFor(e),neutralFillLayerRestDelta.getValueFor(e))});create$6("neutral-layer-card-container").withDefault(e=>neutralLayerCardContainerRecipe.getValueFor(e).evaluate(e));const neutralLayerFloatingRecipe=createNonCss("neutral-layer-floating-recipe").withDefault({evaluate:e=>neutralLayerFloating$1(neutralPalette.getValueFor(e),baseLayerLuminance.getValueFor(e),neutralFillLayerRestDelta.getValueFor(e))}),neutralLayerFloating=create$6("neutral-layer-floating").withDefault(e=>neutralLayerFloatingRecipe.getValueFor(e).evaluate(e)),neutralLayer1Recipe=createNonCss("neutral-layer-1-recipe").withDefault({evaluate:e=>neutralLayer1$1(neutralPalette.getValueFor(e),baseLayerLuminance.getValueFor(e))}),neutralLayer1=create$6("neutral-layer-1").withDefault(e=>neutralLayer1Recipe.getValueFor(e).evaluate(e)),neutralLayer2Recipe=createNonCss("neutral-layer-2-recipe").withDefault({evaluate:e=>neutralLayer2(neutralPalette.getValueFor(e),baseLayerLuminance.getValueFor(e),neutralFillLayerRestDelta.getValueFor(e),neutralFillRestDelta.getValueFor(e),neutralFillHoverDelta.getValueFor(e),neutralFillActiveDelta.getValueFor(e))});create$6("neutral-layer-2").withDefault(e=>neutralLayer2Recipe.getValueFor(e).evaluate(e));const neutralLayer3Recipe=createNonCss("neutral-layer-3-recipe").withDefault({evaluate:e=>neutralLayer3(neutralPalette.getValueFor(e),baseLayerLuminance.getValueFor(e),neutralFillLayerRestDelta.getValueFor(e),neutralFillRestDelta.getValueFor(e),neutralFillHoverDelta.getValueFor(e),neutralFillActiveDelta.getValueFor(e))});create$6("neutral-layer-3").withDefault(e=>neutralLayer3Recipe.getValueFor(e).evaluate(e));const neutralLayer4Recipe=createNonCss("neutral-layer-4-recipe").withDefault({evaluate:e=>neutralLayer4(neutralPalette.getValueFor(e),baseLayerLuminance.getValueFor(e),neutralFillLayerRestDelta.getValueFor(e),neutralFillRestDelta.getValueFor(e),neutralFillHoverDelta.getValueFor(e),neutralFillActiveDelta.getValueFor(e))});create$6("neutral-layer-4").withDefault(e=>neutralLayer4Recipe.getValueFor(e).evaluate(e));const fillColor=create$6("fill-color").withDefault(e=>neutralLayer1.getValueFor(e));var ContrastTarget;!function(e){e[e.normal=4.5]="normal",e[e.large=7]="large"}(ContrastTarget||(ContrastTarget={}));const accentFillRecipe=create$6({name:"accent-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>accentFill(accentPalette.getValueFor(e),neutralPalette.getValueFor(e),t||fillColor.getValueFor(e),accentFillHoverDelta.getValueFor(e),accentFillActiveDelta.getValueFor(e),accentFillFocusDelta.getValueFor(e),neutralFillRestDelta.getValueFor(e),neutralFillHoverDelta.getValueFor(e),neutralFillActiveDelta.getValueFor(e))}),accentFillRest=create$6("accent-fill-rest").withDefault(e=>accentFillRecipe.getValueFor(e).evaluate(e).rest),accentFillHover=create$6("accent-fill-hover").withDefault(e=>accentFillRecipe.getValueFor(e).evaluate(e).hover),accentFillActive=create$6("accent-fill-active").withDefault(e=>accentFillRecipe.getValueFor(e).evaluate(e).active),accentFillFocus=create$6("accent-fill-focus").withDefault(e=>accentFillRecipe.getValueFor(e).evaluate(e).focus),foregroundOnAccentByContrast=e=>(t,r)=>foregroundOnAccent(r||accentFillRest.getValueFor(t),e),foregroundOnAccentRecipe=createNonCss("foreground-on-accent-recipe").withDefault({evaluate:(e,t)=>foregroundOnAccentByContrast(ContrastTarget.normal)(e,t)}),foregroundOnAccentRest=create$6("foreground-on-accent-rest").withDefault(e=>foregroundOnAccentRecipe.getValueFor(e).evaluate(e,accentFillRest.getValueFor(e))),foregroundOnAccentHover=create$6("foreground-on-accent-hover").withDefault(e=>foregroundOnAccentRecipe.getValueFor(e).evaluate(e,accentFillHover.getValueFor(e))),foregroundOnAccentActive=create$6("foreground-on-accent-active").withDefault(e=>foregroundOnAccentRecipe.getValueFor(e).evaluate(e,accentFillActive.getValueFor(e))),foregroundOnAccentFocus=create$6("foreground-on-accent-focus").withDefault(e=>foregroundOnAccentRecipe.getValueFor(e).evaluate(e,accentFillFocus.getValueFor(e))),foregroundOnAccentLargeRecipe=createNonCss("foreground-on-accent-large-recipe").withDefault({evaluate:(e,t)=>foregroundOnAccentByContrast(ContrastTarget.large)(e,t)});create$6("foreground-on-accent-rest-large").withDefault(e=>foregroundOnAccentLargeRecipe.getValueFor(e).evaluate(e,accentFillRest.getValueFor(e))),create$6("foreground-on-accent-hover-large").withDefault(e=>foregroundOnAccentLargeRecipe.getValueFor(e).evaluate(e,accentFillHover.getValueFor(e))),create$6("foreground-on-accent-active-large").withDefault(e=>foregroundOnAccentLargeRecipe.getValueFor(e).evaluate(e,accentFillActive.getValueFor(e))),create$6("foreground-on-accent-focus-large").withDefault(e=>foregroundOnAccentLargeRecipe.getValueFor(e).evaluate(e,accentFillFocus.getValueFor(e)));const accentForegroundByContrast=e=>(t,r)=>accentForeground(accentPalette.getValueFor(t),r||fillColor.getValueFor(t),e,accentForegroundRestDelta.getValueFor(t),accentForegroundHoverDelta.getValueFor(t),accentForegroundActiveDelta.getValueFor(t),accentForegroundFocusDelta.getValueFor(t)),accentForegroundRecipe=create$6({name:"accent-foreground-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>accentForegroundByContrast(ContrastTarget.normal)(e,t)}),accentForegroundRest=create$6("accent-foreground-rest").withDefault(e=>accentForegroundRecipe.getValueFor(e).evaluate(e).rest),accentForegroundHover=create$6("accent-foreground-hover").withDefault(e=>accentForegroundRecipe.getValueFor(e).evaluate(e).hover),accentForegroundActive=create$6("accent-foreground-active").withDefault(e=>accentForegroundRecipe.getValueFor(e).evaluate(e).active),accentForegroundFocus=create$6("accent-foreground-focus").withDefault(e=>accentForegroundRecipe.getValueFor(e).evaluate(e).focus),neutralFillRecipe=create$6({name:"neutral-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>neutralFill(neutralPalette.getValueFor(e),t||fillColor.getValueFor(e),neutralFillRestDelta.getValueFor(e),neutralFillHoverDelta.getValueFor(e),neutralFillActiveDelta.getValueFor(e),neutralFillFocusDelta.getValueFor(e))}),neutralFillRest=create$6("neutral-fill-rest").withDefault(e=>neutralFillRecipe.getValueFor(e).evaluate(e).rest),neutralFillHover=create$6("neutral-fill-hover").withDefault(e=>neutralFillRecipe.getValueFor(e).evaluate(e).hover),neutralFillActive=create$6("neutral-fill-active").withDefault(e=>neutralFillRecipe.getValueFor(e).evaluate(e).active);create$6("neutral-fill-focus").withDefault(e=>neutralFillRecipe.getValueFor(e).evaluate(e).focus);const neutralFillInputRecipe=create$6({name:"neutral-fill-input-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>neutralFillInput(neutralPalette.getValueFor(e),t||fillColor.getValueFor(e),neutralFillInputRestDelta.getValueFor(e),neutralFillInputHoverDelta.getValueFor(e),neutralFillInputActiveDelta.getValueFor(e),neutralFillInputFocusDelta.getValueFor(e))}),neutralFillInputRest=create$6("neutral-fill-input-rest").withDefault(e=>neutralFillInputRecipe.getValueFor(e).evaluate(e).rest),neutralFillInputHover=create$6("neutral-fill-input-hover").withDefault(e=>neutralFillInputRecipe.getValueFor(e).evaluate(e).hover),neutralFillInputActive=create$6("neutral-fill-input-active").withDefault(e=>neutralFillInputRecipe.getValueFor(e).evaluate(e).active);create$6("neutral-fill-input-focus").withDefault(e=>neutralFillInputRecipe.getValueFor(e).evaluate(e).focus);const neutralFillStealthRecipe=create$6({name:"neutral-fill-stealth-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>neutralFillStealth(neutralPalette.getValueFor(e),t||fillColor.getValueFor(e),neutralFillStealthRestDelta.getValueFor(e),neutralFillStealthHoverDelta.getValueFor(e),neutralFillStealthActiveDelta.getValueFor(e),neutralFillStealthFocusDelta.getValueFor(e),neutralFillRestDelta.getValueFor(e),neutralFillHoverDelta.getValueFor(e),neutralFillActiveDelta.getValueFor(e),neutralFillFocusDelta.getValueFor(e))}),neutralFillStealthRest=create$6("neutral-fill-stealth-rest").withDefault(e=>neutralFillStealthRecipe.getValueFor(e).evaluate(e).rest),neutralFillStealthHover=create$6("neutral-fill-stealth-hover").withDefault(e=>neutralFillStealthRecipe.getValueFor(e).evaluate(e).hover),neutralFillStealthActive=create$6("neutral-fill-stealth-active").withDefault(e=>neutralFillStealthRecipe.getValueFor(e).evaluate(e).active),neutralFillStealthFocus=create$6("neutral-fill-stealth-focus").withDefault(e=>neutralFillStealthRecipe.getValueFor(e).evaluate(e).focus),neutralFillStrongRecipe=create$6({name:"neutral-fill-strong-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>neutralFillContrast(neutralPalette.getValueFor(e),t||fillColor.getValueFor(e),neutralFillStrongRestDelta.getValueFor(e),neutralFillStrongHoverDelta.getValueFor(e),neutralFillStrongActiveDelta.getValueFor(e),neutralFillStrongFocusDelta.getValueFor(e))}),neutralFillStrongRest=create$6("neutral-fill-strong-rest").withDefault(e=>neutralFillStrongRecipe.getValueFor(e).evaluate(e).rest),neutralFillStrongHover=create$6("neutral-fill-strong-hover").withDefault(e=>neutralFillStrongRecipe.getValueFor(e).evaluate(e).hover),neutralFillStrongActive=create$6("neutral-fill-strong-active").withDefault(e=>neutralFillStrongRecipe.getValueFor(e).evaluate(e).active),neutralFillStrongFocus=create$6("neutral-fill-strong-focus").withDefault(e=>neutralFillStrongRecipe.getValueFor(e).evaluate(e).focus),neutralFillLayerRecipe=createNonCss("neutral-fill-layer-recipe").withDefault({evaluate:(e,t)=>neutralFillLayer(neutralPalette.getValueFor(e),t||fillColor.getValueFor(e),neutralFillLayerRestDelta.getValueFor(e))});create$6("neutral-fill-layer-rest").withDefault(e=>neutralFillLayerRecipe.getValueFor(e).evaluate(e));const focusStrokeOuterRecipe=createNonCss("focus-stroke-outer-recipe").withDefault({evaluate:e=>focusStrokeOuter$1(neutralPalette.getValueFor(e),fillColor.getValueFor(e))}),focusStrokeOuter=create$6("focus-stroke-outer").withDefault(e=>focusStrokeOuterRecipe.getValueFor(e).evaluate(e)),focusStrokeInnerRecipe=createNonCss("focus-stroke-inner-recipe").withDefault({evaluate:e=>focusStrokeInner$1(accentPalette.getValueFor(e),fillColor.getValueFor(e),focusStrokeOuter.getValueFor(e))}),focusStrokeInner=create$6("focus-stroke-inner").withDefault(e=>focusStrokeInnerRecipe.getValueFor(e).evaluate(e)),neutralForegroundHintRecipe=createNonCss("neutral-foreground-hint-recipe").withDefault({evaluate:e=>neutralForegroundHint$1(neutralPalette.getValueFor(e),fillColor.getValueFor(e))}),neutralForegroundHint=create$6("neutral-foreground-hint").withDefault(e=>neutralForegroundHintRecipe.getValueFor(e).evaluate(e)),neutralForegroundRecipe=createNonCss("neutral-foreground-recipe").withDefault({evaluate:e=>neutralForeground(neutralPalette.getValueFor(e),fillColor.getValueFor(e))}),neutralForegroundRest=create$6("neutral-foreground-rest").withDefault(e=>neutralForegroundRecipe.getValueFor(e).evaluate(e)),neutralStrokeRecipe=create$6({name:"neutral-stroke-recipe",cssCustomPropertyName:null}).withDefault({evaluate:e=>neutralStroke(neutralPalette.getValueFor(e),fillColor.getValueFor(e),neutralStrokeRestDelta.getValueFor(e),neutralStrokeHoverDelta.getValueFor(e),neutralStrokeActiveDelta.getValueFor(e),neutralStrokeFocusDelta.getValueFor(e))}),neutralStrokeRest=create$6("neutral-stroke-rest").withDefault(e=>neutralStrokeRecipe.getValueFor(e).evaluate(e).rest),neutralStrokeHover=create$6("neutral-stroke-hover").withDefault(e=>neutralStrokeRecipe.getValueFor(e).evaluate(e).hover),neutralStrokeActive=create$6("neutral-stroke-active").withDefault(e=>neutralStrokeRecipe.getValueFor(e).evaluate(e).active);create$6("neutral-stroke-focus").withDefault(e=>neutralStrokeRecipe.getValueFor(e).evaluate(e).focus);const neutralStrokeDividerRecipe=createNonCss("neutral-stroke-divider-recipe").withDefault({evaluate:(e,t)=>neutralStrokeDivider(neutralPalette.getValueFor(e),t||fillColor.getValueFor(e),neutralStrokeDividerRestDelta.getValueFor(e))}),neutralStrokeDividerRest=create$6("neutral-stroke-divider-rest").withDefault(e=>neutralStrokeDividerRecipe.getValueFor(e).evaluate(e)),heightNumberAsToken=DesignToken.create({name:"height-number",cssCustomPropertyName:null}).withDefault(e=>(baseHeightMultiplier.getValueFor(e)+density.getValueFor(e))*designUnit.getValueFor(e)),errorColor=create$6("error-color").withDefault(errorBase),errorPalette=createNonCss("error-palette").withDefault(e=>PaletteRGB.from(errorColor.getValueFor(e))),errorFillRecipe=create$6({name:"error-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>errorFillAlgorithm(errorPalette.getValueFor(e),neutralPalette.getValueFor(e),t||fillColor.getValueFor(e),accentFillHoverDelta.getValueFor(e),accentFillActiveDelta.getValueFor(e),accentFillFocusDelta.getValueFor(e),neutralFillRestDelta.getValueFor(e),neutralFillHoverDelta.getValueFor(e),neutralFillActiveDelta.getValueFor(e))}),errorFillRest=create$6("error-fill-rest").withDefault(e=>errorFillRecipe.getValueFor(e).evaluate(e).rest),errorFillHover=create$6("error-fill-hover").withDefault(e=>errorFillRecipe.getValueFor(e).evaluate(e).hover),errorFillActive=create$6("error-fill-active").withDefault(e=>errorFillRecipe.getValueFor(e).evaluate(e).active),errorFillFocus=create$6("error-fill-focus").withDefault(e=>errorFillRecipe.getValueFor(e).evaluate(e).focus),foregroundOnErrorByContrast=e=>(t,r)=>foregroundOnErrorAlgorithm(r||errorFillRest.getValueFor(t),e),foregroundOnErrorRecipe=create$6({name:"foreground-on-error-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>foregroundOnErrorByContrast(ContrastTarget.normal)(e,t)});create$6("foreground-on-error-rest").withDefault(e=>foregroundOnErrorRecipe.getValueFor(e).evaluate(e,errorFillRest.getValueFor(e))),create$6("foreground-on-error-hover").withDefault(e=>foregroundOnErrorRecipe.getValueFor(e).evaluate(e,errorFillHover.getValueFor(e))),create$6("foreground-on-error-active").withDefault(e=>foregroundOnErrorRecipe.getValueFor(e).evaluate(e,errorFillActive.getValueFor(e))),create$6("foreground-on-error-focus").withDefault(e=>foregroundOnErrorRecipe.getValueFor(e).evaluate(e,errorFillFocus.getValueFor(e)));const foregroundOnErrorLargeRecipe=create$6({name:"foreground-on-error-large-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>foregroundOnErrorByContrast(ContrastTarget.large)(e,t)});create$6("foreground-on-error-rest-large").withDefault(e=>foregroundOnErrorLargeRecipe.getValueFor(e).evaluate(e,errorFillRest.getValueFor(e))),create$6("foreground-on-error-hover-large").withDefault(e=>foregroundOnErrorLargeRecipe.getValueFor(e).evaluate(e,errorFillHover.getValueFor(e))),create$6("foreground-on-error-active-large").withDefault(e=>foregroundOnErrorLargeRecipe.getValueFor(e).evaluate(e,errorFillActive.getValueFor(e))),create$6("foreground-on-error-focus-large").withDefault(e=>foregroundOnErrorLargeRecipe.getValueFor(e).evaluate(e,errorFillFocus.getValueFor(e)));const errorForegroundByContrast=e=>(t,r)=>errorForegroundAlgorithm(errorPalette.getValueFor(t),r||fillColor.getValueFor(t),e,accentForegroundRestDelta.getValueFor(t),accentForegroundHoverDelta.getValueFor(t),accentForegroundActiveDelta.getValueFor(t),accentForegroundFocusDelta.getValueFor(t)),errorForegroundRecipe=create$6({name:"error-foreground-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(e,t)=>errorForegroundByContrast(ContrastTarget.normal)(e,t)});create$6("error-foreground-rest").withDefault(e=>errorForegroundRecipe.getValueFor(e).evaluate(e).rest),create$6("error-foreground-hover").withDefault(e=>errorForegroundRecipe.getValueFor(e).evaluate(e).hover);const errorForegroundActive=create$6("error-foreground-active").withDefault(e=>errorForegroundRecipe.getValueFor(e).evaluate(e).active);create$6("error-foreground-focus").withDefault(e=>errorForegroundRecipe.getValueFor(e).evaluate(e).focus);const THEME_NAME_BODY_ATTRIBUTE="data-jp-theme-name",THEME_MODE_BODY_ATTRIBUTE="data-jp-theme-light",BASE_LAYOUT_COLOR="--jp-layout-color1";let isThemeChangeInitialized=!1;function addJupyterLabThemeChangeListener(){isThemeChangeInitialized||(isThemeChangeInitialized=!0,initThemeChangeListener())}function initThemeChangeListener(){const e=()=>{new MutationObserver(()=>{applyJupyterTheme()}).observe(document.body,{attributes:!0,attributeFilter:[THEME_NAME_BODY_ATTRIBUTE],childList:!1,characterData:!1}),applyJupyterTheme()};"complete"===document.readyState?e():window.addEventListener("load",e)}const intConverter=e=>{const t=parseInt(e,10);return isNaN(t)?null:t},tokenMappings={"--jp-border-width":{converter:intConverter,token:strokeWidth},"--jp-border-radius":{converter:intConverter,token:controlCornerRadius},[BASE_LAYOUT_COLOR]:{converter:(e,t)=>{const r=parseColor(e);if(r){const e=rgbToHSL(r),t=hslToRGB(ColorHSL.fromObject({h:e.h,s:e.s,l:.5}));return SwatchRGB.create(t.r,t.g,t.b)}return null},token:neutralColor},"--jp-brand-color1":{converter:(e,t)=>{const r=parseColor(e);if(r){const e=rgbToHSL(r),s=t?1:-1,n=hslToRGB(ColorHSL.fromObject({h:e.h,s:e.s,l:e.l+s*accentFillHoverDelta.getValueFor(document.body)/94}));return SwatchRGB.create(n.r,n.g,n.b)}return null},token:accentColor},"--jp-error-color1":{converter:(e,t)=>{const r=parseColor(e);if(r){const e=rgbToHSL(r),s=t?1:-1,n=hslToRGB(ColorHSL.fromObject({h:e.h,s:e.s,l:e.l+s*accentFillHoverDelta.getValueFor(document.body)/94}));return SwatchRGB.create(n.r,n.g,n.b)}return null},token:errorColor},"--jp-ui-font-family":{token:bodyFont},"--jp-ui-font-size1":{token:typeRampBaseFontSize}};function applyJupyterTheme(){var e;const t=getComputedStyle(document.body),r=document.body.getAttribute(THEME_MODE_BODY_ATTRIBUTE);let s=!1;if(r)s="false"===r;else{const e=t.getPropertyValue(BASE_LAYOUT_COLOR).toString();if(e){const t=parseColor(e);t&&(s=isDark(SwatchRGB.create(t.r,t.g,t.b)),console.debug(`Theme is ${s?"dark":"light"} based on '${BASE_LAYOUT_COLOR}' value: ${e}.`))}}baseLayerLuminance.setValueFor(document.body,s?StandardLuminance.DarkMode:StandardLuminance.LightMode);for(const n in tokenMappings){const r=tokenMappings[n],i=t.getPropertyValue(n).toString();if(document.body&&""!==i){const t=(null!==(e=r.converter)&&void 0!==e?e:e=>e)(i.trim(),s);null!==t?r.token.setValueFor(document.body,t):console.error(`Fail to parse value '${i}' for '${n}' as FAST design token.`)}}}const heightNumber=cssPartial`(${baseHeightMultiplier} + ${density} + ${elementScale}) * ${designUnit}`,BaseButtonStyles=css`
  ${display("inline-flex")} :host {
    font-family: ${bodyFont};
    outline: none;
    font-size: ${typeRampBaseFontSize};
    line-height: ${typeRampBaseLineHeight};
    height: calc(${heightNumber} * 1px);
    min-width: calc(${heightNumber} * 1px);
    background-color: ${neutralFillRest};
    color: ${neutralForegroundRest};
    border-radius: calc(${controlCornerRadius} * 1px);
    fill: currentcolor;
    cursor: pointer;
    margin: calc((${focusStrokeWidth} + 2) * 1px);
  }

  .control {
    background: transparent;
    height: inherit;
    flex-grow: 1;
    box-sizing: border-box;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    padding: 0
      max(
        1px,
        calc((10 + (${designUnit} * 2 * (${density} + ${elementScale})))) * 1px
      );
    white-space: nowrap;
    outline: none;
    text-decoration: none;
    border: calc(${strokeWidth} * 1px) solid transparent;
    color: inherit;
    border-radius: inherit;
    fill: inherit;
    cursor: inherit;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
  }

  :host(:hover) {
    background-color: ${neutralFillHover};
  }

  :host(:active) {
    background-color: ${neutralFillActive};
  }

  :host([aria-pressed='true']) {
    box-shadow: inset 0px 0px 2px 2px ${neutralFillStrongActive};
  }

  :host([minimal]),
  :host([scale='xsmall']) {
    --element-scale: -4;
  }

  :host([scale='small']) {
    --element-scale: -2;
  }

  :host([scale='medium']) {
    --element-scale: 0;
  }

  :host([scale='large']) {
    --element-scale: 2;
  }

  :host([scale='xlarge']) {
    --element-scale: 4;
  }

  /* prettier-ignore */
  .control:${focusVisible} {
      outline: calc(${focusStrokeWidth} * 1px) solid ${neutralFillStrongFocus};
      outline-offset: 2px;
      -moz-outline-radius: 0px;
    }

  .control::-moz-focus-inner {
    border: 0;
  }

  .start,
  .end {
    display: flex;
  }

  .control.icon-only {
    padding: 0;
    line-height: 0;
  }

  ::slotted(svg) {
    ${""} width: 16px;
    height: 16px;
    pointer-events: none;
  }

  .start {
    margin-inline-end: 11px;
  }

  .end {
    margin-inline-start: 11px;
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host .control {
      background-color: ${SystemColors.ButtonFace};
      border-color: ${SystemColors.ButtonText};
      color: ${SystemColors.ButtonText};
      fill: currentColor;
    }

    :host(:hover) .control {
      forced-color-adjust: none;
      background-color: ${SystemColors.Highlight};
      color: ${SystemColors.HighlightText};
    }

    /* prettier-ignore */
    .control:${focusVisible} {
          forced-color-adjust: none;
          background-color: ${SystemColors.Highlight};
          outline-color: ${SystemColors.ButtonText};
          color: ${SystemColors.HighlightText};
        }

    .control:hover,
    :host([appearance='outline']) .control:hover {
      border-color: ${SystemColors.ButtonText};
    }

    :host([href]) .control {
      border-color: ${SystemColors.LinkText};
      color: ${SystemColors.LinkText};
    }

    :host([href]) .control:hover,
        :host([href]) .control:${focusVisible} {
      forced-color-adjust: none;
      background: ${SystemColors.ButtonFace};
      outline-color: ${SystemColors.LinkText};
      color: ${SystemColors.LinkText};
      fill: currentColor;
    }
  `)),AccentButtonStyles=css`
  :host([appearance='accent']) {
    background: ${accentFillRest};
    color: ${foregroundOnAccentRest};
  }

  :host([appearance='accent']:hover) {
    background: ${accentFillHover};
    color: ${foregroundOnAccentHover};
  }

  :host([appearance='accent'][aria-pressed='true']) {
    box-shadow: inset 0px 0px 2px 2px ${accentForegroundActive};
  }

  :host([appearance='accent']:active) .control:active {
    background: ${accentFillActive};
    color: ${foregroundOnAccentActive};
  }

  :host([appearance="accent"]) .control:${focusVisible} {
    outline-color: ${accentFillFocus};
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance='accent']) .control {
      forced-color-adjust: none;
      background: ${SystemColors.Highlight};
      color: ${SystemColors.HighlightText};
    }

    :host([appearance='accent']) .control:hover,
    :host([appearance='accent']:active) .control:active {
      background: ${SystemColors.HighlightText};
      border-color: ${SystemColors.Highlight};
      color: ${SystemColors.Highlight};
    }

    :host([appearance="accent"]) .control:${focusVisible} {
      outline-color: ${SystemColors.Highlight};
    }

    :host([appearance='accent'][href]) .control {
      background: ${SystemColors.LinkText};
      color: ${SystemColors.HighlightText};
    }

    :host([appearance='accent'][href]) .control:hover {
      background: ${SystemColors.ButtonFace};
      border-color: ${SystemColors.LinkText};
      box-shadow: none;
      color: ${SystemColors.LinkText};
      fill: currentColor;
    }

    :host([appearance="accent"][href]) .control:${focusVisible} {
      outline-color: ${SystemColors.HighlightText};
    }
  `)),ErrorButtonStyles=css`
  :host([appearance='error']) {
    background: ${errorFillRest};
    color: ${foregroundOnAccentRest};
  }

  :host([appearance='error']:hover) {
    background: ${errorFillHover};
    color: ${foregroundOnAccentHover};
  }

  :host([appearance='error'][aria-pressed='true']) {
    box-shadow: inset 0px 0px 2px 2px ${errorForegroundActive};
  }

  :host([appearance='error']:active) .control:active {
    background: ${errorFillActive};
    color: ${foregroundOnAccentActive};
  }

  :host([appearance="error"]) .control:${focusVisible} {
    outline-color: ${errorFillFocus};
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance='error']) .control {
      forced-color-adjust: none;
      background: ${SystemColors.Highlight};
      color: ${SystemColors.HighlightText};
    }

    :host([appearance='error']) .control:hover,
    :host([appearance='error']:active) .control:active {
      background: ${SystemColors.HighlightText};
      border-color: ${SystemColors.Highlight};
      color: ${SystemColors.Highlight};
    }

    :host([appearance="error"]) .control:${focusVisible} {
      outline-color: ${SystemColors.Highlight};
    }

    :host([appearance='error'][href]) .control {
      background: ${SystemColors.LinkText};
      color: ${SystemColors.HighlightText};
    }

    :host([appearance='error'][href]) .control:hover {
      background: ${SystemColors.ButtonFace};
      border-color: ${SystemColors.LinkText};
      box-shadow: none;
      color: ${SystemColors.LinkText};
      fill: currentColor;
    }

    :host([appearance="error"][href]) .control:${focusVisible} {
      outline-color: ${SystemColors.HighlightText};
    }
  `)),HypertextStyles=css`
  :host([appearance='hypertext']) {
    font-size: inherit;
    line-height: inherit;
    height: auto;
    min-width: 0;
    background: transparent;
  }

  :host([appearance='hypertext']) .control {
    display: inline;
    padding: 0;
    border: none;
    box-shadow: none;
    border-radius: 0;
    line-height: 1;
  }

  :host a.control:not(:link) {
    background-color: transparent;
    cursor: default;
  }
  :host([appearance='hypertext']) .control:link,
  :host([appearance='hypertext']) .control:visited {
    background: transparent;
    color: ${accentForegroundRest};
    border-bottom: calc(${strokeWidth} * 1px) solid ${accentForegroundRest};
  }

  :host([appearance='hypertext']:hover),
  :host([appearance='hypertext']) .control:hover {
    background: transparent;
    border-bottom-color: ${accentForegroundHover};
  }

  :host([appearance='hypertext']:active),
  :host([appearance='hypertext']) .control:active {
    background: transparent;
    border-bottom-color: ${accentForegroundActive};
  }

  :host([appearance="hypertext"]) .control:${focusVisible} {
    outline-color: transparent;
    border-bottom: calc(${focusStrokeWidth} * 1px) solid ${focusStrokeOuter};
    margin-bottom: calc(calc(${strokeWidth} - ${focusStrokeWidth}) * 1px);
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance='hypertext']:hover) {
      background-color: ${SystemColors.ButtonFace};
      color: ${SystemColors.ButtonText};
    }
    :host([appearance="hypertext"][href]) .control:hover,
        :host([appearance="hypertext"][href]) .control:active,
        :host([appearance="hypertext"][href]) .control:${focusVisible} {
      color: ${SystemColors.LinkText};
      border-bottom-color: ${SystemColors.LinkText};
      box-shadow: none;
    }
  `)),LightweightButtonStyles=css`
  :host([appearance='lightweight']) {
    background: transparent;
    color: ${accentForegroundRest};
  }

  :host([appearance='lightweight']) .control {
    padding: 0;
    height: initial;
    border: none;
    box-shadow: none;
    border-radius: 0;
  }

  :host([appearance='lightweight']:hover) {
    background: transparent;
    color: ${accentForegroundHover};
  }

  :host([appearance='lightweight']:active) {
    background: transparent;
    color: ${accentForegroundActive};
  }

  :host([appearance='lightweight']) .content {
    position: relative;
  }

  :host([appearance='lightweight']) .content::before {
    content: '';
    display: block;
    height: calc(${strokeWidth} * 1px);
    position: absolute;
    top: calc(1em + 4px);
    width: 100%;
  }

  :host([appearance='lightweight']:hover) .content::before {
    background: ${accentForegroundHover};
  }

  :host([appearance='lightweight']:active) .content::before {
    background: ${accentForegroundActive};
  }

  :host([appearance="lightweight"]) .control:${focusVisible} {
    outline-color: transparent;
  }

  :host([appearance="lightweight"]) .control:${focusVisible} .content::before {
    background: ${neutralForegroundRest};
    height: calc(${focusStrokeWidth} * 1px);
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance="lightweight"]) .control:hover,
        :host([appearance="lightweight"]) .control:${focusVisible} {
      forced-color-adjust: none;
      background: ${SystemColors.ButtonFace};
      color: ${SystemColors.Highlight};
    }
    :host([appearance="lightweight"]) .control:hover .content::before,
        :host([appearance="lightweight"]) .control:${focusVisible} .content::before {
      background: ${SystemColors.Highlight};
    }

    :host([appearance="lightweight"][href]) .control:hover,
        :host([appearance="lightweight"][href]) .control:${focusVisible} {
      background: ${SystemColors.ButtonFace};
      box-shadow: none;
      color: ${SystemColors.LinkText};
    }

    :host([appearance="lightweight"][href]) .control:hover .content::before,
        :host([appearance="lightweight"][href]) .control:${focusVisible} .content::before {
      background: ${SystemColors.LinkText};
    }
  `)),OutlineButtonStyles=css`
  :host([appearance='outline']) {
    background: transparent;
    border-color: ${accentFillRest};
  }

  :host([appearance='outline']:hover) {
    border-color: ${accentFillHover};
  }

  :host([appearance='outline']:active) {
    border-color: ${accentFillActive};
  }

  :host([appearance='outline']) .control {
    border-color: inherit;
  }

  :host([appearance="outline"]) .control:${focusVisible} {
    outline-color: ${accentFillFocus};
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance='outline']) .control {
      border-color: ${SystemColors.ButtonText};
    }
    :host([appearance="outline"]) .control:${focusVisible} {
      forced-color-adjust: none;
      background-color: ${SystemColors.Highlight};
      outline-color: ${SystemColors.ButtonText};
      color: ${SystemColors.HighlightText};
      fill: currentColor;
    }
    :host([appearance='outline'][href]) .control {
      background: ${SystemColors.ButtonFace};
      border-color: ${SystemColors.LinkText};
      color: ${SystemColors.LinkText};
      fill: currentColor;
    }
    :host([appearance="outline"][href]) .control:hover,
        :host([appearance="outline"][href]) .control:${focusVisible} {
      forced-color-adjust: none;
      outline-color: ${SystemColors.LinkText};
    }
  `)),StealthButtonStyles=css`
  :host([appearance='stealth']),
  :host([appearance='stealth'][disabled]:active),
  :host([appearance='stealth'][disabled]:hover) {
    background: transparent;
  }

  :host([appearance='stealth']:hover) {
    background: ${neutralFillStealthHover};
  }

  :host([appearance='stealth']:active) {
    background: ${neutralFillStealthActive};
  }

  :host([appearance='stealth']) .control:${focusVisible} {
    outline-color: ${accentFillFocus};
  }

  /* Make the focus outline displayed within the button if
     it is in a start or end slot; e.g. in a tree item
     This will make the focus outline bounded within the container.
   */
  :host([appearance='stealth'][slot="end"]) .control:${focusVisible},
  :host([appearance='stealth'][slot="start"]) .control:${focusVisible} {
    outline-offset: -2px;
  }
`.withBehaviors(forcedColorsStylesheetBehavior(css`
    :host([appearance='stealth']),
    :host([appearance='stealth']) .control {
      forced-color-adjust: none;
      background: ${SystemColors.ButtonFace};
      border-color: transparent;
      color: ${SystemColors.ButtonText};
      fill: currentColor;
    }

    :host([appearance='stealth']:hover) .control {
      background: ${SystemColors.Highlight};
      border-color: ${SystemColors.Highlight};
      color: ${SystemColors.HighlightText};
      fill: currentColor;
    }

    :host([appearance="stealth"]:${focusVisible}) .control {
      outline-color: ${SystemColors.Highlight};
      color: ${SystemColors.HighlightText};
      fill: currentColor;
    }

    :host([appearance='stealth'][href]) .control {
      color: ${SystemColors.LinkText};
    }

    :host([appearance="stealth"][href]:hover) .control,
        :host([appearance="stealth"][href]:${focusVisible}) .control {
      background: ${SystemColors.LinkText};
      border-color: ${SystemColors.LinkText};
      color: ${SystemColors.HighlightText};
      fill: currentColor;
    }

    :host([appearance="stealth"][href]:${focusVisible}) .control {
      forced-color-adjust: none;
      box-shadow: 0 0 0 1px ${SystemColors.LinkText};
    }
  `));function appearanceBehavior(e,t){return new PropertyStyleSheetBehavior("appearance",e,t)}const buttonStyles=(e,t)=>css`
    :host([disabled]),
    :host([disabled]:hover),
    :host([disabled]:active) {
      opacity: ${disabledOpacity};
      background-color: ${neutralFillRest};
      cursor: ${disabledCursor};
    }

    ${BaseButtonStyles}
  `.withBehaviors(forcedColorsStylesheetBehavior(css`
      :host([disabled]),
      :host([disabled]) .control,
      :host([disabled]:hover),
      :host([disabled]:active) {
        forced-color-adjust: none;
        background-color: ${SystemColors.ButtonFace};
        outline-color: ${SystemColors.GrayText};
        color: ${SystemColors.GrayText};
        cursor: ${disabledCursor};
        opacity: 1;
      }
    `),appearanceBehavior("accent",css`
        :host([appearance='accent'][disabled]),
        :host([appearance='accent'][disabled]:hover),
        :host([appearance='accent'][disabled]:active) {
          background: ${accentFillRest};
        }

        ${AccentButtonStyles}
      `.withBehaviors(forcedColorsStylesheetBehavior(css`
          :host([appearance='accent'][disabled]) .control,
          :host([appearance='accent'][disabled]) .control:hover {
            background: ${SystemColors.ButtonFace};
            border-color: ${SystemColors.GrayText};
            color: ${SystemColors.GrayText};
          }
        `))),appearanceBehavior("error",css`
        :host([appearance='error'][disabled]),
        :host([appearance='error'][disabled]:hover),
        :host([appearance='error'][disabled]:active) {
          background: ${errorFillRest};
        }

        ${ErrorButtonStyles}
      `.withBehaviors(forcedColorsStylesheetBehavior(css`
          :host([appearance='error'][disabled]) .control,
          :host([appearance='error'][disabled]) .control:hover {
            background: ${SystemColors.ButtonFace};
            border-color: ${SystemColors.GrayText};
            color: ${SystemColors.GrayText};
          }
        `))),appearanceBehavior("lightweight",css`
        :host([appearance='lightweight'][disabled]:hover),
        :host([appearance='lightweight'][disabled]:active) {
          background-color: transparent;
          color: ${accentForegroundRest};
        }

        :host([appearance='lightweight'][disabled]) .content::before,
        :host([appearance='lightweight'][disabled]:hover) .content::before,
        :host([appearance='lightweight'][disabled]:active) .content::before {
          background: transparent;
        }

        ${LightweightButtonStyles}
      `.withBehaviors(forcedColorsStylesheetBehavior(css`
          :host([appearance='lightweight'].disabled) .control {
            forced-color-adjust: none;
            color: ${SystemColors.GrayText};
          }

          :host([appearance='lightweight'].disabled)
            .control:hover
            .content::before {
            background: none;
          }
        `))),appearanceBehavior("outline",css`
        :host([appearance='outline'][disabled]),
        :host([appearance='outline'][disabled]:hover),
        :host([appearance='outline'][disabled]:active) {
          background: transparent;
          border-color: ${accentFillRest};
        }

        ${OutlineButtonStyles}
      `.withBehaviors(forcedColorsStylesheetBehavior(css`
          :host([appearance='outline'][disabled]) .control {
            border-color: ${SystemColors.GrayText};
          }
        `))),appearanceBehavior("stealth",css`
        ${StealthButtonStyles}
      `.withBehaviors(forcedColorsStylesheetBehavior(css`
          :host([appearance='stealth'][disabled]) {
            background: ${SystemColors.ButtonFace};
          }

          :host([appearance='stealth'][disabled]) .control {
            background: ${SystemColors.ButtonFace};
            border-color: transparent;
            color: ${SystemColors.GrayText};
          }
        `))));class JupyterButton extends Button$1{constructor(){super(...arguments),this.appearance="neutral"}defaultSlottedContentChanged(e,t){const r=this.defaultSlottedContent.filter(e=>e.nodeType===Node.ELEMENT_NODE);1===r.length&&(r[0]instanceof SVGElement||r[0].classList.contains("fa")||r[0].classList.contains("fas"))?this.control.classList.add("icon-only"):this.control.classList.remove("icon-only")}}__decorate([attr],JupyterButton.prototype,"appearance",void 0),__decorate([attr({attribute:"minimal",mode:"boolean"})],JupyterButton.prototype,"minimal",void 0),__decorate([attr],JupyterButton.prototype,"scale",void 0);const jpButton=JupyterButton.compose({baseName:"button",baseClass:Button$1,template:buttonTemplate,styles:buttonStyles,shadowOptions:{delegatesFocus:!0}}),toolbarStyles=(e,t)=>css`
    ${display("inline-flex")} :host {
      --toolbar-item-gap: calc(
        (var(--design-unit) + calc(var(--density) + 2)) * 1px
      );
      background-color: ${fillColor};
      border-radius: calc(${controlCornerRadius} * 1px);
      fill: currentcolor;
      padding: var(--toolbar-item-gap);
    }

    :host(${focusVisible}) {
      outline: calc(${strokeWidth} * 1px) solid ${accentFillFocus};
    }

    .positioning-region {
      align-items: flex-start;
      display: inline-flex;
      flex-flow: row wrap;
      justify-content: flex-start;
      width: 100%;
      height: 100%;
    }

    :host([orientation='vertical']) .positioning-region {
      flex-direction: column;
    }

    ::slotted(:not([slot])) {
      flex: 0 0 auto;
      margin: 0 var(--toolbar-item-gap);
    }

    :host([orientation='vertical']) ::slotted(:not([slot])) {
      margin: var(--toolbar-item-gap) 0;
    }

    .start,
    .end {
      display: flex;
      margin: auto;
      margin-inline: 0;
    }

    ::slotted(svg) {
      /* TODO: adaptive typography https://github.com/microsoft/fast/issues/2432 */
      width: 16px;
      height: 16px;
    }
  `.withBehaviors(forcedColorsStylesheetBehavior(css`
      :host(:${focusVisible}) {
        box-shadow: 0 0 0 calc(${focusStrokeWidth} * 1px)
          ${SystemColors.Highlight};
        color: ${SystemColors.ButtonText};
        forced-color-adjust: none;
      }
    `)),ToolbarArrowKeyMap=Object.freeze({[ArrowKeys.ArrowUp]:{[Orientation.vertical]:-1},[ArrowKeys.ArrowDown]:{[Orientation.vertical]:1},[ArrowKeys.ArrowLeft]:{[Orientation.horizontal]:{[Direction.ltr]:-1,[Direction.rtl]:1}},[ArrowKeys.ArrowRight]:{[Orientation.horizontal]:{[Direction.ltr]:1,[Direction.rtl]:-1}}});class FoundationToolbar extends FoundationElement{constructor(){super(...arguments),this._activeIndex=0,this.direction=Direction.ltr,this.orientation=Orientation.horizontal}get activeIndex(){return Observable$1.track(this,"activeIndex"),this._activeIndex}set activeIndex(e){this.$fastController.isConnected&&(this._activeIndex=limit(0,this.focusableElements.length-1,e),Observable$1.notify(this,"activeIndex"))}slottedItemsChanged(){this.$fastController.isConnected&&this.reduceFocusableElements()}mouseDownHandler(e){var t;const r=null===(t=this.focusableElements)||void 0===t?void 0:t.findIndex(t=>t.contains(e.target));return r>-1&&this.activeIndex!==r&&this.setFocusedElement(r),!0}childItemsChanged(e,t){this.$fastController.isConnected&&this.reduceFocusableElements()}connectedCallback(){super.connectedCallback(),this.direction=getDirection(this)}focusinHandler(e){const t=e.relatedTarget;t&&!this.contains(t)&&this.setFocusedElement()}getDirectionalIncrementer(e){var t,r,s,n,i;return null!==(i=null!==(s=null===(r=null===(t=ToolbarArrowKeyMap[e])||void 0===t?void 0:t[this.orientation])||void 0===r?void 0:r[this.direction])&&void 0!==s?s:null===(n=ToolbarArrowKeyMap[e])||void 0===n?void 0:n[this.orientation])&&void 0!==i?i:0}keydownHandler(e){const t=e.key;if(!(t in ArrowKeys)||e.defaultPrevented||e.shiftKey)return!0;const r=this.getDirectionalIncrementer(t);if(!r)return!e.target.closest("[role=radiogroup]");const s=this.activeIndex+r;return this.focusableElements[s]&&e.preventDefault(),this.setFocusedElement(s),!0}get allSlottedItems(){return[...this.start.assignedElements(),...this.slottedItems,...this.end.assignedElements()]}reduceFocusableElements(){var e;const t=null===(e=this.focusableElements)||void 0===e?void 0:e[this.activeIndex];this.focusableElements=this.allSlottedItems.reduce(FoundationToolbar.reduceFocusableItems,[]);const r=this.focusableElements.indexOf(t);this.activeIndex=Math.max(0,r),this.setFocusableElements()}setFocusedElement(e=this.activeIndex){this.activeIndex=e,this.setFocusableElements(),this.focusableElements[this.activeIndex]&&this.contains(document.activeElement)&&this.focusableElements[this.activeIndex].focus()}static reduceFocusableItems(e,t){var r,s,n,i;const o="radio"===t.getAttribute("role"),a=null===(s=null===(r=t.$fastController)||void 0===r?void 0:r.definition.shadowOptions)||void 0===s?void 0:s.delegatesFocus,l=Array.from(null!==(i=null===(n=t.shadowRoot)||void 0===n?void 0:n.querySelectorAll("*"))&&void 0!==i?i:[]).some(e=>isFocusable(e));return t.hasAttribute("disabled")||t.hasAttribute("hidden")||!(isFocusable(t)||o||a||l)?t.childElementCount?e.concat(Array.from(t.children).reduce(FoundationToolbar.reduceFocusableItems,[])):e:(e.push(t),e)}setFocusableElements(){this.$fastController.isConnected&&this.focusableElements.length>0&&this.focusableElements.forEach((e,t)=>{e.tabIndex=this.activeIndex===t?0:-1})}}__decorate([observable],FoundationToolbar.prototype,"direction",void 0),__decorate([attr],FoundationToolbar.prototype,"orientation",void 0),__decorate([observable],FoundationToolbar.prototype,"slottedItems",void 0),__decorate([observable],FoundationToolbar.prototype,"slottedLabel",void 0),__decorate([observable],FoundationToolbar.prototype,"childItems",void 0);class DelegatesARIAToolbar{}__decorate([attr({attribute:"aria-labelledby"})],DelegatesARIAToolbar.prototype,"ariaLabelledby",void 0),__decorate([attr({attribute:"aria-label"})],DelegatesARIAToolbar.prototype,"ariaLabel",void 0),applyMixins(DelegatesARIAToolbar,ARIAGlobalStatesAndProperties),applyMixins(FoundationToolbar,StartEnd,DelegatesARIAToolbar);class Toolbar extends FoundationToolbar{connectedCallback(){super.connectedCallback();const e=composedParent(this);e&&fillColor.setValueFor(this,t=>neutralFillLayerRecipe.getValueFor(t).evaluate(t,fillColor.getValueFor(e)))}}const jpToolbar=Toolbar.compose({baseName:"toolbar",baseClass:FoundationToolbar,template:toolbarTemplate,styles:toolbarStyles,shadowOptions:{delegatesFocus:!0}});function provideJupyterDesignSystem(e){return DesignSystem.getOrCreate(e).withPrefix("jp")}class ReactWidget extends Widget{constructor(){super(),this._rootDOM=null}static create(e){return new class extends ReactWidget{render(){return e}}}onUpdateRequest(e){this.renderPromise=this.renderDOM()}onAfterAttach(e){MessageLoop.sendMessage(this,Widget.Msg.UpdateRequest)}onBeforeDetach(e){null!==this._rootDOM&&(this._rootDOM.unmount(),this._rootDOM=null)}renderDOM(){return new Promise(e=>{const t=this.render();null===this._rootDOM&&(this._rootDOM=clientExports.createRoot(this.node)),Array.isArray(t)||t?(this._rootDOM.render(t),requestIdleCallback(()=>e())):(this._rootDOM.unmount(),this._rootDOM=null,requestIdleCallback(()=>e()))})}}class VDomRenderer extends ReactWidget{constructor(e){super(),this._modelChanged=new Signal(this),this.model=null!=e?e:null}get modelChanged(){return this._modelChanged}set model(e){this._model!==e&&(this._model&&this._model.stateChanged.disconnect(this.update,this),this._model=e,e&&e.stateChanged.connect(this.update,this),this.update(),this._modelChanged.emit(void 0))}get model(){return this._model}dispose(){this.isDisposed||(this._model=null,super.dispose())}}class UseSignal extends reactExports.Component{constructor(e){super(e),this.slot=(e,t)=>{this.props.shouldUpdate&&!this.props.shouldUpdate(e,t)||this.setState({value:[e,t]})},this.state={value:[this.props.initialSender,this.props.initialArgs]}}componentDidMount(){this.props.signal.connect(this.slot)}componentWillUnmount(){this.props.signal.disconnect(this.slot)}render(){return this.props.children(...this.state.value)}}class VDomModel{constructor(){this.stateChanged=new Signal(this),this._isDisposed=!1}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,Signal.clearData(this))}}provideJupyterDesignSystem().register([jpButton(),jpToolbar()]),addJupyterLabThemeChangeListener();const TOOLBAR_CLASS="jp-Toolbar",TOOLBAR_ITEM_CLASS="jp-Toolbar-item",TOOLBAR_OPENER_NAME="toolbar-popup-opener",TOOLBAR_SPACER_CLASS="jp-Toolbar-spacer";class ToolbarLayout extends PanelLayout{constructor(){super(...arguments),this._dirty=!1}onFitRequest(e){super.onFitRequest(e),this.parent.isAttached&&(some$1(this.widgets,e=>!e.isHidden)?(this.parent.node.style.minHeight="var(--jp-private-toolbar-height)",this.parent.removeClass("jp-Toolbar-micro")):(this.parent.node.style.minHeight="",this.parent.addClass("jp-Toolbar-micro"))),this._dirty=!0,this.parent.parent&&MessageLoop.sendMessage(this.parent.parent,Widget.Msg.FitRequest),this._dirty&&MessageLoop.sendMessage(this.parent,Widget.Msg.UpdateRequest)}onUpdateRequest(e){super.onUpdateRequest(e),this.parent.isVisible&&(this._dirty=!1)}onChildShown(e){super.onChildShown(e),this.parent.fit()}onChildHidden(e){super.onChildHidden(e),this.parent.fit()}onBeforeAttach(e){super.onBeforeAttach(e),this.parent.fit()}attachWidget(e,t){super.attachWidget(e,t),this.parent.fit()}detachWidget(e,t){super.detachWidget(e,t),this.parent.fit()}}let Toolbar$1=class extends Widget{constructor(e={}){var t,r;super({node:document.createElement("jp-toolbar")}),this.addClass(TOOLBAR_CLASS),this.layout=null!==(t=e.layout)&&void 0!==t?t:new ToolbarLayout,this.noFocusOnClick=null!==(r=e.noFocusOnClick)&&void 0!==r&&r}names(){return map$1(this.layout.widgets,e=>Private$b.nameProperty.get(e))}addItem(e,t){const r=this.layout;return this.insertItem(r.widgets.length,e,t)}insertItem(e,t,r){if(find$1(this.names(),e=>e===t))return!1;r.addClass(TOOLBAR_ITEM_CLASS);const s=this.layout,n=Math.max(0,Math.min(e,s.widgets.length));return s.insertWidget(n,r),Private$b.nameProperty.set(r,t),r.node.dataset.jpItemName=t,this.noFocusOnClick&&(r.node.dataset.noFocusOnClick="true"),!0}insertAfter(e,t,r){return this.insertRelative(e,1,t,r)}insertBefore(e,t,r){return this.insertRelative(e,0,t,r)}insertRelative(e,t,r,s){const n=find$1(map$1(this.names(),(e,t)=>({name:e,index:t})),t=>t.name===e);return!!n&&this.insertItem(n.index+t,r,s)}handleEvent(e){if("click"===e.type)this.handleClick(e)}handleClick(e){if(e.stopPropagation(),e.target instanceof HTMLLabelElement){const t=e.target.getAttribute("for");if(t&&this.node.querySelector(`#${t}`))return}this.node.contains(document.activeElement)||this.parent&&this.parent.activate()}onAfterAttach(e){this.node.addEventListener("click",this)}onBeforeDetach(e){this.node.removeEventListener("click",this)}};class ReactiveToolbar extends Toolbar$1{constructor(e={}){super(e),this.popupOpener=new ToolbarPopupOpener,this._widgetWidths=/* @__PURE__ */new Map,this._widgetPositions=/* @__PURE__ */new Map,this._zoomChanged=!0,this.insertItem(0,TOOLBAR_OPENER_NAME,this.popupOpener),this.popupOpener.hide(),this._resizer=new Throttler(async(e=!1)=>{await this._onResize(e)},500)}dispose(){this.isDisposed||(this._resizer&&this._resizer.dispose(),super.dispose())}insertAfter(e,t,r){return e!==TOOLBAR_OPENER_NAME&&super.insertAfter(e,t,r)}insertRelative(e,t,r,s){const n=this._widgetPositions.get(e),i=(null!=n?n:0)+t;return this.insertItem(i,r,s)}insertItem(e,t,r){var s;let n;if(r instanceof ToolbarPopupOpener)n=super.insertItem(e,t,r);else{const s=Math.max(0,Math.min(e,this.layout.widgets.length-1));n=super.insertItem(s,t,r),s!==e&&(e=Math.max(0,Math.min(e,this._widgetPositions.size)))}if(t!==TOOLBAR_OPENER_NAME&&this._widgetPositions.get(t)!==e){const r=null!==(s=this._widgetPositions.get(t))&&void 0!==s?s:this._widgetPositions.size;this._widgetPositions.forEach((t,s)=>{s!==TOOLBAR_OPENER_NAME&&(t>=e&&t<r?this._widgetPositions.set(s,t+1):t<=e&&t>r&&this._widgetPositions.set(s,t-1))}),this._widgetPositions.set(t,e),this.isVisible&&this._resizer.invoke()}return n}onAfterShow(e){this._resizer.invoke(!0)}onBeforeHide(e){this.popupOpener.hidePopup(),super.onBeforeHide(e)}onResize(e){super.onResize(e);const t=Math.round(window.outerWidth/window.innerWidth*100);t!==this._zoom&&(this._zoomChanged=!0,this._zoom=t),e.width>0&&this._resizer&&this._resizer.invoke()}async _onResize(e=!1){if(!this.parent||!this.parent.isAttached)return;const t=this.node.clientWidth,r=this.popupOpener;let s=r.isHidden?7:39;return this._getWidgetsToRemove(s,t,32).then(async s=>{var n,i;let{width:o,widgetsToRemove:a}=s;for(;a.length>0;){const e=a.pop(),t=Private$b.nameProperty.get(e);o-=this._widgetWidths.get(t)||0;const s=null!==(n=this._widgetPositions.get(t))&&void 0!==n?n:0;let l=this._widgetPositions.size;const c=r.widgetAt(0);if(c){const e=Private$b.nameProperty.get(c);l=null!==(i=this._widgetPositions.get(e))&&void 0!==i?i:l}const d=s-l;r.insertWidget(d,e)}if(r.widgetCount()>0){const e=[];let s=0;const n=r.widgetCount();for(;s<n;){let i=r.widgetAt(s);if(!i)break;if(o+=this._getWidgetWidth(i),n-e.length===1&&(o-=32),!(o<t))break;e.push(i),s++}for(;e.length>0;){const t=e.shift(),r=Private$b.nameProperty.get(t);this._widgetPositions.has(r)?this.insertItem(this._widgetPositions.get(r),r,t):this.addItem(r,t)}}r.widgetCount()>0?(r.updatePopup(),r.show()):r.hide(),e&&await this._onResize()}).catch(e=>{console.error("Error while computing the ReactiveToolbar",e)})}async _getWidgetsToRemove(e,t,r){var s;const n=this.popupOpener,i=[...this.layout.widgets],o=i.length-1,a=[];let l=0;for(;l<o;){const o=i[l],c=Private$b.nameProperty.get(o);let d;d=this._zoomChanged?await this._saveWidgetWidth(c,o):this._getWidgetWidth(o)||await this._saveWidgetWidth(c,o),e+=d,0===a.length&&n.isHidden&&e+r>t&&(e+=r),(e>t||(null!==(s=this._widgetPositions.get(c))&&void 0!==s?s:0)>l)&&a.push(o),l++}return this._zoomChanged=!1,{width:e,widgetsToRemove:a}}async _saveWidgetWidth(e,t){t instanceof ReactWidget&&await t.renderPromise;const r=t.hasClass(TOOLBAR_SPACER_CLASS)?2:t.node.clientWidth;return this._widgetWidths.set(e,r),r}_getWidgetWidth(e){const t=Private$b.nameProperty.get(e);return this._widgetWidths.get(t)||0}}function ToolbarButtonComponent(e){var t,r,s;const n=null!==(t=e.noFocusOnClick)&&void 0!==t&&t?void 0:t=>{var r;0===t.button&&(null===(r=e.onClick)||void 0===r||r.call(e),t.target.focus())},i=null!==(r=e.noFocusOnClick)&&void 0!==r&&r?t=>{var r;0===t.button&&(t.preventDefault(),null===(r=e.onClick)||void 0===r||r.call(e))}:void 0,o=!1===e.enabled&&e.disabledTooltip?e.disabledTooltip:e.pressed&&e.pressedTooltip?e.pressedTooltip:e.tooltip||e.iconLabel,a=!1===e.enabled;return reactExports.createElement(Button,{appearance:"stealth",className:e.className?e.className+" jp-ToolbarButtonComponent":"jp-ToolbarButtonComponent","aria-disabled":a,"aria-label":e.label||o,"aria-pressed":e.pressed,"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],...Private$b.normalizeDataset(e.dataset),disabled:a,onClick:n,onMouseDown:i,onKeyDown:t=>{var r;const{key:s}=t;"Enter"!==s&&" "!==s||null===(r=e.onClick)||void 0===r||r.call(e)},title:o},(e.icon||e.iconClass)&&reactExports.createElement(LabIcon.resolveReact,{icon:e.pressed&&null!==(s=e.pressedIcon)&&void 0!==s?s:e.icon,iconClass:classes(e.iconClass,"jp-Icon"),tag:null}),e.label&&reactExports.createElement("span",{className:"jp-ToolbarButtonComponent-label"},e.label))}function addToolbarButtonClass(e){return e.addClass("jp-ToolbarButton"),e}(Toolbar$1||(Toolbar$1={})).createSpacerItem=function(){return new Private$b.Spacer};class ToolbarButton extends ReactWidget{constructor(e={}){var t,r;super(),this.props=e,addToolbarButtonClass(this),this._enabled=null===(t=e.enabled)||void 0===t||t,this._pressed=this._enabled&&null!==(r=e.pressed)&&void 0!==r&&r,this._onClick=e.onClick}set pressed(e){this.enabled&&e!==this._pressed&&(this._pressed=e,this.update())}get pressed(){return this._pressed}set enabled(e){e!=this._enabled&&(this._enabled=e,this._enabled||(this._pressed=!1),this.update())}get enabled(){return this._enabled}set onClick(e){e!==this._onClick&&(this._onClick=e,this.update())}get onClick(){return this._onClick}render(){return reactExports.createElement(ToolbarButtonComponent,{...this.props,noFocusOnClick:this.props.noFocusOnClick,pressed:this.pressed,enabled:this.enabled,onClick:this.onClick})}}class ToolbarPopup extends Widget{constructor(){super({node:document.createElement("jp-toolbar")}),this.width=0,this.node.setAttribute("aria-label","Responsive popup toolbar"),this.addClass("jp-Toolbar"),this.addClass("jp-Toolbar-responsive-popup"),this.addClass("jp-ThemedContainer"),this.layout=new PanelLayout,Widget.attach(this,document.body),this.hide()}updateWidth(e){e>0&&(this.width=e,this.node.style.width=`${e}px`)}alignTo(e){const{height:t,width:r,x:s,y:n}=e.node.getBoundingClientRect(),i=this.width;this.node.style.left=s+r-i+1+"px",this.node.style.top=`${n+t+1}px`}insertWidget(e,t){this.layout.insertWidget(e,t)}widgetCount(){return this.layout.widgets.length}widgetAt(e){return this.layout.widgets[e]}}class ToolbarPopupOpener extends ToolbarButton{constructor(e={}){const t=(e.translator||nullTranslator).load("jupyterlab");super({icon:ellipsesIcon,onClick:()=>{this.handleClick()},tooltip:t.__("More commands")}),this.addClass("jp-Toolbar-responsive-opener"),this.popup=new ToolbarPopup}addWidget(e){this.popup.insertWidget(0,e)}insertWidget(e,t){this.popup.insertWidget(e,t)}dispose(){this.isDisposed||(this.popup.dispose(),super.dispose())}hide(){super.hide(),this.hidePopup()}hidePopup(){this.popup.hide()}updatePopup(){this.popup.updateWidth(this.parent.node.clientWidth),this.popup.alignTo(this.parent)}widgetAt(e){return this.popup.widgetAt(e)}widgetCount(){return this.popup.widgetCount()}handleClick(){this.updatePopup(),this.popup.setHidden(!this.popup.isHidden)}}var Private$b,Styling,Private$a;!function(e){e.normalizeDataset=function(e){if(!e)return;const t={};for(const[r,s]of Object.entries(e)){t[r.startsWith("data-")?r:`data-${r}`]=s}return t},e.propsFromCommand=function(e){var t,r;const{commands:s,id:n,args:i}=e,o=s.iconClass(n,i),a=s.iconLabel(n,i),l=null!==(t=e.icon)&&void 0!==t?t:s.icon(n,i),c=s.label(n,i);let d,h=s.className(n,i);s.isToggleable(n,i)&&(d=s.isToggled(n,i),d&&(h+=" lm-mod-toggled")),s.isVisible(n,i)||(h+=" lm-mod-hidden");const u="function"==typeof e.label?e.label(null!=i?i:{}):e.label;let p=s.caption(n,i)||u||c||a;const g=s.keyBindings.find(e=>e.command===n);if(g){p=`${p} (${g.keys.map(CommandRegistry.formatKeystroke).join(", ")})`}const m=s.isEnabled(n,i),f=e,{"aria-haspopup":v,"aria-expanded":_,"aria-controls":y}=f;return{className:h,dataset:{"data-command":e.id},noFocusOnClick:e.noFocusOnClick,icon:l,iconClass:o,tooltip:null!==(r=e.caption)&&void 0!==r?r:p,onClick:()=>{s.execute(n,i)},enabled:m,label:null!=u?u:c,pressed:d,"aria-haspopup":v,"aria-expanded":_,"aria-controls":y}},e.nameProperty=new AttachedProperty({name:"name",create:()=>""});e.Spacer=class extends Widget{constructor(){super(),this.addClass(TOOLBAR_SPACER_CLASS)}}}(Private$b||(Private$b={}));class Spinner extends Widget{constructor(){super(),this.addClass("jp-Spinner"),this.node.tabIndex=-1;const e=document.createElement("div");e.className="jp-SpinnerContent",this.node.appendChild(e)}onActivateRequest(e){this.node.focus()}}!function(e){function t(e,t,s=""){if(e.localName===t&&e.classList.add("jp-mod-styled"),"select"===e.localName){const t=e.hasAttribute("multiple");r(e,t)}const n=e.getElementsByTagName(t);for(let i=0;i<n.length;i++){const e=n[i];if(e.classList.add("jp-mod-styled"),s&&e.classList.add(s),"select"===t){const t=e.hasAttribute("multiple");r(e,t)}}}function r(e,t){const r=document.createElement("div");return r.classList.add("jp-select-wrapper"),e.addEventListener("focus",Private$a.onFocus),e.addEventListener("blur",Private$a.onFocus),e.classList.add("jp-mod-styled"),e.parentElement&&e.parentElement.replaceChild(r,e),r.appendChild(e),t?r.classList.add("multiple"):r.appendChild(caretDownEmptyIcon.element({tag:"span",stylesheet:"select",right:"8px",top:"5px",width:"18px"})),r}e.styleNode=function(e,r=""){t(e,"select",r),t(e,"textarea",r),t(e,"input",r),t(e,"button",r)},e.styleNodeByTag=t,e.wrapSelect=r}(Styling||(Styling={})),(Private$a||(Private$a={})).onFocus=function(e){const t=e.target.parentElement;t&&("focus"===e.type?t.classList.add("jp-mod-focused"):t.classList.remove("jp-mod-focused"))};const MAXIMUM_TIME_REMAINING$1=100;let passiveIfSupported=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){passiveIfSupported={passive:!0}}}))}catch(err){}class WindowedListModel{constructor(e={}){var t,r,s,n,i,o;this.scrollDownThreshold=1,this.scrollUpThreshold=0,this.paddingTop=0,this._estimatedWidgetSize=WindowedList.DEFAULT_WIDGET_SIZE,this._stateChanged=new Signal(this),this._currentWindow=[-1,-1,-1,-1],this._height=0,this._isDisposed=!1,this._itemsList=null,this._measuredAllUntilIndex=-1,this._overscanCount=1,this._scrollOffset=0,this._widgetCount=0,this._widgetSizers=[],this._windowingActive=!0,this._widgetCount=null!==(s=null!==(r=null===(t=e.itemsList)||void 0===t?void 0:t.length)&&void 0!==r?r:e.count)&&void 0!==s?s:0,this._overscanCount=null!==(n=e.overscanCount)&&void 0!==n?n:1,this._windowingActive=null===(i=e.windowingActive)||void 0===i||i,this.itemsList=null!==(o=e.itemsList)&&void 0!==o?o:null}get height(){return this._height}set height(e){this._height=e}get isDisposed(){return this._isDisposed}get itemsList(){return this._itemsList}set itemsList(e){var t,r,s;if(this._itemsList!==e){this._itemsList&&this._itemsList.changed.disconnect(this.onListChanged,this);const n=this._itemsList;this._itemsList=e,this._itemsList?this._itemsList.changed.connect(this.onListChanged,this):this._widgetCount=0,this._stateChanged.emit({name:"list",newValue:this._itemsList,oldValue:n}),this._stateChanged.emit({name:"count",newValue:null!==(r=null===(t=this._itemsList)||void 0===t?void 0:t.length)&&void 0!==r?r:0,oldValue:null!==(s=null==n?void 0:n.length)&&void 0!==s?s:0})}}get overscanCount(){return this._overscanCount}set overscanCount(e){if(e>=1){if(this._overscanCount!==e){const t=this._overscanCount;this._overscanCount=e,this._stateChanged.emit({name:"overscanCount",newValue:e,oldValue:t})}}else console.error(`Forbidden non-positive overscan count: got ${e}`)}get scrollOffset(){return this._scrollOffset}set scrollOffset(e){this._scrollOffset=e}get widgetCount(){return this._itemsList?this._itemsList.length:this._widgetCount}set widgetCount(e){if(this.itemsList)console.error("It is not allow to change the widgets count of a windowed list if a items list is used.");else if(e>=0){if(this._widgetCount!==e){const t=this._widgetCount;this._widgetCount=e,this._stateChanged.emit({name:"count",newValue:e,oldValue:t})}}else console.error(`Forbidden negative widget count: got ${e}`)}get windowingActive(){return this._windowingActive}set windowingActive(e){if(e!==this._windowingActive){const t=this._windowingActive;this._windowingActive=e,this._currentWindow=[-1,-1,-1,-1],this._measuredAllUntilIndex=-1,this._widgetSizers=[],this._stateChanged.emit({name:"windowingActive",newValue:e,oldValue:t})}}get stateChanged(){return this._stateChanged}dispose(){this.isDisposed||(this._isDisposed=!0,Signal.clearData(this))}getEstimatedTotalSize(){let e=0;if(this._measuredAllUntilIndex>=this.widgetCount&&(this._measuredAllUntilIndex=this.widgetCount-1),this._measuredAllUntilIndex>=0){const t=this._widgetSizers[this._measuredAllUntilIndex];e=t.offset+t.size}let t=0;for(let r=this._measuredAllUntilIndex+1;r<this.widgetCount;r++){const e=this._widgetSizers[r];t+=(null==e?void 0:e.measured)?e.size:this.estimateWidgetSize(r)}return e+t}getOffsetForIndexAndAlignment(e,t="auto",r=0,s,n){const i=Math.min(Math.max(0,r),1),o=this._height,a=s?s.itemMetadata:this._getItemMetadata(e),l=this.scrollDownThreshold<=1?a.size*this.scrollDownThreshold:this.scrollDownThreshold,c=this.scrollUpThreshold<=1?a.size*this.scrollUpThreshold:this.scrollUpThreshold,d=s?s.totalSize:this.getEstimatedTotalSize(),h=Math.max(0,Math.min(d-o,a.offset)),u=Math.max(0,a.offset-o+a.size),p=s?s.currentOffset:this._scrollOffset,g=this._windowingActive?this.paddingTop:0,m=a.offset,f=a.offset+a.size,v=p-g+o,_=p-g,y=v>m&&v<f,b=v>f&&_<m;if("smart"===t){if(b||y&&v-m>=l||_>m&&_<f&&_-m<c)return p;t=p>=u-o&&p<=h+o?"auto":a.size>o?"top-center":"center"}if("auto"===t){if(b)return p;t=void 0!==n?n:y||v<=f?"end":"start"}switch(t){case"start":return Math.max(0,h-i*o)+g;case"end":return u+i*o+g;case"center":return u+(h-u)/2;case"top-center":return h-o/2}}getRangeToRender(e){if(null==e?void 0:e.virtual)return this._computeVirtualRange();let t=[0,Math.max(this.widgetCount-1,-1),0,Math.max(this.widgetCount-1,-1)];const r=this._measuredAllUntilIndex;this.windowingActive&&(t=this._computeVirtualRange());const[s,n]=t;return r<=n||this._currentWindow[0]!==s||this._currentWindow[1]!==n?(this._currentWindow=t,t):null!=t?t:null}getSpan(e,t){const r=this._getItemMetadata(e),s=r.offset,n=this._getItemMetadata(t);return[s,n.offset-r.offset+n.size]}resetAfterIndex(e){const t=this._measuredAllUntilIndex;this._measuredAllUntilIndex=Math.min(e,this._measuredAllUntilIndex);for(const[r,s]of this._widgetSizers.entries()){if(0===r)continue;const e=this._widgetSizers[r-1];s.offset=e.offset+e.size}this._measuredAllUntilIndex!==t&&this._stateChanged.emit({name:"index",newValue:e,oldValue:t})}setWidgetSize(e){if(this._windowingActive||this._currentWindow[0]>=0){let t=1/0,r=-1,s=0,n=!0;const i=new Map(e.map(e=>[e.index,e.size])),o=Math.max(...i.keys()),a=[...this._widgetSizers.entries()];for(let e=this._widgetSizers.length;e<=o;e++)a.push([e,null]);for(let[e,l]of a){const o=i.get(e);let a=0;const c=!!l;if(!l){const t=this._widgetSizers[e-1],r={offset:t?t.offset+t.size:0,size:void 0!==o?o:this.estimateWidgetSize(e),measured:void 0!==o};this._widgetSizers[e]=r,l=r}void 0!==o&&(l.size!=o&&(a=o-l.size,l.size=o,t=Math.min(t,e)),l.measured=!0),n&&(l.measured?r=e:n=!1),c&&0!==s&&(l.offset+=s),s+=a}if(-1!==r&&(this._measuredAllUntilIndex=r),t!==1/0)return!0}return!1}onListChanged(e,t){switch(t.type){case"add":this._widgetSizers.splice(t.newIndex,0,...new Array(t.newValues.length).fill(void 0).map((e,t)=>({offset:0,size:this.estimateWidgetSize(t)}))),this.resetAfterIndex(t.newIndex-1);break;case"move":ArrayExt.move(this._widgetSizers,t.oldIndex,t.newIndex),this.resetAfterIndex(Math.min(t.newIndex,t.oldIndex)-1);break;case"remove":this._widgetSizers.splice(t.oldIndex,t.oldValues.length),this.resetAfterIndex(t.oldIndex-1);break;case"set":this.resetAfterIndex(t.newIndex-1);break;case"clear":this._widgetSizers.length=0,this.resetAfterIndex(-1)}}_getItemMetadata(e){var t;if(e>this._measuredAllUntilIndex){let r=0;if(this._measuredAllUntilIndex>=0){const e=this._widgetSizers[this._measuredAllUntilIndex];r=e.offset+e.size}for(let s=this._measuredAllUntilIndex+1;s<=e;s++){let e,n=!1;if(null===(t=this._widgetSizers[s])||void 0===t?void 0:t.measured)e=this._widgetSizers[s].size,n=!0;else{const t=this.widgetRenderer(s);(null==t?void 0:t.node)&&t.node.isConnected?(e=t.node.getBoundingClientRect().height,n=!0):(e=this.estimateWidgetSize(s),n=!1)}this._widgetSizers[s]={offset:r,size:e,measured:n},r+=e}for(let t=e+1;t<this._widgetSizers.length;t++){const e=this._widgetSizers[t],r=this._widgetSizers[t-1];e.offset=r.offset+r.size}}for(let r=0;r<=this._measuredAllUntilIndex;r++){const e=this._widgetSizers[r];if(0===r){if(0!==e.offset)throw new Error("First offset is not null")}else{const t=this._widgetSizers[r-1];if(e.offset!==t.offset+t.size)throw new Error(`Sizer ${r} has incorrect offset.`)}}return this._widgetSizers[e]}_findNearestItem(e){return(this._measuredAllUntilIndex>0?this._widgetSizers[this._measuredAllUntilIndex].offset:0)>=e?this._findNearestItemBinarySearch(this._measuredAllUntilIndex,0,e):this._findNearestItemExponentialSearch(Math.max(0,this._measuredAllUntilIndex),e)}_findNearestItemBinarySearch(e,t,r){for(;t<=e;){const s=t+Math.floor((e-t)/2),n=this._getItemMetadata(s).offset;if(n===r)return s;n<r?t=s+1:n>r&&(e=s-1)}return t>0?t-1:0}_findNearestItemExponentialSearch(e,t){let r=1;for(;e<this.widgetCount&&this._getItemMetadata(e).offset<t;)e+=r,r*=2;return this._findNearestItemBinarySearch(Math.min(e,this.widgetCount-1),Math.floor(e/2),t)}_computeVirtualRange(){const e=this.widgetCount;if(0===e)return[-1,-1,-1,-1];const t=this._getStartIndexForOffset(this._scrollOffset),r=this._getStopIndexForStartIndex(t,this._scrollOffset),s=Math.max(1,this.overscanCount),n=Math.max(1,this.overscanCount);return[Math.max(0,t-s),Math.max(0,Math.min(e-1,r+n)),t,r]}_getStartIndexForOffset(e){return this._findNearestItem(e)}_getStopIndexForStartIndex(e,t){const r=this._height,s=this._getItemMetadata(e),n=t+r;let i=s.offset+s.size,o=e;for(;o<this.widgetCount-1&&i<n;)o++,i+=this._getItemMetadata(o).size;return o}}class WindowedList extends Widget{constructor(e){var t,r;const s=null!==(t=e.renderer)&&void 0!==t?t:WindowedList.defaultRenderer,n=document.createElement("div");n.className="jp-WindowedPanel";const i=n.appendChild(document.createElement("div"));i.classList.add("jp-WindowedPanel-scrollbar");const o=i.appendChild(s.createScrollbarViewportIndicator?s.createScrollbarViewportIndicator():WindowedList.defaultRenderer.createScrollbarViewportIndicator());o.classList.add("jp-WindowedPanel-scrollbar-viewportIndicator");i.appendChild(s.createScrollbar()).classList.add("jp-WindowedPanel-scrollbar-content");const a=n.appendChild(s.createOuter());a.classList.add("jp-WindowedPanel-outer");const l=a.appendChild(document.createElement("div"));l.className="jp-WindowedPanel-inner";const c=l.appendChild(s.createViewport());c.classList.add("jp-WindowedPanel-viewport"),super({node:n}),this.jumped=new Signal(this),this._scrollbarItems={},this._viewportPaddingTop=0,this._viewportPaddingBottom=0,this._needsUpdate=!1,this._requiresTotalSizeUpdate=!1,this._timerToClearScrollStatus=null,super.layout=null!==(r=e.layout)&&void 0!==r?r:new WindowedLayout,this.renderer=s,this._viewportIndicator=o,this._innerElement=l,this._isScrolling=null,this._outerElement=a,this._itemsResizeObserver=null,this._scrollbarElement=i,this._scrollToItem=null,this._scrollRepaint=null,this._scrollUpdateWasRequested=!1,this._updater=new Throttler(()=>this.update(),50),this._viewModel=e.model,this._viewport=c,e.scrollbar&&n.classList.add("jp-mod-virtual-scrollbar"),this.viewModel.stateChanged.connect(this.onStateChanged,this)}get isParentHidden(){return this._isParentHidden}set isParentHidden(e){this._isParentHidden=e}get layout(){return super.layout}get outerNode(){return this._outerElement}get viewportNode(){return this._viewport}get scrollbar(){return this.node.classList.contains("jp-mod-virtual-scrollbar")}set scrollbar(e){e?this.node.classList.add("jp-mod-virtual-scrollbar"):this.node.classList.remove("jp-mod-virtual-scrollbar"),this._adjustDimensionsForScrollbar(),this.update()}get viewModel(){return this._viewModel}dispose(){this._updater.dispose(),super.dispose()}handleEvent(e){switch(e.type){case"pointerdown":this._evtPointerDown(e),e.stopPropagation();break;case"scrollend":this._onScrollEnd();break;case"scroll":this.onScroll(e)}}scrollTo(e){this._renderScrollbar(),this.viewModel.windowingActive?(e=Math.max(0,e))!==this.viewModel.scrollOffset&&(this.viewModel.scrollOffset=e,this._scrollUpdateWasRequested=!0,this.update()):this._outerElement.scrollTo({top:e})}scrollToItem(e,t="auto",r=.25,s){let n;if(this._isScrolling&&null!==this._scrollToItem&&this._scrollToItem[0]===e&&this._scrollToItem[1]===t||(this._isScrolling&&this._isScrolling.reject("Scrolling to a new item is requested."),this._isScrolling=new PromiseDelegate,this._isScrolling.promise.catch(console.debug)),this._scrollToItem=[e,t,r,s],this._resetScrollToItem(),!this.viewModel.windowingActive){const t=this._innerElement.querySelector(`[data-windowed-list-index="${e}"]`);if(!(t&&t instanceof HTMLElement))return console.debug(`Element with index ${e} not found`),Promise.resolve();n={totalSize:this._outerElement.scrollHeight,itemMetadata:{offset:t.offsetTop,size:t.clientHeight},currentOffset:this._outerElement.scrollTop}}return this.scrollTo(this.viewModel.getOffsetForIndexAndAlignment(Math.max(0,Math.min(e,this.viewModel.widgetCount-1)),t,r,n,s)),this._isScrolling.promise}onAfterAttach(e){super.onAfterAttach(e),this.viewModel.windowingActive?this._applyWindowingStyles():this._applyNoWindowingStyles(),this._addListeners(),this.viewModel.height=this.node.getBoundingClientRect().height;const t=window.getComputedStyle(this._viewport);this.viewModel.paddingTop=parseFloat(t.paddingTop),this._viewportPaddingTop=this.viewModel.paddingTop,this._viewportPaddingBottom=parseFloat(t.paddingBottom),this._scrollbarElement.addEventListener("pointerdown",this),this._outerElement.addEventListener("scrollend",this)}onBeforeDetach(e){this._removeListeners(),this._scrollbarElement.removeEventListener("pointerdown",this),this._outerElement.removeEventListener("scrollend",this),super.onBeforeDetach(e)}onScroll(e){const{clientHeight:t,scrollHeight:r,scrollTop:s}=e.currentTarget;if(!this._scrollUpdateWasRequested&&Math.abs(this.viewModel.scrollOffset-s)>1){const e=Math.max(0,Math.min(s,r-t));this.viewModel.scrollOffset=e,this._renderScrollbar(),this.viewModel.windowingActive&&(this._scrollUpdateWasRequested=!1,"true"!=this._viewport.dataset.isScrolling&&(this._viewport.dataset.isScrolling="true"),this._timerToClearScrollStatus&&window.clearTimeout(this._timerToClearScrollStatus),this._timerToClearScrollStatus=window.setTimeout(()=>{this._onScrollEnd()},750),this.update())}}onResize(e){const t=this.viewModel.height;this.viewModel.height=e.height>=0?e.height:this.node.getBoundingClientRect().height,this.viewModel.height!==t&&this._updater.invoke(),super.onResize(e),this._updater.invoke()}onStateChanged(e,t){switch(t.name){case"windowingActive":if(this._removeListeners(),this.viewModel.windowingActive)return this._applyWindowingStyles(),this.onScroll({currentTarget:this.node}),void this._addListeners();this._applyNoWindowingStyles(),this._addListeners();break;case"estimatedWidgetSize":return void this._updateTotalSize()}this.update()}onUpdateRequest(e){this.viewModel.windowingActive?null===this._scrollRepaint?(this._needsUpdate=!1,this._scrollRepaint=window.requestAnimationFrame(()=>{this._scrollRepaint=null,this._update(),this._needsUpdate&&this.update()})):this._needsUpdate=!0:this._update()}_adjustDimensionsForScrollbar(){const e=this._outerElement,t=this._scrollbarElement;if(this.scrollbar){let r=e.offsetWidth-e.clientWidth;0==r?(r=1e3,e.style.paddingRight=`${r}px`,e.style.boxSizing="border-box"):e.style.paddingRight="0",e.style.width=`calc(100% + ${r}px)`,this._innerElement.style.marginRight=`${t.offsetWidth}px`}else e.style.width="100%",this._innerElement.style.marginRight="",e.style.paddingRight="0",e.style.boxSizing=""}_addListeners(){this._scrollbarResizeObserver||(this._scrollbarResizeObserver=new ResizeObserver(this._adjustDimensionsForScrollbar.bind(this)),this._scrollbarResizeObserver.observe(this._outerElement),this._scrollbarResizeObserver.observe(this._scrollbarElement)),this._itemsResizeObserver||(this._itemsResizeObserver=new ResizeObserver(this._onItemResize.bind(this)));for(const e of this.layout.widgets)this._itemsResizeObserver.observe(e.node),e.disposed.connect(()=>{var t;return null===(t=this._itemsResizeObserver)||void 0===t?void 0:t.unobserve(e.node)});this._areaResizeObserver||(this._areaResizeObserver=new ResizeObserver(this._onAreaResize.bind(this)),this._areaResizeObserver.observe(this._innerElement)),this._outerElement.addEventListener("scroll",this,passiveIfSupported)}_applyNoWindowingStyles(){this._viewport.style.position="relative",this._viewport.style.contain="",this._viewport.style.top="0px",this._viewport.style.minHeight="",this._innerElement.style.height=""}_applyWindowingStyles(){this._viewport.style.position="absolute",this._viewport.style.contain="layout"}_removeListeners(){var e,t,r;this._outerElement.removeEventListener("scroll",this),null===(e=this._areaResizeObserver)||void 0===e||e.disconnect(),this._areaResizeObserver=null,null===(t=this._itemsResizeObserver)||void 0===t||t.disconnect(),this._itemsResizeObserver=null,null===(r=this._scrollbarResizeObserver)||void 0===r||r.disconnect(),this._scrollbarResizeObserver=null}_update(){var e;if(this.isDisposed||!this.layout)return;const t=this.viewModel.getRangeToRender();if(null!==t){const[r,s]=t;this._renderScrollbar();const n=[];if(s>=0)for(let e=r;e<=s;e++){const t=this.viewModel.widgetRenderer(e);t.dataset.windowedListIndex=`${e}`,n.push(t)}for(let t=this.layout.widgets.length-1;t>=0;t--)n.includes(this.layout.widgets[t])||(null===(e=this._itemsResizeObserver)||void 0===e||e.unobserve(this.layout.widgets[t].node),this.layout.removeWidget(this.layout.widgets[t]));for(let e=0;e<n.length;e++){const t=n[e];this._itemsResizeObserver&&!this.layout.widgets.includes(t)&&(this._itemsResizeObserver.observe(t.node),t.disposed.connect(()=>{var e;return null===(e=this._itemsResizeObserver)||void 0===e?void 0:e.unobserve(t.node)})),this.layout.insertWidget(e,t)}if(this.viewModel.windowingActive){if(s>=0){this._updateTotalSize();let[e,t]=this.viewModel.getSpan(r,s);this._viewport.style.transform=`translateY(${e}px)`}else this._innerElement.style.height="0px",this._viewport.style.top="0px",this._viewport.style.minHeight="0px";this._scrollUpdateWasRequested&&(this._outerElement.scrollTop=this.viewModel.scrollOffset,this._scrollUpdateWasRequested=!1)}}let r=-1;for(const s of this._viewport.children){const e=parseInt(s.dataset.windowedListIndex,10);if(e<r)throw new Error("Inconsistent dataset index");r=e}}_onAreaResize(e){this._scrollBackToItemOnResize()}_onItemResize(e){if(this._resetScrollToItem(),this.isHidden||this.isParentHidden)return;const t=[];for(let r of e)r.target.isConnected&&t.push({index:parseInt(r.target.dataset.windowedListIndex,10),size:r.borderBoxSize[0].blockSize});this.viewModel.setWidgetSize(t)&&(this._scrollBackToItemOnResize(),this.update())}_scrollBackToItemOnResize(){this._scrollToItem&&this.scrollToItem(...this._scrollToItem).catch(e=>{console.log(e)})}_resetScrollToItem(){this._resetScrollToItemTimeout&&clearTimeout(this._resetScrollToItemTimeout),this._scrollToItem&&(this._resetScrollToItemTimeout=window.setTimeout(()=>{this._scrollToItem=null,this._isScrolling&&(this._isScrolling.resolve(),this._isScrolling=null)},MAXIMUM_TIME_REMAINING$1))}_renderScrollbar(){var e,t;if(!this.scrollbar)return[];const{node:r,renderer:s,viewModel:n}=this,i=r.querySelector(".jp-WindowedPanel-scrollbar-content"),o=[],a=/* @__PURE__ */new Set,l=(e,t)=>{if(e instanceof HTMLElement)return e;a.add(e.key);const r={index:t},s=this._scrollbarItems[e.key];if(s&&!s.isDisposed)try{return s.render(r)}catch(n){return document.createElement("div")}else{this._scrollbarItems[e.key]=e;try{return e.render(r)}catch(i){return document.createElement("div")}}},c=n.itemsList,d=null!==(e=null==c?void 0:c.length)&&void 0!==e?e:n.widgetCount;for(let p=0;p<d;p++){const e=null===(t=null==c?void 0:c.get)||void 0===t?void 0:t.call(c,p),r=l(s.createScrollbarItem(this,p,e),p);r.classList.add("jp-WindowedPanel-scrollbar-item"),r.dataset.index=`${p}`,o.push(r)}const h=Object.keys(this._scrollbarItems).filter(e=>!a.has(e));for(const p of h)this._scrollbarItems[p].dispose(),delete this._scrollbarItems[p];const u=[...i.childNodes];if(u.length===o.length&&u.every((e,t)=>o[t]===e)||i.replaceChildren(...o),this.scrollbar){const e=this.viewModel.getRangeToRender({virtual:!0});if(null!==e){const[t,r]=e,s=o[t],n=o[r];this._viewportIndicator.style.top=s.offsetTop-1+"px",this._viewportIndicator.style.height=n.offsetTop-s.offsetTop+n.offsetHeight+"px"}}return o}_evtPointerDown(e){let t=e.target;for(;t&&t.parentElement;){if(t.hasAttribute("data-index")){const e=parseInt(t.getAttribute("data-index"),10);return void(async()=>{await this.scrollToItem(e),this.jumped.emit(e)})()}t=t.parentElement}}_onScrollEnd(){this._timerToClearScrollStatus&&window.clearTimeout(this._timerToClearScrollStatus),this._viewport.dataset.isScrolling="false",this._requiresTotalSizeUpdate&&this._updateTotalSize(),this._requiresTotalSizeUpdate=!1}_updateTotalSize(){if(this.viewModel.windowingActive){if("true"==this._viewport.dataset.isScrolling)return void(this._requiresTotalSizeUpdate=!0);const e=this.viewModel.getEstimatedTotalSize()+this._viewportPaddingTop+this._viewportPaddingBottom;this._innerElement.style.height=`${e}px`}}}WindowedList.DEFAULT_WIDGET_SIZE=50;class WindowedLayout extends PanelLayout{constructor(){super({fitPolicy:"set-no-constraint"})}get parent(){return super.parent}set parent(e){super.parent=e}attachWidget(e,t){let r=this.parent.viewportNode.children[e];this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeAttach),this.parent.viewportNode.insertBefore(t.node,r),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterAttach)}detachWidget(e,t){this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeDetach),this.parent.viewportNode.removeChild(t.node),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterDetach)}moveWidget(e,t,r){let s=this.parent.viewportNode.children[t];e<t?s.insertAdjacentElement("afterend",r.node):s.insertAdjacentElement("beforebegin",r.node)}onUpdateRequest(e){}}!function(e){class t{createOuter(){return document.createElement("div")}createScrollbar(){return document.createElement("ol")}createScrollbarViewportIndicator(){return document.createElement("div")}createScrollbarItem(e,t){const r=document.createElement("li");return r.appendChild(document.createTextNode(`${t}`)),r}createViewport(){return document.createElement("div")}}e.Renderer=t,e.defaultRenderer=new t}(WindowedList||(WindowedList={}));class WidgetTracker{constructor(e){this._currentChanged=new Signal(this),this._deferred=null,this._isDisposed=!1,this._widgetAdded=new Signal(this),this._widgetUpdated=new Signal(this);const t=this._focusTracker=new FocusTracker,r=this._pool=new libExports$1.RestorablePool(e);this.namespace=e.namespace,t.currentChanged.connect((e,t)=>{t.newValue!==this.currentWidget&&(r.current=t.newValue)},this),r.added.connect((e,t)=>{this._widgetAdded.emit(t)},this),r.currentChanged.connect((e,s)=>{null===s&&t.currentWidget?r.current=t.currentWidget:(this.onCurrentChanged(s),this._currentChanged.emit(s))},this),r.updated.connect((e,t)=>{this._widgetUpdated.emit(t)},this)}get currentChanged(){return this._currentChanged}get currentWidget(){return this._pool.current||null}get restored(){return this._deferred?Promise.resolve():this._pool.restored}get size(){return this._pool.size}get widgetAdded(){return this._widgetAdded}get widgetUpdated(){return this._widgetUpdated}async add(e){this._focusTracker.add(e),await this._pool.add(e),this._focusTracker.activeWidget||(this._pool.current=e)}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this._pool.dispose(),this._focusTracker.dispose(),Signal.clearData(this))}find(e){return this._pool.find(e)}forEach(e){return this._pool.forEach(e)}filter(e){return this._pool.filter(e)}inject(e){return this._pool.inject(e)}has(e){return this._pool.has(e)}async restore(e){const t=this._deferred;return t?(this._deferred=null,this._pool.restore(t)):e?this._pool.restore(e):void console.warn("No options provided to restore the tracker.")}defer(e){this._deferred=e}async save(e){return this._pool.save(e)}onCurrentChanged(e){}}function showDialog(e={}){return new Dialog(e).launch()}function showErrorMessage(e,t,r){const s=Dialog.translator.load("jupyterlab");r=null!=r?r:[Dialog.cancelButton({label:s.__("Close")})],console.warn("Showing error:",t);const n="string"==typeof t?t:t.message,i=e+"----"+n,o=Private$9.errorMessagePromiseCache.get(i);if(o)return o;{const t=showDialog({title:e,body:n,buttons:r}).then(()=>{Private$9.errorMessagePromiseCache.delete(i)},e=>{throw Private$9.errorMessagePromiseCache.delete(i),e});return Private$9.errorMessagePromiseCache.set(i,t),t}}class Dialog extends Widget{constructor(e={}){const t=document.createElement("dialog");t.ariaModal="true",super({node:t}),this._hasValidationErrors=!1,this._ready=new PromiseDelegate,this._focusNodeSelector="",this.addClass("jp-Dialog"),this.addClass("jp-ThemedContainer");const r=Private$9.handleOptions(e),s=r.renderer;if(this._host=r.host,this._defaultButton=r.defaultButton,this._buttons=r.buttons,this._hasClose=r.hasClose,this._buttonNodes=this._buttons.map(e=>s.createButtonNode(e)),this._checkboxNode=null,this._lastMouseDownInDialog=!1,r.checkbox){const{label:e="",caption:t="",checked:n=!1,className:i=""}=r.checkbox;this._checkboxNode=s.createCheckboxNode({label:e,caption:null!=t?t:e,checked:n,className:i})}const n=this.layout=new PanelLayout,i=new Panel;i.addClass("jp-Dialog-content"),"string"==typeof e.body&&(i.addClass("jp-Dialog-content-small"),t.ariaLabel=[r.title,e.body].join(" ")),n.addWidget(i),this._body=r.body;const o=s.createHeader(r.title,()=>this.reject(),e),a=s.createBody(r.body),l=s.createFooter(this._buttonNodes,this._checkboxNode);i.addWidget(o),i.addWidget(a),i.addWidget(l),this._bodyWidget=a,this._primary=this._buttonNodes[this._defaultButton],this._focusNodeSelector=e.focusNodeSelector,Dialog.tracker.add(this)}get ready(){return this._ready.promise}dispose(){const e=this._promise;e&&(this._promise=null,e.reject(void 0),ArrayExt.removeFirstOf(Private$9.launchQueue,e.promise)),super.dispose()}launch(){if(this._promise)return this._promise.promise;const e=this._promise=new PromiseDelegate,t=Promise.all(Private$9.launchQueue);return Private$9.launchQueue.push(this._promise.promise),t.then(()=>this._promise?(Widget.attach(this,this._host),e.promise):Promise.resolve({button:Dialog.cancelButton(),isChecked:null,value:null}))}resolve(e){this._promise&&(void 0===e&&(e=this._defaultButton),this._resolve(this._buttons[e]))}reject(){this._promise&&this._resolve(Dialog.cancelButton())}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"mousedown":this._evtMouseDown(e);break;case"click":this._evtClick(e);break;case"input":this._evtInput(e);break;case"focus":this._evtFocus(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation()}}onAfterAttach(e){const t=this.node;t.addEventListener("keydown",this,!0),t.addEventListener("contextmenu",this,!0),t.addEventListener("click",this,!0),document.addEventListener("mousedown",this,!0),document.addEventListener("focus",this,!0),document.addEventListener("input",this,!0),this._first=Private$9.findFirstFocusable(this.node),this._original=document.activeElement;const r=()=>{var e;if(this._focusNodeSelector){const e=this.node.querySelector(".jp-Dialog-body"),t=null==e?void 0:e.querySelector(this._focusNodeSelector);t&&(this._primary=t)}null===(e=this._primary)||void 0===e||e.focus(),this._ready.resolve()};this._bodyWidget instanceof ReactWidget&&void 0!==this._bodyWidget.renderPromise?this._bodyWidget.renderPromise.then(()=>{r()}).catch(()=>{console.error("Error while loading Dialog's body")}):r()}onAfterDetach(e){const t=this.node;t.removeEventListener("keydown",this,!0),t.removeEventListener("contextmenu",this,!0),t.removeEventListener("click",this,!0),document.removeEventListener("focus",this,!0),document.removeEventListener("mousedown",this,!0),document.removeEventListener("input",this,!0),this._original.focus()}onCloseRequest(e){this._promise&&this.reject(),super.onCloseRequest(e)}_evtInput(e){this._hasValidationErrors=!!this.node.querySelector(":invalid");for(let t=0;t<this._buttons.length;t++)this._buttons[t].accept&&(this._buttonNodes[t].disabled=this._hasValidationErrors)}_evtClick(e){if(!this.node.getElementsByClassName("jp-Dialog-content")[0].contains(e.target))return e.stopPropagation(),e.preventDefault(),void(this._hasClose&&!this._lastMouseDownInDialog&&this.reject());for(const t of this._buttonNodes)if(t.contains(e.target)){const e=this._buttonNodes.indexOf(t);this.resolve(e)}}_evtKeydown(e){switch(e.keyCode){case 27:e.stopPropagation(),e.preventDefault(),this._hasClose&&this.reject();break;case 37:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let r=this._buttonNodes.indexOf(t)-1;r<0&&(r=this._buttonNodes.length-1);const s=this._buttonNodes[r];e.stopPropagation(),e.preventDefault(),s.focus()}break}case 39:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let r=this._buttonNodes.indexOf(t)+1;r==this._buttons.length&&(r=0);const s=this._buttonNodes[r];e.stopPropagation(),e.preventDefault(),s.focus()}break}case 9:{const t=this._buttonNodes[this._buttons.length-1];document.activeElement!==t||e.shiftKey||(e.stopPropagation(),e.preventDefault(),this._first.focus());break}case 13:{e.stopPropagation(),e.preventDefault();const t=document.activeElement;if(t instanceof HTMLButtonElement){const e=this._buttonNodes.indexOf(t);-1!==e&&this.resolve(e)}else if(!(t instanceof HTMLTextAreaElement)){const e=this._defaultButton;this.resolve(e)}break}}}_evtFocus(e){var t;const r=e.target;this.node.contains(r)||(e.stopPropagation(),null===(t=this._buttonNodes[this._defaultButton])||void 0===t||t.focus())}_evtMouseDown(e){const t=this.node.getElementsByClassName("jp-Dialog-content")[0],r=e.target;this._lastMouseDownInDialog=t.contains(r)}_resolve(e){var t,r,s;if(this._hasValidationErrors&&e.accept)return;const n=this._promise;if(!n)return void this.dispose();this._promise=null,ArrayExt.removeFirstOf(Private$9.launchQueue,n.promise);const i=this._body;let o=null;e.accept&&i instanceof Widget&&"function"==typeof i.getValue&&(o=i.getValue()),this.dispose(),n.resolve({button:e,isChecked:null!==(s=null===(r=null===(t=this._checkboxNode)||void 0===t?void 0:t.querySelector("input"))||void 0===r?void 0:r.checked)&&void 0!==s?s:null,value:o})}}var Private$9,Private$8,Clipboard,SystemClipboard,Private$7,DOMUtils,DOMUtils2,Printing;function setToolbar(e,t,r){var s;if(!e.toolbar&&!r)return void console.log(`Widget ${e.id} has no 'toolbar' and no explicit toolbar was provided.`);const n=null!==(s=e.toolbar)&&void 0!==s?s:r,i=t(e);if(Array.isArray(i))i.forEach(({name:e,widget:t})=>{n.addItem(e,t)});else{const t=(e,t)=>{switch(t.type){case"add":t.newValues.forEach((e,r)=>{n.insertItem(t.newIndex+r,e.name,e.widget)});break;case"move":t.oldValues.forEach(e=>{e.widget.parent=null}),t.newValues.forEach((e,r)=>{n.insertItem(t.newIndex+r,e.name,e.widget)});break;case"remove":t.oldValues.forEach(e=>{e.widget.parent=null});break;case"set":t.oldValues.forEach(e=>{e.widget.parent=null}),t.newValues.forEach((e,r)=>{const s=findIndex(n.names(),t=>e.name===t);s>=0&&(Array.from(n.children())[s].parent=null),n.insertItem(t.newIndex+r,e.name,e.widget)});break;case"clear":Array.from(n.children()).forEach(e=>{e.parent=null})}};t(i,{newIndex:0,newValues:Array.from(i),oldValues:[],type:"add"}),i.changed.connect(t),e.disposed.connect(()=>{i.changed.disconnect(t)})}}!function(e){function t(t){t.accept=!1!==t.accept;const r=e.translator.load("jupyterlab"),s=t.accept?r.__("Ok"):r.__("Cancel");return{ariaLabel:t.ariaLabel||t.label||s,label:t.label||s,iconClass:t.iconClass||"",iconLabel:t.iconLabel||"",caption:t.caption||"",className:t.className||"",accept:t.accept,actions:t.actions||[],displayType:t.displayType||"default"}}e.translator=nullTranslator,e.createButton=t,e.cancelButton=function(e={}){return e.accept=!1,t(e)},e.okButton=function(e={}){return e.accept=!0,t(e)},e.warnButton=function(e={}){return e.displayType="warn",t(e)},e.flush=function(){e.tracker.forEach(e=>{e.dispose()})};class r{createHeader(t,r=()=>{},s={}){let n;const i=e=>{0===e.button&&(e.preventDefault(),r())},o=e=>{const{key:t}=e;"Enter"!==t&&" "!==t||r()};if("string"==typeof t){const r=e.translator.load("jupyterlab");n=ReactWidget.create(reactExports.createElement(reactExports.Fragment,null,t,s.hasClose&&reactExports.createElement(Button$2,{className:"jp-Dialog-close-button",onMouseDown:i,onKeyDown:o,title:r.__("Cancel"),minimal:!0},reactExports.createElement(LabIcon.resolveReact,{icon:closeIcon,tag:"span"}))))}else n=ReactWidget.create(t);return n.addClass("jp-Dialog-header"),Styling.styleNode(n.node),n}createBody(e){const t=e=>{void 0!==e.renderPromise?e.renderPromise.then(()=>{Styling.styleNode(e.node)}).catch(()=>{console.error("Error while loading Dialog's body")}):Styling.styleNode(e.node)};let r;return"string"==typeof e?(r=new Widget({node:document.createElement("span")}),r.node.textContent=e):e instanceof Widget?(r=e,r instanceof ReactWidget?t(r):Styling.styleNode(r.node)):(r=ReactWidget.create(e),MessageLoop.sendMessage(r,Widget.Msg.UpdateRequest),t(r)),r.addClass("jp-Dialog-body"),r}createFooter(e,t){const r=new Widget;r.addClass("jp-Dialog-footer"),t&&(r.node.appendChild(t),r.node.insertAdjacentHTML("beforeend",'<div class="jp-Dialog-spacer"></div>'));const s=document.createElement("div");s.classList.add("jp-Dialog-footerButtons");for(const n of e)s.appendChild(n);return r.node.appendChild(s),Styling.styleNode(r.node),r}createButtonNode(e){const t=document.createElement("button");return t.className=this.createItemClass(e),t.appendChild(this.renderIcon(e)),t.appendChild(this.renderLabel(e)),t}createCheckboxNode(e){const t=document.createElement("label");t.className="jp-Dialog-checkbox",e.className&&t.classList.add(e.className),t.title=e.caption,t.textContent=e.label;const r=document.createElement("input");return r.type="checkbox",r.checked=!!e.checked,t.insertAdjacentElement("afterbegin",r),t}createItemClass(e){let t="jp-Dialog-button";e.accept?t+=" jp-mod-accept":t+=" jp-mod-reject","warn"===e.displayType&&(t+=" jp-mod-warn");const r=e.className;return r&&(t+=` ${r}`),t}renderIcon(e){const t=document.createElement("div");return t.className=this.createIconClass(e),t.appendChild(document.createTextNode(e.iconLabel)),t}createIconClass(e){const t="jp-Dialog-buttonIcon",r=e.iconClass;return r?`${t} ${r}`:t}renderLabel(e){const t=document.createElement("div");return t.className="jp-Dialog-buttonLabel",t.title=e.caption,t.ariaLabel=e.ariaLabel,t.appendChild(document.createTextNode(e.label)),t}}e.Renderer=r,e.defaultRenderer=new r,e.tracker=new WidgetTracker({namespace:"@jupyterlab/apputils:Dialog"})}(Dialog||(Dialog={})),function(e){e.launchQueue=[],e.errorMessagePromiseCache=/* @__PURE__ */new Map,e.handleOptions=function(e={}){var t,r,s,n,i,o,a,l,c;const d=null!==(t=e.buttons)&&void 0!==t?t:[Dialog.cancelButton(),Dialog.okButton()];return{title:null!==(r=e.title)&&void 0!==r?r:"",body:null!==(s=e.body)&&void 0!==s?s:"",host:null!==(n=e.host)&&void 0!==n?n:document.body,checkbox:null!==(i=e.checkbox)&&void 0!==i?i:null,buttons:d,defaultButton:null!==(o=e.defaultButton)&&void 0!==o?o:d.length-1,renderer:null!==(a=e.renderer)&&void 0!==a?a:Dialog.defaultRenderer,focusNodeSelector:null!==(l=e.focusNodeSelector)&&void 0!==l?l:"",hasClose:null===(c=e.hasClose)||void 0===c||c}},e.findFirstFocusable=function(e){const t=["input","select","a[href]","textarea","button","[tabindex]"].join(",");return e.querySelectorAll(t)[0]}}(Private$9||(Private$9={}));class SessionContext{constructor(e){var t,r,s,n;this._path="",this._name="",this._type="",this._prevKernelName="",this._isDisposed=!1,this._disposed=new Signal(this),this._session=null,this._ready=new PromiseDelegate,this._initializing=!1,this._initStarted=new PromiseDelegate,this._initPromise=new PromiseDelegate,this._isReady=!1,this._isTerminating=!1,this._isRestarting=!1,this._kernelChanged=new Signal(this),this._preferenceChanged=new Signal(this),this._sessionChanged=new Signal(this),this._statusChanged=new Signal(this),this._connectionStatusChanged=new Signal(this),this._pendingInput=!1,this._iopubMessage=new Signal(this),this._unhandledMessage=new Signal(this),this._propertyChanged=new Signal(this),this._dialog=null,this._busyDisposable=null,this._pendingKernelName="",this._pendingSessionRequest="",this.kernelManager=e.kernelManager,this.sessionManager=e.sessionManager,this.specsManager=e.specsManager,this.translator=e.translator||nullTranslator,this._trans=this.translator.load("jupyterlab"),this._path=null!==(t=e.path)&&void 0!==t?t:UUID.uuid4(),this._type=null!==(r=e.type)&&void 0!==r?r:"",this._name=null!==(s=e.name)&&void 0!==s?s:"",this._setBusy=e.setBusy,this._kernelPreference=null!==(n=e.kernelPreference)&&void 0!==n?n:{}}get session(){var e;return null!==(e=this._session)&&void 0!==e?e:null}get path(){return this._path}get type(){return this._type}get name(){return this._name}get kernelChanged(){return this._kernelChanged}get sessionChanged(){return this._sessionChanged}get statusChanged(){return this._statusChanged}get pendingInput(){return this._pendingInput}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get propertyChanged(){return this._propertyChanged}get kernelPreference(){return this._kernelPreference}set kernelPreference(e){if(!JSONExt.deepEqual(e,this._kernelPreference)){const t=this._kernelPreference;this._kernelPreference=e,this._preferenceChanged.emit({name:"kernelPreference",oldValue:t,newValue:JSONExt.deepCopy(e)})}}get kernelPreferenceChanged(){return this._preferenceChanged}get isReady(){return this._isReady}get ready(){return this._ready.promise}get isTerminating(){return this._isTerminating}get isRestarting(){return this._isRestarting}get hasNoKernel(){return this.kernelDisplayName===this.noKernelName}get kernelDisplayName(){var e,t,r,s,n,i,o;const a=null===(e=this.session)||void 0===e?void 0:e.kernel;return this._pendingKernelName===this.noKernelName?this.noKernelName:this._pendingKernelName?null!==(s=null===(r=null===(t=this.specsManager.specs)||void 0===t?void 0:t.kernelspecs[this._pendingKernelName])||void 0===r?void 0:r.display_name)&&void 0!==s?s:this._pendingKernelName:a?null!==(o=null===(i=null===(n=this.specsManager.specs)||void 0===n?void 0:n.kernelspecs[a.name])||void 0===i?void 0:i.display_name)&&void 0!==o?o:a.name:this.noKernelName}get kernelDisplayStatus(){var e,t;const r=null===(e=this.session)||void 0===e?void 0:e.kernel;return this._isTerminating?"terminating":this._isRestarting?"restarting":this._pendingKernelName===this.noKernelName?"unknown":!r&&this._pendingKernelName?"initializing":r||this.isReady||!1===this.kernelPreference.canStart||!1===this.kernelPreference.shouldStart?null!==(t="connected"===(null==r?void 0:r.connectionStatus)?null==r?void 0:r.status:null==r?void 0:r.connectionStatus)&&void 0!==t?t:"unknown":"initializing"}get prevKernelName(){return this._prevKernelName}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get noKernelName(){return this._trans.__("No Kernel")}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._session&&(this.kernelPreference.shutdownOnDispose&&this.sessionManager.shutdown(this._session.id).catch(e=>{console.error(`Kernel not shut down ${e}`)}),this._session.dispose(),this._session=null),this._dialog&&this._dialog.dispose(),this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null),Signal.clearData(this))}async startKernel(){const e=this.kernelPreference;if(!e.autoStartDefault&&!1===e.shouldStart)return!0;let t;if(e.id)t={id:e.id};else{const r=Private$8.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:e});r&&(t={name:r})}if(t)try{return await this._changeKernel(t),!1}catch(err){}return!0}async restartKernel(){var t,r,s,n,i,o;const a=(null===(t=this.session)||void 0===t?void 0:t.kernel)||null;if(!this._isRestarting){this._isRestarting=!0,this._isReady=!1,this._statusChanged.emit("restarting");try{await(null===(s=null===(r=this.session)||void 0===r?void 0:r.kernel)||void 0===s?void 0:s.restart()),this._isReady=!0}catch(e){console.error(e)}this._isRestarting=!1,this._statusChanged.emit((null===(i=null===(n=this.session)||void 0===n?void 0:n.kernel)||void 0===i?void 0:i.status)||"unknown"),this._kernelChanged.emit({name:"kernel",oldValue:a,newValue:(null===(o=this.session)||void 0===o?void 0:o.kernel)||null})}}async changeKernel(e={}){if(this.isDisposed)throw new Error("Disposed");return await this._initStarted.promise,this._changeKernel(e)}async shutdown(){if(!this.isDisposed&&this._initializing)return await this._initStarted.promise,this._pendingSessionRequest="",this._pendingKernelName=this.noKernelName,this._shutdownSession()}async initialize(){if(this._initializing)return this._initPromise.promise;this._initializing=!0;const e=await this._initialize();return e||(this._isReady=!0,this._ready.resolve(void 0)),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._initPromise.resolve(e),e}async _initialize(){const e=this.sessionManager;await e.ready,await e.refreshRunning();const t=find$1(e.running(),e=>e.path===this._path);if(t)try{const r=e.connectTo({model:t});this._handleNewSession(r)}catch(err){return this._handleSessionError(err),Promise.reject(err)}return await this._startIfNecessary()}async _shutdownSession(){var e;const t=this._session,r=this._isTerminating,s=this._isReady;this._isTerminating=!0,this._isReady=!1,this._statusChanged.emit("terminating");try{await(null==t?void 0:t.shutdown()),this._isTerminating=!1,null==t||t.dispose(),this._session=null;const e=(null==t?void 0:t.kernel)||null;this._statusChanged.emit("unknown"),this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:null}),this._sessionChanged.emit({name:"session",oldValue:t,newValue:null})}catch(err){this._isTerminating=r,this._isReady=s;const i=null===(e=null==t?void 0:t.kernel)||void 0===e?void 0:e.status;throw void 0===i?this._statusChanged.emit("unknown"):this._statusChanged.emit(i),err}}async _startIfNecessary(){var e;const t=this.kernelPreference;return!this.isDisposed&&!(null===(e=this.session)||void 0===e?void 0:e.kernel)&&!1!==t.shouldStart&&!1!==t.canStart&&this.startKernel()}async _changeKernel(e={}){if(e.name&&(this._pendingKernelName=e.name),this._session||this._kernelChanged.emit({name:"kernel",oldValue:null,newValue:null}),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._session&&!this._isTerminating)try{return await this._session.changeKernel(e),this._session.kernel}catch(err){throw this._handleSessionError(err),err}const t=libExports$2.PathExt.dirname(this._path),r=this._pendingSessionRequest=libExports$2.PathExt.join(t,UUID.uuid4());try{this._statusChanged.emit("starting");const t=await this.sessionManager.startNew({path:r,type:this._type,name:this._name,kernel:e});return this._pendingSessionRequest!==t.path?(await t.shutdown(),t.dispose(),null):(await t.setPath(this._path),await t.setName(this._name),this._session&&!this._isTerminating&&await this._shutdownSession(),this._handleNewSession(t))}catch(err){throw this._handleSessionError(err),err}}_handleNewSession(e){var t,r,s;if(this.isDisposed)throw Error("Disposed");return this._isReady||(this._isReady=!0,this._ready.resolve(void 0)),this._session&&this._session.dispose(),this._session=e,this._pendingKernelName="",e&&(this._prevKernelName=null!==(r=null===(t=e.kernel)||void 0===t?void 0:t.name)&&void 0!==r?r:"",e.disposed.connect(this._onSessionDisposed,this),e.propertyChanged.connect(this._onPropertyChanged,this),e.kernelChanged.connect(this._onKernelChanged,this),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onConnectionStatusChanged,this),e.pendingInput.connect(this._onPendingInput,this),e.iopubMessage.connect(this._onIopubMessage,this),e.unhandledMessage.connect(this._onUnhandledMessage,this),e.path!==this._path&&this._onPropertyChanged(e,"path"),e.name!==this._name&&this._onPropertyChanged(e,"name"),e.type!==this._type&&this._onPropertyChanged(e,"type")),this._sessionChanged.emit({name:"session",oldValue:null,newValue:e}),this._kernelChanged.emit({oldValue:null,newValue:(null==e?void 0:e.kernel)||null,name:"kernel"}),this._statusChanged.emit((null===(s=null==e?void 0:e.kernel)||void 0===s?void 0:s.status)||"unknown"),(null==e?void 0:e.kernel)||null}async _handleSessionError(e){this._handleNewSession(null);let t="",r="";try{t=e.traceback,r=e.message}catch(s){}await this._displayKernelError(r,t)}async _displayKernelError(e,t){const r=reactExports.createElement("div",null,e&&reactExports.createElement("pre",null,e),t&&reactExports.createElement("details",{className:"jp-mod-wide"},reactExports.createElement("pre",null,t))),s=this._dialog=new Dialog({title:this._trans.__("Error Starting Kernel"),body:r,buttons:[Dialog.okButton()]});await s.launch(),this._dialog=null}_onSessionDisposed(){if(this._session){const e=this._session;this._session=null;const t=this._session;this._sessionChanged.emit({name:"session",oldValue:e,newValue:t})}}_onPropertyChanged(e,t){switch(t){case"path":this._path=e.path;break;case"name":this._name=e.name;break;case"type":this._type=e.type;break;default:throw new Error(`unrecognized property ${t}`)}this._propertyChanged.emit(t)}_onKernelChanged(e,t){this._kernelChanged.emit(t)}_onStatusChanged(e,t){var r;if("dead"===t){const t=null===(r=e.kernel)||void 0===r?void 0:r.model;if(null==t?void 0:t.reason){const e=t.traceback||"";this._displayKernelError(t.reason,e)}}this._setBusy&&("busy"===t?this._busyDisposable||(this._busyDisposable=this._setBusy()):this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null)),this._statusChanged.emit(t)}_onConnectionStatusChanged(e,t){this._connectionStatusChanged.emit(t)}_onPendingInput(e,t){this._pendingInput=t}_onIopubMessage(e,t){"shutdown_reply"===t.header.msg_type&&this.session.kernel.removeInputGuard(),this._iopubMessage.emit(t)}_onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}}(SessionContext||(SessionContext={})).getDefaultKernel=function(e){const{preference:t}=e,{shouldStart:r}=t;return!1===r?null:Private$8.getDefaultKernel(e)};class SessionContextDialogs{constructor(e={}){var t;this._translator=null!==(t=e.translator)&&void 0!==t?t:nullTranslator,this._settingRegistry=e.settingRegistry||null}async selectKernel(e){if(e.isDisposed)return Promise.resolve();const t=this._translator,r=t.load("jupyterlab");let s=r.__("Cancel");e.hasNoKernel&&(s=e.kernelDisplayName);const n=[Dialog.cancelButton({label:s}),Dialog.okButton({label:r.__("Select"),ariaLabel:r.__("Select Kernel")})],i=e.kernelPreference.autoStartDefault,o="boolean"==typeof i,a=new Dialog({title:r.__("Select Kernel"),body:Private$8.createKernelSelector(e,t),buttons:n,checkbox:o?{label:r.__("Always start the preferred kernel"),caption:r.__("Remember my choice and always start the preferred kernel"),checked:i}:null}),l=await a.launch();if(e.isDisposed||!l.button.accept)return;o&&null!==l.isChecked&&(e.kernelPreference={...e.kernelPreference,autoStartDefault:l.isChecked});const c=l.value;if(null===c&&!e.hasNoKernel)return e.shutdown();c&&await e.changeKernel(c)}async restart(e,t){var r,s,n,i,o;const a=this._translator.load("jupyterlab");if(await e.initialize(),e.isDisposed)throw new Error("session already disposed");const l=null===(r=e.session)||void 0===r?void 0:r.kernel;if(!l&&e.prevKernelName)return await e.changeKernel({name:e.prevKernelName}),!0;if(!l)throw new Error("No kernel to restart");const c=null!==(n=null===(s=e.kernelPreference)||void 0===s?void 0:s.skipKernelRestartDialog)&&void 0!==n&&n;if((null===(o=await(null===(i=this._settingRegistry)||void 0===i?void 0:i.get("@jupyterlab/apputils-extension:sessionDialogs","skipKernelRestartDialog")))||void 0===o?void 0:o.composite)||c)return await e.restartKernel(),!0;const d=Dialog.warnButton({label:a.__("Restart"),ariaLabel:a.__("Confirm Kernel Restart")}),h=await showDialog({title:a.__("Restart Kernel?"),body:a.__("Do you want to restart the kernel of %1? All variables will be lost.",e.name),buttons:[Dialog.cancelButton({ariaLabel:a.__("Cancel Kernel Restart")}),d],checkbox:{label:a.__("Do not ask me again."),caption:a.__("If checked, the kernel will restart without confirmation prompt in the future; you can change this back in the settings.")}});return!l.isDisposed&&(!!h.button.accept&&("boolean"==typeof h.isChecked&&1==h.isChecked&&(e.kernelPreference={...e.kernelPreference,skipKernelRestartDialog:!0}),await(null==t?void 0:t.onBeforeRestart()),await e.restartKernel(),!0))}}(SessionContextDialogs||(SessionContextDialogs={})).kernelOptions=function(e,t=null){var r,s,n,i,o,a,l;const c={disabled:!1,groups:[]},d=Array.from(null!==(s=null===(r=e.kernelManager)||void 0===r?void 0:r.running())&&void 0!==s?s:Array.from(e.sessionManager.running()).filter(e=>!!e.kernel).map(e=>e.kernel)),h=Array.from(null!==(n=e.sessionManager.running())&&void 0!==n?n:[]).reduce((e,t)=>{var r;return(null===(r=t.kernel)||void 0===r?void 0:r.id)&&(e[t.kernel.id]=t),e},{}),u={...e.kernelPreference,id:null===(o=null===(i=e.session)||void 0===i?void 0:i.kernel)||void 0===o?void 0:o.id},p=e.hasNoKernel?null:e.kernelDisplayName,g={kernelspecs:/* @__PURE__ */Object.create(null),...e.specsManager.specs},m=[],f=/* @__PURE__ */Object.create(null);for(const S in g.kernelspecs)m.push(g.kernelspecs[S]),f[S]=g.kernelspecs[S].language;m.sort((e,t)=>e.display_name.localeCompare(t.display_name));const v=(t=t||nullTranslator).load("jupyterlab"),_=u.language||f[u.name]||(u.id?f[null===(a=h[u.id])||void 0===a?void 0:a.name]:""),y={connectKernel:v.__("Connect to Existing Kernel"),startPreferred:v.__("Start %1 Kernel",_),startOther:v.__("Start Kernel"),connectToPreferred:v.__("Connect to Existing %1 Kernel",_),connectToOther:v.__("Connect to Other Kernel"),noKernel:v.__("No Kernel"),startKernel:v.__("Start Kernel"),useNoKernel:v.__("Use No Kernel")},b={label:y.useNoKernel,options:[{text:y.noKernel,title:y.noKernel,value:JSON.stringify(null)}]},C=(e,t,r)=>{const s=r?r.name||libExports$2.PathExt.basename(r.path):e.name||v.__("Unknown Kernel");return{text:`${s} (${e.id.split("-")[0]})`,title:(r?`${v.__("Path: %1",r.path)}\n`:"")+`${v.__("Name: %1",s)}\n${v.__("Kernel Name: %1",null!=t?t:e.name)}\n${v.__("Kernel Id: %1",e.id)}`,value:JSON.stringify({id:e.id})}},w=e=>({text:e.display_name,value:JSON.stringify({name:e.name})});if(!1===u.canStart)return c.disabled=!0,c.groups.push(b),c;if(_){const e={label:y.startPreferred,options:[]},t={label:y.startOther,options:[]},r={label:y.connectToPreferred,options:[]},s={label:y.connectToOther,options:[]};for(const n of m)(n.language===_?e:t).options.push(w(n));c.groups.push(e),c.groups.push(b),c.groups.push(t),d.map(e=>{var t,r;return{option:C(e,null!==(r=null===(t=g.kernelspecs[e.name])||void 0===t?void 0:t.display_name)&&void 0!==r?r:"",h[e.id]),language:f[e.name]}}).sort((e,t)=>e.option.text.localeCompare(t.option.text)).forEach(e=>(_===e.language?r:s).options.push(e.option)),r.options.length&&c.groups.push(r),s.options.length&&c.groups.push(s)}else c.groups.push({label:y.startKernel,options:m.map(e=>w(e))}),c.groups.push(b),c.groups.push({label:y.connectKernel,options:d.map(e=>{var t,r;return C(e,null!==(r=null===(t=g.kernelspecs[e.name])||void 0===t?void 0:t.display_name)&&void 0!==r?r:"",h[e.id])}).sort((e,t)=>e.text.localeCompare(t.text))});if(u.id||p||u.name)for(const S of c.groups)for(const e of S.options){const t=JSON.parse(e.value);if(t)if(u.id){if(u.id===t.id)return e.selected=!0,c}else if(p){if(p===(null===(l=g.kernelspecs[t.name])||void 0===l?void 0:l.display_name))return e.selected=!0,c}else if(u.name&&u.name===t.name)return e.selected=!0,c}return c},function(e){e.createKernelSelector=(e,s)=>new t({node:r(e,s)});class t extends Widget{getValue(){const e=this.node.querySelector("select");return JSON.parse(e.value)}}function r(e,t){const r=(t=t||nullTranslator).load("jupyterlab"),s=document.createElement("div"),n=document.createElement("label");n.textContent=`${r.__("Select kernel for:")} "${e.name}"`,s.appendChild(n);const i=document.createElement("select"),o=SessionContextDialogs.kernelOptions(e,t);o.disabled&&(i.disabled=!0);for(const a of o.groups){const{label:e,options:t}=a,r=document.createElement("optgroup");r.label=e;for(const{selected:s,text:n,title:i,value:o}of t){const e=document.createElement("option");s&&(e.selected=!0),i&&(e.title=i),e.text=n,e.value=o,r.appendChild(e)}i.appendChild(r)}return s.appendChild(i),s}e.getDefaultKernel=function(e){var t;const{specs:r,preference:s}=e,{name:n,language:i,canStart:o,autoStartDefault:a}=s;if(!r||!1===o)return null;const l=a?r.default:null;if(!n&&!i)return l;for(const d in r.kernelspecs)if(d===n)return n;if(!i)return l;const c=[];for(const d in r.kernelspecs){i===(null===(t=r.kernelspecs[d])||void 0===t?void 0:t.language)&&c.push(d)}if(1===c.length){const e=c[0];return console.warn("No exact match found for "+e+", using kernel "+e+" that matches language="+i),e}return l}}(Private$8||(Private$8={})),function(e){function t(e,t="copy"){let r=window.getSelection();const s=[];for(let i=0,o=(null==r?void 0:r.rangeCount)||0;i<o;++i)s[i]=r.getRangeAt(i).cloneRange();const n=document.createRange();if(n.selectNodeContents(e),r&&(r.removeAllRanges(),r.addRange(n)),document.execCommand(t),r=window.getSelection(),r){r.removeAllRanges();for(let e=0,t=s.length;e<t;++e)r.addRange(s[e])}}e.getInstance=function(){return Private$7.instance},e.setInstance=function(e){Private$7.instance=e},e.copyToSystem=function(e){const r=document.body,s=t=>{const n=t.clipboardData||window.clipboardData;"string"==typeof e?n.setData("text",e):e.types().map(t=>{n.setData(t,e.getData(t))}),t.preventDefault(),r.removeEventListener("copy",s)};r.addEventListener("copy",s),t(r)},e.generateEvent=t}(Clipboard||(Clipboard={})),(SystemClipboard||(SystemClipboard={})).getInstance=function(){return Private$7.systemInstance},function(e){const t="application/vnd.jupyter.cells";e.instance=new MimeData,e.systemInstance=new class{constructor(e){this.fallback=e||new MimeData;const{systemClipboard:t}=this;t||console.warn("Clipboard API not available")}clear(){this.fallback.clear()}async hasData(e){const{systemClipboard:t}=this;if(!t)return this.fallback.hasData(e);let r;try{r=await t.readText()}catch(s){return console.warn("Failed to read data from clipboard:",s),"NotAllowedError"===s.name&&this.fallback.hasData(e)}try{return this.convertStringToData(e,r),!0}catch(s){return!1}}async getData(e){const{systemClipboard:t}=this;if(!t)return this.fallback.getData(e);try{const r=await t.readText();return this.convertStringToData(e,r)}catch(r){return console.warn("Failed to read data from clipboard:",r),"NotAllowedError"===r.name?this.fallback.getData(e):null}}async setData(e,t){const{systemClipboard:r}=this;if(!r)return this.fallback.clear(),void this.fallback.setData(e,t);try{await r.writeText(this.convertDataToString(e,t))}catch(s){console.warn("Failed to write data to clipboard:",s),this.fallback.clear(),this.fallback.setData(e,t)}}convertDataToString(e,r){return e===t?JSON.stringify(r):(r||"").toString()}convertStringToData(e,r){return e===t?JSON.parse(r):r}get systemClipboard(){return navigator.clipboard}}}(Private$7||(Private$7={})),DOMUtils2=DOMUtils||(DOMUtils={}),DOMUtils2.hitTestNodes=function(e,t,r){return ArrayExt.findFirstIndex(e,e=>ElementExt.hitTest(e,t,r))},DOMUtils2.findElement=function(e,t){return e.querySelector(`.${t}`)},DOMUtils2.findElements=function(e,t){return e.getElementsByClassName(t)},DOMUtils2.createDomID=function(){return`id-${UUID.uuid4()}`},DOMUtils2.hasActiveEditableElement=function e(t,r=document){const s=r.activeElement;return!!(s&&t.contains(s)&&(s.matches(":read-write")||s.shadowRoot&&e(s.shadowRoot,s.shadowRoot)))},function(e){function t(t){return!("object"!=typeof t||!t)&&e.symbol in t}async function r(e){const t="string"==typeof e,r=function(){const e=window.document.createElement("iframe");e.setAttribute("sandbox","allow-modals allow-same-origin");const t="visibility:hidden;width:0;height:0;position:absolute;z-index:-9999;bottom:0;";return e.setAttribute("style",t),e.setAttribute("width","0"),e.setAttribute("height","0"),e}(),n=window.document.body;n.appendChild(r),t?(r.srcdoc=e,await s(r)):(r.src="about:blank",await s(r),function(e,t){e.contentDocument.body.appendChild(t.cloneNode(!0)),e.contentDocument.close()}(r,e));const i=new Promise(e=>{const t=()=>{document.removeEventListener("mousemove",t,!0),document.removeEventListener("mousedown",t,!0),document.removeEventListener("keydown",t,!0),e()};document.addEventListener("mousemove",t,!0),document.addEventListener("mousedown",t,!0),document.addEventListener("keydown",t,!0)});var o;(o=r.contentWindow).document.execCommand("print",!1)||o.print(),await i,n.removeChild(r)}function s(e){return new Promise(t=>{e.onload=()=>t()})}e.symbol=/* @__PURE__ */Symbol("printable"),e.isPrintable=t,e.getPrintFunction=function(r){return t(r)?r[e.symbol]():null},e.printWidget=function(e){return r(e.node)},e.printURL=async function(e,t){const s=null!=t?t:libExports$3.ServerConnection.makeSettings();return r(await(await libExports$3.ServerConnection.makeRequest(e,{},s)).text())}}(Printing||(Printing={}));const USE_CAPTURE=!0;class MainAreaWidget extends Widget{constructor(e){super(e),this._changeGuard=!1,this._spinner=new Spinner,this._isRevealed=!1,this._evtMouseDown=()=>{this.node.contains(document.activeElement)||this._focusContent()},this.addClass("jp-MainAreaWidget"),this.addClass("jp-MainAreaWidget-ContainStrict"),this.id=DOMUtils.createDomID();const t=(e.translator||nullTranslator).load("jupyterlab"),r=this._content=e.content;r.node.setAttribute("role","region"),r.node.setAttribute("aria-label",t.__("main area content"));const s=this._toolbar=e.toolbar||new ReactiveToolbar({noFocusOnClick:!0});s.node.setAttribute("role","toolbar"),s.node.setAttribute("aria-label",t.__("main area toolbar"));const n=this._contentHeader=e.contentHeader||new BoxPanel({direction:"top-to-bottom",spacing:0}),i=this.layout=new BoxLayout({spacing:0});i.direction="top-to-bottom",BoxLayout.setStretch(s,0),BoxLayout.setStretch(n,0),BoxLayout.setStretch(r,1),i.addWidget(s),i.addWidget(n),i.addWidget(r),r.id||(r.id=DOMUtils.createDomID()),r.node.tabIndex=-1,this._updateTitle(),r.title.changed.connect(this._updateTitle,this),this.title.closable=!0,this.title.changed.connect(this._updateContentTitle,this),e.reveal?(this.node.appendChild(this._spinner.node),this._revealed=e.reveal.then(()=>{if(r.isDisposed)return void this.dispose();r.disposed.connect(()=>this.dispose());const e=document.activeElement===this._spinner.node;this._disposeSpinner(),this._isRevealed=!0,e&&this._focusContent()}).catch(e=>{const t=new Widget;t.addClass("jp-MainAreaWidget-error");const n=document.createElement("pre");throw n.textContent=String(e),t.node.appendChild(n),BoxLayout.setStretch(t,1),this._disposeSpinner(),r.dispose(),this._content=null,s.dispose(),this._toolbar=null,i.addWidget(t),this._isRevealed=!0,t})):(this._spinner.dispose(),this.removeClass("jp-MainAreaWidget-ContainStrict"),r.disposed.connect(()=>this.dispose()),this._isRevealed=!0,this._revealed=Promise.resolve(void 0))}[Printing.symbol](){return this._content?Printing.getPrintFunction(this._content):null}get content(){return this._content}get toolbar(){return this._toolbar}get contentHeader(){return this._contentHeader}get isRevealed(){return this._isRevealed}get revealed(){return this._revealed}onActivateRequest(e){this._isRevealed?this._focusContent():this._spinner.node.focus()}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("mousedown",this._evtMouseDown,USE_CAPTURE)}onBeforeDetach(e){this.node.removeEventListener("mousedown",this._evtMouseDown,USE_CAPTURE),super.onBeforeDetach(e)}onCloseRequest(e){this.dispose()}onUpdateRequest(e){this._content&&MessageLoop.sendMessage(this._content,e)}_disposeSpinner(){this.node.removeChild(this._spinner.node),this._spinner.dispose(),this.removeClass("jp-MainAreaWidget-ContainStrict")}_updateTitle(){if(this._changeGuard||!this.content)return;this._changeGuard=!0;const e=this.content;this.title.label=e.title.label,this.title.mnemonic=e.title.mnemonic,this.title.icon=e.title.icon,this.title.iconClass=e.title.iconClass,this.title.iconLabel=e.title.iconLabel,this.title.caption=e.title.caption,this.title.className=e.title.className,this.title.dataset=e.title.dataset,this._changeGuard=!1}_updateContentTitle(){if(this._changeGuard||!this.content)return;this._changeGuard=!0;const e=this.content;e.title.label=this.title.label,e.title.mnemonic=this.title.mnemonic,e.title.icon=this.title.icon,e.title.iconClass=this.title.iconClass,e.title.iconLabel=this.title.iconLabel,e.title.caption=this.title.caption,e.title.className=this.title.className,e.title.dataset=this.title.dataset,this._changeGuard=!1}_focusContent(){this.content&&(this.content.node.contains(document.activeElement)||this.content.node.focus(),this.content.activate())}}class NotificationManager{constructor(){this._isDisposed=!1,this._queue=[],this._changed=new Signal(this)}get changed(){return this._changed}get count(){return this._queue.length}get isDisposed(){return this._isDisposed}get notifications(){return this._queue.slice()}dismiss(e){if(void 0===e){const e=this._queue.slice();this._queue.length=0;for(const t of e)this._changed.emit({type:"removed",notification:t})}else{const t=this._queue.findIndex(t=>t.id===e);if(t>-1){const e=this._queue.splice(t,1)[0];this._changed.emit({type:"removed",notification:e})}}}dispose(){this._isDisposed||(this._isDisposed=!0,Signal.clearData(this))}has(e){return this._queue.findIndex(t=>t.id===e)>-1}notify(e,t,r){const s=Date.now(),{progress:n,...i}=r,o=Object.freeze({id:UUID.uuid4(),createdAt:s,modifiedAt:s,message:e,type:t,options:{autoClose:0,progress:"number"==typeof n?Math.min(Math.max(0,n),1):n,...i}});return this._queue.unshift(o),this._changed.emit({type:"added",notification:o}),o.id}update(e){const{id:t,message:r,actions:s,autoClose:n,data:i,progress:o,type:a}=e,l="number"==typeof o?Math.min(Math.max(0,o),1):o,c=this._queue.findIndex(e=>e.id===t);if(c>-1){const e=this._queue[c],t=Object.freeze({...e,message:null!=r?r:e.message,type:null!=a?a:e.type,options:{actions:null!=s?s:e.options.actions,autoClose:null!=n?n:e.options.autoClose,data:null!=i?i:e.options.data,progress:null!=l?l:e.options.progress},modifiedAt:Date.now()});return this._queue.splice(c,1),this._queue.unshift(t),this._changed.emit({type:"updated",notification:t}),!0}return!1}}var Notification,Notification2;Notification2=Notification||(Notification={}),Notification2.manager=new NotificationManager,Notification2.dismiss=function(e){Notification2.manager.dismiss(e)},Notification2.emit=function(e,t="default",r={}){return Notification2.manager.notify(e,t,r)},Notification2.error=function(e,t={}){return Notification2.manager.notify(e,"error",t)},Notification2.info=function(e,t={}){return Notification2.manager.notify(e,"info",t)},Notification2.promise=function(e,t){var r;const{pending:s,error:n,success:i}=t,o=Notification2.manager.notify(s.message,"in-progress",null!==(r=s.options)&&void 0!==r?r:{});return e.then(e=>{var t,r,s;Notification2.manager.update({id:o,message:i.message(e,null===(t=i.options)||void 0===t?void 0:t.data),type:"success",...i.options,data:null!==(s=null===(r=i.options)||void 0===r?void 0:r.data)&&void 0!==s?s:e})}).catch(e=>{var t,r,s;Notification2.manager.update({id:o,message:n.message(e,null===(t=n.options)||void 0===t?void 0:t.data),type:"error",...n.options,data:null!==(s=null===(r=n.options)||void 0===r?void 0:r.data)&&void 0!==s?s:e})}),o},Notification2.success=function(e,t={}){return Notification2.manager.notify(e,"success",t)},Notification2.update=function(e){return Notification2.manager.update(e)},Notification2.warning=function(e,t={}){return Notification2.manager.notify(e,"warning",t)};var lib$5={},Parser={},Tokenizer={},decode={},decodeDataHtml={},hasRequiredDecodeDataHtml;function requireDecodeDataHtml(){return hasRequiredDecodeDataHtml||(hasRequiredDecodeDataHtml=1,Object.defineProperty(decodeDataHtml,"__esModule",{value:!0}),decodeDataHtml.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(e){return e.charCodeAt(0)}))),decodeDataHtml}var decodeDataXml={},hasRequiredDecodeDataXml;function requireDecodeDataXml(){return hasRequiredDecodeDataXml||(hasRequiredDecodeDataXml=1,Object.defineProperty(decodeDataXml,"__esModule",{value:!0}),decodeDataXml.default=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map(function(e){return e.charCodeAt(0)}))),decodeDataXml}var decode_codepoint={},hasRequiredDecode_codepoint,hasRequiredDecode,hasRequiredTokenizer,hasRequiredParser$1;function requireDecode_codepoint(){return hasRequiredDecode_codepoint||(hasRequiredDecode_codepoint=1,function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var r=/* @__PURE__ */new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function s(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=r.get(e))&&void 0!==t?t:e}e.fromCodePoint=null!==(t=String.fromCodePoint)&&void 0!==t?t:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)},e.replaceCodePoint=s,e.default=function(t){return(0,e.fromCodePoint)(s(t))}}(decode_codepoint)),decode_codepoint}function requireDecode(){return hasRequiredDecode||(hasRequiredDecode=1,function(e){var t=decode&&decode.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=decode&&decode.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=decode&&decode.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(s,e,n);return r(s,e),s},n=decode&&decode.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var i=n(/* @__PURE__ */requireDecodeDataHtml());e.htmlDecodeTree=i.default;var o=n(/* @__PURE__ */requireDecodeDataXml());e.xmlDecodeTree=o.default;var a=s(/* @__PURE__ */requireDecode_codepoint());e.decodeCodePoint=a.default;var l,c,d=/* @__PURE__ */requireDecode_codepoint();Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return d.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return d.fromCodePoint}}),(c=l||(l={}))[c.NUM=35]="NUM",c[c.SEMI=59]="SEMI",c[c.EQUALS=61]="EQUALS",c[c.ZERO=48]="ZERO",c[c.NINE=57]="NINE",c[c.LOWER_A=97]="LOWER_A",c[c.LOWER_F=102]="LOWER_F",c[c.LOWER_X=120]="LOWER_X",c[c.LOWER_Z=122]="LOWER_Z",c[c.UPPER_A=65]="UPPER_A",c[c.UPPER_F=70]="UPPER_F",c[c.UPPER_Z=90]="UPPER_Z";var h,u,p,g,m,f;function v(e){return e>=l.ZERO&&e<=l.NINE}function _(e){return e>=l.UPPER_A&&e<=l.UPPER_F||e>=l.LOWER_A&&e<=l.LOWER_F}function y(e){return e===l.EQUALS||function(e){return e>=l.UPPER_A&&e<=l.UPPER_Z||e>=l.LOWER_A&&e<=l.LOWER_Z||v(e)}(e)}(u=h=e.BinTrieFlags||(e.BinTrieFlags={}))[u.VALUE_LENGTH=49152]="VALUE_LENGTH",u[u.BRANCH_LENGTH=16256]="BRANCH_LENGTH",u[u.JUMP_TABLE=127]="JUMP_TABLE",(g=p||(p={}))[g.EntityStart=0]="EntityStart",g[g.NumericStart=1]="NumericStart",g[g.NumericDecimal=2]="NumericDecimal",g[g.NumericHex=3]="NumericHex",g[g.NamedEntity=4]="NamedEntity",(f=m=e.DecodingMode||(e.DecodingMode={}))[f.Legacy=0]="Legacy",f[f.Strict=1]="Strict",f[f.Attribute=2]="Attribute";var b=function(){function e(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=p.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=p.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case p.EntityStart:return e.charCodeAt(t)===l.NUM?(this.state=p.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=p.NamedEntity,this.stateNamedEntity(e,t));case p.NumericStart:return this.stateNumericStart(e,t);case p.NumericDecimal:return this.stateNumericDecimal(e,t);case p.NumericHex:return this.stateNumericHex(e,t);case p.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===l.LOWER_X?(this.state=p.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=p.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,r,s){if(t!==r){var n=r-t;this.result=this.result*Math.pow(s,n)+parseInt(e.substr(t,n),s),this.consumed+=n}},e.prototype.stateNumericHex=function(e,t){for(var r=t;t<e.length;){var s=e.charCodeAt(t);if(!v(s)&&!_(s))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(s,3);t+=1}return this.addToNumericResult(e,r,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var r=t;t<e.length;){var s=e.charCodeAt(t);if(!v(s))return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(s,2);t+=1}return this.addToNumericResult(e,r,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var r;if(this.consumed<=t)return null===(r=this.errors)||void 0===r||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===l.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==l.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var r=this.decodeTree,s=r[this.treeIndex],n=(s&h.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var i=e.charCodeAt(t);if(this.treeIndex=w(r,s,this.treeIndex+Math.max(1,n),i),this.treeIndex<0)return 0===this.result||this.decodeMode===m.Attribute&&(0===n||y(i))?0:this.emitNotTerminatedNamedEntity();if(0!==(n=((s=r[this.treeIndex])&h.VALUE_LENGTH)>>14)){if(i===l.SEMI)return this.emitNamedEntityData(this.treeIndex,n,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,r=(this.decodeTree[t]&h.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,r){var s=this.decodeTree;return this.emitCodePoint(1===t?s[e]&~h.VALUE_LENGTH:s[e+1],r),3===t&&this.emitCodePoint(s[e+2],r),r},e.prototype.end=function(){var e;switch(this.state){case p.NamedEntity:return 0===this.result||this.decodeMode===m.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case p.NumericDecimal:return this.emitNumericEntity(0,2);case p.NumericHex:return this.emitNumericEntity(0,3);case p.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case p.EntityStart:return 0}},e}();function C(e){var t="",r=new b(e,function(e){return t+=(0,a.fromCodePoint)(e)});return function(e,s){for(var n=0,i=0;(i=e.indexOf("&",i))>=0;){t+=e.slice(n,i),r.startEntity(s);var o=r.write(e,i+1);if(o<0){n=i+r.end();break}n=i+o,i=0===o?n+1:n}var a=t+e.slice(n);return t="",a}}function w(e,t,r,s){var n=(t&h.BRANCH_LENGTH)>>7,i=t&h.JUMP_TABLE;if(0===n)return 0!==i&&s===i?r:-1;if(i){var o=s-i;return o<0||o>=n?-1:e[r+o]-1}for(var a=r,l=a+n-1;a<=l;){var c=a+l>>>1,d=e[c];if(d<s)a=c+1;else{if(!(d>s))return e[c+n];l=c-1}}return-1}e.EntityDecoder=b,e.determineBranch=w;var S=C(i.default),x=C(o.default);e.decodeHTML=function(e,t){return void 0===t&&(t=m.Legacy),S(e,t)},e.decodeHTMLAttribute=function(e){return S(e,m.Attribute)},e.decodeHTMLStrict=function(e){return S(e,m.Strict)},e.decodeXML=function(e){return x(e,m.Strict)}}(decode)),decode}function requireTokenizer(){return hasRequiredTokenizer||(hasRequiredTokenizer=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0;var t,r,s,n,i,o,a=/* @__PURE__ */requireDecode();function l(e){return e===t.Space||e===t.NewLine||e===t.Tab||e===t.FormFeed||e===t.CarriageReturn}function c(e){return e===t.Slash||e===t.Gt||l(e)}function d(e){return e>=t.Zero&&e<=t.Nine}(r=t||(t={}))[r.Tab=9]="Tab",r[r.NewLine=10]="NewLine",r[r.FormFeed=12]="FormFeed",r[r.CarriageReturn=13]="CarriageReturn",r[r.Space=32]="Space",r[r.ExclamationMark=33]="ExclamationMark",r[r.Number=35]="Number",r[r.Amp=38]="Amp",r[r.SingleQuote=39]="SingleQuote",r[r.DoubleQuote=34]="DoubleQuote",r[r.Dash=45]="Dash",r[r.Slash=47]="Slash",r[r.Zero=48]="Zero",r[r.Nine=57]="Nine",r[r.Semi=59]="Semi",r[r.Lt=60]="Lt",r[r.Eq=61]="Eq",r[r.Gt=62]="Gt",r[r.Questionmark=63]="Questionmark",r[r.UpperA=65]="UpperA",r[r.LowerA=97]="LowerA",r[r.UpperF=70]="UpperF",r[r.LowerF=102]="LowerF",r[r.UpperZ=90]="UpperZ",r[r.LowerZ=122]="LowerZ",r[r.LowerX=120]="LowerX",r[r.OpeningSquareBracket=91]="OpeningSquareBracket",(n=s||(s={}))[n.Text=1]="Text",n[n.BeforeTagName=2]="BeforeTagName",n[n.InTagName=3]="InTagName",n[n.InSelfClosingTag=4]="InSelfClosingTag",n[n.BeforeClosingTagName=5]="BeforeClosingTagName",n[n.InClosingTagName=6]="InClosingTagName",n[n.AfterClosingTagName=7]="AfterClosingTagName",n[n.BeforeAttributeName=8]="BeforeAttributeName",n[n.InAttributeName=9]="InAttributeName",n[n.AfterAttributeName=10]="AfterAttributeName",n[n.BeforeAttributeValue=11]="BeforeAttributeValue",n[n.InAttributeValueDq=12]="InAttributeValueDq",n[n.InAttributeValueSq=13]="InAttributeValueSq",n[n.InAttributeValueNq=14]="InAttributeValueNq",n[n.BeforeDeclaration=15]="BeforeDeclaration",n[n.InDeclaration=16]="InDeclaration",n[n.InProcessingInstruction=17]="InProcessingInstruction",n[n.BeforeComment=18]="BeforeComment",n[n.CDATASequence=19]="CDATASequence",n[n.InSpecialComment=20]="InSpecialComment",n[n.InCommentLike=21]="InCommentLike",n[n.BeforeSpecialS=22]="BeforeSpecialS",n[n.SpecialStartSequence=23]="SpecialStartSequence",n[n.InSpecialTag=24]="InSpecialTag",n[n.BeforeEntity=25]="BeforeEntity",n[n.BeforeNumericEntity=26]="BeforeNumericEntity",n[n.InNamedEntity=27]="InNamedEntity",n[n.InNumericEntity=28]="InNumericEntity",n[n.InHexEntity=29]="InHexEntity",(o=i=e.QuoteType||(e.QuoteType={}))[o.NoValue=0]="NoValue",o[o.Unquoted=1]="Unquoted",o[o.Single=2]="Single",o[o.Double=3]="Double";var h={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},u=function(){function e(e,t){var r=e.xmlMode,n=void 0!==r&&r,i=e.decodeEntities,o=void 0===i||i;this.cbs=t,this.state=s.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=s.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=n,this.decodeEntities=o,this.entityTrie=n?a.xmlDecodeTree:a.htmlDecodeTree}return e.prototype.reset=function(){this.state=s.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=s.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},e.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},e.prototype.end=function(){this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},e.prototype.getIndex=function(){return this.index},e.prototype.getSectionStart=function(){return this.sectionStart},e.prototype.stateText=function(e){e===t.Lt||!this.decodeEntities&&this.fastForwardTo(t.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=s.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===t.Amp&&(this.state=s.BeforeEntity)},e.prototype.stateSpecialStartSequence=function(e){var t=this.sequenceIndex===this.currentSequence.length;if(t?c(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=s.InTagName,this.stateInTagName(e)},e.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===t.Gt||l(e)){var r=this.index-this.currentSequence.length;if(this.sectionStart<r){var n=this.index;this.index=r,this.cbs.ontext(this.sectionStart,r),this.index=n}return this.isSpecial=!1,this.sectionStart=r+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===h.TitleEnd?this.decodeEntities&&e===t.Amp&&(this.state=s.BeforeEntity):this.fastForwardTo(t.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===t.Lt)},e.prototype.stateCDATASequence=function(e){e===h.Cdata[this.sequenceIndex]?++this.sequenceIndex===h.Cdata.length&&(this.state=s.InCommentLike,this.currentSequence=h.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=s.InDeclaration,this.stateInDeclaration(e))},e.prototype.fastForwardTo=function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},e.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===h.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=s.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},e.prototype.isTagStartChar=function(e){return this.xmlMode?!c(e):function(e){return e>=t.LowerA&&e<=t.LowerZ||e>=t.UpperA&&e<=t.UpperZ}(e)},e.prototype.startSpecial=function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=s.SpecialStartSequence},e.prototype.stateBeforeTagName=function(e){if(e===t.ExclamationMark)this.state=s.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===t.Questionmark)this.state=s.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var r=32|e;this.sectionStart=this.index,this.xmlMode||r!==h.TitleEnd[2]?this.state=this.xmlMode||r!==h.ScriptEnd[2]?s.InTagName:s.BeforeSpecialS:this.startSpecial(h.TitleEnd,3)}else e===t.Slash?this.state=s.BeforeClosingTagName:(this.state=s.Text,this.stateText(e))},e.prototype.stateInTagName=function(e){c(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateBeforeClosingTagName=function(e){l(e)||(e===t.Gt?this.state=s.Text:(this.state=this.isTagStartChar(e)?s.InClosingTagName:s.InSpecialComment,this.sectionStart=this.index))},e.prototype.stateInClosingTagName=function(e){(e===t.Gt||l(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.AfterClosingTagName,this.stateAfterClosingTagName(e))},e.prototype.stateAfterClosingTagName=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.state=s.Text,this.baseState=s.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeAttributeName=function(e){e===t.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=s.InSpecialTag,this.sequenceIndex=0):this.state=s.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===t.Slash?this.state=s.InSelfClosingTag:l(e)||(this.state=s.InAttributeName,this.sectionStart=this.index)},e.prototype.stateInSelfClosingTag=function(e){e===t.Gt?(this.cbs.onselfclosingtag(this.index),this.state=s.Text,this.baseState=s.Text,this.sectionStart=this.index+1,this.isSpecial=!1):l(e)||(this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateInAttributeName=function(e){(e===t.Eq||c(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=s.AfterAttributeName,this.stateAfterAttributeName(e))},e.prototype.stateAfterAttributeName=function(e){e===t.Eq?this.state=s.BeforeAttributeValue:e===t.Slash||e===t.Gt?(this.cbs.onattribend(i.NoValue,this.index),this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(e)):l(e)||(this.cbs.onattribend(i.NoValue,this.index),this.state=s.InAttributeName,this.sectionStart=this.index)},e.prototype.stateBeforeAttributeValue=function(e){e===t.DoubleQuote?(this.state=s.InAttributeValueDq,this.sectionStart=this.index+1):e===t.SingleQuote?(this.state=s.InAttributeValueSq,this.sectionStart=this.index+1):l(e)||(this.sectionStart=this.index,this.state=s.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},e.prototype.handleInAttributeValue=function(e,r){e===r||!this.decodeEntities&&this.fastForwardTo(r)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(r===t.DoubleQuote?i.Double:i.Single,this.index),this.state=s.BeforeAttributeName):this.decodeEntities&&e===t.Amp&&(this.baseState=this.state,this.state=s.BeforeEntity)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,t.DoubleQuote)},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,t.SingleQuote)},e.prototype.stateInAttributeValueNoQuotes=function(e){l(e)||e===t.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(i.Unquoted,this.index),this.state=s.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===t.Amp&&(this.baseState=this.state,this.state=s.BeforeEntity)},e.prototype.stateBeforeDeclaration=function(e){e===t.OpeningSquareBracket?(this.state=s.CDATASequence,this.sequenceIndex=0):this.state=e===t.Dash?s.BeforeComment:s.InDeclaration},e.prototype.stateInDeclaration=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=s.Text,this.sectionStart=this.index+1)},e.prototype.stateInProcessingInstruction=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=s.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeComment=function(e){e===t.Dash?(this.state=s.InCommentLike,this.currentSequence=h.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=s.InDeclaration},e.prototype.stateInSpecialComment=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=s.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeSpecialS=function(e){var t=32|e;t===h.ScriptEnd[3]?this.startSpecial(h.ScriptEnd,4):t===h.StyleEnd[3]?this.startSpecial(h.StyleEnd,4):(this.state=s.InTagName,this.stateInTagName(e))},e.prototype.stateBeforeEntity=function(e){this.entityExcess=1,this.entityResult=0,e===t.Number?this.state=s.BeforeNumericEntity:e===t.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=s.InNamedEntity,this.stateInNamedEntity(e))},e.prototype.stateInNamedEntity=function(e){if(this.entityExcess+=1,this.trieIndex=(0,a.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];var r=this.trieCurrent&a.BinTrieFlags.VALUE_LENGTH;if(r){var s=(r>>14)-1;if(this.allowLegacyEntity()||e===t.Semi){var n=this.index-this.entityExcess+1;n>this.sectionStart&&this.emitPartial(this.sectionStart,n),this.entityResult=this.trieIndex,this.trieIndex+=s,this.entityExcess=0,this.sectionStart=this.index+1,0===s&&this.emitNamedEntity()}else this.trieIndex+=s}},e.prototype.emitNamedEntity=function(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&a.BinTrieFlags.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~a.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}},e.prototype.stateBeforeNumericEntity=function(e){(32|e)===t.LowerX?(this.entityExcess++,this.state=s.InHexEntity):(this.state=s.InNumericEntity,this.stateInNumericEntity(e))},e.prototype.emitNumericEntity=function(e){var t=this.index-this.entityExcess-1;t+2+Number(this.state===s.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint((0,a.replaceCodePoint)(this.entityResult))),this.state=this.baseState},e.prototype.stateInNumericEntity=function(e){e===t.Semi?this.emitNumericEntity(!0):d(e)?(this.entityResult=10*this.entityResult+(e-t.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.stateInHexEntity=function(e){e===t.Semi?this.emitNumericEntity(!0):d(e)?(this.entityResult=16*this.entityResult+(e-t.Zero),this.entityExcess++):!function(e){return e>=t.UpperA&&e<=t.UpperF||e>=t.LowerA&&e<=t.LowerF}(e)?(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--):(this.entityResult=16*this.entityResult+((32|e)-t.LowerA+10),this.entityExcess++)},e.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===s.Text||this.baseState===s.InSpecialTag)},e.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===s.Text||this.state===s.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==s.InAttributeValueDq&&this.state!==s.InAttributeValueSq&&this.state!==s.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},e.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},e.prototype.parse=function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case s.Text:this.stateText(e);break;case s.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case s.InSpecialTag:this.stateInSpecialTag(e);break;case s.CDATASequence:this.stateCDATASequence(e);break;case s.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case s.InAttributeName:this.stateInAttributeName(e);break;case s.InCommentLike:this.stateInCommentLike(e);break;case s.InSpecialComment:this.stateInSpecialComment(e);break;case s.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case s.InTagName:this.stateInTagName(e);break;case s.InClosingTagName:this.stateInClosingTagName(e);break;case s.BeforeTagName:this.stateBeforeTagName(e);break;case s.AfterAttributeName:this.stateAfterAttributeName(e);break;case s.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case s.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case s.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case s.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case s.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case s.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case s.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case s.InDeclaration:this.stateInDeclaration(e);break;case s.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case s.BeforeComment:this.stateBeforeComment(e);break;case s.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case s.InNamedEntity:this.stateInNamedEntity(e);break;case s.BeforeEntity:this.stateBeforeEntity(e);break;case s.InHexEntity:this.stateInHexEntity(e);break;case s.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()},e.prototype.finish=function(){this.state===s.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.state===s.InCommentLike?this.currentSequence===h.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===s.InNumericEntity&&this.allowLegacyEntity()||this.state===s.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===s.InTagName||this.state===s.BeforeAttributeName||this.state===s.BeforeAttributeValue||this.state===s.AfterAttributeName||this.state===s.InAttributeName||this.state===s.InAttributeValueSq||this.state===s.InAttributeValueDq||this.state===s.InAttributeValueNq||this.state===s.InClosingTagName||this.cbs.ontext(this.sectionStart,e)},e.prototype.emitPartial=function(e,t){this.baseState!==s.Text&&this.baseState!==s.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)},e.prototype.emitCodePoint=function(e){this.baseState!==s.Text&&this.baseState!==s.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)},e}();e.default=u}(Tokenizer)),Tokenizer}function requireParser$1(){if(hasRequiredParser$1)return Parser;hasRequiredParser$1=1;var e=Parser&&Parser.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),t=Parser&&Parser.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Parser&&Parser.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(null!=r)for(var n in r)"default"!==n&&Object.prototype.hasOwnProperty.call(r,n)&&e(s,r,n);return t(s,r),s};Object.defineProperty(Parser,"__esModule",{value:!0}),Parser.Parser=void 0;var s=r(/* @__PURE__ */requireTokenizer()),n=/* @__PURE__ */requireDecode(),i=/* @__PURE__ */new Set(["input","option","optgroup","select","button","datalist","textarea"]),o=/* @__PURE__ */new Set(["p"]),a=/* @__PURE__ */new Set(["thead","tbody"]),l=/* @__PURE__ */new Set(["dd","dt"]),c=/* @__PURE__ */new Set(["rt","rp"]),d=/* @__PURE__ */new Map([["tr",/* @__PURE__ */new Set(["tr","th","td"])],["th",/* @__PURE__ */new Set(["th"])],["td",/* @__PURE__ */new Set(["thead","th","td"])],["body",/* @__PURE__ */new Set(["head","link","script"])],["li",/* @__PURE__ */new Set(["li"])],["p",o],["h1",o],["h2",o],["h3",o],["h4",o],["h5",o],["h6",o],["select",i],["input",i],["output",i],["button",i],["datalist",i],["textarea",i],["option",/* @__PURE__ */new Set(["option"])],["optgroup",/* @__PURE__ */new Set(["optgroup","option"])],["dd",l],["dt",l],["address",o],["article",o],["aside",o],["blockquote",o],["details",o],["div",o],["dl",o],["fieldset",o],["figcaption",o],["figure",o],["footer",o],["form",o],["header",o],["hr",o],["main",o],["nav",o],["ol",o],["pre",o],["section",o],["table",o],["ul",o],["rt",c],["rp",c],["tbody",a],["tfoot",a]]),h=/* @__PURE__ */new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),u=/* @__PURE__ */new Set(["math","svg"]),p=/* @__PURE__ */new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),g=/\s|\//,m=function(){function e(e,t){var r,n,i,o,a;void 0===t&&(t={}),this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(r=t.lowerCaseTags)&&void 0!==r?r:!t.xmlMode,this.lowerCaseAttributeNames=null!==(n=t.lowerCaseAttributeNames)&&void 0!==n?n:!t.xmlMode,this.tokenizer=new(null!==(i=t.Tokenizer)&&void 0!==i?i:s.default)(this.options,this),null===(a=(o=this.cbs).onparserinit)||void 0===a||a.call(o,this)}return e.prototype.ontext=function(e,t){var r,s,n=this.getSlice(e,t);this.endIndex=t-1,null===(s=(r=this.cbs).ontext)||void 0===s||s.call(r,n),this.startIndex=t},e.prototype.ontextentity=function(e){var t,r,s=this.tokenizer.getSectionStart();this.endIndex=s-1,null===(r=(t=this.cbs).ontext)||void 0===r||r.call(t,(0,n.fromCodePoint)(e)),this.startIndex=s},e.prototype.isVoidElement=function(e){return!this.options.xmlMode&&h.has(e)},e.prototype.onopentagname=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)},e.prototype.emitOpenTag=function(e){var t,r,s,n;this.openTagStart=this.startIndex,this.tagname=e;var i=!this.options.xmlMode&&d.get(e);if(i)for(;this.stack.length>0&&i.has(this.stack[this.stack.length-1]);){var o=this.stack.pop();null===(r=(t=this.cbs).onclosetag)||void 0===r||r.call(t,o,!0)}this.isVoidElement(e)||(this.stack.push(e),u.has(e)?this.foreignContext.push(!0):p.has(e)&&this.foreignContext.push(!1)),null===(n=(s=this.cbs).onopentagname)||void 0===n||n.call(s,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(e){var t,r;this.startIndex=this.openTagStart,this.attribs&&(null===(r=(t=this.cbs).onopentag)||void 0===r||r.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},e.prototype.onclosetag=function(e,t){var r,s,n,i,o,a;this.endIndex=t;var l=this.getSlice(e,t);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(u.has(l)||p.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))this.options.xmlMode||"br"!==l||(null===(s=(r=this.cbs).onopentagname)||void 0===s||s.call(r,"br"),null===(i=(n=this.cbs).onopentag)||void 0===i||i.call(n,"br",{},!0),null===(a=(o=this.cbs).onclosetag)||void 0===a||a.call(o,"br",!1));else{var c=this.stack.lastIndexOf(l);if(-1!==c)if(this.cbs.onclosetag)for(var d=this.stack.length-c;d--;)this.cbs.onclosetag(this.stack.pop(),0!==d);else this.stack.length=c;else this.options.xmlMode||"p"!==l||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},e.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},e.prototype.closeCurrentTag=function(e){var t,r,s=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===s&&(null===(r=(t=this.cbs).onclosetag)||void 0===r||r.call(t,s,!e),this.stack.pop())},e.prototype.onattribname=function(e,t){this.startIndex=e;var r=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r},e.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},e.prototype.onattribentity=function(e){this.attribvalue+=(0,n.fromCodePoint)(e)},e.prototype.onattribend=function(e,t){var r,n;this.endIndex=t,null===(n=(r=this.cbs).onattribute)||void 0===n||n.call(r,this.attribname,this.attribvalue,e===s.QuoteType.Double?'"':e===s.QuoteType.Single?"'":e===s.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(g),r=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r},e.prototype.ondeclaration=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var s=this.getInstructionName(r);this.cbs.onprocessinginstruction("!".concat(s),"!".concat(r))}this.startIndex=t+1},e.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var s=this.getInstructionName(r);this.cbs.onprocessinginstruction("?".concat(s),"?".concat(r))}this.startIndex=t+1},e.prototype.oncomment=function(e,t,r){var s,n,i,o;this.endIndex=t,null===(n=(s=this.cbs).oncomment)||void 0===n||n.call(s,this.getSlice(e,t-r)),null===(o=(i=this.cbs).oncommentend)||void 0===o||o.call(i),this.startIndex=t+1},e.prototype.oncdata=function(e,t,r){var s,n,i,o,a,l,c,d,h,u;this.endIndex=t;var p=this.getSlice(e,t-r);this.options.xmlMode||this.options.recognizeCDATA?(null===(n=(s=this.cbs).oncdatastart)||void 0===n||n.call(s),null===(o=(i=this.cbs).ontext)||void 0===o||o.call(i,p),null===(l=(a=this.cbs).oncdataend)||void 0===l||l.call(a)):(null===(d=(c=this.cbs).oncomment)||void 0===d||d.call(c,"[CDATA[".concat(p,"]]")),null===(u=(h=this.cbs).oncommentend)||void 0===u||u.call(h)),this.startIndex=t+1},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var r=this.stack.length;r>0;this.cbs.onclosetag(this.stack[--r],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,r,s;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(s=(r=this.cbs).onparserinit)||void 0===s||s.call(r,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.getSlice=function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var r=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),r+=this.buffers[0].slice(0,t-this.bufferOffset);return r},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(e){var t,r;this.ended?null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))},e.prototype.end=function(e){var t,r;this.ended?null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();return Parser.Parser=m,Parser}var lib$4={},lib$3={},hasRequiredLib$5;function requireLib$5(){return hasRequiredLib$5||(hasRequiredLib$5=1,e=lib$3,Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,(r=t=e.ElementType||(e.ElementType={})).Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype",e.isTag=function(e){return e.type===t.Tag||e.type===t.Script||e.type===t.Style},e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype),lib$3;var e,t,r}var node$1={},hasRequiredNode$1,hasRequiredLib$4;function requireNode$1(){if(hasRequiredNode$1)return node$1;hasRequiredNode$1=1;var e=node$1&&node$1.__extends||/* @__PURE__ */function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),t=node$1&&node$1.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},t.apply(this,arguments)};Object.defineProperty(node$1,"__esModule",{value:!0}),node$1.cloneNode=node$1.hasChildren=node$1.isDocument=node$1.isDirective=node$1.isComment=node$1.isText=node$1.isCDATA=node$1.isTag=node$1.Element=node$1.Document=node$1.CDATA=node$1.NodeWithChildren=node$1.ProcessingInstruction=node$1.Comment=node$1.Text=node$1.DataNode=node$1.Node=void 0;var r=/* @__PURE__ */requireLib$5(),s=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),_(this,e)},e}();node$1.Node=s;var n=function(t){function r(e){var r=t.call(this)||this;return r.data=e,r}return e(r,t),Object.defineProperty(r.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),r}(s);node$1.DataNode=n;var i=function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Text,e}return e(s,t),Object.defineProperty(s.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),s}(n);node$1.Text=i;var o=function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Comment,e}return e(s,t),Object.defineProperty(s.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),s}(n);node$1.Comment=o;var a=function(t){function s(e,s){var n=t.call(this,s)||this;return n.name=e,n.type=r.ElementType.Directive,n}return e(s,t),Object.defineProperty(s.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),s}(n);node$1.ProcessingInstruction=a;var l=function(t){function r(e){var r=t.call(this)||this;return r.children=e,r}return e(r,t),Object.defineProperty(r.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),r}(s);node$1.NodeWithChildren=l;var c=function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.CDATA,e}return e(s,t),Object.defineProperty(s.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),s}(l);node$1.CDATA=c;var d=function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Root,e}return e(s,t),Object.defineProperty(s.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),s}(l);node$1.Document=d;var h=function(t){function s(e,s,n,i){void 0===n&&(n=[]),void 0===i&&(i="script"===e?r.ElementType.Script:"style"===e?r.ElementType.Style:r.ElementType.Tag);var o=t.call(this,n)||this;return o.name=e,o.attribs=s,o.type=i,o}return e(s,t),Object.defineProperty(s.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map(function(t){var r,s;return{name:t,value:e.attribs[t],namespace:null===(r=e["x-attribsNamespace"])||void 0===r?void 0:r[t],prefix:null===(s=e["x-attribsPrefix"])||void 0===s?void 0:s[t]}})},enumerable:!1,configurable:!0}),s}(l);function u(e){return(0,r.isTag)(e)}function p(e){return e.type===r.ElementType.CDATA}function g(e){return e.type===r.ElementType.Text}function m(e){return e.type===r.ElementType.Comment}function f(e){return e.type===r.ElementType.Directive}function v(e){return e.type===r.ElementType.Root}function _(e,r){var s;if(void 0===r&&(r=!1),g(e))s=new i(e.data);else if(m(e))s=new o(e.data);else if(u(e)){var n=r?y(e.children):[],l=new h(e.name,t({},e.attribs),n);n.forEach(function(e){return e.parent=l}),null!=e.namespace&&(l.namespace=e.namespace),e["x-attribsNamespace"]&&(l["x-attribsNamespace"]=t({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(l["x-attribsPrefix"]=t({},e["x-attribsPrefix"])),s=l}else if(p(e)){n=r?y(e.children):[];var _=new c(n);n.forEach(function(e){return e.parent=_}),s=_}else if(v(e)){n=r?y(e.children):[];var b=new d(n);n.forEach(function(e){return e.parent=b}),e["x-mode"]&&(b["x-mode"]=e["x-mode"]),s=b}else{if(!f(e))throw new Error("Not implemented yet: ".concat(e.type));var C=new a(e.name,e.data);null!=e["x-name"]&&(C["x-name"]=e["x-name"],C["x-publicId"]=e["x-publicId"],C["x-systemId"]=e["x-systemId"]),s=C}return s.startIndex=e.startIndex,s.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(s.sourceCodeLocation=e.sourceCodeLocation),s}function y(e){for(var t=e.map(function(e){return _(e,!0)}),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}return node$1.Element=h,node$1.isTag=u,node$1.isCDATA=p,node$1.isText=g,node$1.isComment=m,node$1.isDirective=f,node$1.isDocument=v,node$1.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},node$1.cloneNode=_,node$1}function requireLib$4(){return hasRequiredLib$4||(hasRequiredLib$4=1,function(e){var t=lib$4&&lib$4.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=lib$4&&lib$4.__exportStar||function(e,r){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||t(r,e,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var s=/* @__PURE__ */requireLib$5(),n=/* @__PURE__ */requireNode$1();r(/* @__PURE__ */requireNode$1(),e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function e(e,t,r){this.dom=[],this.root=new n.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(r=t,t=i),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:i,this.elementCB=null!=r?r:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new n.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var r=this.options.xmlMode?s.ElementType.Tag:void 0,i=new n.Element(e,t,void 0,r);this.addNode(i),this.tagStack.push(i)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===s.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var r=new n.Text(e);this.addNode(r),this.lastNode=r}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===s.ElementType.Comment)this.lastNode.data+=e;else{var t=new n.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new n.Text(""),t=new n.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var r=new n.ProcessingInstruction(e,t);this.addNode(r)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],r=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),r&&(e.prev=r,r.next=e),e.parent=t,this.lastNode=null},e}();e.DomHandler=o,e.default=o}(lib$4)),lib$4}var lib$2={},stringify={},lib$1={},lib={},encode={},encodeHtml={},hasRequiredEncodeHtml;function requireEncodeHtml(){if(hasRequiredEncodeHtml)return encodeHtml;function e(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}return hasRequiredEncodeHtml=1,Object.defineProperty(encodeHtml,"__esModule",{value:!0}),encodeHtml.default=new Map(/* @__PURE__ */e([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(/* @__PURE__ */e([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(/* @__PURE__ */e([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(/* @__PURE__ */e([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),encodeHtml}var _escape={},hasRequired_escape,hasRequiredEncode,hasRequiredLib$3;function require_escape(){return hasRequired_escape||(hasRequired_escape=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=/* @__PURE__ */new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function r(r){for(var s,n="",i=0;null!==(s=e.xmlReplacer.exec(r));){var o=s.index,a=r.charCodeAt(o),l=t.get(a);void 0!==l?(n+=r.substring(i,o)+l,i=o+1):(n+="".concat(r.substring(i,o),"&#x").concat((0,e.getCodePoint)(r,o).toString(16),";"),i=e.xmlReplacer.lastIndex+=Number(55296==(64512&a)))}return n+r.substr(i)}function s(e,t){return function(r){for(var s,n=0,i="";s=e.exec(r);)n!==s.index&&(i+=r.substring(n,s.index)),i+=t.get(s[0].charCodeAt(0)),n=s.index+1;return i+r.substring(n)}}e.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return 55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},e.encodeXML=r,e.escape=r,e.escapeUTF8=s(/[&<>'"]/g,t),e.escapeAttribute=s(/["&\u00A0]/g,/* @__PURE__ */new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=s(/[&<>\u00A0]/g,/* @__PURE__ */new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(_escape)),_escape}function requireEncode(){if(hasRequiredEncode)return encode;hasRequiredEncode=1;var e=encode&&encode.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(encode,"__esModule",{value:!0}),encode.encodeNonAsciiHTML=encode.encodeHTML=void 0;var t=e(/* @__PURE__ */requireEncodeHtml()),r=/* @__PURE__ */require_escape(),s=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function n(e,s){for(var n,i="",o=0;null!==(n=e.exec(s));){var a=n.index;i+=s.substring(o,a);var l=s.charCodeAt(a),c=t.default.get(l);if("object"==typeof c){if(a+1<s.length){var d=s.charCodeAt(a+1),h="number"==typeof c.n?c.n===d?c.o:void 0:c.n.get(d);if(void 0!==h){i+=h,o=e.lastIndex+=1;continue}}c=c.v}if(void 0!==c)i+=c,o=a+1;else{var u=(0,r.getCodePoint)(s,a);i+="&#x".concat(u.toString(16),";"),o=e.lastIndex+=Number(u!==l)}}return i+s.substr(o)}return encode.encodeHTML=function(e){return n(s,e)},encode.encodeNonAsciiHTML=function(e){return n(r.xmlReplacer,e)},encode}function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLAttribute=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.DecodingMode=e.EntityDecoder=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.EntityLevel=void 0;var t,r,s,n,i=/* @__PURE__ */requireDecode(),o=/* @__PURE__ */requireEncode(),a=/* @__PURE__ */require_escape();function l(e,r){if(void 0===r&&(r=t.XML),("number"==typeof r?r:r.level)===t.HTML){var s="object"==typeof r?r.mode:void 0;return(0,i.decodeHTML)(e,s)}return(0,i.decodeXML)(e)}(r=t=e.EntityLevel||(e.EntityLevel={}))[r.XML=0]="XML",r[r.HTML=1]="HTML",(n=s=e.EncodingMode||(e.EncodingMode={}))[n.UTF8=0]="UTF8",n[n.ASCII=1]="ASCII",n[n.Extensive=2]="Extensive",n[n.Attribute=3]="Attribute",n[n.Text=4]="Text",e.decode=l,e.decodeStrict=function(e,r){var s;void 0===r&&(r=t.XML);var n="number"==typeof r?{level:r}:r;return null!==(s=n.mode)&&void 0!==s||(n.mode=i.DecodingMode.Strict),l(e,n)},e.encode=function(e,r){void 0===r&&(r=t.XML);var n="number"==typeof r?{level:r}:r;return n.mode===s.UTF8?(0,a.escapeUTF8)(e):n.mode===s.Attribute?(0,a.escapeAttribute)(e):n.mode===s.Text?(0,a.escapeText)(e):n.level===t.HTML?n.mode===s.ASCII?(0,o.encodeNonAsciiHTML)(e):(0,o.encodeHTML)(e):(0,a.encodeXML)(e)};var c=/* @__PURE__ */require_escape();Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var d=/* @__PURE__ */requireEncode();Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return d.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return d.encodeHTML}});var h=/* @__PURE__ */requireDecode();Object.defineProperty(e,"EntityDecoder",{enumerable:!0,get:function(){return h.EntityDecoder}}),Object.defineProperty(e,"DecodingMode",{enumerable:!0,get:function(){return h.DecodingMode}}),Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return h.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTMLAttribute",{enumerable:!0,get:function(){return h.decodeHTMLAttribute}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return h.decodeXML}})}(lib)),lib}var foreignNames={},hasRequiredForeignNames,hasRequiredLib$2,hasRequiredStringify$1;function requireForeignNames(){return hasRequiredForeignNames||(hasRequiredForeignNames=1,Object.defineProperty(foreignNames,"__esModule",{value:!0}),foreignNames.attributeNames=foreignNames.elementNames=void 0,foreignNames.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]})),foreignNames.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}))),foreignNames}function requireLib$2(){if(hasRequiredLib$2)return lib$1;hasRequiredLib$2=1;var e=lib$1&&lib$1.__assign||function(){return e=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},e.apply(this,arguments)},t=lib$1&&lib$1.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=lib$1&&lib$1.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=lib$1&&lib$1.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(s,e,n);return r(s,e),s};Object.defineProperty(lib$1,"__esModule",{value:!0}),lib$1.render=void 0;var n=s(/* @__PURE__ */requireLib$5()),i=/* @__PURE__ */requireLib$3(),o=/* @__PURE__ */requireForeignNames(),a=/* @__PURE__ */new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function l(e){return e.replace(/"/g,"&quot;")}var c=/* @__PURE__ */new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function d(e,t){void 0===t&&(t={});for(var r=("length"in e?e:[e]),s="",n=0;n<r.length;n++)s+=h(r[n],t);return s}function h(t,r){switch(t.type){case n.Root:return d(t.children,r);case n.Doctype:case n.Directive:return"<".concat(t.data,">");case n.Comment:return function(e){return"\x3c!--".concat(e.data,"--\x3e")}(t);case n.CDATA:return function(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}(t);case n.Script:case n.Style:case n.Tag:return function(t,r){var s;"foreign"===r.xmlMode&&(t.name=null!==(s=o.elementNames.get(t.name))&&void 0!==s?s:t.name,t.parent&&u.has(t.parent.name)&&(r=e(e({},r),{xmlMode:!1})));!r.xmlMode&&p.has(t.name)&&(r=e(e({},r),{xmlMode:"foreign"}));var n="<".concat(t.name),a=function(e,t){var r;if(e){var s=!1===(null!==(r=t.encodeEntities)&&void 0!==r?r:t.decodeEntities)?l:t.xmlMode||"utf8"!==t.encodeEntities?i.encodeXML:i.escapeAttribute;return Object.keys(e).map(function(r){var n,i,a=null!==(n=e[r])&&void 0!==n?n:"";return"foreign"===t.xmlMode&&(r=null!==(i=o.attributeNames.get(r))&&void 0!==i?i:r),t.emptyAttrs||t.xmlMode||""!==a?"".concat(r,'="').concat(s(a),'"'):r}).join(" ")}}(t.attribs,r);a&&(n+=" ".concat(a));0===t.children.length&&(r.xmlMode?!1!==r.selfClosingTags:r.selfClosingTags&&c.has(t.name))?(r.xmlMode||(n+=" "),n+="/>"):(n+=">",t.children.length>0&&(n+=d(t.children,r)),!r.xmlMode&&c.has(t.name)||(n+="</".concat(t.name,">")));return n}(t,r);case n.Text:return function(e,t){var r,s=e.data||"";!1===(null!==(r=t.encodeEntities)&&void 0!==r?r:t.decodeEntities)||!t.xmlMode&&e.parent&&a.has(e.parent.name)||(s=t.xmlMode||"utf8"!==t.encodeEntities?(0,i.encodeXML)(s):(0,i.escapeText)(s));return s}(t,r)}}lib$1.render=d,lib$1.default=d;var u=/* @__PURE__ */new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),p=/* @__PURE__ */new Set(["svg","math"]);return lib$1}function requireStringify$1(){if(hasRequiredStringify$1)return stringify;hasRequiredStringify$1=1;var e=stringify&&stringify.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(stringify,"__esModule",{value:!0}),stringify.getOuterHTML=n,stringify.getInnerHTML=function(e,r){return(0,t.hasChildren)(e)?e.children.map(function(e){return n(e,r)}).join(""):""},stringify.getText=function e(r){return Array.isArray(r)?r.map(e).join(""):(0,t.isTag)(r)?"br"===r.name?"\n":e(r.children):(0,t.isCDATA)(r)?e(r.children):(0,t.isText)(r)?r.data:""},stringify.textContent=function e(r){if(Array.isArray(r))return r.map(e).join("");if((0,t.hasChildren)(r)&&!(0,t.isComment)(r))return e(r.children);return(0,t.isText)(r)?r.data:""},stringify.innerText=function e(r){if(Array.isArray(r))return r.map(e).join("");if((0,t.hasChildren)(r)&&(r.type===s.ElementType.Tag||(0,t.isCDATA)(r)))return e(r.children);return(0,t.isText)(r)?r.data:""};var t=/* @__PURE__ */requireLib$4(),r=e(/* @__PURE__ */requireLib$2()),s=/* @__PURE__ */requireLib$5();function n(e,t){return(0,r.default)(e,t)}return stringify}var traversal={},hasRequiredTraversal;function requireTraversal(){if(hasRequiredTraversal)return traversal;hasRequiredTraversal=1,Object.defineProperty(traversal,"__esModule",{value:!0}),traversal.getChildren=t,traversal.getParent=r,traversal.getSiblings=function(e){var s=r(e);if(null!=s)return t(s);var n=[e],i=e.prev,o=e.next;for(;null!=i;)n.unshift(i),i=i.prev;for(;null!=o;)n.push(o),o=o.next;return n},traversal.getAttributeValue=function(e,t){var r;return null===(r=e.attribs)||void 0===r?void 0:r[t]},traversal.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},traversal.getName=function(e){return e.name},traversal.nextElementSibling=function(t){var r=t.next;for(;null!==r&&!(0,e.isTag)(r);)r=r.next;return r},traversal.prevElementSibling=function(t){var r=t.prev;for(;null!==r&&!(0,e.isTag)(r);)r=r.prev;return r};var e=/* @__PURE__ */requireLib$4();function t(t){return(0,e.hasChildren)(t)?t.children:[]}function r(e){return e.parent||null}return traversal}var manipulation={},hasRequiredManipulation;function requireManipulation(){if(hasRequiredManipulation)return manipulation;function e(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,r=t.lastIndexOf(e);r>=0&&t.splice(r,1)}e.next=null,e.prev=null,e.parent=null}return hasRequiredManipulation=1,Object.defineProperty(manipulation,"__esModule",{value:!0}),manipulation.removeElement=e,manipulation.replaceElement=function(e,t){var r=t.prev=e.prev;r&&(r.next=t);var s=t.next=e.next;s&&(s.prev=t);var n=t.parent=e.parent;if(n){var i=n.children;i[i.lastIndexOf(e)]=t,e.parent=null}},manipulation.appendChild=function(t,r){if(e(r),r.next=null,r.parent=t,t.children.push(r)>1){var s=t.children[t.children.length-2];s.next=r,r.prev=s}else r.prev=null},manipulation.append=function(t,r){e(r);var s=t.parent,n=t.next;if(r.next=n,r.prev=t,t.next=r,r.parent=s,n){if(n.prev=r,s){var i=s.children;i.splice(i.lastIndexOf(n),0,r)}}else s&&s.children.push(r)},manipulation.prependChild=function(t,r){if(e(r),r.parent=t,r.prev=null,1!==t.children.unshift(r)){var s=t.children[1];s.prev=r,r.next=s}else r.next=null},manipulation.prepend=function(t,r){e(r);var s=t.parent;if(s){var n=s.children;n.splice(n.indexOf(t),0,r)}t.prev&&(t.prev.next=r);r.parent=s,r.prev=t.prev,r.next=t,t.prev=r},manipulation}var querying={},hasRequiredQuerying;function requireQuerying(){if(hasRequiredQuerying)return querying;hasRequiredQuerying=1,Object.defineProperty(querying,"__esModule",{value:!0}),querying.filter=function(e,r,s,n){void 0===s&&(s=!0);void 0===n&&(n=1/0);return t(e,Array.isArray(r)?r:[r],s,n)},querying.find=t,querying.findOneChild=function(e,t){return t.find(e)},querying.findOne=function t(r,s,n){void 0===n&&(n=!0);for(var i=Array.isArray(s)?s:[s],o=0;o<i.length;o++){var a=i[o];if((0,e.isTag)(a)&&r(a))return a;if(n&&(0,e.hasChildren)(a)&&a.children.length>0){var l=t(r,a.children,!0);if(l)return l}}return null},querying.existsOne=function t(r,s){return(Array.isArray(s)?s:[s]).some(function(s){return(0,e.isTag)(s)&&r(s)||(0,e.hasChildren)(s)&&t(r,s.children)})},querying.findAll=function(t,r){for(var s=[],n=[Array.isArray(r)?r:[r]],i=[0];;)if(i[0]>=n[0].length){if(1===n.length)return s;n.shift(),i.shift()}else{var o=n[0][i[0]++];(0,e.isTag)(o)&&t(o)&&s.push(o),(0,e.hasChildren)(o)&&o.children.length>0&&(i.unshift(0),n.unshift(o.children))}};var e=/* @__PURE__ */requireLib$4();function t(t,r,s,n){for(var i=[],o=[Array.isArray(r)?r:[r]],a=[0];;)if(a[0]>=o[0].length){if(1===a.length)return i;o.shift(),a.shift()}else{var l=o[0][a[0]++];if(t(l)&&(i.push(l),--n<=0))return i;s&&(0,e.hasChildren)(l)&&l.children.length>0&&(a.unshift(0),o.unshift(l.children))}}return querying}var legacy={},hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1,Object.defineProperty(legacy,"__esModule",{value:!0}),legacy.testElement=function(e,t){var r=i(e);return!r||r(t)},legacy.getElements=function(e,r,s,n){void 0===n&&(n=1/0);var o=i(e);return o?(0,t.filter)(o,r,s,n):[]},legacy.getElementById=function(e,r,n){void 0===n&&(n=!0);Array.isArray(r)||(r=[r]);return(0,t.findOne)(s("id",e),r,n)},legacy.getElementsByTagName=function(e,s,n,i){void 0===n&&(n=!0);void 0===i&&(i=1/0);return(0,t.filter)(r.tag_name(e),s,n,i)},legacy.getElementsByClassName=function(e,r,n,i){void 0===n&&(n=!0);void 0===i&&(i=1/0);return(0,t.filter)(s("class",e),r,n,i)},legacy.getElementsByTagType=function(e,s,n,i){void 0===n&&(n=!0);void 0===i&&(i=1/0);return(0,t.filter)(r.tag_type(e),s,n,i)};var e=/* @__PURE__ */requireLib$4(),t=/* @__PURE__ */requireQuerying(),r={tag_name:function(t){return"function"==typeof t?function(r){return(0,e.isTag)(r)&&t(r.name)}:"*"===t?e.isTag:function(r){return(0,e.isTag)(r)&&r.name===t}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(t){return"function"==typeof t?function(r){return(0,e.isText)(r)&&t(r.data)}:function(r){return(0,e.isText)(r)&&r.data===t}}};function s(t,r){return"function"==typeof r?function(s){return(0,e.isTag)(s)&&r(s.attribs[t])}:function(s){return(0,e.isTag)(s)&&s.attribs[t]===r}}function n(e,t){return function(r){return e(r)||t(r)}}function i(e){var t=Object.keys(e).map(function(t){var n=e[t];return Object.prototype.hasOwnProperty.call(r,t)?r[t](n):s(t,n)});return 0===t.length?null:t.reduce(n)}return legacy}var helpers={},hasRequiredHelpers;function requireHelpers(){if(hasRequiredHelpers)return helpers;hasRequiredHelpers=1,Object.defineProperty(helpers,"__esModule",{value:!0}),helpers.DocumentPosition=void 0,helpers.removeSubsets=function(e){var t=e.length;for(;--t>=0;){var r=e[t];if(t>0&&e.lastIndexOf(r,t-1)>=0)e.splice(t,1);else for(var s=r.parent;s;s=s.parent)if(e.includes(s)){e.splice(t,1);break}}return e},helpers.compareDocumentPosition=s,helpers.uniqueSort=function(t){return(t=t.filter(function(e,t,r){return!r.includes(e,t+1)})).sort(function(t,r){var n=s(t,r);return n&e.PRECEDING?-1:n&e.FOLLOWING?1:0}),t};var e,t,r=/* @__PURE__ */requireLib$4();function s(t,s){var n=[],i=[];if(t===s)return 0;for(var o=(0,r.hasChildren)(t)?t:t.parent;o;)n.unshift(o),o=o.parent;for(o=(0,r.hasChildren)(s)?s:s.parent;o;)i.unshift(o),o=o.parent;for(var a=Math.min(n.length,i.length),l=0;l<a&&n[l]===i[l];)l++;if(0===l)return e.DISCONNECTED;var c=n[l-1],d=c.children,h=n[l],u=i[l];return d.indexOf(h)>d.indexOf(u)?c===s?e.FOLLOWING|e.CONTAINED_BY:e.FOLLOWING:c===t?e.PRECEDING|e.CONTAINS:e.PRECEDING}return(t=e||(helpers.DocumentPosition=e={}))[t.DISCONNECTED=1]="DISCONNECTED",t[t.PRECEDING=2]="PRECEDING",t[t.FOLLOWING=4]="FOLLOWING",t[t.CONTAINS=8]="CONTAINS",t[t.CONTAINED_BY=16]="CONTAINED_BY",helpers}var feeds={},hasRequiredFeeds,hasRequiredLib$1,hasRequiredLib,escapeStringRegexp,hasRequiredEscapeStringRegexp;function requireFeeds(){if(hasRequiredFeeds)return feeds;hasRequiredFeeds=1,Object.defineProperty(feeds,"__esModule",{value:!0}),feeds.getFeed=function(e){var r=i(l,e);return r?"feed"===r.name?function(e){var r,s=e.children,l={type:"atom",items:(0,t.getElementsByTagName)("entry",s).map(function(e){var t,r=e.children,s={media:n(r)};a(s,"id","id",r),a(s,"title","title",r);var l=null===(t=i("link",r))||void 0===t?void 0:t.attribs.href;l&&(s.link=l);var c=o("summary",r)||o("content",r);c&&(s.description=c);var d=o("updated",r);return d&&(s.pubDate=new Date(d)),s})};a(l,"id","id",s),a(l,"title","title",s);var c=null===(r=i("link",s))||void 0===r?void 0:r.attribs.href;c&&(l.link=c);a(l,"description","subtitle",s);var d=o("updated",s);d&&(l.updated=new Date(d));return a(l,"author","email",s,!0),l}(r):function(e){var r,s,l=null!==(s=null===(r=i("channel",e.children))||void 0===r?void 0:r.children)&&void 0!==s?s:[],c={type:e.name.substr(0,3),id:"",items:(0,t.getElementsByTagName)("item",e.children).map(function(e){var t=e.children,r={media:n(t)};a(r,"id","guid",t),a(r,"title","title",t),a(r,"link","link",t),a(r,"description","description",t);var s=o("pubDate",t)||o("dc:date",t);return s&&(r.pubDate=new Date(s)),r})};a(c,"title","title",l),a(c,"link","link",l),a(c,"description","description",l);var d=o("lastBuildDate",l);d&&(c.updated=new Date(d));return a(c,"author","managingEditor",l,!0),c}(r):null};var e=/* @__PURE__ */requireStringify$1(),t=/* @__PURE__ */requireLegacy();var r=["url","type","lang"],s=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function n(e){return(0,t.getElementsByTagName)("media:content",e).map(function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},i=0,o=r;i<o.length;i++){t[c=o[i]]&&(n[c]=t[c])}for(var a=0,l=s;a<l.length;a++){var c;t[c=l[a]]&&(n[c]=parseInt(t[c],10))}return t.expression&&(n.expression=t.expression),n})}function i(e,r){return(0,t.getElementsByTagName)(e,r,!0,1)[0]}function o(r,s,n){return void 0===n&&(n=!1),(0,e.textContent)((0,t.getElementsByTagName)(r,s,n,1)).trim()}function a(e,t,r,s,n){void 0===n&&(n=!1);var i=o(r,s,n);i&&(e[t]=i)}function l(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}return feeds}function requireLib$1(){return hasRequiredLib$1||(hasRequiredLib$1=1,function(e){var t=lib$2&&lib$2.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=lib$2&&lib$2.__exportStar||function(e,r){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(r,s)||t(r,e,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,r(/* @__PURE__ */requireStringify$1(),e),r(/* @__PURE__ */requireTraversal(),e),r(/* @__PURE__ */requireManipulation(),e),r(/* @__PURE__ */requireQuerying(),e),r(/* @__PURE__ */requireLegacy(),e),r(/* @__PURE__ */requireHelpers(),e),r(/* @__PURE__ */requireFeeds(),e);var s=/* @__PURE__ */requireLib$4();Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return s.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return s.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return s.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return s.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return s.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return s.hasChildren}})}(lib$2)),lib$2}function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(e){var t=lib$5&&lib$5.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),r=lib$5&&lib$5.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=lib$5&&lib$5.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(s,e,n);return r(s,e),s},n=lib$5&&lib$5.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DefaultHandler=e.DomHandler=e.Parser=void 0;var i=/* @__PURE__ */requireParser$1(),o=/* @__PURE__ */requireParser$1();Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return o.Parser}});var a=/* @__PURE__ */requireLib$4(),l=/* @__PURE__ */requireLib$4();function c(e,t){var r=new a.DomHandler(void 0,t);return new i.Parser(r,t).end(e),r.root}function d(e,t){return c(e,t).children}Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}}),e.parseDocument=c,e.parseDOM=d,e.createDomStream=function(e,t,r){var s=new a.DomHandler(e,t,r);return new i.Parser(s,t)};var h=/* @__PURE__ */requireTokenizer();Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return n(h).default}}),e.ElementType=s(/* @__PURE__ */requireLib$5());var u=/* @__PURE__ */requireLib$1(),p=/* @__PURE__ */requireLib$1();Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return p.getFeed}});var g={xmlMode:!0};e.parseFeed=function(e,t){return void 0===t&&(t=g),(0,u.getFeed)(d(e,t))},e.DomUtils=s(/* @__PURE__ */requireLib$1())}(lib$5)),lib$5}function requireEscapeStringRegexp(){return hasRequiredEscapeStringRegexp?escapeStringRegexp:(hasRequiredEscapeStringRegexp=1,escapeStringRegexp=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")})}var isPlainObject={},hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject;function e(e){return"[object Object]"===Object.prototype.toString.call(e)}return hasRequiredIsPlainObject=1,Object.defineProperty(isPlainObject,"__esModule",{value:!0}),isPlainObject.isPlainObject=function(t){var r,s;return!1!==e(t)&&(void 0===(r=t.constructor)||!1!==e(s=r.prototype)&&!1!==s.hasOwnProperty("isPrototypeOf"))},isPlainObject}var parseSrcset$1={exports:{}},parseSrcset=parseSrcset$1.exports,hasRequiredParseSrcset;function requireParseSrcset(){return hasRequiredParseSrcset||(hasRequiredParseSrcset=1,t=parseSrcset,r=function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function r(t){var r,s=t.exec(e.substring(m));if(s)return r=s[0],m+=r.length,r}for(var s,n,i,o,a,l=e.length,c=/^[ \t\n\r\u000c]+/,d=/^[, \t\n\r\u000c]+/,h=/^[^ \t\n\r\u000c]+/,u=/[,]+$/,p=/^\d+$/,g=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m=0,f=[];;){if(r(d),m>=l)return f;s=r(h),n=[],","===s.slice(-1)?(s=s.replace(u,""),_()):v()}function v(){for(r(c),i="",o="in descriptor";;){if(a=e.charAt(m),"in descriptor"===o)if(t(a))i&&(n.push(i),i="",o="after descriptor");else{if(","===a)return m+=1,i&&n.push(i),void _();if("("===a)i+=a,o="in parens";else{if(""===a)return i&&n.push(i),void _();i+=a}}else if("in parens"===o)if(")"===a)i+=a,o="in descriptor";else{if(""===a)return n.push(i),void _();i+=a}else if("after descriptor"===o)if(t(a));else{if(""===a)return void _();o="in descriptor",m-=1}m+=1}}function _(){var t,r,i,o,a,l,c,d,h,u=!1,m={};for(o=0;o<n.length;o++)l=(a=n[o])[a.length-1],c=a.substring(0,a.length-1),d=parseInt(c,10),h=parseFloat(c),p.test(c)&&"w"===l?((t||r)&&(u=!0),0===d?u=!0:t=d):g.test(c)&&"x"===l?((t||r||i)&&(u=!0),h<0?u=!0:r=h):p.test(c)&&"h"===l?((i||r)&&(u=!0),0===d?u=!0:i=d):u=!0;u?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+a+"'."):(m.url=s,t&&(m.w=t),r&&(m.d=r),i&&(m.h=i),f.push(m))}}},(e=parseSrcset$1).exports?e.exports=r():t.parseSrcset=r()),parseSrcset$1.exports;var e,t,r}var picocolors_browser={exports:{}},hasRequiredPicocolors_browser;function requirePicocolors_browser(){if(hasRequiredPicocolors_browser)return picocolors_browser.exports;hasRequiredPicocolors_browser=1;var e=String,t=function(){return{isColorSupported:!1,reset:e,bold:e,dim:e,italic:e,underline:e,inverse:e,hidden:e,strikethrough:e,black:e,red:e,green:e,yellow:e,blue:e,magenta:e,cyan:e,white:e,gray:e,bgBlack:e,bgRed:e,bgGreen:e,bgYellow:e,bgBlue:e,bgMagenta:e,bgCyan:e,bgWhite:e,blackBright:e,redBright:e,greenBright:e,yellowBright:e,blueBright:e,magentaBright:e,cyanBright:e,whiteBright:e,bgBlackBright:e,bgRedBright:e,bgGreenBright:e,bgYellowBright:e,bgBlueBright:e,bgMagentaBright:e,bgCyanBright:e,bgWhiteBright:e}};return picocolors_browser.exports=t(),picocolors_browser.exports.createColors=t,picocolors_browser.exports}const __viteBrowserExternal={},__viteBrowserExternal$1=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=/* @__PURE__ */getAugmentedNamespace(__viteBrowserExternal$1);var cssSyntaxError,hasRequiredCssSyntaxError,stringifier,hasRequiredStringifier,stringify_1,hasRequiredStringify;function requireCssSyntaxError(){if(hasRequiredCssSyntaxError)return cssSyntaxError;hasRequiredCssSyntaxError=1;let e=/* @__PURE__ */requirePicocolors_browser(),t=require$$2;class r extends Error{constructor(e,t,s,n,i,o){super(e),this.name="CssSyntaxError",this.reason=e,i&&(this.file=i),n&&(this.source=n),o&&(this.plugin=o),void 0!==t&&void 0!==s&&("number"==typeof t?(this.line=t,this.column=s):(this.line=t.line,this.column=t.column,this.endLine=s.line,this.endColumn=s.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,r)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(r){if(!this.source)return"";let s=this.source;null==r&&(r=e.isColorSupported);let n=e=>e,i=e=>e,o=e=>e;if(r){let{bold:r,gray:s,red:a}=e.createColors(!0);i=e=>r(a(e)),n=e=>s(e),t&&(o=e=>t(e))}let a=s.split(/\r?\n/),l=Math.max(this.line-3,0),c=Math.min(this.line+2,a.length),d=String(c).length;return a.slice(l,c).map((e,t)=>{let r=l+1+t,s=" "+(" "+r).slice(-d)+" | ";if(r===this.line){if(e.length>160){let t=20,r=Math.max(0,this.column-t),a=Math.max(this.column+t,this.endColumn+t),l=e.slice(r,a),c=n(s.replace(/\d/g," "))+e.slice(0,Math.min(this.column-1,t-1)).replace(/[^\t]/g," ");return i(">")+n(s)+o(l)+"\n "+c+i("^")}let t=n(s.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return i(">")+n(s)+o(e)+"\n "+t+i("^")}return" "+n(s)+o(e)}).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}return cssSyntaxError=r,r.default=r,cssSyntaxError}function requireStringifier(){if(hasRequiredStringifier)return stringifier;hasRequiredStringifier=1;const e={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class t{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,s=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:s&&(r+=" "),e.nodes)this.block(e,r+s);else{let n=(e.raws.between||"")+(t?";":"");this.builder(r+s+n,e)}}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let s=e.parent,n=0;for(;s&&"root"!==s.type;)n+=1,s=s.parent;if(r.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<n;e++)r+=t}return r}block(e,t){let r,s=this.raw(e,"between","beforeOpen");this.builder(t+s+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let r=this.raw(e,"semicolon");for(let s=0;s<e.nodes.length;s++){let n=e.nodes[s],i=this.raw(n,"before");i&&this.builder(i),this.stringify(n,t!==s||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),s=e.prop+r+this.rawValue(e,"value");e.important&&(s+=e.raws.important||" !important"),t&&(s+=";"),this.builder(s,e)}document(e){this.body(e)}raw(t,r,s){let n;if(s||(s=r),r&&(n=t.raws[r],void 0!==n))return n;let i=t.parent;if("before"===s){if(!i||"root"===i.type&&i.first===t)return"";if(i&&"document"===i.type)return""}if(!i)return e[s];let o=t.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[s])return o.rawCache[s];if("before"===s||"after"===s)return this.beforeAfter(t,s);{let e="raw"+((a=s)[0].toUpperCase()+a.slice(1));this[e]?n=this[e](o,t):o.walk(e=>{if(n=e.raws[r],void 0!==n)return!1})}var a;return void 0===n&&(n=e[s]),o.rawCache[s]=n,n}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return t=r.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let s=r.parent;if(s&&s!==e&&s.parent&&s.parent===e&&void 0!==r.raws.before){let e=r.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1}),t}rawValue(e,t){let r=e[t],s=e.raws[t];return s&&s.value===r?s.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}return stringifier=t,t.default=t,stringifier}function requireStringify(){if(hasRequiredStringify)return stringify_1;hasRequiredStringify=1;let e=requireStringifier();function t(t,r){new e(r).stringify(t)}return stringify_1=t,t.default=t,stringify_1}var symbols={},hasRequiredSymbols,node,hasRequiredNode,comment,hasRequiredComment,declaration,hasRequiredDeclaration,container,hasRequiredContainer,atRule,hasRequiredAtRule,document$1,hasRequiredDocument,nonSecure,hasRequiredNonSecure,previousMap,hasRequiredPreviousMap,input,hasRequiredInput,root,hasRequiredRoot,list_1,hasRequiredList,rule,hasRequiredRule,fromJSON_1,hasRequiredFromJSON,mapGenerator,hasRequiredMapGenerator,tokenize,hasRequiredTokenize,parser,hasRequiredParser,parse_1,hasRequiredParse,warning,hasRequiredWarning,result,hasRequiredResult,lazyResult,hasRequiredLazyResult,noWorkResult,hasRequiredNoWorkResult,processor,hasRequiredProcessor,postcss_1,hasRequiredPostcss,sanitizeHtml_1,hasRequiredSanitizeHtml;function requireSymbols(){return hasRequiredSymbols||(hasRequiredSymbols=1,symbols.isClean=/* @__PURE__ */Symbol("isClean"),symbols.my=/* @__PURE__ */Symbol("my")),symbols}function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;let e=requireCssSyntaxError(),t=requireStringifier(),r=requireStringify(),{isClean:s,my:n}=requireSymbols();function i(e,t){let r=new e.constructor;for(let s in e){if(!Object.prototype.hasOwnProperty.call(e,s))continue;if("proxyCache"===s)continue;let n=e[s],o=typeof n;"parent"===s&&"object"===o?t&&(r[s]=t):"source"===s?r[s]=n:Array.isArray(n)?r[s]=n.map(e=>i(e,r)):("object"===o&&null!==n&&(n=i(n)),r[s]=n)}return r}function o(e,t){if(t&&void 0!==t.offset)return t.offset;let r=1,s=1,n=0;for(let i=0;i<e.length;i++){if(s===t.line&&r===t.column){n=i;break}"\n"===e[i]?(r=1,s+=1):r+=1}return n}class a{get proxyOf(){return this}constructor(e={}){this.raws={},this[s]=!1,this[n]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let r of e[t])"function"==typeof r.clone?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=i(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(t,r={}){if(this.source){let{end:e,start:s}=this.rangeBy(r);return this.source.input.error(t,{column:s.column,line:s.line},{column:e.column,line:e.line},r)}return new e(t)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markClean(){this[s]=!0}markDirty(){if(this[s]){this[s]=!1;let e=this;for(;e=e.parent;)e[s]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e={}){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let r="document"in this.source.input?this.source.input.document:this.source.input.css,s=r.slice(o(r,this.source.start),o(r,this.source.end)).indexOf(e.word);-1!==s&&(t=this.positionInside(s))}return t}positionInside(e){let t=this.source.start.column,r=this.source.start.line,s="document"in this.source.input?this.source.input.document:this.source.input.css,n=o(s,this.source.start),i=n+e;for(let o=n;o<i;o++)"\n"===s[o]?(t=1,r+=1):t+=1;return{column:t,line:r,offset:i}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e={}){let t="document"in this.source.input?this.source.input.document:this.source.input.css,r={column:this.source.start.column,line:this.source.start.line,offset:o(t,this.source.start)},s=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:"number"==typeof this.source.end.offset?this.source.end.offset:o(t,this.source.end)+1}:{column:r.column+1,line:r.line,offset:r.offset+1};if(e.word){let n=t.slice(o(t,this.source.start),o(t,this.source.end)).indexOf(e.word);-1!==n&&(r=this.positionInside(n),s=this.positionInside(n+e.word.length))}else e.start?r={column:e.start.column,line:e.start.line,offset:o(t,e.start)}:e.index&&(r=this.positionInside(e.index)),e.end?s={column:e.end.column,line:e.end.line,offset:o(t,e.end)}:"number"==typeof e.endIndex?s=this.positionInside(e.endIndex):e.index&&(s=this.positionInside(e.index+1));return(s.line<r.line||s.line===r.line&&s.column<=r.column)&&(s={column:r.column+1,line:r.line,offset:r.offset+1}),{end:s,start:r}}raw(e,r){return(new t).raw(this,e,r)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let s of e)s===this?r=!0:r?(this.parent.insertAfter(t,s),t=s):this.parent.insertBefore(t,s);r||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let r={},s=null==t;t=t||/* @__PURE__ */new Map;let n=0;for(let i in this){if(!Object.prototype.hasOwnProperty.call(this,i))continue;if("parent"===i||"proxyCache"===i)continue;let e=this[i];if(Array.isArray(e))r[i]=e.map(e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e);else if("object"==typeof e&&e.toJSON)r[i]=e.toJSON(null,t);else if("source"===i){if(null==e)continue;let s=t.get(e.input);null==s&&(s=n,t.set(e.input,n),n++),r[i]={end:e.end,inputId:s,start:e.start}}else r[i]=e}return s&&(r.inputs=[...t.keys()].map(e=>e.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=r){e.stringify&&(e=e.stringify);let t="";return e(this,e=>{t+=e}),t}warn(e,t,r={}){let s={node:this};for(let n in r)s[n]=r[n];return e.warn(t,s)}}return node=a,a.default=a,node}function requireComment(){if(hasRequiredComment)return comment;hasRequiredComment=1;let e=requireNode();class t extends e{constructor(e){super(e),this.type="comment"}}return comment=t,t.default=t,comment}function requireDeclaration(){if(hasRequiredDeclaration)return declaration;hasRequiredDeclaration=1;let e=requireNode();class t extends e{get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}}return declaration=t,t.default=t,declaration}function requireContainer(){if(hasRequiredContainer)return container;hasRequiredContainer=1;let t,r,s,n,i=requireComment(),o=requireDeclaration(),a=requireNode(),{isClean:l,my:c}=requireSymbols();function d(e){return e.map(e=>(e.nodes&&(e.nodes=d(e.nodes)),delete e.source,e))}function h(e){if(e[l]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)h(t)}class u extends a{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,r,s=this.getIterator();for(;this.indexes[s]<this.proxyOf.nodes.length&&(t=this.indexes[s],r=e(this.proxyOf.nodes[t],t),!1!==r);)this.indexes[s]+=1;return delete this.indexes[s],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...r)=>e[t](...r.map(e=>"function"==typeof e?(t,r)=>e(t.toProxy(),r):e)):"every"===t||"some"===t?r=>e[t]((e,...t)=>r(e.toProxy(),...t)):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map(e=>e.toProxy()):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r,s=this.index(e),n=this.normalize(t,this.proxyOf.nodes[s]).reverse();s=this.index(e);for(let i of n)this.proxyOf.nodes.splice(s+1,0,i);for(let i in this.indexes)r=this.indexes[i],s<r&&(this.indexes[i]=r+n.length);return this.markDirty(),this}insertBefore(e,t){let r,s=this.index(e),n=0===s&&"prepend",i=this.normalize(t,this.proxyOf.nodes[s],n).reverse();s=this.index(e);for(let o of i)this.proxyOf.nodes.splice(s,0,o);for(let o in this.indexes)r=this.indexes[o],s<=r&&(this.indexes[o]=r+i.length);return this.markDirty(),this}normalize(e,s){if("string"==typeof e)e=d(r(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){e=e.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===e.type&&"document"!==this.type){e=e.nodes.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new o(e)]}else if(e.selector||e.selectors)e=[new n(e)];else if(e.name)e=[new t(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new i(e)]}return e.map(e=>(e[c]||u.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[l]&&h(e),e.raws||(e.raws={}),void 0===e.raws.before&&s&&void 0!==s.raws.before&&(e.raws.before=s.raws.before.replace(/\S/g,"")),e.parent=this.proxyOf,e))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(s=>{t.props&&!t.props.includes(s.prop)||t.fast&&!s.value.includes(t.fast)||(s.value=s.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(t){return this.each((r,s)=>{let n;try{n=t(r,s)}catch(e){throw r.addToError(e)}return!1!==n&&r.walk&&(n=r.walk(t)),n})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,s)=>{if("atrule"===r.type&&e.test(r.name))return t(r,s)}):this.walk((r,s)=>{if("atrule"===r.type&&r.name===e)return t(r,s)}):(t=e,this.walk((e,r)=>{if("atrule"===e.type)return t(e,r)}))}walkComments(e){return this.walk((t,r)=>{if("comment"===t.type)return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,s)=>{if("decl"===r.type&&e.test(r.prop))return t(r,s)}):this.walk((r,s)=>{if("decl"===r.type&&r.prop===e)return t(r,s)}):(t=e,this.walk((e,r)=>{if("decl"===e.type)return t(e,r)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,s)=>{if("rule"===r.type&&e.test(r.selector))return t(r,s)}):this.walk((r,s)=>{if("rule"===r.type&&r.selector===e)return t(r,s)}):(t=e,this.walk((e,r)=>{if("rule"===e.type)return t(e,r)}))}}return u.registerParse=e=>{r=e},u.registerRule=e=>{n=e},u.registerAtRule=e=>{t=e},u.registerRoot=e=>{s=e},container=u,u.default=u,u.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,t.prototype):"rule"===e.type?Object.setPrototypeOf(e,n.prototype):"decl"===e.type?Object.setPrototypeOf(e,o.prototype):"comment"===e.type?Object.setPrototypeOf(e,i.prototype):"root"===e.type&&Object.setPrototypeOf(e,s.prototype),e[c]=!0,e.nodes&&e.nodes.forEach(e=>{u.rebuild(e)})},container}function requireAtRule(){if(hasRequiredAtRule)return atRule;hasRequiredAtRule=1;let e=requireContainer();class t extends e{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}return atRule=t,t.default=t,e.registerAtRule(t),atRule}function requireDocument(){if(hasRequiredDocument)return document$1;hasRequiredDocument=1;let e,t,r=requireContainer();class s extends r{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(r={}){return new e(new t,this,r).stringify()}}return s.registerLazyResult=t=>{e=t},s.registerProcessor=e=>{t=e},document$1=s,s.default=s,document$1}function requireNonSecure(){if(hasRequiredNonSecure)return nonSecure;hasRequiredNonSecure=1;return nonSecure={nanoid:(e=21)=>{let t="",r=0|e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(r=t)=>{let s="",n=0|r;for(;n--;)s+=e[Math.random()*e.length|0];return s}}}function requirePreviousMap(){if(hasRequiredPreviousMap)return previousMap;hasRequiredPreviousMap=1;let{existsSync:e,readFileSync:t}=require$$2,{dirname:r,join:s}=require$$2,{SourceMapConsumer:n,SourceMapGenerator:i}=require$$2;class o{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let s=t.map?t.map.prev:void 0,n=this.loadMap(t.from,s);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=r(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new n(this.text)),this.consumerCache}decodeInline(e){let t=e.match(/^data:application\/json;charset=utf-?8,/)||e.match(/^data:application\/json,/);if(t)return decodeURIComponent(e.substr(t[0].length));let r=e.match(/^data:application\/json;charset=utf-?8;base64,/)||e.match(/^data:application\/json;base64,/);if(r)return s=e.substr(r[0].length),Buffer?Buffer.from(s,"base64").toString():window.atob(s);var s;let n=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+n)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let r=e.lastIndexOf(t.pop()),s=e.indexOf("*/",r);r>-1&&s>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,s)))}loadFile(s){if(this.root=r(s),e(s))return this.mapFile=s,t(s,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof n)return i.fromSourceMap(t).toString();if(t instanceof i)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw new Error("Unable to load previous source map: "+r.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=s(r(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return previousMap=o,o.default=o,previousMap}function requireInput(){if(hasRequiredInput)return input;hasRequiredInput=1;let{nanoid:e}=/* @__PURE__ */requireNonSecure(),{isAbsolute:t,resolve:r}=require$$2,{SourceMapConsumer:s,SourceMapGenerator:n}=require$$2,{fileURLToPath:i,pathToFileURL:o}=require$$2,a=requireCssSyntaxError(),l=requirePreviousMap(),c=require$$2,d=/* @__PURE__ */Symbol("lineToIndexCache"),h=Boolean(s&&n),u=Boolean(r&&t);function p(e){if(e[d])return e[d];let t=e.css.split("\n"),r=new Array(t.length),s=0;for(let n=0,i=t.length;n<i;n++)r[n]=s,s+=t[n].length+1;return e[d]=r,r}class g{get from(){return this.file||this.id}constructor(s,n={}){if(null==s||"object"==typeof s&&!s.toString)throw new Error(`PostCSS received ${s} instead of CSS string`);if(this.css=s.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,n.document&&(this.document=n.document.toString()),n.from&&(!u||/^\w+:\/\//.test(n.from)||t(n.from)?this.file=n.from:this.file=r(n.from)),u&&h){let e=new l(this.css,n);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+e(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,s={}){let n,i,l,c,d;if(t&&"object"==typeof t){let e=t,s=r;if("number"==typeof e.offset){c=e.offset;let s=this.fromOffset(c);t=s.line,r=s.col}else t=e.line,r=e.column,c=this.fromLineAndColumn(t,r);if("number"==typeof s.offset){l=s.offset;let e=this.fromOffset(l);i=e.line,n=e.col}else i=s.line,n=s.column,l=this.fromLineAndColumn(s.line,s.column)}else if(r)c=this.fromLineAndColumn(t,r);else{c=t;let e=this.fromOffset(c);t=e.line,r=e.col}let h=this.origin(t,r,i,n);return d=h?new a(e,void 0===h.endLine?h.line:{column:h.column,line:h.line},void 0===h.endLine?h.column:{column:h.endColumn,line:h.endLine},h.source,h.file,s.plugin):new a(e,void 0===i?t:{column:r,line:t},void 0===i?r:{column:n,line:i},this.css,this.file,s.plugin),d.input={column:r,endColumn:n,endLine:i,endOffset:l,line:t,offset:c,source:this.css},this.file&&(o&&(d.input.url=o(this.file).toString()),d.input.file=this.file),d}fromLineAndColumn(e,t){return p(this)[e-1]+t-1}fromOffset(e){let t=p(this),r=0;if(e>=t[t.length-1])r=t.length-1;else{let s,n=t.length-2;for(;r<n;)if(s=r+(n-r>>1),e<t[s])n=s-1;else{if(!(e>=t[s+1])){r=s;break}r=s+1}}return{col:e-t[r]+1,line:r+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:r(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,r,s,n){if(!this.map)return!1;let a,l,c=this.map.consumer(),d=c.originalPositionFor({column:r,line:e});if(!d.source)return!1;"number"==typeof s&&(a=c.originalPositionFor({column:n,line:s})),l=t(d.source)?o(d.source):new URL(d.source,this.map.consumer().sourceRoot||o(this.map.mapFile));let h={column:d.column,endColumn:a&&a.column,endLine:a&&a.line,line:d.line,url:l.toString()};if("file:"===l.protocol){if(!i)throw new Error("file: protocol is not available in this PostCSS build");h.file=i(l)}let u=c.sourceContentFor(d.source);return u&&(h.source=u),h}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}return input=g,g.default=g,c&&c.registerInput&&c.registerInput(g),input}function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1;let e,t,r=requireContainer();class s extends r{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let s=super.normalize(e);if(t)if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let n of s)n.raws.before=t.raws.before;return s}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(r={}){return new e(new t,this,r).stringify()}}return s.registerLazyResult=t=>{e=t},s.registerProcessor=e=>{t=e},root=s,s.default=s,r.registerRoot(s),root}function requireList(){if(hasRequiredList)return list_1;hasRequiredList=1;let e={comma:t=>e.split(t,[","],!0),space:t=>e.split(t,[" ","\n","\t"]),split(e,t,r){let s=[],n="",i=!1,o=0,a=!1,l="",c=!1;for(let d of e)c?c=!1:"\\"===d?c=!0:a?d===l&&(a=!1):'"'===d||"'"===d?(a=!0,l=d):"("===d?o+=1:")"===d?o>0&&(o-=1):0===o&&t.includes(d)&&(i=!0),i?(""!==n&&s.push(n.trim()),n="",i=!1):n+=d;return(r||""!==n)&&s.push(n.trim()),s}};return list_1=e,e.default=e,list_1}function requireRule(){if(hasRequiredRule)return rule;hasRequiredRule=1;let e=requireContainer(),t=requireList();class r extends e{get selectors(){return t.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}}return rule=r,r.default=r,e.registerRule(r),rule}function requireFromJSON(){if(hasRequiredFromJSON)return fromJSON_1;hasRequiredFromJSON=1;let e=requireAtRule(),t=requireComment(),r=requireDeclaration(),s=requireInput(),n=requirePreviousMap(),i=requireRoot(),o=requireRule();function a(l,c){if(Array.isArray(l))return l.map(e=>a(e));let{inputs:d,...h}=l;if(d){c=[];for(let e of d){let t={...e,__proto__:s.prototype};t.map&&(t.map={...t.map,__proto__:n.prototype}),c.push(t)}}if(h.nodes&&(h.nodes=l.nodes.map(e=>a(e,c))),h.source){let{inputId:e,...t}=h.source;h.source=t,null!=e&&(h.source.input=c[e])}if("root"===h.type)return new i(h);if("decl"===h.type)return new r(h);if("rule"===h.type)return new o(h);if("comment"===h.type)return new t(h);if("atrule"===h.type)return new e(h);throw new Error("Unknown node type: "+l.type)}return fromJSON_1=a,a.default=a,fromJSON_1}function requireMapGenerator(){if(hasRequiredMapGenerator)return mapGenerator;hasRequiredMapGenerator=1;let{dirname:e,relative:t,resolve:r,sep:s}=require$$2,{SourceMapConsumer:n,SourceMapGenerator:i}=require$$2,{pathToFileURL:o}=require$$2,a=requireInput(),l=Boolean(n&&i),c=Boolean(e&&r&&t&&s);return mapGenerator=class{constructor(e,t,r,s){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=s,this.originalCSS=s,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=/* @__PURE__ */new Map,this.memoizedPaths=/* @__PURE__ */new Map,this.memoizedURLs=/* @__PURE__ */new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let t of this.previous()){let r,s=this.toUrl(this.path(t.file)),i=t.root||e(t.file);!1===this.mapOpts.sourcesContent?(r=new n(t.text),r.sourcesContent&&(r.sourcesContent=null)):r=t.consumer(),this.map.applySourceMap(r,s,this.toUrl(this.path(i)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),c&&l&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=i.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new i({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new i({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,r=1,s=1,n="<no source>",o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(i,a,l)=>{if(this.css+=i,a&&"end"!==l&&(o.generated.line=r,o.generated.column=s-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=n,o.original.line=1,o.original.column=0,this.map.addMapping(o))),t=i.match(/\n/g),t?(r+=t.length,e=i.lastIndexOf("\n"),s=i.length-e):s+=i.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=r,o.generated.column=s-2,this.map.addMapping(o)):(o.source=n,o.original.line=1,o.original.column=0,o.generated.line=r,o.generated.column=s-1,this.map.addMapping(o)))}})}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(e=>e.annotation))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(e=>e.inline))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(e=>e.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(s){if(this.mapOpts.absolute)return s;if(60===s.charCodeAt(0))return s;if(/^\w+:\/\//.test(s))return s;let n=this.memoizedPaths.get(s);if(n)return n;let i=this.opts.to?e(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(i=e(r(i,this.mapOpts.annotation)));let o=t(i,s);return this.memoizedPaths.set(s,o),o}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new a(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let s=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(s,t.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(o){let t=o(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===s&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}}}function requireTokenize(){if(hasRequiredTokenize)return tokenize;hasRequiredTokenize=1;const e="'".charCodeAt(0),t='"'.charCodeAt(0),r="\\".charCodeAt(0),s="/".charCodeAt(0),n="\n".charCodeAt(0),i=" ".charCodeAt(0),o="\f".charCodeAt(0),a="\t".charCodeAt(0),l="\r".charCodeAt(0),c="[".charCodeAt(0),d="]".charCodeAt(0),h="(".charCodeAt(0),u=")".charCodeAt(0),p="{".charCodeAt(0),g="}".charCodeAt(0),m=";".charCodeAt(0),f="*".charCodeAt(0),v=":".charCodeAt(0),_="@".charCodeAt(0),y=/[\t\n\f\r "#'()/;[\\\]{}]/g,b=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,C=/.[\r\n"'(/\\]/,w=/[\da-f]/i;return tokenize=function(S,x={}){let P,E,k,A,R,I,T,M,$,L,D=S.css.valueOf(),O=x.ignoreErrors,N=D.length,j=0,B=[],q=[];function F(e){throw S.error("Unclosed "+e,j)}return{back:function(e){q.push(e)},endOfFile:function(){return 0===q.length&&j>=N},nextToken:function(S){if(q.length)return q.pop();if(j>=N)return;let x=!!S&&S.ignoreUnclosed;switch(P=D.charCodeAt(j),P){case n:case i:case a:case l:case o:A=j;do{A+=1,P=D.charCodeAt(A)}while(P===i||P===n||P===a||P===l||P===o);I=["space",D.slice(j,A)],j=A-1;break;case c:case d:case p:case g:case v:case m:case u:{let e=String.fromCharCode(P);I=[e,e,j];break}case h:if(L=B.length?B.pop()[1]:"",$=D.charCodeAt(j+1),"url"===L&&$!==e&&$!==t&&$!==i&&$!==n&&$!==a&&$!==o&&$!==l){A=j;do{if(T=!1,A=D.indexOf(")",A+1),-1===A){if(O||x){A=j;break}F("bracket")}for(M=A;D.charCodeAt(M-1)===r;)M-=1,T=!T}while(T);I=["brackets",D.slice(j,A+1),j,A],j=A}else A=D.indexOf(")",j+1),E=D.slice(j,A+1),-1===A||C.test(E)?I=["(","(",j]:(I=["brackets",E,j,A],j=A);break;case e:case t:R=P===e?"'":'"',A=j;do{if(T=!1,A=D.indexOf(R,A+1),-1===A){if(O||x){A=j+1;break}F("string")}for(M=A;D.charCodeAt(M-1)===r;)M-=1,T=!T}while(T);I=["string",D.slice(j,A+1),j,A],j=A;break;case _:y.lastIndex=j+1,y.test(D),A=0===y.lastIndex?D.length-1:y.lastIndex-2,I=["at-word",D.slice(j,A+1),j,A],j=A;break;case r:for(A=j,k=!0;D.charCodeAt(A+1)===r;)A+=1,k=!k;if(P=D.charCodeAt(A+1),k&&P!==s&&P!==i&&P!==n&&P!==a&&P!==l&&P!==o&&(A+=1,w.test(D.charAt(A)))){for(;w.test(D.charAt(A+1));)A+=1;D.charCodeAt(A+1)===i&&(A+=1)}I=["word",D.slice(j,A+1),j,A],j=A;break;default:P===s&&D.charCodeAt(j+1)===f?(A=D.indexOf("*/",j+2)+1,0===A&&(O||x?A=D.length:F("comment")),I=["comment",D.slice(j,A+1),j,A],j=A):(b.lastIndex=j+1,b.test(D),A=0===b.lastIndex?D.length-1:b.lastIndex-2,I=["word",D.slice(j,A+1),j,A],B.push(I),j=A)}return j++,I},position:function(){return j}}}}function requireParser(){if(hasRequiredParser)return parser;hasRequiredParser=1;let e=requireAtRule(),t=requireComment(),r=requireDeclaration(),s=requireRoot(),n=requireRule(),i=requireTokenize();const o={empty:!0,space:!0};return parser=class{constructor(e){this.input=e,this.root=new s,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(t){let r,s,n,i=new e;i.name=t[1].slice(1),""===i.name&&this.unnamedAtrule(i,t),this.init(i,t[2]);let o=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(r=(t=this.tokenizer.nextToken())[0],"("===r||"["===r?c.push("("===r?")":"]"):"{"===r&&c.length>0?c.push("}"):r===c[c.length-1]&&c.pop(),0===c.length){if(";"===r){i.source.end=this.getPosition(t[2]),i.source.end.offset++,this.semicolon=!0;break}if("{"===r){a=!0;break}if("}"===r){if(l.length>0){for(n=l.length-1,s=l[n];s&&"space"===s[0];)s=l[--n];s&&(i.source.end=this.getPosition(s[3]||s[2]),i.source.end.offset++)}this.end(t);break}l.push(t)}else l.push(t);if(this.tokenizer.endOfFile()){o=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(i.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(i,"params",l),o&&(t=l[l.length-1],i.source.end=this.getPosition(t[3]||t[2]),i.source.end.offset++,this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),a&&(i.nodes=[],this.current=i)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let r,s=0;for(let n=t-1;n>=0&&(r=e[n],"space"===r[0]||(s+=1,2!==s));n--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}colon(e){let t,r,s,n=0;for(let[i,o]of e.entries()){if(r=o,s=r[0],"("===s&&(n+=1),")"===s&&(n-=1),0===n&&":"===s){if(t){if("word"===t[0]&&"progid"===t[1])continue;return i}this.doubleColon(r)}t=r}return!1}comment(e){let r=new t;this.init(r,e[2]),r.source.end=this.getPosition(e[3]||e[2]),r.source.end.offset++;let s=e[1].slice(2,-2);if(/^\s*$/.test(s))r.text="",r.raws.left=s,r.raws.right="";else{let e=s.match(/^(\s*)([^]*\S)(\s*)$/);r.text=e[2],r.raws.left=e[1],r.raws.right=e[3]}}createTokenizer(){this.tokenizer=i(this.input)}decl(e,t){let s=new r;this.init(s,e[0][2]);let n,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(i[3]||i[2]||function(e){for(let t=e.length-1;t>=0;t--){let r=e[t],s=r[3]||r[2];if(s)return s}}(e)),s.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;s.prop+=e.shift()[1]}for(s.raws.between="";e.length;){if(n=e.shift(),":"===n[0]){s.raws.between+=n[1];break}"word"===n[0]&&/\w/.test(n[1])&&this.unknownWord([n]),s.raws.between+=n[1]}"_"!==s.prop[0]&&"*"!==s.prop[0]||(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let o,a=[];for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)a.push(e.shift());this.precheckMissedSemicolon(e);for(let r=e.length-1;r>=0;r--){if(n=e[r],"!important"===n[1].toLowerCase()){s.important=!0;let t=this.stringFrom(e,r);t=this.spacesFromEnd(e)+t," !important"!==t&&(s.raws.important=t);break}if("important"===n[1].toLowerCase()){let t=e.slice(0),n="";for(let e=r;e>0;e--){let r=t[e][0];if(n.trim().startsWith("!")&&"space"!==r)break;n=t.pop()[1]+n}n.trim().startsWith("!")&&(s.important=!0,s.raws.important=n,e=t)}if("space"!==n[0]&&"comment"!==n[0])break}e.some(e=>"space"!==e[0]&&"comment"!==e[0])&&(s.raws.between+=a.map(e=>e[1]).join(""),a=[]),this.raw(s,"value",a.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new n;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="",t.source.end=this.getPosition(e[2]),t.source.end.offset+=t.raws.ownSemicolon.length)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,r=null,s=!1,n=null,i=[],o=e[1].startsWith("--"),a=[],l=e;for(;l;){if(r=l[0],a.push(l),"("===r||"["===r)n||(n=l),i.push("("===r?")":"]");else if(o&&s&&"{"===r)n||(n=l),i.push("}");else if(0===i.length){if(";"===r){if(s)return void this.decl(a,o);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}":"===r&&(s=!0)}else r===i[i.length-1]&&(i.pop(),0===i.length&&(n=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),i.length>0&&this.unclosedBracket(n),t&&s){if(!o)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,o)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,s){let n,i,a,l,c=r.length,d="",h=!0;for(let u=0;u<c;u+=1)n=r[u],i=n[0],"space"!==i||u!==c-1||s?"comment"===i?(l=r[u-1]?r[u-1][0]:"empty",a=r[u+1]?r[u+1][0]:"empty",o[l]||o[a]||","===d.slice(-1)?h=!1:d+=n[1]):d+=n[1]:h=!1;if(!h){let s=r.reduce((e,t)=>e+t[1],"");e.raws[t]={raw:s,value:d}}e[t]=d}rule(e){e.pop();let t=new n;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let s=t;s<e.length;s++)r+=e[s][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}}function requireParse(){if(hasRequiredParse)return parse_1;hasRequiredParse=1;let t=requireContainer(),r=requireInput(),s=requireParser();function n(t,n){let i=new r(t,n),o=new s(i);try{o.parse()}catch(e){throw e}return o.root}return parse_1=n,n.default=n,t.registerParse(n),parse_1}function requireWarning(){if(hasRequiredWarning)return warning;hasRequiredWarning=1;class e{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return warning=e,e.default=e,warning}function requireResult(){if(hasRequiredResult)return result;hasRequiredResult=1;let e=requireWarning();class t{get content(){return this.css}constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css="",this.map=void 0}toString(){return this.css}warn(t,r={}){r.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(r.plugin=this.lastPlugin.postcssPlugin);let s=new e(t,r);return this.messages.push(s),s}warnings(){return this.messages.filter(e=>"warning"===e.type)}}return result=t,t.default=t,result}function requireLazyResult(){if(hasRequiredLazyResult)return lazyResult;hasRequiredLazyResult=1;let t=requireContainer(),r=requireDocument(),s=requireMapGenerator(),n=requireParse(),i=requireResult(),o=requireRoot(),a=requireStringify(),{isClean:l,my:c}=requireSymbols();const d={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},h={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},u={Once:!0,postcssPlugin:!0,prepare:!0};function p(e){return"object"==typeof e&&"function"==typeof e.then}function g(e){let t=!1,r=d[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function m(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:g(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function f(e){return e[l]=!1,e.nodes&&e.nodes.forEach(e=>f(e)),e}let v={};class _{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(e,r,s){let o;if(this.stringified=!1,this.processed=!1,"object"!=typeof r||null===r||"root"!==r.type&&"document"!==r.type)if(r instanceof _||r instanceof i)o=f(r.root),r.map&&(void 0===s.map&&(s.map={}),s.map.inline||(s.map.inline=!1),s.map.prev=r.map);else{let e=n;s.syntax&&(e=s.syntax.parse),s.parser&&(e=s.parser),e.parse&&(e=e.parse);try{o=e(r,s)}catch(a){this.processed=!0,this.error=a}o&&!o[c]&&t.rebuild(o)}else o=f(r);this.result=new i(e,o,s),this.helpers={...v,postcss:v,result:this.result},this.plugins=this.processor.plugins.map(e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?r.postcssVersion:(e.plugin=r.postcssPlugin,e.setMessage())}catch(err){console&&console.error&&console.error(err)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"==typeof t)for(let r in t){if(!h[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!u[r])if("object"==typeof t[r])for(let s in t[r])e(t,"*"===s?r:r+"-"+s.toLowerCase(),t[r][s]);else"function"==typeof t[r]&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let r=this.plugins[e],s=this.runOnRoot(r);if(p(s))try{await s}catch(t){throw this.handleError(t)}}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[l];){t[l]=!0;let r=[m(t)];for(;r.length>0;){let t=this.visitTick(r);if(p(t))try{await t}catch(e){let s=r[r.length-1].node;throw this.handleError(e,s)}}}if(this.listeners.OnceExit)for(let[r,s]of this.listeners.OnceExit){this.result.lastPlugin=r;try{if("document"===t.type){let e=t.nodes.map(e=>s(e,this.helpers));await Promise.all(e)}else await s(t,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));return p(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=a;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new s(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(p(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[l];)e[l]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(t,r){for(let[s,n]of t){let t;this.result.lastPlugin=s;try{t=n(r,this.helpers)}catch(e){throw this.handleError(e,r.proxyOf)}if("root"!==r.type&&"document"!==r.type&&!r.parent)return!0;if(p(t))throw this.getAsyncError()}}visitTick(t){let r=t[t.length-1],{node:s,visitors:n}=r;if("root"!==s.type&&"document"!==s.type&&!s.parent)return void t.pop();if(n.length>0&&r.visitorIndex<n.length){let[t,i]=n[r.visitorIndex];r.visitorIndex+=1,r.visitorIndex===n.length&&(r.visitors=[],r.visitorIndex=0),this.result.lastPlugin=t;try{return i(s.toProxy(),this.helpers)}catch(e){throw this.handleError(e,s)}}if(0!==r.iterator){let e,n=r.iterator;for(;e=s.nodes[s.indexes[n]];)if(s.indexes[n]+=1,!e[l])return e[l]=!0,void t.push(m(e));r.iterator=0,delete s.indexes[n]}let i=r.events;for(;r.eventIndex<i.length;){let e=i[r.eventIndex];if(r.eventIndex+=1,0===e)return void(s.nodes&&s.nodes.length&&(s[l]=!0,r.iterator=s.getIterator()));if(this.listeners[e])return void(r.visitors=this.listeners[e])}t.pop()}walkSync(e){e[l]=!0;let t=g(e);for(let r of t)if(0===r)e.nodes&&e.each(e=>{e[l]||this.walkSync(e)});else{let t=this.listeners[r];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}}return _.registerPostcss=e=>{v=e},lazyResult=_,_.default=_,o.registerLazyResult(_),r.registerLazyResult(_),lazyResult}function requireNoWorkResult(){if(hasRequiredNoWorkResult)return noWorkResult;hasRequiredNoWorkResult=1;let e=requireMapGenerator(),t=requireParse();const r=requireResult();let s=requireStringify();class n{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,r=t;try{e=r(this._css,this._opts)}catch(s){this.error=s}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(t,n,i){let o;n=n.toString(),this.stringified=!1,this._processor=t,this._css=n,this._opts=i,this._map=void 0;let a=s;this.result=new r(this._processor,o,this._opts),this.result.css=n;let l=this;Object.defineProperty(this.result,"root",{get:()=>l.root});let c=new e(a,o,this._opts,n);if(c.isMap()){let[e,t]=c.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else c.clearAnnotation(),this.result.css=c.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}}return noWorkResult=n,n.default=n,noWorkResult}function requireProcessor(){if(hasRequiredProcessor)return processor;hasRequiredProcessor=1;let e=requireDocument(),t=requireLazyResult(),r=requireNoWorkResult(),s=requireRoot();class n{constructor(e=[]){this.version="8.5.6",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)t.push(r);else if("function"==typeof r)t.push(r);else if("object"!=typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin");return t}process(e,s={}){return this.plugins.length||s.parser||s.stringifier||s.syntax?new t(this,e,s):new r(this,e,s)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}return processor=n,n.default=n,s.registerProcessor(n),e.registerProcessor(n),processor}function requirePostcss(){if(hasRequiredPostcss)return postcss_1;hasRequiredPostcss=1;let e=requireAtRule(),t=requireComment(),r=requireContainer(),s=requireCssSyntaxError(),n=requireDeclaration(),i=requireDocument(),o=requireFromJSON(),a=requireInput(),l=requireLazyResult(),c=requireList(),d=requireNode(),h=requireParse(),u=requireProcessor(),p=requireResult(),g=requireRoot(),m=requireRule(),f=requireStringify(),v=requireWarning();function _(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new u(e)}return _.plugin=function(e,t){let r,s=!1;function n(...r){console&&console.warn&&!s&&(s=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));let n=t(...r);return n.postcssPlugin=e,n.postcssVersion=(new u).version,n}return Object.defineProperty(n,"postcss",{get:()=>(r||(r=n()),r)}),n.process=function(e,t,r){return _([n(r)]).process(e,t)},n},_.stringify=f,_.parse=h,_.fromJSON=o,_.list=c,_.comment=e=>new t(e),_.atRule=t=>new e(t),_.decl=e=>new n(e),_.rule=e=>new m(e),_.root=e=>new g(e),_.document=e=>new i(e),_.CssSyntaxError=s,_.Declaration=n,_.Container=r,_.Processor=u,_.Document=i,_.Comment=t,_.Warning=v,_.AtRule=e,_.Result=p,_.Input=a,_.Rule=m,_.Root=g,_.Node=d,l.registerPostcss(_),postcss_1=_,_.default=_,postcss_1}function requireSanitizeHtml(){if(hasRequiredSanitizeHtml)return sanitizeHtml_1;hasRequiredSanitizeHtml=1;const t=/* @__PURE__ */requireLib(),r=requireEscapeStringRegexp(),{isPlainObject:s}=requireIsPlainObject(),n=requireCjs(),i=requireParseSrcset(),{parse:o}=requirePostcss(),a=["img","audio","video","picture","svg","object","map","iframe","embed"],l=["script","style"];function c(e,t){e&&Object.keys(e).forEach(function(r){t(e[r],r)})}function d(e,t){return{}.hasOwnProperty.call(e,t)}function h(e,t){const r=[];return c(e,function(e){t(e)&&r.push(e)}),r}sanitizeHtml_1=p;const u=/^[^\0\t\n\f\r /<=>]+$/;function p(m,f,v){if(null==m)return"";"number"==typeof m&&(m=m.toString());let _="",y="";function b(e,t){const r=this;this.tag=e,this.attribs=t||{},this.tagPosition=_.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(T.length){T[T.length-1].text+=r.text}},this.updateParentNodeMediaChildren=function(){if(T.length&&a.includes(this.tag)){T[T.length-1].mediaChildren.push(this.tag)}}}(f=Object.assign({},p.defaults,f)).parser=Object.assign({},g,f.parser);const C=function(e){return!1===f.allowedTags||(f.allowedTags||[]).indexOf(e)>-1};l.forEach(function(e){C(e)&&!f.allowVulnerableTags&&console.warn(`\n\n Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)});const w=f.nonTextTags||["script","style","textarea","option"];let S,x;f.allowedAttributes&&(S={},x={},c(f.allowedAttributes,function(e,t){S[t]=[];const s=[];e.forEach(function(e){"string"==typeof e&&e.indexOf("*")>=0?s.push(r(e).replace(/\\\*/g,".*")):S[t].push(e)}),s.length&&(x[t]=new RegExp("^("+s.join("|")+")$"))}));const P={},E={},k={};c(f.allowedClasses,function(e,t){if(S&&(d(S,t)||(S[t]=[]),S[t].push("class")),P[t]=e,Array.isArray(e)){const s=[];P[t]=[],k[t]=[],e.forEach(function(e){"string"==typeof e&&e.indexOf("*")>=0?s.push(r(e).replace(/\\\*/g,".*")):e instanceof RegExp?k[t].push(e):P[t].push(e)}),s.length&&(E[t]=new RegExp("^("+s.join("|")+")$"))}});const A={};let R,I,T,M,$,L,D;c(f.transformTags,function(e,t){let r;"function"==typeof e?r=e:"string"==typeof e&&(r=p.simpleTransform(e)),"*"===t?R=r:A[t]=r});let O=!1;j();const N=new t.Parser({onopentag:function(t,r){if(f.enforceHtmlBoundary&&"html"===t&&j(),L)return void D++;const a=new b(t,r);T.push(a);let l=!1;const p=!!a.text;let g;if(d(A,t)&&(g=A[t](t,r),a.attribs=r=g.attribs,void 0!==g.text&&(a.innerText=g.text),t!==g.tagName&&(a.name=t=g.tagName,$[I]=g.tagName)),R&&(g=R(t,r),a.attribs=r=g.attribs,t!==g.tagName&&(a.name=t=g.tagName,$[I]=g.tagName)),(!C(t)||"recursiveEscape"===f.disallowedTagsMode&&!function(e){for(const t in e)if(d(e,t))return!1;return!0}(M)||null!=f.nestingLimit&&I>=f.nestingLimit)&&(l=!0,M[I]=!0,"discard"===f.disallowedTagsMode&&-1!==w.indexOf(t)&&(L=!0,D=1),M[I]=!0),I++,l){if("discard"===f.disallowedTagsMode)return;y=_,_=""}_+="<"+t,"script"===t&&(f.allowedScriptHostnames||f.allowedScriptDomains)&&(a.innerText=""),(!S||d(S,t)||S["*"])&&c(r,function(r,l){if(!u.test(l))return void delete a.attribs[l];if(""===r&&!f.allowedEmptyAttributes.includes(l)&&(f.nonBooleanAttributes.includes(l)||f.nonBooleanAttributes.includes("*")))return void delete a.attribs[l];let c=!1;if(!S||d(S,t)&&-1!==S[t].indexOf(l)||S["*"]&&-1!==S["*"].indexOf(l)||d(x,t)&&x[t].test(l)||x["*"]&&x["*"].test(l))c=!0;else if(S&&S[t])for(const e of S[t])if(s(e)&&e.name&&e.name===l){c=!0;let t="";if(!0===e.multiple){const s=r.split(" ");for(const r of s)-1!==e.values.indexOf(r)&&(""===t?t=r:t+=" "+r)}else e.values.indexOf(r)>=0&&(t=r);r=t}if(c){if(-1!==f.allowedSchemesAppliedToAttributes.indexOf(l)&&q(t,r))return void delete a.attribs[l];if("script"===t&&"src"===l){let t=!0;try{const e=F(r);if(f.allowedScriptHostnames||f.allowedScriptDomains){const r=(f.allowedScriptHostnames||[]).find(function(t){return t===e.url.hostname}),s=(f.allowedScriptDomains||[]).find(function(t){return e.url.hostname===t||e.url.hostname.endsWith(`.${t}`)});t=r||s}}catch(e){t=!1}if(!t)return void delete a.attribs[l]}if("iframe"===t&&"src"===l){let t=!0;try{const e=F(r);if(e.isRelativeUrl)t=d(f,"allowIframeRelativeUrls")?f.allowIframeRelativeUrls:!f.allowedIframeHostnames&&!f.allowedIframeDomains;else if(f.allowedIframeHostnames||f.allowedIframeDomains){const r=(f.allowedIframeHostnames||[]).find(function(t){return t===e.url.hostname}),s=(f.allowedIframeDomains||[]).find(function(t){return e.url.hostname===t||e.url.hostname.endsWith(`.${t}`)});t=r||s}}catch(e){t=!1}if(!t)return void delete a.attribs[l]}if("srcset"===l)try{let e=i(r);if(e.forEach(function(e){q("srcset",e.url)&&(e.evil=!0)}),e=h(e,function(e){return!e.evil}),!e.length)return void delete a.attribs[l];r=h(e,function(e){return!e.evil}).map(function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")}).join(", "),a.attribs[l]=r}catch(e){return void delete a.attribs[l]}if("class"===l){const e=P[t],s=P["*"],i=E[t],o=k[t],c=[i,E["*"]].concat(o).filter(function(e){return e});if(!(r=H(r,e&&s?n(e,s):e||s,c)).length)return void delete a.attribs[l]}if("style"===l)if(f.parseStyleAttributes)try{const e=function(e,t){if(!t)return e;const r=e.nodes[0];let s;s=t[r.selector]&&t["*"]?n(t[r.selector],t["*"]):t[r.selector]||t["*"];s&&(e.nodes[0].nodes=r.nodes.reduce(function(e){return function(t,r){if(d(e,r.prop)){e[r.prop].some(function(e){return e.test(r.value)})&&t.push(r)}return t}}(s),[]));return e}(o(t+" {"+r+"}",{map:!1}),f.allowedStyles);if(r=function(e){return e.nodes[0].nodes.reduce(function(e,t){return e.push(`${t.prop}:${t.value}${t.important?" !important":""}`),e},[]).join(";")}(e),0===r.length)return void delete a.attribs[l]}catch(e){return"undefined"!=typeof window&&console.warn('Failed to parse "'+t+" {"+r+"}\", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547"),void delete a.attribs[l]}else if(f.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.");_+=" "+l,r&&r.length?_+='="'+B(r,!0)+'"':f.allowedEmptyAttributes.includes(l)&&(_+='=""')}else delete a.attribs[l]}),-1!==f.selfClosing.indexOf(t)?_+=" />":(_+=">",!a.innerText||p||f.textFilter||(_+=B(a.innerText),O=!0)),l&&(_=y+B(_),y="")},ontext:function(e){if(L)return;const t=T[T.length-1];let r;if(t&&(r=t.tag,e=void 0!==t.innerText?t.innerText:e),"discard"!==f.disallowedTagsMode||"script"!==r&&"style"!==r){const t=B(e,!1);f.textFilter&&!O?_+=f.textFilter(t,r):O||(_+=t)}else _+=e;if(T.length){T[T.length-1].text+=e}},onclosetag:function(e,t){if(L){if(D--,D)return;L=!1}const r=T.pop();if(!r)return;if(r.tag!==e)return void T.push(r);L=!!f.enforceHtmlBoundary&&"html"===e,I--;const s=M[I];if(s){if(delete M[I],"discard"===f.disallowedTagsMode)return void r.updateParentNodeText();y=_,_=""}$[I]&&(e=$[I],delete $[I]),f.exclusiveFilter&&f.exclusiveFilter(r)?_=_.substr(0,r.tagPosition):(r.updateParentNodeMediaChildren(),r.updateParentNodeText(),-1!==f.selfClosing.indexOf(e)||t&&!C(e)&&["escape","recursiveEscape"].indexOf(f.disallowedTagsMode)>=0?s&&(_=y,y=""):(_+="</"+e+">",s&&(_=y+B(_),y=""),O=!1))}},f.parser);return N.write(m),N.end(),_;function j(){_="",I=0,T=[],M={},$={},L=!1,D=0}function B(e,t){return"string"!=typeof e&&(e+=""),f.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t&&(e=e.replace(/"/g,"&quot;")),e}function q(e,t){for(t=t.replace(/[\x00-\x20]+/g,"");;){const e=t.indexOf("\x3c!--");if(-1===e)break;const r=t.indexOf("--\x3e",e+4);if(-1===r)break;t=t.substring(0,e)+t.substring(r+3)}const r=t.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!r)return!!t.match(/^[/\\]{2}/)&&!f.allowProtocolRelative;const s=r[1].toLowerCase();return d(f.allowedSchemesByTag,e)?-1===f.allowedSchemesByTag[e].indexOf(s):!f.allowedSchemes||-1===f.allowedSchemes.indexOf(s)}function F(e){if((e=e.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let t="relative://relative-site";for(let s=0;s<100;s++)t+=`/${s}`;const r=new URL(e,t);return{isRelativeUrl:r&&"relative-site"===r.hostname&&"relative:"===r.protocol,url:r}}function H(e,t,r){return t?(e=e.split(/\s+/)).filter(function(e){return-1!==t.indexOf(e)||r.some(function(t){return t.test(e)})}).join(" "):e}}const g={decodeEntities:!0};return p.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},p.simpleTransform=function(e,t,r){return r=void 0===r||r,t=t||{},function(s,n){let i;if(r)for(i in t)n[i]=t[i];else n=t;return{tagName:e,attribs:n}}},sanitizeHtml_1}var sanitizeHtmlExports=/* @__PURE__ */requireSanitizeHtml();const sanitize=/* @__PURE__ */getDefaultExportFromCjs(sanitizeHtmlExports);class CssProp{static reg(e){return new RegExp("^"+e+"$","i")}}CssProp.N={integer:"[+-]?[0-9]+",integer_pos:"[+]?[0-9]+",integer_zero_ff:"([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",integer_non_zero:"[+-]?([1-9][0-9]*)",integer_pos_non_zero:"[+]?([1-9][0-9]*)",number:"[+-]?([0-9]*[.])?[0-9]+(e-?[0-9]*)?",number_pos:"[+]?([0-9]*[.])?[0-9]+(e-?[0-9]*)?",number_zero_hundred:"[+]?(([0-9]|[1-9][0-9])([.][0-9]+)?|100)",number_zero_one:"[+]?(1([.][0]+)?|0?([.][0-9]+)?)"},CssProp._B={angle:`(${CssProp.N.number}(deg|rad|grad|turn)|0)`,frequency:`${CssProp.N.number}(Hz|kHz)`,ident:String.raw`-?([_a-z]|[\xA0-\xFF]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\xA0-\xFF]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*`,len_or_perc:`(0|${CssProp.N.number}(px|em|rem|ex|in|cm|mm|pt|pc|%))`,length:`(${CssProp.N.number}(px|em|rem|ex|in|cm|mm|pt|pc)|0)`,length_pos:`(${CssProp.N.number_pos}(px|em|rem|ex|in|cm|mm|pt|pc)|0)`,percentage:`${CssProp.N.number}%`,percentage_pos:`${CssProp.N.number_pos}%`,percentage_zero_hundred:`${CssProp.N.number_zero_hundred}%`,string:String.raw`(\"([^\n\r\f\\"]|\\\n|\r\n|\r|\f|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*\")|(\'([^\n\r\f\\']|\\\n|\r\n|\r|\f|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*\')`,time:`${CssProp.N.number}(s|ms)`,url:"url\\(.*?\\)",z_index:"[+-]?[0-9]{1,7}"},CssProp._B1={flex:`(${CssProp.N.number}|${CssProp._B.len_or_perc}|none|auto)\\s*((${CssProp.N.number}|${CssProp._B.len_or_perc}|auto)\\s*){0,2}`,fixed_breadth:`${CssProp._B.len_or_perc}`,grid_line:`auto|${CssProp._B.ident}|(${CssProp.N.integer_non_zero}(\\s+${CssProp._B.ident})?)|(span\\s+(${CssProp.N.integer_pos_non_zero}|${CssProp._B.ident}))`,line_names:String.raw`\[\s*${CssProp._B.ident}(\s+${CssProp._B.ident})*\s*\]`},CssProp._B2={inflexible_breadth:`${CssProp._B.len_or_perc}|auto|min-content|max-content`,track_breadth:`${CssProp._B.len_or_perc}|${CssProp._B1.flex}|auto|min-content|max-content`},CssProp._B3={fixed_size:`${CssProp._B1.fixed_breadth}|minmax\\(\\s*${CssProp._B2.inflexible_breadth}\\s*,\\s*${CssProp._B1.fixed_breadth}\\s*\\)|minmax\\(\\s*${CssProp._B1.fixed_breadth}\\s*,\\s*${CssProp._B2.track_breadth}\\s*\\)`,track_size:`${CssProp._B2.track_breadth}|minmax\\(\\s*${CssProp._B2.inflexible_breadth}\\s*,\\s*${CssProp._B2.track_breadth}\\s*\\)|fit-content\\(\\s*(${CssProp._B.len_or_perc}\\s*)*\\)`},CssProp._B4={name_repeat:`repeat\\(\\s*(${CssProp.N.integer_pos_non_zero}|auto-fill)\\s*,\\s*(${CssProp._B1.line_names})+\\s*\\)`,auto_repeat:`repeat\\(\\s*(auto-fill|auto-fit)\\s*,\\s*((${CssProp._B1.line_names}\\s+)?${CssProp._B3.fixed_size}\\s*)+(${CssProp._B1.line_names})?\\s*\\)`,fixed_repeat:`repeat\\(\\s*(${CssProp.N.integer_pos_non_zero})\\s*,\\s*((${CssProp._B1.line_names}\\s+)?${CssProp._B3.fixed_size}\\s*)+(${CssProp._B1.line_names})?\\s*\\)`},CssProp._B5={auto_track_list:`(${CssProp._B1.line_names}\\s*)?(${CssProp._B3.fixed_size}|${CssProp._B4.fixed_repeat})*(${CssProp._B1.line_names}\\s*)?${CssProp._B4.auto_repeat}(${CssProp._B1.line_names}\\s*)?(${CssProp._B3.fixed_size}|${CssProp._B4.fixed_repeat})*(${CssProp._B1.line_names}\\s*)?`,explicit_track_list:`(${CssProp._B1.line_names}\\s*)?(${CssProp._B3.track_size})+(${CssProp._B1.line_names}\\s*)?`,track_list:`(${CssProp._B1.line_names}\\s*)?(${CssProp._B3.track_size}|${CssProp._B4.name_repeat})+(${CssProp._B1.line_names}\\s*)?`},CssProp._B6={grid_template_rows:`none|${CssProp._B5.track_list}|${CssProp._B5.auto_track_list}|subgrid\\s*(${CssProp._B1.line_names})?`,grid_template_columns:`none|${CssProp._B5.track_list}|${CssProp._B5.auto_track_list}|subgrid\\s*(${CssProp._B1.line_names})?`},CssProp.B={...CssProp._B,...CssProp._B1,...CssProp._B2,...CssProp._B3,...CssProp._B4,...CssProp._B5,...CssProp._B6},CssProp.A={absolute_size:"xx-small|x-small|small|medium|large|x-large|xx-large",attachment:"scroll|fixed|local",bg_origin:"border-box|padding-box|content-box",border_style:"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset",box:"border-box|padding-box|content-box",display_inside:"auto|block|table|flex|grid",display_outside:"block-level|inline-level|none|table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption",ending_shape:"circle|ellipse",generic_family:"serif|sans-serif|cursive|fantasy|monospace",generic_voice:"male|female|child",relative_size:"smaller|larger",repeat_style:"repeat-x|repeat-y|((?:repeat|space|round|no-repeat)(?:\\s*(?:repeat|space|round|no-repeat))?)",side_or_corner:"(left|right)?\\s*(top|bottom)?",single_animation_direction:"normal|reverse|alternate|alternate-reverse",single_animation_fill_mode:"none|forwards|backwards|both",single_animation_play_state:"running|paused"},CssProp._COLOR={hex:"\\#(0x)?[0-9a-f]+",name:"aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|transparent|violet|wheat|white|whitesmoke|yellow|yellowgreen",rgb:String.raw`rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)`,rgba:String.raw`rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(${CssProp.N.integer_zero_ff}|${CssProp.N.number_zero_one}|${CssProp.B.percentage_zero_hundred})\s*\)`},CssProp._C={alpha:`${CssProp.N.integer_zero_ff}|${CssProp.N.number_zero_one}|${CssProp.B.percentage_zero_hundred}`,alphavalue:CssProp.N.number_zero_one,bg_position:`((${CssProp.B.len_or_perc}|left|center|right|top|bottom)\\s*){1,4}`,bg_size:`(${CssProp.B.length_pos}|${CssProp.B.percentage}|auto){1,2}|cover|contain`,border_width:`thin|medium|thick|${CssProp.B.length}`,bottom:`${CssProp.B.length}|auto`,color:`${CssProp._COLOR.hex}|${CssProp._COLOR.rgb}|${CssProp._COLOR.rgba}|${CssProp._COLOR.name}`,color_stop_length:`(${CssProp.B.len_or_perc}\\s*){1,2}`,linear_color_hint:`${CssProp.B.len_or_perc}`,family_name:`${CssProp.B.string}|(${CssProp.B.ident}\\s*)+`,image_decl:CssProp.B.url,left:`${CssProp.B.length}|auto`,loose_quotable_words:`(${CssProp.B.ident})+`,margin_width:`${CssProp.B.len_or_perc}|auto`,padding_width:`${CssProp.B.length_pos}|${CssProp.B.percentage_pos}`,page_url:CssProp.B.url,position:`((${CssProp.B.len_or_perc}|left|center|right|top|bottom)\\s*){1,4}`,right:`${CssProp.B.length}|auto`,shadow:"",size:`closest-side|farthest-side|closest-corner|farthest-corner|${CssProp.B.length}|(${CssProp.B.len_or_perc})\\s+(${CssProp.B.len_or_perc})`,top:`${CssProp.B.length}|auto`},CssProp._C1={image_list:`image\\(\\s*(${CssProp.B.url})*\\s*(${CssProp.B.url}|${CssProp._C.color})\\s*\\)`,linear_color_stop:`(${CssProp._C.color})(\\s*${CssProp._C.color_stop_length})?`,shadow:`((${CssProp._C.color})\\s+((${CssProp.B.length})\\s*){2,4}(s+inset)?)|((inset\\s+)?((${CssProp.B.length})\\s*){2,4}\\s*(${CssProp._C.color})?)`},CssProp._C2={color_stop_list:`((${CssProp._C1.linear_color_stop})(\\s*(${CssProp._C.linear_color_hint}))?\\s*,\\s*)+(${CssProp._C1.linear_color_stop})`,shape:`rect\\(\\s*(${CssProp._C.top})\\s*,\\s*(${CssProp._C.right})\\s*,\\s*(${CssProp._C.bottom})\\s*,\\s*(${CssProp._C.left})\\s*\\)`},CssProp._C3={linear_gradient:`linear-gradient\\((((${CssProp.B.angle})|to\\s+(${CssProp.A.side_or_corner}))\\s*,\\s*)?\\s*(${CssProp._C2.color_stop_list})\\s*\\)`,radial_gradient:`radial-gradient\\(((((${CssProp.A.ending_shape})|(${CssProp._C.size}))\\s*)*\\s*(at\\s+${CssProp._C.position})?\\s*,\\s*)?\\s*(${CssProp._C2.color_stop_list})\\s*\\)`},CssProp._C4={image:`${CssProp.B.url}|${CssProp._C3.linear_gradient}|${CssProp._C3.radial_gradient}|${CssProp._C1.image_list}`,bg_image:`(${CssProp.B.url}|${CssProp._C3.linear_gradient}|${CssProp._C3.radial_gradient}|${CssProp._C1.image_list})|none`},CssProp.C={...CssProp._C,...CssProp._C1,...CssProp._C2,...CssProp._C3,...CssProp._C4},CssProp.AP={baseline_position:"baseline|first baseline|last baseline",border_collapse:"collapse|separate",box:"normal|none|contents",box_sizing:"content-box|padding-box|border-box",caption_side:"top|bottom",clear:"none|left|right|both",content_position:"start|end|center|flex-start|flex-end",content_distribution:"stretch|space-between|space-around|space-evenly",direction:"ltr|rtl",empty_cells:"show|hide",flex_direction:"row|row-reverse|column|column-reverse",flex_wrap:"nowrap|wrap|wrap-reverse",float:"left|right|none",font_stretch:"normal|wider|narrower|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",font_style:"normal|italic|oblique",font_variant:"normal|small-caps",font_weight:"normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900",list_style_position:"inside|outside",gap:"normal",grid_auto_flow:"row|column|dense|row dense|column dense",justify_content:"start|end|center|stretch|space-between|space-around|space-evenly",justify_items:"start|end|center|stretch",justify_self:"auto|start|end|center|stretch",list_style_type:"disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none",overflow:"visible|hidden|scroll|auto",overflow_position:"unsafe|safe",overflow_wrap:"normal|break-word",overflow_x:"visible|hidden|scroll|auto|no-display|no-content",page_break_after:"auto|always|avoid|left|right",page_break_before:"auto|always|avoid|left|right",page_break_inside:"avoid|auto",place_content:"(center|start|end|space-between|space-around|space-evenly|stretch){1,2}",place_items:"(center|start|end|baseline|stretch){1,2}",place_self:"(center|start|end|baseline|stretch){1,2}",position:"static|relative|absolute",resize:"none|both|horizontal|vertical",speak:"normal|none|spell-out",self_position:"center|start|end|self-start|self-end|flex-start|flex-end",speak_header:"once|always",speak_numeral:"digits|continuous",speak_punctuation:"code|none",table_layout:"auto|fixed",text_align:"left|right|center|justify",text_decoration:"none|((underline|overline|line-through|blink)\\s*)+",text_transform:"capitalize|uppercase|lowercase|none",text_wrap:"normal|unrestricted|none|suppress",unicode_bidi:"normal|embed|bidi-override",visibility:"visible|hidden|collapse",white_space:"normal|pre|nowrap|pre-wrap|pre-line",word_break:"normal|keep-all|break-all"},CssProp._CP={align_content:`normal|${CssProp.AP.baseline_position}|${CssProp.AP.content_distribution}|${CssProp.AP.overflow_position}|${CssProp.AP.content_position}`,align_items:`normal|stretch|${CssProp.AP.baseline_position}|(${CssProp.AP.overflow_position})?\\s*${CssProp.AP.self_position}|anchor-center`,align_self:`auto|normal|stretch|${CssProp.AP.baseline_position}|(${CssProp.AP.overflow_position})?\\s*${CssProp.AP.self_position}|anchor-center`,background_attachment:`${CssProp.A.attachment}(,\\s*${CssProp.A.attachment})*`,background_color:CssProp.C.color,background_origin:`${CssProp.A.box}(,\\s*${CssProp.A.box})*`,background_repeat:`${CssProp.A.repeat_style}(,\\s*${CssProp.A.repeat_style})*`,border:`((${CssProp.C.border_width}|${CssProp.A.border_style}|${CssProp.C.color})\\s*){1,3}`,border_radius:`((${CssProp.B.len_or_perc})\\s*){1,4}(\\/\\s*((${CssProp.B.len_or_perc})\\s*){1,4})?`,border_spacing:`${CssProp.B.length}\\s*(${CssProp.B.length})?`,border_top_color:CssProp.C.color,border_top_style:CssProp.A.border_style,border_width:`((${CssProp.C.border_width})\\s*){1,4}`,color:CssProp.C.color,cursor:`(${CssProp.B.url}(\\s*,\\s*)?)*(auto|crosshair|default|pointer|move|e-resize|ne-resize|nw-resize|n-resize|se-resize|sw-resize|s-resize|w-resize|text|wait|help|progress|all-scroll|col-resize|hand|no-drop|not-allowed|row-resize|vertical-text)`,display:`inline|block|list-item|run-in|inline-list-item|inline-block|table|inline-table|table-cell|table-caption|flex|inline-flex|grid|inline-grid|${CssProp.A.display_inside}|${CssProp.A.display_outside}|inherit|inline-box|inline-stack`,display_outside:CssProp.A.display_outside,elevation:`${CssProp.B.angle}|below|level|above|higher|lower`,font_family:`(${CssProp.C.family_name}|${CssProp.A.generic_family})(,\\s*(${CssProp.C.family_name}|${CssProp.A.generic_family}))*`,height:`${CssProp.B.length}|${CssProp.B.percentage}|auto`,letter_spacing:`normal|${CssProp.B.length}`,list_style_image:`${CssProp.C.image}|none`,margin_right:CssProp.C.margin_width,max_height:`${CssProp.B.length_pos}|${CssProp.B.percentage_pos}|none|auto`,min_height:`${CssProp.B.length_pos}|${CssProp.B.percentage_pos}|auto`,opacity:CssProp.C.alphavalue,outline_color:`${CssProp.C.color}|invert`,outline_width:CssProp.C.border_width,padding:`((${CssProp.C.padding_width})\\s*){1,4}`,padding_top:CssProp.C.padding_width,pitch_range:CssProp.N.number,right:`${CssProp.B.length}|${CssProp.B.percentage}|auto`,stress:CssProp.N.number,text_indent:`${CssProp.B.length}|${CssProp.B.percentage}`,text_shadow:`none|${CssProp.C.shadow}(,\\s*(${CssProp.C.shadow}))*`,volume:`${CssProp.N.number_pos}|${CssProp.B.percentage_pos}|silent|x-soft|soft|medium|loud|x-loud`,word_wrap:CssProp.AP.overflow_wrap,zoom:`normal|${CssProp.N.number_pos}|${CssProp.B.percentage_pos}`,backface_visibility:CssProp.AP.visibility,background_clip:`${CssProp.A.box}(,\\s*(${CssProp.A.box}))*`,background_position:`${CssProp.C.bg_position}(,\\s*(${CssProp.C.bg_position}))*`,border_bottom_color:CssProp.C.color,border_bottom_style:CssProp.A.border_style,border_color:`((${CssProp.C.color})\\s*){1,4}`,border_left_color:CssProp.C.color,border_right_color:CssProp.C.color,border_style:`((${CssProp.A.border_style})\\s*){1,4}`,border_top_left_radius:`(${CssProp.B.length}|${CssProp.B.percentage})(\\s*(${CssProp.B.length}|${CssProp.B.percentage}))?`,border_top_width:CssProp.C.border_width,box_shadow:`none|${CssProp.C.shadow}(,\\s*(${CssProp.C.shadow}))*`,clip:`${CssProp.C.shape}|auto`,display_inside:CssProp.A.display_inside,font_size:`${CssProp.A.absolute_size}|${CssProp.A.relative_size}|${CssProp.B.length_pos}|${CssProp.B.percentage_pos}`,line_height:`normal|${CssProp.N.number_pos}|${CssProp.B.length_pos}|${CssProp.B.percentage_pos}`,margin_left:CssProp.C.margin_width,max_width:`${CssProp.B.length_pos}|${CssProp.B.percentage_pos}|none|auto`,outline_style:CssProp.A.border_style,padding_bottom:CssProp.C.padding_width,padding_right:CssProp.C.padding_width,perspective:`none|${CssProp.B.length}`,richness:CssProp.N.number,text_overflow:`((clip|ellipsis|${CssProp.B.string})\\s*){1,2}`,top:`${CssProp.B.length}|${CssProp.B.percentage}|auto`,width:`${CssProp.B.length_pos}|${CssProp.B.percentage_pos}|auto`,z_index:`auto|${CssProp.B.z_index}`,background:`(((${CssProp.C.bg_position}\\s*(\\/\\s*${CssProp.C.bg_size})?)|(${CssProp.A.repeat_style})|(${CssProp.A.attachment})|(${CssProp.A.bg_origin})|(${CssProp.C.bg_image})|(${CssProp.C.color}))\\s*)+`,background_size:`${CssProp.C.bg_size}(,\\s*${CssProp.C.bg_size})*`,border_bottom_left_radius:`(${CssProp.B.length}|${CssProp.B.percentage})(\\s*(${CssProp.B.length}|${CssProp.B.percentage}))?`,border_bottom_width:CssProp.C.border_width,border_left_style:CssProp.A.border_style,border_right_style:CssProp.A.border_style,border_top:`((${CssProp.C.border_width}|${CssProp.A.border_style}|${CssProp.C.color})\\s*){1,3}`,bottom:`${CssProp.B.len_or_perc}|auto`,list_style:`((${CssProp.AP.list_style_type}|${CssProp.AP.list_style_position}|${CssProp.C.image}|none})\\s*){1,3}`,margin_top:CssProp.C.margin_width,outline:`((${CssProp.C.color}|invert|${CssProp.A.border_style}|${CssProp.C.border_width})\\s*){1,3}`,overflow_y:CssProp.AP.overflow_x,pitch:`${CssProp.B.frequency}|x-low|low|medium|high|x-high`,vertical_align:`baseline|sub|super|top|text-top|middle|bottom|text-bottom|${CssProp.B.len_or_perc}`,word_spacing:`normal|${CssProp.B.length}`,background_image:`${CssProp.C.bg_image}(,\\s*${CssProp.C.bg_image})*`,border_bottom_right_radius:`(${CssProp.B.length}|${CssProp.B.percentage})(\\s*(${CssProp.B.length}|${CssProp.B.percentage}))?`,border_left_width:CssProp.C.border_width,border_right_width:CssProp.C.border_width,left:`${CssProp.B.len_or_perc}|auto`,margin_bottom:CssProp.C.margin_width,pause_after:`${CssProp.B.time}|${CssProp.B.percentage}`,speech_rate:`${CssProp.N.number}|x-slow|slow|medium|fast|x-fast|faster|slower`,transition_duration:`${CssProp.B.time}(,\\s*${CssProp.B.time})*`,border_bottom:`((${CssProp.C.border_width}|${CssProp.A.border_style}|${CssProp.C.color})\\s*){1,3}`,border_right:`((${CssProp.C.border_width}|${CssProp.A.border_style}|${CssProp.C.color})\\s*){1,3}`,margin:`((${CssProp.C.margin_width})\\s*){1,4}`,padding_left:CssProp.C.padding_width,border_left:`((${CssProp.C.border_width}|${CssProp.A.border_style}|${CssProp.C.color})\\s*){1,3}`,quotes:`(${CssProp.B.string}\\s*${CssProp.B.string})+|none`,border_top_right_radius:`(${CssProp.B.length}|${CssProp.B.percentage})(\\s*(${CssProp.B.length}|${CssProp.B.percentage}))?`,min_width:`${CssProp.B.length_pos}|${CssProp.B.percentage_pos}|auto`,flex_basis:`${CssProp.B.len_or_perc}|auto|content|max-content|min-content|fit-content\\(\\s*(${CssProp.B.len_or_perc}\\s*)*\\)`,flex_grow:CssProp.N.number_pos,flex_shrink:CssProp.N.number_pos,grid:`(${CssProp.B.string}|none|subgrid)\\s*(\\/\\s*(${CssProp.B.string}|none|subgrid))?`,grid_area:`${CssProp.B.ident}|auto|(${CssProp.N.integer}\\s*\\/\\s*${CssProp.N.integer}\\s*\\/\\s*${CssProp.N.integer}\\s*\\/\\s*${CssProp.N.integer})`,grid_auto_columns:`(${CssProp.B.track_size})+`,grid_auto_rows:`(${CssProp.B.track_size})+`,grid_column:`${CssProp.B.grid_line}(\\s*\\/\\s*${CssProp.B.grid_line})?`,grid_column_start:`${CssProp.B.grid_line}`,grid_column_end:`${CssProp.B.grid_line}`,grid_column_gap:`${CssProp.B.len_or_perc}|normal`,grid_gap:`(${CssProp.B.len_or_perc}|normal)(\\s*(${CssProp.B.len_or_perc}|normal))?`,grid_row:`${CssProp.B.grid_line}(\\s*\\/\\s*${CssProp.B.grid_line})?`,grid_row_start:`${CssProp.B.grid_line}`,grid_row_end:`${CssProp.B.grid_line}`,grid_row_gap:`${CssProp.B.len_or_perc}|normal`,grid_template:`none|(${CssProp.B.grid_template_rows}\\s*\\/\\s*${CssProp.B.grid_template_columns})|(${CssProp.B.line_names}\\s*)?(${CssProp.B.string}\\s*${CssProp.B.track_size}\\s*(${CssProp.B.line_names}\\s*)?)+\\s*(\\/\\s*${CssProp.B.explicit_track_list})?`,grid_template_areas:`none|(${CssProp.B.string})+`,grid_template_columns:`${CssProp.B.grid_template_columns}`,grid_template_rows:`${CssProp.B.grid_template_rows}`,row_gap:`${CssProp.B.len_or_perc}|normal`,column_gap:`${CssProp.B.len_or_perc}|normal`,gap:`(${CssProp.B.len_or_perc}|normal)(\\s*(${CssProp.B.len_or_perc}|normal))?`,order:CssProp.N.integer},CssProp._CP1={font:`(((((${CssProp.AP.font_style}|${CssProp.AP.font_variant}|${CssProp.AP.font_weight})\\s*){1,3})?\\s*(${CssProp._CP.font_size})\\s*(\\/\\s*(${CssProp._CP.line_height}))?\\s+(${CssProp._CP.font_family}))|caption|icon|menu|message-box|small-caption|status-bar)`},CssProp.CP={...CssProp._CP,...CssProp._CP1},CssProp.BORDER_COLLAPSE=CssProp.reg(CssProp.AP.border_collapse),CssProp.BOX=CssProp.reg(CssProp.AP.box),CssProp.BOX_SIZING=CssProp.reg(CssProp.AP.box_sizing),CssProp.CAPTION_SIDE=CssProp.reg(CssProp.AP.caption_side),CssProp.CLEAR=CssProp.reg(CssProp.AP.clear),CssProp.DIRECTION=CssProp.reg(CssProp.AP.direction),CssProp.EMPTY_CELLS=CssProp.reg(CssProp.AP.empty_cells),CssProp.FLOAT=CssProp.reg(CssProp.AP.float),CssProp.FONT_STRETCH=CssProp.reg(CssProp.AP.font_stretch),CssProp.FONT_STYLE=CssProp.reg(CssProp.AP.font_style),CssProp.FONT_VARIANT=CssProp.reg(CssProp.AP.font_variant),CssProp.FONT_WEIGHT=CssProp.reg(CssProp.AP.font_weight),CssProp.LIST_STYLE_POSITION=CssProp.reg(CssProp.AP.list_style_position),CssProp.LIST_STYLE_TYPE=CssProp.reg(CssProp.AP.list_style_type),CssProp.OVERFLOW=CssProp.reg(CssProp.AP.overflow),CssProp.OVERFLOW_WRAP=CssProp.reg(CssProp.AP.overflow_wrap),CssProp.OVERFLOW_X=CssProp.reg(CssProp.AP.overflow_x),CssProp.PAGE_BREAK_AFTER=CssProp.reg(CssProp.AP.page_break_after),CssProp.PAGE_BREAK_BEFORE=CssProp.reg(CssProp.AP.page_break_before),CssProp.PAGE_BREAK_INSIDE=CssProp.reg(CssProp.AP.page_break_inside),CssProp.POSITION=CssProp.reg(CssProp.AP.position),CssProp.RESIZE=CssProp.reg(CssProp.AP.resize),CssProp.SPEAK=CssProp.reg(CssProp.AP.speak),CssProp.SPEAK_HEADER=CssProp.reg(CssProp.AP.speak_header),CssProp.SPEAK_NUMERAL=CssProp.reg(CssProp.AP.speak_numeral),CssProp.SPEAK_PUNCTUATION=CssProp.reg(CssProp.AP.speak_punctuation),CssProp.TABLE_LAYOUT=CssProp.reg(CssProp.AP.table_layout),CssProp.TEXT_ALIGN=CssProp.reg(CssProp.AP.text_align),CssProp.TEXT_DECORATION=CssProp.reg(CssProp.AP.text_decoration),CssProp.TEXT_TRANSFORM=CssProp.reg(CssProp.AP.text_transform),CssProp.TEXT_WRAP=CssProp.reg(CssProp.AP.text_wrap),CssProp.UNICODE_BIDI=CssProp.reg(CssProp.AP.unicode_bidi),CssProp.VISIBILITY=CssProp.reg(CssProp.AP.visibility),CssProp.WHITE_SPACE=CssProp.reg(CssProp.AP.white_space),CssProp.WORD_BREAK=CssProp.reg(CssProp.AP.word_break),CssProp.BACKGROUND_ATTACHMENT=CssProp.reg(CssProp.CP.background_attachment),CssProp.BACKGROUND_COLOR=CssProp.reg(CssProp.CP.background_color),CssProp.BACKGROUND_ORIGIN=CssProp.reg(CssProp.CP.background_origin),CssProp.BACKGROUND_REPEAT=CssProp.reg(CssProp.CP.background_repeat),CssProp.BORDER=CssProp.reg(CssProp.CP.border),CssProp.BORDER_RADIUS=CssProp.reg(CssProp.CP.border_radius),CssProp.BORDER_SPACING=CssProp.reg(CssProp.CP.border_spacing),CssProp.BORDER_TOP_COLOR=CssProp.reg(CssProp.CP.border_top_color),CssProp.BORDER_TOP_STYLE=CssProp.reg(CssProp.CP.border_top_style),CssProp.BORDER_WIDTH=CssProp.reg(CssProp.CP.border_width),CssProp.COLOR=CssProp.reg(CssProp.CP.color),CssProp.CURSOR=CssProp.reg(CssProp.CP.cursor),CssProp.DISPLAY=CssProp.reg(CssProp.CP.display),CssProp.DISPLAY_OUTSIDE=CssProp.reg(CssProp.CP.display_outside),CssProp.ELEVATION=CssProp.reg(CssProp.CP.elevation),CssProp.FONT_FAMILY=CssProp.reg(CssProp.CP.font_family),CssProp.HEIGHT=CssProp.reg(CssProp.CP.height),CssProp.LETTER_SPACING=CssProp.reg(CssProp.CP.letter_spacing),CssProp.LIST_STYLE_IMAGE=CssProp.reg(CssProp.CP.list_style_image),CssProp.MARGIN_RIGHT=CssProp.reg(CssProp.CP.margin_right),CssProp.MAX_HEIGHT=CssProp.reg(CssProp.CP.max_height),CssProp.MIN_HEIGHT=CssProp.reg(CssProp.CP.min_height),CssProp.OPACITY=CssProp.reg(CssProp.CP.opacity),CssProp.OUTLINE_COLOR=CssProp.reg(CssProp.CP.outline_color),CssProp.OUTLINE_WIDTH=CssProp.reg(CssProp.CP.outline_width),CssProp.PADDING=CssProp.reg(CssProp.CP.padding),CssProp.PADDING_TOP=CssProp.reg(CssProp.CP.padding_top),CssProp.PITCH_RANGE=CssProp.reg(CssProp.CP.pitch_range),CssProp.RIGHT=CssProp.reg(CssProp.CP.right),CssProp.STRESS=CssProp.reg(CssProp.CP.stress),CssProp.TEXT_INDENT=CssProp.reg(CssProp.CP.text_indent),CssProp.TEXT_SHADOW=CssProp.reg(CssProp.CP.text_shadow),CssProp.VOLUME=CssProp.reg(CssProp.CP.volume),CssProp.WORD_WRAP=CssProp.reg(CssProp.CP.word_wrap),CssProp.ZOOM=CssProp.reg(CssProp.CP.zoom),CssProp.BACKFACE_VISIBILITY=CssProp.reg(CssProp.CP.backface_visibility),CssProp.BACKGROUND_CLIP=CssProp.reg(CssProp.CP.background_clip),CssProp.BACKGROUND_POSITION=CssProp.reg(CssProp.CP.background_position),CssProp.BORDER_BOTTOM_COLOR=CssProp.reg(CssProp.CP.border_bottom_color),CssProp.BORDER_BOTTOM_STYLE=CssProp.reg(CssProp.CP.border_bottom_style),CssProp.BORDER_COLOR=CssProp.reg(CssProp.CP.border_color),CssProp.BORDER_LEFT_COLOR=CssProp.reg(CssProp.CP.border_left_color),CssProp.BORDER_RIGHT_COLOR=CssProp.reg(CssProp.CP.border_right_color),CssProp.BORDER_STYLE=CssProp.reg(CssProp.CP.border_style),CssProp.BORDER_TOP_LEFT_RADIUS=CssProp.reg(CssProp.CP.border_top_left_radius),CssProp.BORDER_TOP_WIDTH=CssProp.reg(CssProp.CP.border_top_width),CssProp.BOX_SHADOW=CssProp.reg(CssProp.CP.box_shadow),CssProp.CLIP=CssProp.reg(CssProp.CP.clip),CssProp.DISPLAY_INSIDE=CssProp.reg(CssProp.CP.display_inside),CssProp.FONT_SIZE=CssProp.reg(CssProp.CP.font_size),CssProp.LINE_HEIGHT=CssProp.reg(CssProp.CP.line_height),CssProp.MARGIN_LEFT=CssProp.reg(CssProp.CP.margin_left),CssProp.MAX_WIDTH=CssProp.reg(CssProp.CP.max_width),CssProp.OUTLINE_STYLE=CssProp.reg(CssProp.CP.outline_style),CssProp.PADDING_BOTTOM=CssProp.reg(CssProp.CP.padding_bottom),CssProp.PADDING_RIGHT=CssProp.reg(CssProp.CP.padding_right),CssProp.PERSPECTIVE=CssProp.reg(CssProp.CP.perspective),CssProp.RICHNESS=CssProp.reg(CssProp.CP.richness),CssProp.TEXT_OVERFLOW=CssProp.reg(CssProp.CP.text_overflow),CssProp.TOP=CssProp.reg(CssProp.CP.top),CssProp.WIDTH=CssProp.reg(CssProp.CP.width),CssProp.Z_INDEX=CssProp.reg(CssProp.CP.z_index),CssProp.BACKGROUND=CssProp.reg(CssProp.CP.background),CssProp.BACKGROUND_SIZE=CssProp.reg(CssProp.CP.background_size),CssProp.BORDER_BOTTOM_LEFT_RADIUS=CssProp.reg(CssProp.CP.border_bottom_left_radius),CssProp.BORDER_BOTTOM_WIDTH=CssProp.reg(CssProp.CP.border_bottom_width),CssProp.BORDER_LEFT_STYLE=CssProp.reg(CssProp.CP.border_left_style),CssProp.BORDER_RIGHT_STYLE=CssProp.reg(CssProp.CP.border_right_style),CssProp.BORDER_TOP=CssProp.reg(CssProp.CP.border_top),CssProp.BOTTOM=CssProp.reg(CssProp.CP.bottom),CssProp.LIST_STYLE=CssProp.reg(CssProp.CP.list_style),CssProp.MARGIN_TOP=CssProp.reg(CssProp.CP.margin_top),CssProp.OUTLINE=CssProp.reg(CssProp.CP.outline),CssProp.OVERFLOW_Y=CssProp.reg(CssProp.CP.overflow_y),CssProp.PITCH=CssProp.reg(CssProp.CP.pitch),CssProp.VERTICAL_ALIGN=CssProp.reg(CssProp.CP.vertical_align),CssProp.WORD_SPACING=CssProp.reg(CssProp.CP.word_spacing),CssProp.BACKGROUND_IMAGE=CssProp.reg(CssProp.CP.background_image),CssProp.BORDER_BOTTOM_RIGHT_RADIUS=CssProp.reg(CssProp.CP.border_bottom_right_radius),CssProp.BORDER_LEFT_WIDTH=CssProp.reg(CssProp.CP.border_left_width),CssProp.BORDER_RIGHT_WIDTH=CssProp.reg(CssProp.CP.border_right_width),CssProp.LEFT=CssProp.reg(CssProp.CP.left),CssProp.MARGIN_BOTTOM=CssProp.reg(CssProp.CP.margin_bottom),CssProp.PAUSE_AFTER=CssProp.reg(CssProp.CP.pause_after),CssProp.SPEECH_RATE=CssProp.reg(CssProp.CP.speech_rate),CssProp.TRANSITION_DURATION=CssProp.reg(CssProp.CP.transition_duration),CssProp.BORDER_BOTTOM=CssProp.reg(CssProp.CP.border_bottom),CssProp.BORDER_RIGHT=CssProp.reg(CssProp.CP.border_right),CssProp.MARGIN=CssProp.reg(CssProp.CP.margin),CssProp.PADDING_LEFT=CssProp.reg(CssProp.CP.padding_left),CssProp.BORDER_LEFT=CssProp.reg(CssProp.CP.border_left),CssProp.FONT=CssProp.reg(CssProp.CP.font),CssProp.QUOTES=CssProp.reg(CssProp.CP.quotes),CssProp.BORDER_TOP_RIGHT_RADIUS=CssProp.reg(CssProp.CP.border_top_right_radius),CssProp.MIN_WIDTH=CssProp.reg(CssProp.CP.min_width),CssProp.ALIGN_CONTENT=CssProp.reg(CssProp.CP.align_content),CssProp.ALIGN_ITEMS=CssProp.reg(CssProp.CP.align_items),CssProp.ALIGN_SELF=CssProp.reg(CssProp.CP.align_self),CssProp.FLEX=CssProp.reg(CssProp.B.flex),CssProp.FLEX_BASIS=CssProp.reg(CssProp.CP.flex_basis),CssProp.FLEX_DIRECTION=CssProp.reg(CssProp.AP.flex_direction),CssProp.FLEX_GROW=CssProp.reg(CssProp.CP.flex_grow),CssProp.FLEX_SHRINK=CssProp.reg(CssProp.CP.flex_shrink),CssProp.FLEX_WRAP=CssProp.reg(CssProp.AP.flex_wrap),CssProp.JUSTIFY_CONTENT=CssProp.reg(CssProp.AP.justify_content),CssProp.JUSTIFY_ITEMS=CssProp.reg(CssProp.AP.justify_items),CssProp.JUSTIFY_SELF=CssProp.reg(CssProp.AP.justify_self),CssProp.ORDER=CssProp.reg(CssProp.CP.order),CssProp.GRID=CssProp.reg(CssProp.CP.grid),CssProp.GRID_AREA=CssProp.reg(CssProp.CP.grid_area),CssProp.GRID_AUTO_COLUMNS=CssProp.reg(CssProp.CP.grid_auto_columns),CssProp.GRID_AUTO_FLOW=CssProp.reg(CssProp.AP.grid_auto_flow),CssProp.GRID_AUTO_ROWS=CssProp.reg(CssProp.CP.grid_auto_rows),CssProp.GRID_COLUMN=CssProp.reg(CssProp.CP.grid_column),CssProp.GRID_COLUMN_END=CssProp.reg(CssProp.CP.grid_column_end),CssProp.GRID_COLUMN_GAP=CssProp.reg(CssProp.CP.grid_column_gap),CssProp.GRID_COLUMN_START=CssProp.reg(CssProp.CP.grid_column_start),CssProp.GRID_GAP=CssProp.reg(CssProp.CP.grid_gap),CssProp.GRID_ROW=CssProp.reg(CssProp.CP.grid_row),CssProp.GRID_ROW_END=CssProp.reg(CssProp.CP.grid_row_end),CssProp.GRID_ROW_GAP=CssProp.reg(CssProp.CP.grid_row_gap),CssProp.GRID_ROW_START=CssProp.reg(CssProp.CP.grid_row_start),CssProp.GRID_TEMPLATE=CssProp.reg(CssProp.CP.grid_template),CssProp.GRID_TEMPLATE_AREAS=CssProp.reg(CssProp.CP.grid_template_areas),CssProp.GRID_TEMPLATE_COLUMNS=CssProp.reg(CssProp.CP.grid_template_columns),CssProp.GRID_TEMPLATE_ROWS=CssProp.reg(CssProp.CP.grid_template_rows),CssProp.GAP=CssProp.reg(CssProp.CP.gap),CssProp.ROW_GAP=CssProp.reg(CssProp.CP.row_gap),CssProp.COLUMN_GAP=CssProp.reg(CssProp.CP.column_gap),CssProp.PLACE_CONTENT=CssProp.reg(CssProp.AP.place_content),CssProp.PLACE_ITEMS=CssProp.reg(CssProp.AP.place_items),CssProp.PLACE_SELF=CssProp.reg(CssProp.AP.place_self);class Sanitizer{constructor(){this._autolink=!0,this._allowNamedProperties=!1,this._generateOptions=()=>{const e=Array.isArray(this._customAllowedSchemes)?this._customAllowedSchemes:[...sanitize.defaults.allowedSchemes];return{allowedTags:["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","button","canvas","caption","center","cite","code","col","colgroup","colspan","command","data","datalist","dd","del","details","dfn","dir","div","dl","dt","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","img","input","ins","kbd","label","legend","li","map","mark","menu","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rowspan","s","samp","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],allowedAttributes:{"*":["class","data-jupyter-id","dir","draggable","hidden","id","inert","itemprop","itemref","itemscope","lang","spellcheck","style","title","translate"],a:["accesskey","coords","href","hreflang",...this._allowNamedProperties?["name"]:[],"rel","shape","tabindex","target","type"],area:["accesskey","alt","coords","href","nohref","shape","tabindex"],audio:["autoplay","controls","loop","mediagroup","muted","preload","src"],bdo:["dir"],blockquote:["cite"],br:["clear"],button:["accesskey","data-commandlinker-args","data-commandlinker-command","disabled",...this._allowNamedProperties?["name"]:[],"tabindex","type","value"],canvas:["height","width"],caption:["align"],col:["align","char","charoff","span","valign","width"],colgroup:["align","char","charoff","span","valign","width"],command:["checked","command","disabled","icon","label","radiogroup","type"],data:["value"],del:["cite","datetime"],details:["open"],dir:["compact"],div:["align"],dl:["compact"],fieldset:["disabled"],font:["color","face","size"],form:["accept","autocomplete","enctype","method",...this._allowNamedProperties?["name"]:[],"novalidate"],h1:["align"],h2:["align"],h3:["align"],h4:["align"],h5:["align"],h6:["align"],hr:["align","noshade","size","width"],iframe:["align","frameborder","height","marginheight","marginwidth","width"],img:["align","alt","border","height","hspace","ismap",...this._allowNamedProperties?["name"]:[],"src","usemap","vspace","width"],input:["accept","accesskey","align","alt","autocomplete","checked","disabled","inputmode","ismap","list","max","maxlength","min","multiple",...this._allowNamedProperties?["name"]:[],"placeholder","readonly","required","size","src","step","tabindex","type","usemap","value"],ins:["cite","datetime"],label:["accesskey","for"],legend:["accesskey","align"],li:["type","value"],map:this._allowNamedProperties?["name"]:[],menu:["compact","label","type"],meter:["high","low","max","min","value"],ol:["compact","reversed","start","type"],optgroup:["disabled","label"],option:["disabled","label","selected","value"],output:["for",...this._allowNamedProperties?["name"]:[]],p:["align"],pre:["width"],progress:["max","min","value"],q:["cite"],select:["autocomplete","disabled","multiple",...this._allowNamedProperties?["name"]:[],"required","size","tabindex"],source:["type"],table:["align","bgcolor","border","cellpadding","cellspacing","frame","rules","summary","width"],tbody:["align","char","charoff","valign"],td:["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"],textarea:["accesskey","autocomplete","cols","disabled","inputmode",...this._allowNamedProperties?["name"]:[],"placeholder","readonly","required","rows","tabindex","wrap"],tfoot:["align","char","charoff","valign"],th:["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"],thead:["align","char","charoff","valign"],tr:["align","bgcolor","char","charoff","valign"],track:["default","kind","label","srclang"],ul:["compact","type"],video:["autoplay","controls","height","loop","mediagroup","muted","poster","preload","src","width"]},allowedStyles:{"*":{"backface-visibility":[CssProp.BACKFACE_VISIBILITY],background:[CssProp.BACKGROUND],"background-attachment":[CssProp.BACKGROUND_ATTACHMENT],"background-clip":[CssProp.BACKGROUND_CLIP],"background-color":[CssProp.BACKGROUND_COLOR],"background-image":[CssProp.BACKGROUND_IMAGE],"background-origin":[CssProp.BACKGROUND_ORIGIN],"background-position":[CssProp.BACKGROUND_POSITION],"background-repeat":[CssProp.BACKGROUND_REPEAT],"background-size":[CssProp.BACKGROUND_SIZE],border:[CssProp.BORDER],"border-bottom":[CssProp.BORDER_BOTTOM],"border-bottom-color":[CssProp.BORDER_BOTTOM_COLOR],"border-bottom-left-radius":[CssProp.BORDER_BOTTOM_LEFT_RADIUS],"border-bottom-right-radius":[CssProp.BORDER_BOTTOM_RIGHT_RADIUS],"border-bottom-style":[CssProp.BORDER_BOTTOM_STYLE],"border-bottom-width":[CssProp.BORDER_BOTTOM_WIDTH],"border-collapse":[CssProp.BORDER_COLLAPSE],"border-color":[CssProp.BORDER_COLOR],"border-left":[CssProp.BORDER_LEFT],"border-left-color":[CssProp.BORDER_LEFT_COLOR],"border-left-style":[CssProp.BORDER_LEFT_STYLE],"border-left-width":[CssProp.BORDER_LEFT_WIDTH],"border-radius":[CssProp.BORDER_RADIUS],"border-right":[CssProp.BORDER_RIGHT],"border-right-color":[CssProp.BORDER_RIGHT_COLOR],"border-right-style":[CssProp.BORDER_RIGHT_STYLE],"border-right-width":[CssProp.BORDER_RIGHT_WIDTH],"border-spacing":[CssProp.BORDER_SPACING],"border-style":[CssProp.BORDER_STYLE],"border-top":[CssProp.BORDER_TOP],"border-top-color":[CssProp.BORDER_TOP_COLOR],"border-top-left-radius":[CssProp.BORDER_TOP_LEFT_RADIUS],"border-top-right-radius":[CssProp.BORDER_TOP_RIGHT_RADIUS],"border-top-style":[CssProp.BORDER_TOP_STYLE],"border-top-width":[CssProp.BORDER_TOP_WIDTH],"border-width":[CssProp.BORDER_WIDTH],bottom:[CssProp.BOTTOM],box:[CssProp.BOX],"box-shadow":[CssProp.BOX_SHADOW],"box-sizing":[CssProp.BOX_SIZING],"caption-side":[CssProp.CAPTION_SIDE],clear:[CssProp.CLEAR],clip:[CssProp.CLIP],color:[CssProp.COLOR],cursor:[CssProp.CURSOR],direction:[CssProp.DIRECTION],display:[CssProp.DISPLAY],"display-inside":[CssProp.DISPLAY_INSIDE],"display-outside":[CssProp.DISPLAY_OUTSIDE],elevation:[CssProp.ELEVATION],"empty-cells":[CssProp.EMPTY_CELLS],float:[CssProp.FLOAT],font:[CssProp.FONT],"font-family":[CssProp.FONT_FAMILY],"font-size":[CssProp.FONT_SIZE],"font-stretch":[CssProp.FONT_STRETCH],"font-style":[CssProp.FONT_STYLE],"font-variant":[CssProp.FONT_VARIANT],"font-weight":[CssProp.FONT_WEIGHT],height:[CssProp.HEIGHT],left:[CssProp.LEFT],"letter-spacing":[CssProp.LETTER_SPACING],"line-height":[CssProp.LINE_HEIGHT],"list-style":[CssProp.LIST_STYLE],"list-style-image":[CssProp.LIST_STYLE_IMAGE],"list-style-position":[CssProp.LIST_STYLE_POSITION],"list-style-type":[CssProp.LIST_STYLE_TYPE],margin:[CssProp.MARGIN],"margin-bottom":[CssProp.MARGIN_BOTTOM],"margin-left":[CssProp.MARGIN_LEFT],"margin-right":[CssProp.MARGIN_RIGHT],"margin-top":[CssProp.MARGIN_TOP],"max-height":[CssProp.MAX_HEIGHT],"max-width":[CssProp.MAX_WIDTH],"min-height":[CssProp.MIN_HEIGHT],"min-width":[CssProp.MIN_WIDTH],opacity:[CssProp.OPACITY],outline:[CssProp.OUTLINE],"outline-color":[CssProp.OUTLINE_COLOR],"outline-style":[CssProp.OUTLINE_STYLE],"outline-width":[CssProp.OUTLINE_WIDTH],overflow:[CssProp.OVERFLOW],"overflow-wrap":[CssProp.OVERFLOW_WRAP],"overflow-x":[CssProp.OVERFLOW_X],"overflow-y":[CssProp.OVERFLOW_Y],padding:[CssProp.PADDING],"padding-bottom":[CssProp.PADDING_BOTTOM],"padding-left":[CssProp.PADDING_LEFT],"padding-right":[CssProp.PADDING_RIGHT],"padding-top":[CssProp.PADDING_TOP],"page-break-after":[CssProp.PAGE_BREAK_AFTER],"page-break-before":[CssProp.PAGE_BREAK_BEFORE],"page-break-inside":[CssProp.PAGE_BREAK_INSIDE],"pause-after":[CssProp.PAUSE_AFTER],perspective:[CssProp.PERSPECTIVE],pitch:[CssProp.PITCH],"pitch-range":[CssProp.PITCH_RANGE],position:[CssProp.POSITION],quotes:[CssProp.QUOTES],resize:[CssProp.RESIZE],richness:[CssProp.RICHNESS],right:[CssProp.RIGHT],speak:[CssProp.SPEAK],"speak-header":[CssProp.SPEAK_HEADER],"speak-numeral":[CssProp.SPEAK_NUMERAL],"speak-punctuation":[CssProp.SPEAK_PUNCTUATION],"speech-rate":[CssProp.SPEECH_RATE],stress:[CssProp.STRESS],"table-layout":[CssProp.TABLE_LAYOUT],"text-align":[CssProp.TEXT_ALIGN],"text-decoration":[CssProp.TEXT_DECORATION],"text-indent":[CssProp.TEXT_INDENT],"text-overflow":[CssProp.TEXT_OVERFLOW],"text-shadow":[CssProp.TEXT_SHADOW],"text-transform":[CssProp.TEXT_TRANSFORM],"text-wrap":[CssProp.TEXT_WRAP],top:[CssProp.TOP],"unicode-bidi":[CssProp.UNICODE_BIDI],"vertical-align":[CssProp.VERTICAL_ALIGN],visibility:[CssProp.VISIBILITY],volume:[CssProp.VOLUME],"white-space":[CssProp.WHITE_SPACE],width:[CssProp.WIDTH],"word-break":[CssProp.WORD_BREAK],"word-spacing":[CssProp.WORD_SPACING],"word-wrap":[CssProp.WORD_WRAP],"z-index":[CssProp.Z_INDEX],zoom:[CssProp.ZOOM],"align-content":[CssProp.ALIGN_CONTENT],"align-items":[CssProp.ALIGN_ITEMS],"align-self":[CssProp.ALIGN_SELF],flex:[CssProp.FLEX],"flex-basis":[CssProp.FLEX_BASIS],"flex-direction":[CssProp.FLEX_DIRECTION],"flex-grow":[CssProp.FLEX_GROW],"flex-shrink":[CssProp.FLEX_SHRINK],"flex-wrap":[CssProp.FLEX_WRAP],grid:[CssProp.GRID],"grid-area":[CssProp.GRID_AREA],"grid-auto-columns":[CssProp.GRID_AUTO_COLUMNS],"grid-auto-flow":[CssProp.GRID_AUTO_FLOW],"grid-auto-rows":[CssProp.GRID_AUTO_ROWS],"grid-column":[CssProp.GRID_COLUMN],"grid-column-end":[CssProp.GRID_COLUMN_END],"grid-column-gap":[CssProp.GRID_COLUMN_GAP],"grid-column-start":[CssProp.GRID_COLUMN_START],"grid-gap":[CssProp.GRID_GAP],"grid-row":[CssProp.GRID_ROW],"grid-row-end":[CssProp.GRID_ROW_END],"grid-row-gap":[CssProp.GRID_ROW_GAP],"grid-row-start":[CssProp.GRID_ROW_START],"grid-template":[CssProp.GRID_TEMPLATE],"grid-template-areas":[CssProp.GRID_TEMPLATE_AREAS],"grid-template-columns":[CssProp.GRID_TEMPLATE_COLUMNS],"grid-template-rows":[CssProp.GRID_TEMPLATE_ROWS],gap:[CssProp.GAP],"row-gap":[CssProp.ROW_GAP],"column-gap":[CssProp.COLUMN_GAP],"justify-content":[CssProp.JUSTIFY_CONTENT],"justify-items":[CssProp.JUSTIFY_ITEMS],"justify-self":[CssProp.JUSTIFY_SELF],order:[CssProp.ORDER],"place-content":[CssProp.PLACE_CONTENT],"place-items":[CssProp.PLACE_ITEMS],"place-self":[CssProp.PLACE_SELF]}},transformTags:{a:sanitize.simpleTransform("a",{rel:"nofollow"}),input:sanitize.simpleTransform("input",{disabled:"disabled"}),...this._allowNamedProperties?{}:{"*":function(e,t){return void 0!==t.id&&(t["data-jupyter-id"]=t.id,delete t.id),{tagName:e,attribs:{...t}}}}},allowedSchemes:e,allowedSchemesByTag:{img:[...e,"attachment"]},allowedSchemesAppliedToAttributes:["href","cite"]}},this._options=this._generateOptions()}sanitize(e,t){return sanitize(e,{...this._options,...t||{}})}getAutolink(){return this._autolink}get allowNamedProperties(){return this._allowNamedProperties}setAllowedSchemes(e){this._customAllowedSchemes=[...e],this._options=this._generateOptions()}setAutolink(e){this._autolink=e}setAllowNamedProperties(e){this._allowNamedProperties=e,this._options=this._generateOptions()}}class OutputAreaModel{constructor(e={}){if(this.clearNext=!1,this._lastStreamName="",this._trusted=!1,this._isDisposed=!1,this._stateChanged=new Signal(this),this._changed=new Signal(this),this._streamIndex=0,this._trusted=!!e.trusted,this.contentFactory=e.contentFactory||OutputAreaModel.defaultContentFactory,this.list=new ObservableList,e.values)for(const t of e.values){const e=this._add(t)-1;this.list.get(e).changed.connect(this._onGenericChange,this)}this.list.changed.connect(this._onListChanged,this)}get stateChanged(){return this._stateChanged}get changed(){return this._changed}get length(){return this.list?this.list.length:0}get trusted(){return this._trusted}set trusted(e){if(e===this._trusted)return;const t=this._trusted=e;for(let r=0;r<this.list.length;r++){const e=this.list.get(r),s=e.toJSON(),n=this._createItem({value:s,trusted:t});this.list.set(r,n),e.dispose()}}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this.list.dispose(),Signal.clearData(this))}get(e){return this.list.get(e)}set(e,t){t=JSONExt.deepCopy(t),Private$6.normalize(t);const r=this._createItem({value:t,trusted:this._trusted});this.list.set(e,r)}removeStreamOutput(e){const t=this.list.get(this.length-1).streamText,r=t.text.length;t.remove(r-e,r,{silent:!0})}appendStreamOutput(e){const t=this.list.get(this.length-1).streamText,r=t.text.length;t.insert(r,e,{silent:!0})}add(e){return this.clearNext&&(this.clear(),this.clearNext=!1),this._add(e)}remove(e){var t;null===(t=this.list.remove(e))||void 0===t||t.dispose()}clear(e=!1){if(this._lastStreamName="",e)this.clearNext=!0;else{for(const e of this.list)e.dispose();this.list.clear()}}fromJSON(e){this.clear();for(const t of e)this._add(t)}toJSON(){return Array.from(map$1(this.list,e=>e.toJSON()))}_add(e){const t=this._trusted;if(e=JSONExt.deepCopy(e),Private$6.normalize(e),isStream(e)&&e.name===this._lastStreamName&&this.length>0&&this.shouldCombine({value:e,lastModel:this.list.get(this.length-1)})){const t=this.list.get(this.length-1).streamText,r="string"==typeof e.text?e.text:e.text.join("");return this._streamIndex=Private$6.addText(this._streamIndex,t,r),this.length}if(isStream(e)){"string"!=typeof e.text&&(e.text=e.text.join(""));const{text:t,index:r}=Private$6.processText(0,e.text);this._streamIndex=r,e.text=t}const r=this._createItem({value:e,trusted:t}),s=this.list.push(r);return isStream(e)?this._lastStreamName=e.name:this._lastStreamName="",s}shouldCombine(e){return!0}_createItem(e){return this.contentFactory.createOutputModel(e)}_onListChanged(e,t){switch(t.type){case"add":t.newValues.forEach(e=>{e.changed.connect(this._onGenericChange,this)});break;case"remove":case"clear":t.oldValues.forEach(e=>{e.changed.disconnect(this._onGenericChange,this)});break;case"set":t.newValues.forEach(e=>{e.changed.connect(this._onGenericChange,this)}),t.oldValues.forEach(e=>{e.changed.disconnect(this._onGenericChange,this)})}this._changed.emit(t)}_onGenericChange(e){let t,r=null;for(t=0;t<this.list.length&&(r=this.list.get(t),r!==e);t++);null!=r&&(this._stateChanged.emit(t),this._changed.emit({type:"set",newIndex:t,oldIndex:t,oldValues:[r],newValues:[r]}))}}var Private$6;!function(e){class t{createOutputModel(e){return new OutputModel(e)}}e.ContentFactory=t,e.defaultContentFactory=new t}(OutputAreaModel||(OutputAreaModel={})),function(e){function t(e,t,r){const s=e.slice(r).search(t);return s>=0?s+r:s}function r(e,r,s){if(void 0===s&&(s=""),!(r.includes("\b")||r.includes("\r")||r.includes("\n")))return{text:s=s.slice(0,e)+r+s.slice(e+r.length),index:e+r.length};let n=e,i=-1,o=0;const a=/[\n\b\r]/;for(;;){i=t(r,a,o);const e=r.slice(o,-1===i?r.length:i);if(s=s.slice(0,n)+e+s.slice(n+e.length),o=i+1,n+=e.length,-1===i)break;const l=r[i];if("\b"===l)n>0&&"\n"!==s[n-1]&&(s=s.slice(0,n-1)+s.slice(n+1),n--);else if("\r"===l){let e=!1;for(;!e;)0===n||"\n"===s[n-1]?e=!0:n--}else{if("\n"!==l)throw Error("This should not happen");n=(s+="\n").length}}return{text:s,index:n}}function s(e){return JSON.parse(JSON.stringify(e))}e.normalize=function(e){isStream(e)&&Array.isArray(e.text)&&(e.text=e.text.join("\n"))},e.processText=r,e.addText=function(e,t,n){const{text:i,index:o}=r(e,n,t.text);let a=!1,l=0;for(;!a;)l===i.length?(l===t.text.length||t.remove(l,t.text.length),a=!0):l===t.text.length?l!==i.length&&(t.insert(t.text.length,s(i.slice(l))),a=!0):i[l]!==t.text[l]?(t.remove(l,t.text.length),t.insert(l,s(i.slice(l))),a=!0):l++;return o}}(Private$6||(Private$6={}));const OUTPUT_AREA_CLASS="jp-OutputArea",OUTPUT_AREA_ITEM_CLASS="jp-OutputArea-child",OUTPUT_AREA_OUTPUT_CLASS="jp-OutputArea-output",OUTPUT_AREA_PROMPT_CLASS="jp-OutputArea-prompt",OUTPUT_AREA_STDIN_HIDING_CLASS="jp-OutputArea-stdin-hiding",OUTPUT_PROMPT_CLASS$1="jp-OutputPrompt",EXECUTE_CLASS="jp-OutputArea-executeResult",OUTPUT_AREA_STDIN_ITEM_CLASS="jp-OutputArea-stdin-item",STDIN_CLASS="jp-Stdin",STDIN_PROMPT_CLASS="jp-Stdin-prompt",STDIN_INPUT_CLASS="jp-Stdin-input",OUTPUT_PROMPT_OVERLAY="jp-OutputArea-promptOverlay";class OutputArea extends Widget{constructor(e){var t,r,s,n,i;super(),this.outputLengthChanged=new Signal(this),this._onIOPub=e=>{const t=this.model,r=e.header.msg_type;let s;const n=(e.content.transient||{}).display_id;let i;switch(r){case"execute_result":case"display_data":case"stream":case"error":s={...e.content,output_type:r},t.add(s);break;case"clear_output":{const r=e.content.wait;t.clear(r);break}case"update_display_data":if(s={...e.content,output_type:"display_data"},i=this._displayIdMap.get(n),i)for(const e of i)t.set(e,s);break;case"status":"idle"===e.content.execution_state&&(this._pendingInput=!1);break}n&&"display_data"===r&&(i=this._displayIdMap.get(n)||[],i.push(t.length-1),this._displayIdMap.set(n,i))},this._onExecuteReply=e=>{const t=this.model,r=e.content;if("ok"!==r.status)return;const s=r&&r.payload;if(!s||!s.length)return;const n=s.filter(e=>"page"===e.source);if(!n.length)return;const i={output_type:"display_data",data:JSON.parse(JSON.stringify(n[0])).data,metadata:{}};t.add(i)},this._displayIdMap=/* @__PURE__ */new Map,this._minHeightTimeout=null,this._inputRequested=new Signal(this),this._toggleScrolling=new Signal(this),this._initialize=new Signal(this),this._outputTracker=new WidgetTracker({namespace:UUID.uuid4()}),this._inputHistoryScope="global",this._pendingInput=!1,this._showInputPlaceholder=!0,super.layout=new PanelLayout,this.addClass(OUTPUT_AREA_CLASS),this.contentFactory=null!==(t=e.contentFactory)&&void 0!==t?t:OutputArea.defaultContentFactory,this.rendermime=e.rendermime,this._maxNumberOutputs=null!==(r=e.maxNumberOutputs)&&void 0!==r?r:1/0,this._translator=null!==(s=e.translator)&&void 0!==s?s:nullTranslator,this._inputHistoryScope=null!==(n=e.inputHistoryScope)&&void 0!==n?n:"global",this._showInputPlaceholder=null===(i=e.showInputPlaceholder)||void 0===i||i;const o=this.model=e.model;for(let a=0;a<Math.min(o.length,this._maxNumberOutputs+1);a++){const e=o.get(a);this._insertOutput(a,e),"stream"===e.type&&e.streamText.changed.connect((t,r)=>{this._setOutput(a,e)})}o.changed.connect(this.onModelChanged,this),o.stateChanged.connect(this.onStateChanged,this),e.promptOverlay&&this._addPromptOverlay()}get layout(){return super.layout}get widgets(){return this.layout.widgets}get future(){return this._future}set future(e){if(this.model.isDisposed)throw Error("Model is disposed");this._future!==e&&(this._future&&this._future.dispose(),this._future=e,e.done.finally(()=>{this._pendingInput=!1}).catch(()=>{}),this.model.clear(),this.widgets.length&&(this._clear(),this.outputLengthChanged.emit(Math.min(this.model.length,this._maxNumberOutputs))),e.onIOPub=this._onIOPub,e.onReply=this._onExecuteReply,e.onStdin=t=>{libExports$3.KernelMessage.isInputRequestMsg(t)&&this.onInputRequest(t,e)})}get inputRequested(){return this._inputRequested}get pendingInput(){return this._pendingInput}get maxNumberOutputs(){return this._maxNumberOutputs}set maxNumberOutputs(e){if(e<=0)return void console.warn("OutputArea.maxNumberOutputs must be strictly positive.");const t=this._maxNumberOutputs;this._maxNumberOutputs=e,t<e&&this._showTrimmedOutputs(t)}dispose(){this._future&&(this._future.dispose(),this._future=null),this._displayIdMap.clear(),this._outputTracker.dispose(),super.dispose()}onModelChanged(e,t){switch(t.type){case"add":const e=t.newValues[0];this._insertOutput(t.newIndex,e),"stream"===e.type&&e.streamText.changed.connect((r,s)=>{this._setOutput(t.newIndex,e)});break;case"remove":if(this.widgets.length)if(0===this.model.length)this._clear();else{const e=t.oldIndex;for(let r=0;r<t.oldValues.length&&e<this.widgets.length;++r){const t=this.widgets[e];t.parent=null,t.dispose()}this._moveDisplayIdIndices(e,t.oldValues.length),this._preventHeightChangeJitter()}break;case"clear":this._clear();break;case"set":this._setOutput(t.newIndex,t.newValues[0])}this.outputLengthChanged.emit(Math.min(this.model.length,this._maxNumberOutputs))}get toggleScrolling(){return this._toggleScrolling}get initialize(){return this._initialize}_addPromptOverlay(){const e=document.createElement("div");e.className=OUTPUT_PROMPT_OVERLAY,e.addEventListener("click",()=>{this._toggleScrolling.emit()}),this.node.appendChild(e);const t=new ResizeObserver(()=>{const t=this.node.querySelector(".jp-OutputArea-child");t&&(e.style.height=`${Math.max(t.getBoundingClientRect().height,this.node.getBoundingClientRect().height)}px`)});t.observe(this.node),this.disposed.connect(()=>{t.disconnect()}),requestAnimationFrame(()=>{this._initialize.emit()})}_moveDisplayIdIndices(e,t){this._displayIdMap.forEach(r=>{const s=e+t;for(let n=r.length-1;n>=0;--n){const i=r[n];i>=e&&i<s?r.splice(n,1):i>=s&&(r[n]-=t)}})}onStateChanged(e,t){const r=Math.min(this.model.length,this._maxNumberOutputs);if(t){if(t>=this._maxNumberOutputs)return;this._setOutput(t,this.model.get(t))}else for(let s=0;s<r;s++)this._setOutput(s,this.model.get(s));this.outputLengthChanged.emit(r)}_clear(){if(!this.widgets.length)return;const e=this.widgets.length;for(let t=0;t<e;t++){const e=this.widgets[0];e.parent=null,e.dispose()}this._displayIdMap.clear(),this._preventHeightChangeJitter()}_preventHeightChangeJitter(){const e=this.node.getBoundingClientRect();this.node.style.minHeight=`${e.height}px`,this._minHeightTimeout&&window.clearTimeout(this._minHeightTimeout),this._minHeightTimeout=window.setTimeout(()=>{this.isDisposed||(this.node.style.minHeight="")},50)}onInputRequest(e,t){const r=this.contentFactory,s=e.content.prompt,n=e.content.password,i=new Panel;i.addClass(OUTPUT_AREA_ITEM_CLASS),i.addClass(OUTPUT_AREA_STDIN_ITEM_CLASS);const o=r.createOutputPrompt();o.addClass(OUTPUT_AREA_PROMPT_CLASS),i.addWidget(o),this._pendingInput=!0;const a=r.createStdin({parent_header:e.header,prompt:s,password:n,future:t,translator:this._translator,inputHistoryScope:this._inputHistoryScope,showInputPlaceholder:this._showInputPlaceholder});a.addClass(OUTPUT_AREA_OUTPUT_CLASS),i.addWidget(a),this.model.length>=this.maxNumberOutputs&&(this.maxNumberOutputs=this.model.length),this._inputRequested.emit(a);const l=a.node.getElementsByTagName("input")[0];a.value.then(e=>{this.model.length>=this.maxNumberOutputs&&(this.maxNumberOutputs=this.model.length+1),i.addClass(OUTPUT_AREA_STDIN_HIDING_CLASS),this.model.add({output_type:"stream",name:"stdin",text:e+"\n"}),l.focus(),this._pendingInput=!1,window.setTimeout(()=>{const e=document.activeElement;i.dispose(),e&&e instanceof HTMLElement&&e.focus()},500)}),this.layout.addWidget(i)}_setOutput(e,t){if(e>=this._maxNumberOutputs)return;const r=this.layout.widgets[e],s=r.widgets?r.widgets.filter(e=>"renderModel"in e).pop():r,n=this.rendermime.preferredMimeType(t.data,t.trusted?"any":"ensure");Private$5.currentPreferredMimetype.get(s)===n&&OutputArea.isIsolated(n,t.metadata)===s instanceof Private$5.IsolatedRenderer?s.renderModel(t):(this.layout.widgets[e].dispose(),this._insertOutput(e,t))}_insertOutput(e,t){if(e>this._maxNumberOutputs)return;const r=this.layout;if(e===this._maxNumberOutputs){const t=new Private$5.TrimmedOutputs(this._maxNumberOutputs,()=>{const e=this._maxNumberOutputs;this._maxNumberOutputs=1/0,this._showTrimmedOutputs(e)},this._translator);r.insertWidget(e,this._wrappedOutput(t))}else{let s=this.createOutputItem(t);s?s.toggleClass(EXECUTE_CLASS,null!==t.executionCount):s=new Widget,this._outputTracker.has(s)||this._outputTracker.add(s),r.insertWidget(e,s)}}get outputTracker(){return this._outputTracker}_showTrimmedOutputs(e){this.widgets[e].dispose();for(let t=e;t<this.model.length;t++)this._insertOutput(t,this.model.get(t));this.outputLengthChanged.emit(Math.min(this.model.length,this._maxNumberOutputs))}createOutputItem(e){const t=this.createRenderedMimetype(e);return t?this._wrappedOutput(t,e.executionCount):null}createRenderedMimetype(e){const t=this.rendermime.preferredMimeType(e.data,e.trusted?"any":"ensure");if(!t)return null;let r=this.rendermime.createRenderer(t);return!0===OutputArea.isIsolated(t,e.metadata)&&(r=new Private$5.IsolatedRenderer(r)),Private$5.currentPreferredMimetype.set(r,t),r.renderModel(e).catch(e=>{const t=document.createElement("pre"),s=this._translator.load("jupyterlab");t.textContent=s.__("Javascript Error: %1",e.message),r.node.appendChild(t),r.node.className="lm-Widget jp-RenderedText",r.node.setAttribute("data-mime-type","application/vnd.jupyter.stderr")}),r}_wrappedOutput(e,t=null){const r=new Private$5.OutputPanel;r.addClass(OUTPUT_AREA_ITEM_CLASS);const s=this.contentFactory.createOutputPrompt();return s.executionCount=t,s.addClass(OUTPUT_AREA_PROMPT_CLASS),r.addWidget(s),e.addClass(OUTPUT_AREA_OUTPUT_CLASS),r.addWidget(e),r}}class SimplifiedOutputArea extends OutputArea{onInputRequest(e,t){}createOutputItem(e){const t=this.createRenderedMimetype(e);if(!t)return null;const r=new Private$5.OutputPanel;return r.addClass(OUTPUT_AREA_ITEM_CLASS),t.addClass(OUTPUT_AREA_OUTPUT_CLASS),r.addWidget(t),r}}!function(e){e.execute=async function(e,t,r,s){var n;let i=!0;s&&Array.isArray(s.tags)&&-1!==s.tags.indexOf("raises-exception")&&(i=!1);const o={code:e,stop_on_error:i},a=null===(n=r.session)||void 0===n?void 0:n.kernel;if(!a)throw new Error("Session has no kernel.");const l=a.requestExecute(o,!1,s);return t.future=l,l.done},e.isIsolated=function(e,t){const r=t[e];return r&&void 0!==r.isolated?!!r.isolated:!!t.isolated};class t{createOutputPrompt(){return new OutputPrompt}createStdin(e){return new Stdin(e)}}e.ContentFactory=t,e.defaultContentFactory=new t}(OutputArea||(OutputArea={}));class OutputPrompt extends Widget{constructor(){super(),this._executionCount=null,this.addClass(OUTPUT_PROMPT_CLASS$1)}get executionCount(){return this._executionCount}set executionCount(e){this._executionCount=e,this.node.textContent=null===e?"":`[${e}]:`}}class Stdin extends Widget{static _historyIx(e,t){const r=Stdin._history.get(e);if(!r)return;const s=r.length;return t<=0?s+t:void 0}static _historyAt(e,t){const r=Stdin._history.get(e);if(!r)return;const s=r.length,n=Stdin._historyIx(e,t);return void 0!==n&&n<s?r[n]:void 0}static _historyPush(e,t){const r=Stdin._history.get(e);r.push(t),r.length>1e3&&r.shift()}static _historySearch(e,t,r,s=!0){const n=Stdin._history.get(e),i=n.length,o=Stdin._historyIx(e,r),a=e=>-1!==e.search(t);if(void 0!==o)if(s){if(0===o)return;const e=n.slice(0,o).findLastIndex(a);if(-1!==e)return e-i}else{if(o>=i-1)return;const e=n.slice(o+1).findIndex(a);if(-1!==e)return e-i+o+1}}constructor(e){var t;super({node:Private$5.createInputWidgetNode(e.prompt,e.password)}),this._promise=new PromiseDelegate,this._resolved=!1,this.addClass(STDIN_CLASS),this._future=e.future,this._historyIndex=0,this._historyKey="session"===e.inputHistoryScope?e.parent_header.session:"",this._historyPat="",this._parentHeader=e.parent_header,this._password=e.password,this._trans=(null!==(t=e.translator)&&void 0!==t?t:nullTranslator).load("jupyterlab"),this._value=e.prompt+" ",this._input=this.node.getElementsByTagName("input")[0],e.showInputPlaceholder&&!this._password?this._input.placeholder=this._trans.__(" for history. Search history with c-/c-"):this._input.placeholder="",Stdin._history.has(this._historyKey)||Stdin._history.set(this._historyKey,[])}get value(){return this._promise.promise.then(()=>this._value)}handleEvent(e){if(e.stopPropagation(),this._resolved)return void e.preventDefault();const t=this._input;if("keydown"===e.type)if("Enter"===e.key)this.resetSearch(),this._future.sendInputReply({status:"ok",value:t.value},this._parentHeader),this._password?this._value+="":(this._value+=t.value,Stdin._historyPush(this._historyKey,t.value)),this._resolved=!0,this._promise.resolve(void 0);else if("Escape"===e.key)this.resetSearch(),t.blur();else if(!e.ctrlKey||"ArrowUp"!==e.key&&"ArrowDown"!==e.key){if("ArrowUp"===e.key){this.resetSearch();const r=Stdin._historyAt(this._historyKey,this._historyIndex-1);r&&(0===this._historyIndex&&(this._valueCache=t.value),this._setInputValue(r),--this._historyIndex,e.preventDefault())}else if("ArrowDown"===e.key)if(this.resetSearch(),0===this._historyIndex);else if(-1===this._historyIndex)this._setInputValue(this._valueCache),++this._historyIndex;else{const e=Stdin._historyAt(this._historyKey,this._historyIndex+1);e&&(this._setInputValue(e),++this._historyIndex)}}else{""===this._historyPat&&(this._historyPat=t.value);const r="ArrowUp"===e.key,s=Stdin._historySearch(this._historyKey,this._historyPat,this._historyIndex,r);if(void 0!==s){const r=Stdin._historyAt(this._historyKey,s);void 0!==r&&(0===this._historyIndex&&(this._valueCache=t.value),this._setInputValue(r),this._historyIndex=s,e.preventDefault())}}}resetSearch(){this._historyPat=""}onAfterAttach(e){this._input.addEventListener("keydown",this),this._input.focus()}onBeforeDetach(e){this._input.removeEventListener("keydown",this)}_setInputValue(e){this._input.value=e,this._input.setSelectionRange(e.length,e.length)}}var Private$5;Stdin._history=/* @__PURE__ */new Map,function(e){e.createInputWidgetNode=function(e,t){const r=document.createElement("div"),s=document.createElement("pre");s.className=STDIN_PROMPT_CLASS,s.textContent=e;const n=document.createElement("input");return n.className=STDIN_INPUT_CLASS,t&&(n.type="password"),r.appendChild(s),s.appendChild(n),r};e.IsolatedRenderer=class extends Widget{constructor(e){super({node:document.createElement("iframe")}),this.addClass("jp-mod-isolated"),this._wrapped=e;const t=this.node;t.frameBorder="0",t.scrolling="auto",t.addEventListener("load",()=>{t.contentDocument.open(),t.contentDocument.write(this._wrapped.node.innerHTML),t.contentDocument.close();const e=t.contentDocument.body;t.style.height=`${e.scrollHeight}px`,t.heightChangeObserver=new ResizeObserver(()=>{t.style.height=`${e.scrollHeight}px`}),t.heightChangeObserver.observe(e)})}renderModel(e){return this._wrapped.renderModel(e)}},e.currentPreferredMimetype=new AttachedProperty({name:"preferredMimetype",create:e=>""});e.OutputPanel=class extends Panel{constructor(e){super(e)}_onContext(e){this.node.focus()}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("contextmenu",this._onContext.bind(this))}onBeforeDetach(e){super.onAfterDetach(e),this.node.removeEventListener("contextmenu",this._onContext.bind(this))}};e.TrimmedOutputs=class extends Widget{constructor(e,t,r){const s=document.createElement("div"),n=(null!=r?r:nullTranslator).load("jupyterlab"),i=document.createElement("button");i.type="button",i.className="jp-TrimmedOutputs-button",i.title=n.__("The first %1 are displayed",e),i.textContent=n.__("Show more outputs"),s.appendChild(i),super({node:s}),this._onClick=t,this.addClass("jp-TrimmedOutputs")}handleEvent(e){"click"===e.type&&this._onClick(e)}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("click",this)}onBeforeDetach(e){super.onBeforeDetach(e),this.node.removeEventListener("click",this)}}}(Private$5||(Private$5={}));const create$5=()=>/* @__PURE__ */new Map,copy=e=>{const t=create$5();return e.forEach((e,r)=>{t.set(r,e)}),t},setIfUndefined=(e,t,r)=>{let s=e.get(t);return void 0===s&&e.set(t,s=r()),s},map=(e,t)=>{const r=[];for(const[s,n]of e)r.push(t(n,s));return r},any=(e,t)=>{for(const[r,s]of e)if(t(s,r))return!0;return!1},create$4=()=>/* @__PURE__ */new Set,last=e=>e[e.length-1],appendTo=(e,t)=>{for(let r=0;r<t.length;r++)e.push(t[r])},from=Array.from,every$1=(e,t)=>{for(let r=0;r<e.length;r++)if(!t(e[r],r,e))return!1;return!0},some=(e,t)=>{for(let r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1},unfold=(e,t)=>{const r=new Array(e);for(let s=0;s<e;s++)r[s]=t(s,r);return r},isArray=Array.isArray;class ObservableV2{constructor(){this._observers=create$5()}on(e,t){return setIfUndefined(this._observers,e,create$4).add(t),t}once(e,t){const r=(...s)=>{this.off(e,r),t(...s)};this.on(e,r)}off(e,t){const r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return from((this._observers.get(e)||create$5()).values()).forEach(e=>e(...t))}destroy(){this._observers=create$5()}}class Observable{constructor(){this._observers=create$5()}on(e,t){setIfUndefined(this._observers,e,create$4).add(t)}once(e,t){const r=(...s)=>{this.off(e,r),t(...s)};this.on(e,r)}off(e,t){const r=this._observers.get(e);void 0!==r&&(r.delete(t),0===r.size&&this._observers.delete(e))}emit(e,t){return from((this._observers.get(e)||create$5()).values()).forEach(e=>e(...t))}destroy(){this._observers=create$5()}}const floor=Math.floor,abs=Math.abs,min=(e,t)=>e<t?e:t,max=(e,t)=>e>t?e:t,isNegativeZero=e=>0!==e?e<0:1/e<0,BIT1=1,BIT2=2,BIT3=4,BIT4=8,BIT6=32,BIT7=64,BIT8=128,BITS5=31,BITS6=63,BITS7=127,BITS31=2147483647,MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER,MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER,isInteger=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&floor(e)===e),fromCharCode=String.fromCharCode,toLowerCase=e=>e.toLowerCase(),trimLeftRegex=/^\s*/g,trimLeft=e=>e.replace(trimLeftRegex,""),fromCamelCaseRegex=/([A-Z])/g,fromCamelCase=(e,t)=>trimLeft(e.replace(fromCamelCaseRegex,e=>`${t}${toLowerCase(e)}`)),_encodeUtf8Polyfill=e=>{const t=unescape(encodeURIComponent(e)),r=t.length,s=new Uint8Array(r);for(let n=0;n<r;n++)s[n]=t.codePointAt(n);return s},utf8TextEncoder="undefined"!=typeof TextEncoder?new TextEncoder:null,_encodeUtf8Native=e=>utf8TextEncoder.encode(e),encodeUtf8=utf8TextEncoder?_encodeUtf8Native:_encodeUtf8Polyfill;let utf8TextDecoder="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});utf8TextDecoder&&1===utf8TextDecoder.decode(new Uint8Array).length&&(utf8TextDecoder=null);const repeat=(e,t)=>unfold(t,()=>e).join("");class Encoder{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const createEncoder=()=>new Encoder,length=e=>{let t=e.cpos;for(let r=0;r<e.bufs.length;r++)t+=e.bufs[r].length;return t},toUint8Array=e=>{const t=new Uint8Array(length(e));let r=0;for(let s=0;s<e.bufs.length;s++){const n=e.bufs[s];t.set(n,r),r+=n.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),r),t},verifyLen=(e,t)=>{const r=e.cbuf.length;r-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*max(r,t)),e.cpos=0)},write=(e,t)=>{const r=e.cbuf.length;e.cpos===r&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*r),e.cpos=0),e.cbuf[e.cpos++]=t},writeUint8=write,writeVarUint=(e,t)=>{for(;t>BITS7;)write(e,BIT8|BITS7&t),t=floor(t/128);write(e,BITS7&t)},writeVarInt=(e,t)=>{const r=isNegativeZero(t);for(r&&(t=-t),write(e,(t>BITS6?BIT8:0)|(r?BIT7:0)|BITS6&t),t=floor(t/64);t>0;)write(e,(t>BITS7?BIT8:0)|BITS7&t),t=floor(t/128)},_strBuffer=new Uint8Array(3e4),_maxStrBSize=_strBuffer.length/3,_writeVarStringNative=(e,t)=>{if(t.length<_maxStrBSize){const r=utf8TextEncoder.encodeInto(t,_strBuffer).written||0;writeVarUint(e,r);for(let t=0;t<r;t++)write(e,_strBuffer[t])}else writeVarUint8Array(e,encodeUtf8(t))},_writeVarStringPolyfill=(e,t)=>{const r=unescape(encodeURIComponent(t)),s=r.length;writeVarUint(e,s);for(let n=0;n<s;n++)write(e,r.codePointAt(n))},writeVarString=utf8TextEncoder&&utf8TextEncoder.encodeInto?_writeVarStringNative:_writeVarStringPolyfill,writeUint8Array=(e,t)=>{const r=e.cbuf.length,s=e.cpos,n=min(r-s,t.length),i=t.length-n;e.cbuf.set(t.subarray(0,n),s),e.cpos+=n,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(max(2*r,i)),e.cbuf.set(t.subarray(n)),e.cpos=i)},writeVarUint8Array=(e,t)=>{writeVarUint(e,t.byteLength),writeUint8Array(e,t)},writeOnDataView=(e,t)=>{verifyLen(e,t);const r=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,r},writeFloat32=(e,t)=>writeOnDataView(e,4).setFloat32(0,t,!1),writeFloat64=(e,t)=>writeOnDataView(e,8).setFloat64(0,t,!1),writeBigInt64=(e,t)=>writeOnDataView(e,8).setBigInt64(0,t,!1),floatTestBed=new DataView(new ArrayBuffer(4)),isFloat32=e=>(floatTestBed.setFloat32(0,e),floatTestBed.getFloat32(0)===e),writeAny=(e,t)=>{switch(typeof t){case"string":write(e,119),writeVarString(e,t);break;case"number":isInteger(t)&&abs(t)<=BITS31?(write(e,125),writeVarInt(e,t)):isFloat32(t)?(write(e,124),writeFloat32(e,t)):(write(e,123),writeFloat64(e,t));break;case"bigint":write(e,122),writeBigInt64(e,t);break;case"object":if(null===t)write(e,126);else if(isArray(t)){write(e,117),writeVarUint(e,t.length);for(let r=0;r<t.length;r++)writeAny(e,t[r])}else if(t instanceof Uint8Array)write(e,116),writeVarUint8Array(e,t);else{write(e,118);const r=Object.keys(t);writeVarUint(e,r.length);for(let s=0;s<r.length;s++){const n=r[s];writeVarString(e,n),writeAny(e,t[n])}}break;case"boolean":write(e,t?120:121);break;default:write(e,127)}};class RleEncoder extends Encoder{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&writeVarUint(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const flushUintOptRleEncoder=e=>{e.count>0&&(writeVarInt(e.encoder,1===e.count?e.s:-e.s),e.count>1&&writeVarUint(e.encoder,e.count-2))};class UintOptRleEncoder{constructor(){this.encoder=new Encoder,this.s=0,this.count=0}write(e){this.s===e?this.count++:(flushUintOptRleEncoder(this),this.count=1,this.s=e)}toUint8Array(){return flushUintOptRleEncoder(this),toUint8Array(this.encoder)}}const flushIntDiffOptRleEncoder=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);writeVarInt(e.encoder,t),e.count>1&&writeVarUint(e.encoder,e.count-2)}};class IntDiffOptRleEncoder{constructor(){this.encoder=new Encoder,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(flushIntDiffOptRleEncoder(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return flushIntDiffOptRleEncoder(this),toUint8Array(this.encoder)}}class StringEncoder{constructor(){this.sarr=[],this.s="",this.lensE=new UintOptRleEncoder}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Encoder;return this.sarr.push(this.s),this.s="",writeVarString(e,this.sarr.join("")),writeUint8Array(e,this.lensE.toUint8Array()),toUint8Array(e)}}const create$3=e=>new Error(e),methodUnimplemented=()=>{throw create$3("Method unimplemented")},unexpectedCase=()=>{throw create$3("Unexpected case")},getRandomValues=crypto.getRandomValues.bind(crypto),uint32=()=>getRandomValues(new Uint32Array(1))[0],uuidv4Template="10000000-1000-4000-8000-100000000000",uuidv4=()=>uuidv4Template.replace(/[018]/g,e=>(e^uint32()&15>>e/4).toString(16)),getUnixTime=Date.now,create$2=e=>new Promise(e);Promise.all.bind(Promise);const undefinedToNull=e=>void 0===e?null:e;class VarStoragePolyfill{constructor(){this.map=/* @__PURE__ */new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let _localStorage=new VarStoragePolyfill,usePolyfill=!0;try{"undefined"!=typeof localStorage&&localStorage&&(_localStorage=localStorage,usePolyfill=!1)}catch(e){}const varStorage=_localStorage,EqualityTraitSymbol=/* @__PURE__ */Symbol("Equality"),equals=(e,t)=>e===t||!!e?.[EqualityTraitSymbol]?.(t)||!1,isObject=e=>"object"==typeof e,assign=Object.assign,keys=Object.keys,forEach=(e,t)=>{for(const r in e)t(e[r],r)},size=e=>keys(e).length,isEmpty=e=>{for(const t in e)return!1;return!0},every=(e,t)=>{for(const r in e)if(!t(e[r],r))return!1;return!0},hasProperty=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),equalFlat=(e,t)=>e===t||size(e)===size(t)&&every(e,(e,r)=>(void 0!==e||hasProperty(t,r))&&equals(t[r],e)),freeze=Object.freeze,deepFreeze=e=>{for(const t in e){const r=e[t];"object"!=typeof r&&"function"!=typeof r||deepFreeze(e[t])}return freeze(e)},callAll=(e,t,r=0)=>{try{for(;r<e.length;r++)e[r](...t)}finally{r<e.length&&callAll(e,t,r+1)}},equalityDeep=(e,t)=>{if(e===t)return!0;if(null==e||null==t||e.constructor!==t.constructor&&(e.constructor||Object)!==(t.constructor||Object))return!1;if(null!=e[EqualityTraitSymbol])return e[EqualityTraitSymbol](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;break;case Set:if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;break;case Map:if(e.size!==t.size)return!1;for(const r of e.keys())if(!t.has(r)||!equalityDeep(e.get(r),t.get(r)))return!1;break;case void 0:case Object:if(size(e)!==size(t))return!1;for(const r in e)if(!hasProperty(e,r)||!equalityDeep(e[r],t[r]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!equalityDeep(e[r],t[r]))return!1;break;default:return!1}return!0},isOneOf=(e,t)=>t.includes(e),isNode="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);let params;const computeParams=()=>{if(void 0===params)if(isNode){params=create$5();const e=process.argv;let t=null;for(let r=0;r<e.length;r++){const s=e[r];"-"===s[0]?(null!==t&&params.set(t,""),t=s):null!==t&&(params.set(t,s),t=null)}null!==t&&params.set(t,"")}else"object"==typeof location?(params=create$5(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){const[t,r]=e.split("=");params.set(`--${fromCamelCase(t,"-")}`,r),params.set(`-${fromCamelCase(t,"-")}`,r)}})):params=create$5();return params},hasParam=e=>computeParams().has(e),getVariable=e=>undefinedToNull(isNode?process.env[e.toUpperCase().replaceAll("-","_")]:varStorage.getItem(e)),hasConf=e=>hasParam("--"+e)||null!==getVariable(e),production=hasConf("production"),forceColor=isNode&&isOneOf(process.env.FORCE_COLOR,["true","1","2"]),supportsColor=forceColor||!hasParam("--no-colors")&&!hasConf("no-color")&&(!isNode||process.stdout.isTTY)&&(!isNode||hasParam("--color")||null!==getVariable("COLORTERM")||(getVariable("TERM")||"").includes("color"));class Pair{constructor(e,t){this.left=e,this.right=t}}const create$1=(e,t)=>new Pair(e,t),bool=e=>e.next()>=.5,int53=(e,t,r)=>floor(e.next()*(r+1-t)+t),int32=(e,t,r)=>floor(e.next()*(r+1-t)+t),int31=(e,t,r)=>int32(e,t,r),letter=e=>fromCharCode(int31(e,97,122)),word=(e,t=0,r=20)=>{const s=int31(e,t,r);let n="";for(let i=0;i<s;i++)n+=letter(e);return n},oneOf=(e,t)=>t[int31(e,0,t.length-1)],schemaSymbol=/* @__PURE__ */Symbol("0schema");class ValidationError{constructor(){this._rerrs=[]}extend(e,t,r,s=null){this._rerrs.push({path:e,expected:t,has:r,message:s})}toString(){const e=[];for(let t=this._rerrs.length-1;t>0;t--){const r=this._rerrs[t];e.push(repeat(" ",2*(this._rerrs.length-t))+`${null!=r.path?`[${r.path}] `:""}${r.has} doesn't match ${r.expected}. ${r.message}`)}return e.join("\n")}}const shapeExtends=(e,t)=>e===t||null!=e&&null!=t&&e.constructor===t.constructor&&(e[EqualityTraitSymbol]?equals(e,t):isArray(e)?every$1(e,e=>some(t,t=>shapeExtends(e,t))):!!isObject(e)&&every(e,(e,r)=>shapeExtends(e,t[r])));class Schema{static _dilutes=!1;extends(e){let[t,r]=[this.shape,e.shape];return this.constructor._dilutes&&([r,t]=[t,r]),shapeExtends(t,r)}equals(e){return this.constructor===e.constructor&&equalityDeep(this.shape,e.shape)}[schemaSymbol](){return!0}[EqualityTraitSymbol](e){return this.equals(e)}validate(e){return this.check(e)}check(e,t){methodUnimplemented()}get nullable(){return $union(this,$null)}get optional(){return new $Optional(this)}cast(e){return assert(e,this),e}expect(e){return assert(e,this),e}}class $ConstructedBy extends Schema{constructor(e,t){super(),this.shape=e,this._c=t}check(e,t=void 0){const r=e?.constructor===this.shape&&(null==this._c||this._c(e));return!r&&t?.extend(null,this.shape.name,e?.constructor.name,e?.constructor!==this.shape?"Constructor match failed":"Check failed"),r}}const $constructedBy=(e,t=null)=>new $ConstructedBy(e,t);$constructedBy($ConstructedBy);class $Custom extends Schema{constructor(e){super(),this.shape=e}check(e,t){const r=this.shape(e);return!r&&t?.extend(null,"custom prop",e?.constructor.name,"failed to check custom prop"),r}}const $custom=e=>new $Custom(e);$constructedBy($Custom);class $Literal extends Schema{constructor(e){super(),this.shape=e}check(e,t){const r=this.shape.some(t=>t===e);return!r&&t?.extend(null,this.shape.join(" | "),e.toString()),r}}const $literal=(...e)=>new $Literal(e),$$literal=$constructedBy($Literal),_regexEscape=RegExp.escape||(e=>e.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),_schemaStringTemplateToRegex=e=>$string.check(e)?[_regexEscape(e)]:$$literal.check(e)?e.shape.map(e=>e+""):$$number.check(e)?["[+-]?\\d+.?\\d*"]:$$string.check(e)?[".*"]:$$union.check(e)?e.shape.map(_schemaStringTemplateToRegex).flat(1):void unexpectedCase();class $StringTemplate extends Schema{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(_schemaStringTemplateToRegex).map(e=>`(${e.join("|")})`).join("")+"$")}check(e,t){const r=null!=this._r.exec(e);return!r&&t?.extend(null,this._r.toString(),e.toString(),"String doesn't match string template."),r}}$constructedBy($StringTemplate);const isOptionalSymbol=/* @__PURE__ */Symbol("optional");class $Optional extends Schema{constructor(e){super(),this.shape=e}check(e,t){const r=void 0===e||this.shape.check(e);return!r&&t?.extend(null,"undefined (optional)","()"),r}get[isOptionalSymbol](){return!0}}const $$optional=$constructedBy($Optional);class $Never extends Schema{check(e,t){return t?.extend(null,"never",typeof e),!1}}$constructedBy($Never);class $Object extends Schema{constructor(e,t=!1){super(),this.shape=e,this._isPartial=t}static _dilutes=!0;get partial(){return new $Object(this.shape,!0)}check(e,t){return null==e?(t?.extend(null,"object","null"),!1):every(this.shape,(r,s)=>{const n=this._isPartial&&!hasProperty(e,s)||r.check(e[s],t);return!n&&t?.extend(s.toString(),r.toString(),typeof e[s],"Object property does not match"),n})}}const $object=e=>new $Object(e),$$object=$constructedBy($Object),$objectAny=$custom(e=>null!=e&&(e.constructor===Object||null==e.constructor));class $Record extends Schema{constructor(e,t){super(),this.shape={keys:e,values:t}}check(e,t){return null!=e&&every(e,(r,s)=>{const n=this.shape.keys.check(s,t);return!n&&t?.extend(s+"","Record",typeof e,n?"Key doesn't match schema":"Value doesn't match value"),n&&this.shape.values.check(r,t)})}}const $record=(e,t)=>new $Record(e,t),$$record=$constructedBy($Record);class $Tuple extends Schema{constructor(e){super(),this.shape=e}check(e,t){return null!=e&&every(this.shape,(r,s)=>{const n=r.check(e[s],t);return!n&&t?.extend(s.toString(),"Tuple",typeof r),n})}}const $tuple=(...e)=>new $Tuple(e);$constructedBy($Tuple);class $Array extends Schema{constructor(e){super(),this.shape=1===e.length?e[0]:new $Union(e)}check(e,t){const r=isArray(e)&&every$1(e,e=>this.shape.check(e));return!r&&t?.extend(null,"Array",""),r}}const $array=(...e)=>new $Array(e),$$array=$constructedBy($Array),$arrayAny=$custom(e=>isArray(e));class $InstanceOf extends Schema{constructor(e,t){super(),this.shape=e,this._c=t}check(e,t){const r=e instanceof this.shape&&(null==this._c||this._c(e));return!r&&t?.extend(null,this.shape.name,e?.constructor.name),r}}const $instanceOf=(e,t=null)=>new $InstanceOf(e,t);$constructedBy($InstanceOf);const $$schema=$instanceOf(Schema);class $Lambda extends Schema{constructor(e){super(),this.len=e.length-1,this.args=$tuple(...e.slice(-1)),this.res=e[this.len]}check(e,t){const r=e.constructor===Function&&e.length<=this.len;return!r&&t?.extend(null,"function",typeof e),r}}const $$lambda=$constructedBy($Lambda),$function=$custom(e=>"function"==typeof e);class $Intersection extends Schema{constructor(e){super(),this.shape=e}check(e,t){const r=every$1(this.shape,r=>r.check(e,t));return!r&&t?.extend(null,"Intersectinon",typeof e),r}}$constructedBy($Intersection,e=>e.shape.length>0);class $Union extends Schema{static _dilutes=!0;constructor(e){super(),this.shape=e}check(e,t){const r=some(this.shape,r=>r.check(e,t));return t?.extend(null,"Union",typeof e),r}}const $union=(...e)=>e.findIndex(e=>$$union.check(e))>=0?$union(...e.map(e=>$(e)).map(e=>$$union.check(e)?e.shape:[e]).flat(1)):1===e.length?e[0]:new $Union(e),$$union=$constructedBy($Union),_t=()=>!0,$any=$custom(_t),$$any=$constructedBy($Custom,e=>e.shape===_t),$bigint=$custom(e=>"bigint"==typeof e),$$bigint=$custom(e=>e===$bigint),$symbol=$custom(e=>"symbol"==typeof e);$custom(e=>e===$symbol);const $number=$custom(e=>"number"==typeof e),$$number=$custom(e=>e===$number),$string=$custom(e=>"string"==typeof e),$$string=$custom(e=>e===$string),$boolean=$custom(e=>"boolean"==typeof e),$$boolean=$custom(e=>e===$boolean),$undefined=$literal(void 0);$constructedBy($Literal,e=>1===e.shape.length&&void 0===e.shape[0]),$literal(void 0);const $null=$literal(null),$$null=$constructedBy($Literal,e=>1===e.shape.length&&null===e.shape[0]);$constructedBy(Uint8Array),$constructedBy($ConstructedBy,e=>e.shape===Uint8Array);const $primitive=$union($number,$string,$null,$undefined,$bigint,$boolean,$symbol);(()=>{const e=$array($any),t=$record($string,$any),r=$union($number,$string,$null,$boolean,e,t);e.shape=r,t.shape.values=r})();const $=e=>{if($$schema.check(e))return e;if($objectAny.check(e)){const t={};for(const r in e)t[r]=$(e[r]);return $object(t)}return $arrayAny.check(e)?$union(...e.map($)):$primitive.check(e)?$literal(e):$function.check(e)?$constructedBy(e):void unexpectedCase()},assert=production?()=>{}:(e,t)=>{const r=new ValidationError;if(!t.check(e,r))throw create$3(`Expected value to be of type ${t.constructor.name}.\n${r.toString()}`)};class PatternMatcher{constructor(e){this.patterns=[],this.$state=e}if(e,t){return this.patterns.push({if:$(e),h:t}),this}else(e){return this.if($any,e)}done(){return(e,t)=>{for(let r=0;r<this.patterns.length;r++){const s=this.patterns[r];if(s.if.check(e))return s.h(e,t)}throw create$3("Unhandled pattern")}}}const match=e=>new PatternMatcher(e),_random=match($any).if($$number,(e,t)=>int53(t,MIN_SAFE_INTEGER,MAX_SAFE_INTEGER)).if($$string,(e,t)=>word(t)).if($$boolean,(e,t)=>bool(t)).if($$bigint,(e,t)=>BigInt(int53(t,MIN_SAFE_INTEGER,MAX_SAFE_INTEGER))).if($$union,(e,t)=>random(t,oneOf(t,e.shape))).if($$object,(e,t)=>{const r={};for(const s in e.shape){let n=e.shape[s];if($$optional.check(n)){if(bool(t))continue;n=n.shape}r[s]=_random(n,t)}return r}).if($$array,(e,t)=>{const r=[],s=int32(t,0,42);for(let n=0;n<s;n++)r.push(random(t,e.shape));return r}).if($$literal,(e,t)=>oneOf(t,e.shape)).if($$null,(e,t)=>null).if($$lambda,(e,t)=>{const r=random(t,e.res);return()=>r}).if($$any,(e,t)=>random(t,oneOf(t,[$number,$string,$null,$undefined,$bigint,$boolean,$array($number),$record($union("a","b","c"),$number)]))).if($$record,(e,t)=>{const r={},s=int53(t,0,3);for(let n=0;n<s;n++){const s=random(t,e.shape.keys),n=random(t,e.shape.values);r[s]=n}return r}).done(),random=(e,t)=>_random($(t),e),doc="undefined"!=typeof document?document:{};$custom(e=>e.nodeType===DOCUMENT_FRAGMENT_NODE),"undefined"!=typeof DOMParser&&new DOMParser,$custom(e=>e.nodeType===ELEMENT_NODE),$custom(e=>e.nodeType===TEXT_NODE);const mapToStyleString=e=>map(e,(e,t)=>`${t}:${e};`).join(""),ELEMENT_NODE=doc.ELEMENT_NODE,TEXT_NODE=doc.TEXT_NODE,DOCUMENT_NODE=doc.DOCUMENT_NODE,DOCUMENT_FRAGMENT_NODE=doc.DOCUMENT_FRAGMENT_NODE;$custom(e=>e.nodeType===DOCUMENT_NODE);const create=Symbol,BOLD=create(),UNBOLD=create(),BLUE=create(),GREY=create(),GREEN=create(),RED=create(),PURPLE=create(),ORANGE=create(),UNCOLOR=create(),computeNoColorLoggingArgs=e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());const t=[],r=[];let s=0;for(;s<e.length;s++){const r=e[s];if(void 0===r)break;if(r.constructor===String||r.constructor===Number)t.push(r);else if(r.constructor===Object)break}for(s>0&&r.push(t.join(""));s<e.length;s++){const t=e[s];t instanceof Symbol||r.push(t)}return r},_browserStyleMap={[BOLD]:create$1("font-weight","bold"),[UNBOLD]:create$1("font-weight","normal"),[BLUE]:create$1("color","blue"),[GREEN]:create$1("color","green"),[GREY]:create$1("color","grey"),[RED]:create$1("color","red"),[PURPLE]:create$1("color","purple"),[ORANGE]:create$1("color","orange"),[UNCOLOR]:create$1("color","black")},computeBrowserLoggingArgs=e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());const t=[],r=[],s=create$5();let n=[],i=0;for(;i<e.length;i++){const n=e[i],o=_browserStyleMap[n];if(void 0!==o)s.set(o.left,o.right);else{if(void 0===n)break;if(n.constructor!==String&&n.constructor!==Number)break;{const e=mapToStyleString(s);i>0||e.length>0?(t.push("%c"+n),r.push(e)):t.push(n)}}}for(i>0&&(n=r,n.unshift(t.join("")));i<e.length;i++){const t=e[i];t instanceof Symbol||n.push(t)}return n},computeLoggingArgs=supportsColor?computeBrowserLoggingArgs:computeNoColorLoggingArgs,print=(...e)=>{console.log(...computeLoggingArgs(e)),vconsoles.forEach(t=>t.print(e))},warn=(...e)=>{console.warn(...computeLoggingArgs(e)),e.unshift(ORANGE),vconsoles.forEach(t=>t.print(e))},vconsoles=create$4(),createIterator=e=>({[Symbol.iterator](){return this},next:e}),iteratorFilter=(e,t)=>createIterator(()=>{let r;do{r=e.next()}while(!r.done&&!t(r.value));return r}),iteratorMap=(e,t)=>createIterator(()=>{const{done:r,value:s}=e.next();return{done:r,value:r?void 0:t(s)}});class DeleteItem{constructor(e,t){this.clock=e,this.len=t}}class DeleteSet{constructor(){this.clients=/* @__PURE__ */new Map}}const iterateDeletedStructs=(e,t,r)=>t.clients.forEach((t,s)=>{const n=e.doc.store.clients.get(s);if(null!=n){const s=n[n.length-1],i=s.id.clock+s.length;for(let o=0,a=t[o];o<t.length&&a.clock<i;a=t[++o])iterateStructs(e,n,a.clock,a.len,r)}}),findIndexDS=(e,t)=>{let r=0,s=e.length-1;for(;r<=s;){const n=floor((r+s)/2),i=e[n],o=i.clock;if(o<=t){if(t<o+i.len)return n;r=n+1}else s=n-1}return null},isDeleted=(e,t)=>{const r=e.clients.get(t.client);return void 0!==r&&null!==findIndexDS(r,t.clock)},sortAndMergeDeleteSet=e=>{e.clients.forEach(e=>{let t,r;for(e.sort((e,t)=>e.clock-t.clock),t=1,r=1;t<e.length;t++){const s=e[r-1],n=e[t];s.clock+s.len>=n.clock?s.len=max(s.len,n.clock+n.len-s.clock):(r<t&&(e[r]=n),r++)}e.length=r})},mergeDeleteSets=e=>{const t=new DeleteSet;for(let r=0;r<e.length;r++)e[r].clients.forEach((s,n)=>{if(!t.clients.has(n)){const i=s.slice();for(let t=r+1;t<e.length;t++)appendTo(i,e[t].clients.get(n)||[]);t.clients.set(n,i)}});return sortAndMergeDeleteSet(t),t},addToDeleteSet=(e,t,r,s)=>{setIfUndefined(e.clients,t,()=>[]).push(new DeleteItem(r,s))},writeDeleteSet=(e,t)=>{writeVarUint(e.restEncoder,t.clients.size),from(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,r])=>{e.resetDsCurVal(),writeVarUint(e.restEncoder,t);const s=r.length;writeVarUint(e.restEncoder,s);for(let n=0;n<s;n++){const t=r[n];e.writeDsClock(t.clock),e.writeDsLen(t.len)}})},generateNewClientId=uint32;class Doc extends ObservableV2{constructor({guid:e=uuidv4(),collectionid:t=null,gc:r=!0,gcFilter:s=()=>!0,meta:n=null,autoLoad:i=!1,shouldLoad:o=!0}={}){super(),this.gc=r,this.gcFilter=s,this.clientID=generateNewClientId(),this.guid=e,this.collectionid=t,this.share=/* @__PURE__ */new Map,this.store=new StructStore,this._transaction=null,this._transactionCleanups=[],this.subdocs=/* @__PURE__ */new Set,this._item=null,this.shouldLoad=o,this.autoLoad=i,this.meta=n,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=create$2(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});const a=()=>create$2(e=>{const t=r=>{void 0!==r&&!0!==r||(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){const e=this._item;null===e||this.shouldLoad||transact(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(from(this.subdocs).map(e=>e.guid))}transact(e,t=null){return transact(this,e,t)}get(e,t=AbstractType){const r=setIfUndefined(this.share,e,()=>{const e=new t;return e._integrate(this,null),e}),s=r.constructor;if(t!==AbstractType&&s!==t){if(s===AbstractType){const s=new t;s._map=r._map,r._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=s}),s._start=r._start;for(let e=s._start;null!==e;e=e.right)e.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return r}getArray(e=""){return this.get(e,YArray)}getText(e=""){return this.get(e,YText)}getMap(e=""){return this.get(e,YMap)}getXmlElement(e=""){return this.get(e,YXmlElement)}getXmlFragment(e=""){return this.get(e,YXmlFragment)}toJSON(){const e={};return this.share.forEach((t,r)=>{e[r]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,from(this.subdocs).forEach(e=>e.destroy());const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new Doc({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,transact(e.parent.doc,r=>{const s=t.doc;e.deleted||r.subdocsAdded.add(s),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class DSEncoderV1{constructor(){this.restEncoder=createEncoder()}toUint8Array(){return toUint8Array(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){writeVarUint(this.restEncoder,e)}writeDsLen(e){writeVarUint(this.restEncoder,e)}}class UpdateEncoderV1 extends DSEncoderV1{writeLeftID(e){writeVarUint(this.restEncoder,e.client),writeVarUint(this.restEncoder,e.clock)}writeRightID(e){writeVarUint(this.restEncoder,e.client),writeVarUint(this.restEncoder,e.clock)}writeClient(e){writeVarUint(this.restEncoder,e)}writeInfo(e){writeUint8(this.restEncoder,e)}writeString(e){writeVarString(this.restEncoder,e)}writeParentInfo(e){writeVarUint(this.restEncoder,e?1:0)}writeTypeRef(e){writeVarUint(this.restEncoder,e)}writeLen(e){writeVarUint(this.restEncoder,e)}writeAny(e){writeAny(this.restEncoder,e)}writeBuf(e){writeVarUint8Array(this.restEncoder,e)}writeJSON(e){writeVarString(this.restEncoder,JSON.stringify(e))}writeKey(e){writeVarString(this.restEncoder,e)}}class DSEncoderV2{constructor(){this.restEncoder=createEncoder(),this.dsCurrVal=0}toUint8Array(){return toUint8Array(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,writeVarUint(this.restEncoder,t)}writeDsLen(e){0===e&&unexpectedCase(),writeVarUint(this.restEncoder,e-1),this.dsCurrVal+=e}}class UpdateEncoderV2 extends DSEncoderV2{constructor(){super(),this.keyMap=/* @__PURE__ */new Map,this.keyClock=0,this.keyClockEncoder=new IntDiffOptRleEncoder,this.clientEncoder=new UintOptRleEncoder,this.leftClockEncoder=new IntDiffOptRleEncoder,this.rightClockEncoder=new IntDiffOptRleEncoder,this.infoEncoder=new RleEncoder(writeUint8),this.stringEncoder=new StringEncoder,this.parentInfoEncoder=new RleEncoder(writeUint8),this.typeRefEncoder=new UintOptRleEncoder,this.lenEncoder=new UintOptRleEncoder}toUint8Array(){const e=createEncoder();return writeVarUint(e,0),writeVarUint8Array(e,this.keyClockEncoder.toUint8Array()),writeVarUint8Array(e,this.clientEncoder.toUint8Array()),writeVarUint8Array(e,this.leftClockEncoder.toUint8Array()),writeVarUint8Array(e,this.rightClockEncoder.toUint8Array()),writeVarUint8Array(e,toUint8Array(this.infoEncoder)),writeVarUint8Array(e,this.stringEncoder.toUint8Array()),writeVarUint8Array(e,toUint8Array(this.parentInfoEncoder)),writeVarUint8Array(e,this.typeRefEncoder.toUint8Array()),writeVarUint8Array(e,this.lenEncoder.toUint8Array()),writeUint8Array(e,toUint8Array(this.restEncoder)),toUint8Array(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){writeAny(this.restEncoder,e)}writeBuf(e){writeVarUint8Array(this.restEncoder,e)}writeJSON(e){writeAny(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const writeStructs=(e,t,r,s)=>{s=max(s,t[0].id.clock);const n=findIndexSS(t,s);writeVarUint(e.restEncoder,t.length-n),e.writeClient(r),writeVarUint(e.restEncoder,s);const i=t[n];i.write(e,s-i.id.clock);for(let o=n+1;o<t.length;o++)t[o].write(e,0)},writeClientsStructs=(e,t,r)=>{const s=/* @__PURE__ */new Map;r.forEach((e,r)=>{getState(t,r)>e&&s.set(r,e)}),getStateVector(t).forEach((e,t)=>{r.has(t)||s.set(t,0)}),writeVarUint(e.restEncoder,s.size),from(s.entries()).sort((e,t)=>t[0]-e[0]).forEach(([r,s])=>{writeStructs(e,t.clients.get(r),r,s)})},writeStructsFromTransaction=(e,t)=>writeClientsStructs(e,t.doc.store,t.beforeState);class EventHandler{constructor(){this.l=[]}}const createEventHandler=()=>new EventHandler,addEventHandlerListener=(e,t)=>e.l.push(t),removeEventHandlerListener=(e,t)=>{const r=e.l,s=r.length;e.l=r.filter(e=>t!==e),s===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},callEventHandlerListeners=(e,t,r)=>callAll(e.l,[t,r]);class ID{constructor(e,t){this.client=e,this.clock=t}}const compareIDs=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,createID=(e,t)=>new ID(e,t),findRootTypeKey=e=>{for(const[t,r]of e.doc.share.entries())if(r===e)return t;throw unexpectedCase()},isParentOf=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class RelativePosition{constructor(e,t,r,s=0){this.type=e,this.tname=t,this.item=r,this.assoc=s}}const relativePositionToJSON=e=>{const t={};return e.type&&(t.type=e.type),e.tname&&(t.tname=e.tname),e.item&&(t.item=e.item),null!=e.assoc&&(t.assoc=e.assoc),t},createRelativePositionFromJSON=e=>new RelativePosition(null==e.type?null:createID(e.type.client,e.type.clock),e.tname??null,null==e.item?null:createID(e.item.client,e.item.clock),null==e.assoc?0:e.assoc);class AbsolutePosition{constructor(e,t,r=0){this.type=e,this.index=t,this.assoc=r}}const createAbsolutePosition=(e,t,r=0)=>new AbsolutePosition(e,t,r),createRelativePosition=(e,t,r)=>{let s=null,n=null;return null===e._item?n=findRootTypeKey(e):s=createID(e._item.id.client,e._item.id.clock),new RelativePosition(s,n,t,r)},createRelativePositionFromTypeIndex=(e,t,r=0)=>{let s=e._start;if(r<0){if(0===t)return createRelativePosition(e,null,r);t--}for(;null!==s;){if(!s.deleted&&s.countable){if(s.length>t)return createRelativePosition(e,createID(s.id.client,s.id.clock+t),r);t-=s.length}if(null===s.right&&r<0)return createRelativePosition(e,s.lastId,r);s=s.right}return createRelativePosition(e,null,r)},getItemWithOffset=(e,t)=>{const r=getItem(e,t);return{item:r,diff:t.clock-r.id.clock}},createAbsolutePositionFromRelativePosition=(e,t,r=!0)=>{const s=t.store,n=e.item,i=e.type,o=e.tname,a=e.assoc;let l=null,c=0;if(null!==n){if(getState(s,n.client)<=n.clock)return null;const e=r?followRedone(s,n):getItemWithOffset(s,n),t=e.item;if(!(t instanceof Item))return null;if(l=t.parent,null===l._item||!l._item.deleted){c=t.deleted||!t.countable?0:e.diff+(a>=0?0:1);let r=t.left;for(;null!==r;)!r.deleted&&r.countable&&(c+=r.length),r=r.left}}else{if(null!==o)l=t.get(o);else{if(null===i)throw unexpectedCase();{if(getState(s,i.client)<=i.clock)return null;const{item:e}=r?followRedone(s,i):{item:getItem(s,i)};if(!(e instanceof Item&&e.content instanceof ContentType))return null;l=e.content.type}}c=a>=0?l._length:0}return createAbsolutePosition(l,c,e.assoc)},isVisible=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!isDeleted(t.ds,e.id),splitSnapshotAffectedStructs=(e,t)=>{const r=setIfUndefined(e.meta,splitSnapshotAffectedStructs,create$4),s=e.doc.store;r.has(t)||(t.sv.forEach((t,r)=>{t<getState(s,r)&&getItemCleanStart(e,createID(r,t))}),iterateDeletedStructs(e,t.ds,e=>{}),r.add(t))};class StructStore{constructor(){this.clients=/* @__PURE__ */new Map,this.pendingStructs=null,this.pendingDs=null}}const getStateVector=e=>{const t=/* @__PURE__ */new Map;return e.clients.forEach((e,r)=>{const s=e[e.length-1];t.set(r,s.id.clock+s.length)}),t},getState=(e,t)=>{const r=e.clients.get(t);if(void 0===r)return 0;const s=r[r.length-1];return s.id.clock+s.length},addStruct=(e,t)=>{let r=e.clients.get(t.id.client);if(void 0===r)r=[],e.clients.set(t.id.client,r);else{const e=r[r.length-1];if(e.id.clock+e.length!==t.id.clock)throw unexpectedCase()}r.push(t)},findIndexSS=(e,t)=>{let r=0,s=e.length-1,n=e[s],i=n.id.clock;if(i===t)return s;let o=floor(t/(i+n.length-1)*s);for(;r<=s;){if(n=e[o],i=n.id.clock,i<=t){if(t<i+n.length)return o;r=o+1}else s=o-1;o=floor((r+s)/2)}throw unexpectedCase()},find=(e,t)=>{const r=e.clients.get(t.client);return r[findIndexSS(r,t.clock)]},getItem=find,findIndexCleanStart=(e,t,r)=>{const s=findIndexSS(t,r),n=t[s];return n.id.clock<r&&n instanceof Item?(t.splice(s+1,0,splitItem(e,n,r-n.id.clock)),s+1):s},getItemCleanStart=(e,t)=>{const r=e.doc.store.clients.get(t.client);return r[findIndexCleanStart(e,r,t.clock)]},getItemCleanEnd=(e,t,r)=>{const s=t.clients.get(r.client),n=findIndexSS(s,r.clock),i=s[n];return r.clock!==i.id.clock+i.length-1&&i.constructor!==GC&&s.splice(n+1,0,splitItem(e,i,r.clock-i.id.clock+1)),i},replaceStruct=(e,t,r)=>{const s=e.clients.get(t.id.client);s[findIndexSS(s,t.id.clock)]=r},iterateStructs=(e,t,r,s,n)=>{if(0===s)return;const i=r+s;let o,a=findIndexCleanStart(e,t,r);do{o=t[a++],i<o.id.clock+o.length&&findIndexCleanStart(e,t,i),n(o)}while(a<t.length&&t[a].id.clock<i)};class Transaction{constructor(e,t,r){this.doc=e,this.deleteSet=new DeleteSet,this.beforeState=getStateVector(e.store),this.afterState=/* @__PURE__ */new Map,this.changed=/* @__PURE__ */new Map,this.changedParentTypes=/* @__PURE__ */new Map,this._mergeStructs=[],this.origin=t,this.meta=/* @__PURE__ */new Map,this.local=r,this.subdocsAdded=/* @__PURE__ */new Set,this.subdocsRemoved=/* @__PURE__ */new Set,this.subdocsLoaded=/* @__PURE__ */new Set,this._needFormattingCleanup=!1}}const writeUpdateMessageFromTransaction=(e,t)=>!(0===t.deleteSet.clients.size&&!any(t.afterState,(e,r)=>t.beforeState.get(r)!==e))&&(sortAndMergeDeleteSet(t.deleteSet),writeStructsFromTransaction(e,t),writeDeleteSet(e,t.deleteSet),!0),addChangedTypeToTransaction=(e,t,r)=>{const s=t._item;(null===s||s.id.clock<(e.beforeState.get(s.id.client)||0)&&!s.deleted)&&setIfUndefined(e.changed,t,create$4).add(r)},tryToMergeWithLefts=(e,t)=>{let r=e[t],s=e[t-1],n=t;for(;n>0&&(s.deleted===r.deleted&&s.constructor===r.constructor&&s.mergeWith(r));r=s,s=e[--n-1])r instanceof Item&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,s);const i=t-n;return i&&e.splice(t+1-i,i),i},tryGcDeleteSet=(e,t,r)=>{for(const[s,n]of e.clients.entries()){const e=t.clients.get(s);for(let s=n.length-1;s>=0;s--){const i=n[s],o=i.clock+i.len;for(let s=findIndexSS(e,i.clock),n=e[s];s<e.length&&n.id.clock<o;n=e[++s]){const n=e[s];if(i.clock+i.len<=n.id.clock)break;n instanceof Item&&n.deleted&&!n.keep&&r(n)&&n.gc(t,!1)}}}},tryMergeDeleteSet=(e,t)=>{e.clients.forEach((e,r)=>{const s=t.clients.get(r);for(let t=e.length-1;t>=0;t--){const r=e[t];for(let e=min(s.length-1,1+findIndexSS(s,r.clock+r.len-1)),t=s[e];e>0&&t.id.clock>=r.clock;t=s[e])e-=1+tryToMergeWithLefts(s,e)}})},cleanupTransactions=(e,t)=>{if(t<e.length){const r=e[t],s=r.doc,n=s.store,i=r.deleteSet,o=r._mergeStructs;try{sortAndMergeDeleteSet(i),r.afterState=getStateVector(r.doc.store),s.emit("beforeObserverCalls",[r,s]);const e=[];r.changed.forEach((t,s)=>e.push(()=>{null!==s._item&&s._item.deleted||s._callObserver(r,t)})),e.push(()=>{r.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),callEventHandlerListeners(t._dEH,e,r))})}),e.push(()=>s.emit("afterTransaction",[r,s])),callAll(e,[]),r._needFormattingCleanup&&cleanupYTextAfterTransaction(r)}finally{s.gc&&tryGcDeleteSet(i,n,s.gcFilter),tryMergeDeleteSet(i,n),r.afterState.forEach((e,t)=>{const s=r.beforeState.get(t)||0;if(s!==e){const e=n.clients.get(t),r=max(findIndexSS(e,s),1);for(let t=e.length-1;t>=r;)t-=1+tryToMergeWithLefts(e,t)}});for(let e=o.length-1;e>=0;e--){const{client:t,clock:r}=o[e].id,s=n.clients.get(t),i=findIndexSS(s,r);i+1<s.length&&tryToMergeWithLefts(s,i+1)>1||i>0&&tryToMergeWithLefts(s,i)}if(r.local||r.afterState.get(s.clientID)===r.beforeState.get(s.clientID)||(print(ORANGE,BOLD,"[yjs] ",UNBOLD,RED,"Changed the client-id because another client seems to be using it."),s.clientID=generateNewClientId()),s.emit("afterTransactionCleanup",[r,s]),s._observers.has("update")){const e=new UpdateEncoderV1;writeUpdateMessageFromTransaction(e,r)&&s.emit("update",[e.toUint8Array(),r.origin,s,r])}if(s._observers.has("updateV2")){const e=new UpdateEncoderV2;writeUpdateMessageFromTransaction(e,r)&&s.emit("updateV2",[e.toUint8Array(),r.origin,s,r])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=r;(a.size>0||c.size>0||l.size>0)&&(a.forEach(e=>{e.clientID=s.clientID,null==e.collectionid&&(e.collectionid=s.collectionid),s.subdocs.add(e)}),c.forEach(e=>s.subdocs.delete(e)),s.emit("subdocs",[{loaded:l,added:a,removed:c},s,r]),c.forEach(e=>e.destroy())),e.length<=t+1?(s._transactionCleanups=[],s.emit("afterAllTransactions",[s,e])):cleanupTransactions(e,t+1)}}},transact=(e,t,r=null,s=!0)=>{const n=e._transactionCleanups;let i=!1,o=null;null===e._transaction&&(i=!0,e._transaction=new Transaction(e,r,s),n.push(e._transaction),1===n.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{o=t(e._transaction)}finally{if(i){const t=e._transaction===n[0];e._transaction=null,t&&cleanupTransactions(n,0)}}return o};class StackItem{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=/* @__PURE__ */new Map}}const clearUndoManagerStackItem=(e,t,r)=>{iterateDeletedStructs(e,r.deletions,r=>{r instanceof Item&&t.scope.some(t=>t===e.doc||isParentOf(t,r))&&keepItem(r,!1)})},popStackItem=(e,t,r)=>{let s=null;const n=e.doc,i=e.scope;transact(n,r=>{for(;t.length>0&&null===e.currStackItem;){const s=n.store,o=t.pop(),a=/* @__PURE__ */new Set,l=[];let c=!1;iterateDeletedStructs(r,o.insertions,e=>{if(e instanceof Item){if(null!==e.redone){let{item:t,diff:n}=followRedone(s,e.id);n>0&&(t=getItemCleanStart(r,createID(t.id.client,t.id.clock+n))),e=t}!e.deleted&&i.some(t=>t===r.doc||isParentOf(t,e))&&l.push(e)}}),iterateDeletedStructs(r,o.deletions,e=>{e instanceof Item&&i.some(t=>t===r.doc||isParentOf(t,e))&&!isDeleted(o.insertions,e.id)&&a.add(e)}),a.forEach(t=>{c=null!==redoItem(r,t,a,o.insertions,e.ignoreRemoteMapChanges,e)||c});for(let t=l.length-1;t>=0;t--){const s=l[t];e.deleteFilter(s)&&(s.delete(r),c=!0)}e.currStackItem=c?o:null}r.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),s=r},e);const o=e.currStackItem;if(null!=o){const t=s.changedParentTypes;e.emit("stack-item-popped",[{stackItem:o,type:r,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return o};class UndoManager extends ObservableV2{constructor(e,{captureTimeout:t=500,captureTransaction:r=e=>!0,deleteFilter:s=()=>!0,trackedOrigins:n=/* @__PURE__ */new Set([null]),ignoreRemoteMapChanges:i=!1,doc:o=(isArray(e)?e[0].doc:e instanceof Doc?e:e.doc)}={}){super(),this.scope=[],this.doc=o,this.addToScope(e),this.deleteFilter=s,n.add(this),this.trackedOrigins=n,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some(t=>e.changedParentTypes.has(t)||t===this.doc)&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,r=this.redoing,s=t?this.redoStack:this.undoStack;t?this.stopCapturing():r||this.clear(!1,!0);const n=new DeleteSet;e.afterState.forEach((t,r)=>{const s=e.beforeState.get(r)||0,i=t-s;i>0&&addToDeleteSet(n,r,s,i)});const i=getUnixTime();let o=!1;if(this.lastChange>0&&i-this.lastChange<this.captureTimeout&&s.length>0&&!t&&!r){const t=s[s.length-1];t.deletions=mergeDeleteSets([t.deletions,e.deleteSet]),t.insertions=mergeDeleteSets([t.insertions,n])}else s.push(new StackItem(e.deleteSet,n)),o=!0;t||r||(this.lastChange=i),iterateDeletedStructs(e,e.deleteSet,t=>{t instanceof Item&&this.scope.some(r=>r===e.doc||isParentOf(r,t))&&keepItem(t,!0)});const a=[{stackItem:s[s.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];o?this.emit("stack-item-added",a):this.emit("stack-item-updated",a)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const t=new Set(this.scope);(e=isArray(e)?e:[e]).forEach(e=>{t.has(e)||(t.add(e),(e instanceof AbstractType?e.doc!==this.doc:e!==this.doc)&&warn("[yjs#509] Not same Y.Doc"),this.scope.push(e))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(e=>clearUndoManagerStackItem(r,this,e)),this.undoStack=[]),t&&(this.redoStack.forEach(e=>clearUndoManagerStackItem(r,this,e)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=popStackItem(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=popStackItem(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}const errorComputeChanges="You must not compute changes after the event-handler fired.";class YEvent{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=getPathTo(this.currentTarget,this.target))}deletes(e){return isDeleted(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw create$3(errorComputeChanges);const e=/* @__PURE__ */new Map,t=this.target;this.transaction.changed.get(t).forEach(r=>{if(null!==r){const s=t._map.get(r);let n,i;if(this.adds(s)){let e=s.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(s)){if(null===e||!this.deletes(e))return;n="delete",i=last(e.content.getContent())}else null!==e&&this.deletes(e)?(n="update",i=last(e.content.getContent())):(n="add",i=void 0)}else{if(!this.deletes(s))return;n="delete",i=last(s.content.getContent())}e.set(r,{action:n,oldValue:i})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw create$3(errorComputeChanges);const t=this.target,r=create$4(),s=create$4(),n=[];e={added:r,deleted:s,delta:n,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const i=()=>{e&&n.push(e)};for(let n=t._start;null!==n;n=n.right)n.deleted?this.deletes(n)&&!this.adds(n)&&(null!==e&&void 0!==e.delete||(i(),e={delete:0}),e.delete+=n.length,s.add(n)):this.adds(n)?(null!==e&&void 0!==e.insert||(i(),e={insert:[]}),e.insert=e.insert.concat(n.content.getContent()),r.add(n)):(null!==e&&void 0!==e.retain||(i(),e={retain:0}),e.retain+=n.length);null!==e&&void 0===e.retain&&i()}this._changes=e}return e}}const getPathTo=(e,t)=>{const r=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)r.unshift(t._item.parentSub);else{let e=0,s=t._item.parent._start;for(;s!==t._item&&null!==s;)!s.deleted&&s.countable&&(e+=s.length),s=s.right;r.unshift(e)}t=t._item.parent}return r},warnPrematureAccess=()=>{warn("Invalid access: Add Yjs type to a document before reading data.")},maxSearchMarker=80;let globalSearchMarkerTimestamp=0;class ArraySearchMarker{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=globalSearchMarkerTimestamp++}}const refreshMarkerTimestamp=e=>{e.timestamp=globalSearchMarkerTimestamp++},overwriteMarker=(e,t,r)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=r,e.timestamp=globalSearchMarkerTimestamp++},markPosition=(e,t,r)=>{if(e.length>=maxSearchMarker){const s=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return overwriteMarker(s,t,r),s}{const s=new ArraySearchMarker(t,r);return e.push(s),s}},findMarker=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const r=0===e._searchMarker.length?null:e._searchMarker.reduce((e,r)=>abs(t-e.index)<abs(t-r.index)?e:r);let s=e._start,n=0;for(null!==r&&(s=r.p,n=r.index,refreshMarkerTimestamp(r));null!==s.right&&n<t;){if(!s.deleted&&s.countable){if(t<n+s.length)break;n+=s.length}s=s.right}for(;null!==s.left&&n>t;)s=s.left,!s.deleted&&s.countable&&(n-=s.length);for(;null!==s.left&&s.left.id.client===s.id.client&&s.left.id.clock+s.left.length===s.id.clock;)s=s.left,!s.deleted&&s.countable&&(n-=s.length);return null!==r&&abs(r.index-n)<s.parent.length/maxSearchMarker?(overwriteMarker(r,s,n),r):markPosition(e._searchMarker,s,n)},updateMarkerChanges=(e,t,r)=>{for(let s=e.length-1;s>=0;s--){const n=e[s];if(r>0){let t=n.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(n.index-=t.length);if(null===t||!0===t.marker){e.splice(s,1);continue}n.p=t,t.marker=!0}(t<n.index||r>0&&t===n.index)&&(n.index=max(t,n.index+r))}},callTypeObservers=(e,t,r)=>{const s=e,n=t.changedParentTypes;for(;setIfUndefined(n,e,()=>[]).push(r),null!==e._item;)e=e._item.parent;callEventHandlerListeners(s._eH,r,t)};class AbstractType{constructor(){this._item=null,this._map=/* @__PURE__ */new Map,this._start=null,this.doc=null,this._length=0,this._eH=createEventHandler(),this._dEH=createEventHandler(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw methodUnimplemented()}clone(){throw methodUnimplemented()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){addEventHandlerListener(this._eH,e)}observeDeep(e){addEventHandlerListener(this._dEH,e)}unobserve(e){removeEventHandlerListener(this._eH,e)}unobserveDeep(e){removeEventHandlerListener(this._dEH,e)}toJSON(){}}const typeListSlice=(e,t,r)=>{e.doc??warnPrematureAccess(),t<0&&(t=e._length+t),r<0&&(r=e._length+r);let s=r-t;const n=[];let i=e._start;for(;null!==i&&s>0;){if(i.countable&&!i.deleted){const e=i.content.getContent();if(e.length<=t)t-=e.length;else{for(let r=t;r<e.length&&s>0;r++)n.push(e[r]),s--;t=0}}i=i.right}return n},typeListToArray=e=>{e.doc??warnPrematureAccess();const t=[];let r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){const e=r.content.getContent();for(let r=0;r<e.length;r++)t.push(e[r])}r=r.right}return t},typeListForEach=(e,t)=>{let r=0,s=e._start;for(e.doc??warnPrematureAccess();null!==s;){if(s.countable&&!s.deleted){const n=s.content.getContent();for(let s=0;s<n.length;s++)t(n[s],r++,e)}s=s.right}},typeListMap=(e,t)=>{const r=[];return typeListForEach(e,(s,n)=>{r.push(t(s,n,e))}),r},typeListCreateIterator=e=>{let t=e._start,r=null,s=0;return{[Symbol.iterator](){return this},next:()=>{if(null===r){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};r=t.content.getContent(),s=0,t=t.right}const e=r[s++];return r.length<=s&&(r=null),{done:!1,value:e}}}},typeListGet=(e,t)=>{e.doc??warnPrematureAccess();const r=findMarker(e,t);let s=e._start;for(null!==r&&(s=r.p,t-=r.index);null!==s;s=s.right)if(!s.deleted&&s.countable){if(t<s.length)return s.content.getContent()[t];t-=s.length}},typeListInsertGenericsAfter=(e,t,r,s)=>{let n=r;const i=e.doc,o=i.clientID,a=i.store,l=null===r?t._start:r.right;let c=[];const d=()=>{c.length>0&&(n=new Item(createID(o,getState(a,o)),n,n&&n.lastId,l,l&&l.id,t,null,new ContentAny(c)),n.integrate(e,0),c=[])};s.forEach(r=>{if(null===r)c.push(r);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(r);break;default:switch(d(),r.constructor){case Uint8Array:case ArrayBuffer:n=new Item(createID(o,getState(a,o)),n,n&&n.lastId,l,l&&l.id,t,null,new ContentBinary(new Uint8Array(r))),n.integrate(e,0);break;case Doc:n=new Item(createID(o,getState(a,o)),n,n&&n.lastId,l,l&&l.id,t,null,new ContentDoc(r)),n.integrate(e,0);break;default:if(!(r instanceof AbstractType))throw new Error("Unexpected content type in insert operation");n=new Item(createID(o,getState(a,o)),n,n&&n.lastId,l,l&&l.id,t,null,new ContentType(r)),n.integrate(e,0)}}}),d()},lengthExceeded=()=>create$3("Length exceeded!"),typeListInsertGenerics=(e,t,r,s)=>{if(r>t._length)throw lengthExceeded();if(0===r)return t._searchMarker&&updateMarkerChanges(t._searchMarker,r,s.length),typeListInsertGenericsAfter(e,t,null,s);const n=r,i=findMarker(t,r);let o=t._start;for(null!==i&&(o=i.p,0===(r-=i.index)&&(o=o.prev,r+=o&&o.countable&&!o.deleted?o.length:0));null!==o;o=o.right)if(!o.deleted&&o.countable){if(r<=o.length){r<o.length&&getItemCleanStart(e,createID(o.id.client,o.id.clock+r));break}r-=o.length}return t._searchMarker&&updateMarkerChanges(t._searchMarker,n,s.length),typeListInsertGenericsAfter(e,t,o,s)},typeListPushGenerics=(e,t,r)=>{let s=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(s)for(;s.right;)s=s.right;return typeListInsertGenericsAfter(e,t,s,r)},typeListDelete=(e,t,r,s)=>{if(0===s)return;const n=r,i=s,o=findMarker(t,r);let a=t._start;for(null!==o&&(a=o.p,r-=o.index);null!==a&&r>0;a=a.right)!a.deleted&&a.countable&&(r<a.length&&getItemCleanStart(e,createID(a.id.client,a.id.clock+r)),r-=a.length);for(;s>0&&null!==a;)a.deleted||(s<a.length&&getItemCleanStart(e,createID(a.id.client,a.id.clock+s)),a.delete(e),s-=a.length),a=a.right;if(s>0)throw lengthExceeded();t._searchMarker&&updateMarkerChanges(t._searchMarker,n,-i+s)},typeMapDelete=(e,t,r)=>{const s=t._map.get(r);void 0!==s&&s.delete(e)},typeMapSet=(e,t,r,s)=>{const n=t._map.get(r)||null,i=e.doc,o=i.clientID;let a;if(null==s)a=new ContentAny([s]);else switch(s.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new ContentAny([s]);break;case Uint8Array:a=new ContentBinary(s);break;case Doc:a=new ContentDoc(s);break;default:if(!(s instanceof AbstractType))throw new Error("Unexpected content type");a=new ContentType(s)}new Item(createID(o,getState(i.store,o)),n,n&&n.lastId,null,null,t,r,a).integrate(e,0)},typeMapGet=(e,t)=>{e.doc??warnPrematureAccess();const r=e._map.get(t);return void 0===r||r.deleted?void 0:r.content.getContent()[r.length-1]},typeMapGetAll=e=>{const t={};return e.doc??warnPrematureAccess(),e._map.forEach((e,r)=>{e.deleted||(t[r]=e.content.getContent()[e.length-1])}),t},typeMapHas=(e,t)=>{e.doc??warnPrematureAccess();const r=e._map.get(t);return void 0!==r&&!r.deleted},typeMapGetAllSnapshot=(e,t)=>{const r={};return e._map.forEach((e,s)=>{let n=e;for(;null!==n&&(!t.sv.has(n.id.client)||n.id.clock>=(t.sv.get(n.id.client)||0));)n=n.left;null!==n&&isVisible(n,t)&&(r[s]=n.content.getContent()[n.length-1])}),r},createMapIterator=e=>(e.doc??warnPrematureAccess(),iteratorFilter(e._map.entries(),e=>!e[1].deleted));class YArrayEvent extends YEvent{}class YArray extends AbstractType{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new YArray;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new YArray}clone(){const e=new YArray;return e.insert(0,this.toArray().map(e=>e instanceof AbstractType?e.clone():e)),e}get length(){return this.doc??warnPrematureAccess(),this._length}_callObserver(e,t){super._callObserver(e,t),callTypeObservers(this,e,new YArrayEvent(this,e))}insert(e,t){null!==this.doc?transact(this.doc,r=>{typeListInsertGenerics(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?transact(this.doc,t=>{typeListPushGenerics(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?transact(this.doc,r=>{typeListDelete(r,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return typeListGet(this,e)}toArray(){return typeListToArray(this)}slice(e=0,t=this.length){return typeListSlice(this,e,t)}toJSON(){return this.map(e=>e instanceof AbstractType?e.toJSON():e)}map(e){return typeListMap(this,e)}forEach(e){typeListForEach(this,e)}[Symbol.iterator](){return typeListCreateIterator(this)}_write(e){e.writeTypeRef(YArrayRefID)}}class YMapEvent extends YEvent{constructor(e,t,r){super(e,t),this.keysChanged=r}}class YMap extends AbstractType{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?/* @__PURE__ */new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new YMap}clone(){const e=new YMap;return this.forEach((t,r)=>{e.set(r,t instanceof AbstractType?t.clone():t)}),e}_callObserver(e,t){callTypeObservers(this,e,new YMapEvent(this,e,t))}toJSON(){this.doc??warnPrematureAccess();const e={};return this._map.forEach((t,r)=>{if(!t.deleted){const s=t.content.getContent()[t.length-1];e[r]=s instanceof AbstractType?s.toJSON():s}}),e}get size(){return[...createMapIterator(this)].length}keys(){return iteratorMap(createMapIterator(this),e=>e[0])}values(){return iteratorMap(createMapIterator(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return iteratorMap(createMapIterator(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??warnPrematureAccess(),this._map.forEach((t,r)=>{t.deleted||e(t.content.getContent()[t.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?transact(this.doc,t=>{typeMapDelete(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?transact(this.doc,r=>{typeMapSet(r,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return typeMapGet(this,e)}has(e){return typeMapHas(this,e)}clear(){null!==this.doc?transact(this.doc,e=>{this.forEach(function(t,r,s){typeMapDelete(e,s,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(YMapRefID)}}const equalAttrs=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&equalFlat(e,t);class ItemTextListPosition{constructor(e,t,r,s){this.left=e,this.right=t,this.index=r,this.currentAttributes=s}forward(){if(null===this.right&&unexpectedCase(),this.right.content.constructor===ContentFormat)this.right.deleted||updateCurrentAttributes(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const findNextPosition=(e,t,r)=>{for(;null!==t.right&&r>0;){if(t.right.content.constructor===ContentFormat)t.right.deleted||updateCurrentAttributes(t.currentAttributes,t.right.content);else t.right.deleted||(r<t.right.length&&getItemCleanStart(e,createID(t.right.id.client,t.right.id.clock+r)),t.index+=t.right.length,r-=t.right.length);t.left=t.right,t.right=t.right.right}return t},findPosition=(e,t,r,s)=>{const n=/* @__PURE__ */new Map,i=s?findMarker(t,r):null;if(i){const t=new ItemTextListPosition(i.p.left,i.p,i.index,n);return findNextPosition(e,t,r-i.index)}{const s=new ItemTextListPosition(null,t._start,0,n);return findNextPosition(e,s,r)}},insertNegatedAttributes=(e,t,r,s)=>{for(;null!==r.right&&(!0===r.right.deleted||r.right.content.constructor===ContentFormat&&equalAttrs(s.get(r.right.content.key),r.right.content.value));)r.right.deleted||s.delete(r.right.content.key),r.forward();const n=e.doc,i=n.clientID;s.forEach((s,o)=>{const a=r.left,l=r.right,c=new Item(createID(i,getState(n.store,i)),a,a&&a.lastId,l,l&&l.id,t,null,new ContentFormat(o,s));c.integrate(e,0),r.right=c,r.forward()})},updateCurrentAttributes=(e,t)=>{const{key:r,value:s}=t;null===s?e.delete(r):e.set(r,s)},minimizeAttributeChanges=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===ContentFormat&&equalAttrs(t[e.right.content.key]??null,e.right.content.value));)e.forward()},insertAttributes=(e,t,r,s)=>{const n=e.doc,i=n.clientID,o=/* @__PURE__ */new Map;for(const a in s){const l=s[a],c=r.currentAttributes.get(a)??null;if(!equalAttrs(c,l)){o.set(a,c);const{left:s,right:d}=r;r.right=new Item(createID(i,getState(n.store,i)),s,s&&s.lastId,d,d&&d.id,t,null,new ContentFormat(a,l)),r.right.integrate(e,0),r.forward()}}return o},insertText=(e,t,r,s,n)=>{r.currentAttributes.forEach((e,t)=>{void 0===n[t]&&(n[t]=null)});const i=e.doc,o=i.clientID;minimizeAttributeChanges(r,n);const a=insertAttributes(e,t,r,n),l=s.constructor===String?new ContentString(s):s instanceof AbstractType?new ContentType(s):new ContentEmbed(s);let{left:c,right:d,index:h}=r;t._searchMarker&&updateMarkerChanges(t._searchMarker,r.index,l.getLength()),d=new Item(createID(o,getState(i.store,o)),c,c&&c.lastId,d,d&&d.id,t,null,l),d.integrate(e,0),r.right=d,r.index=h,r.forward(),insertNegatedAttributes(e,t,r,a)},formatText=(e,t,r,s,n)=>{const i=e.doc,o=i.clientID;minimizeAttributeChanges(r,n);const a=insertAttributes(e,t,r,n);e:for(;null!==r.right&&(s>0||a.size>0&&(r.right.deleted||r.right.content.constructor===ContentFormat));){if(!r.right.deleted)switch(r.right.content.constructor){case ContentFormat:{const{key:t,value:i}=r.right.content,o=n[t];if(void 0!==o){if(equalAttrs(o,i))a.delete(t);else{if(0===s)break e;a.set(t,i)}r.right.delete(e)}else r.currentAttributes.set(t,i);break}default:s<r.right.length&&getItemCleanStart(e,createID(r.right.id.client,r.right.id.clock+s)),s-=r.right.length}r.forward()}if(s>0){let n="";for(;s>0;s--)n+="\n";r.right=new Item(createID(o,getState(i.store,o)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,t,null,new ContentString(n)),r.right.integrate(e,0),r.forward()}insertNegatedAttributes(e,t,r,a)},cleanupFormattingGap=(e,t,r,s,n)=>{let i=t;const o=create$5();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===ContentFormat){const e=i.content;o.set(e.key,e)}i=i.right}let a=0,l=!1;for(;t!==i;){if(r===t&&(l=!0),!t.deleted){const r=t.content;switch(r.constructor){case ContentFormat:{const{key:i,value:c}=r,d=s.get(i)??null;o.get(i)===r&&d!==c||(t.delete(e),a++,l||(n.get(i)??null)!==c||d===c||(null===d?n.delete(i):n.set(i,d))),l||t.deleted||updateCurrentAttributes(n,r);break}}}t=t.right}return a},cleanupContextlessFormattingGap=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const r=/* @__PURE__ */new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===ContentFormat){const s=t.content.key;r.has(s)?t.delete(e):r.add(s)}t=t.left}},cleanupYTextFormatting=e=>{let t=0;return transact(e.doc,r=>{let s=e._start,n=e._start,i=create$5();const o=copy(i);for(;n;){if(!1===n.deleted)if(n.content.constructor===ContentFormat)updateCurrentAttributes(o,n.content);else t+=cleanupFormattingGap(r,s,n,i,o),i=copy(o),s=n;n=n.right}}),t},cleanupYTextAfterTransaction=e=>{const t=/* @__PURE__ */new Set,r=e.doc;for(const[s,n]of e.afterState.entries()){const i=e.beforeState.get(s)||0;n!==i&&iterateStructs(e,r.store.clients.get(s),i,n,e=>{e.deleted||e.content.constructor!==ContentFormat||e.constructor===GC||t.add(e.parent)})}transact(r,r=>{iterateDeletedStructs(e,e.deleteSet,e=>{if(e instanceof GC||!e.parent._hasFormatting||t.has(e.parent))return;const s=e.parent;e.content.constructor===ContentFormat?t.add(s):cleanupContextlessFormattingGap(r,e)});for(const e of t)cleanupYTextFormatting(e)})},deleteText=(e,t,r)=>{const s=r,n=copy(t.currentAttributes),i=t.right;for(;r>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case ContentType:case ContentEmbed:case ContentString:r<t.right.length&&getItemCleanStart(e,createID(t.right.id.client,t.right.id.clock+r)),r-=t.right.length,t.right.delete(e)}t.forward()}i&&cleanupFormattingGap(e,i,t.right,n,t.currentAttributes);const o=(t.left||t.right).parent;return o._searchMarker&&updateMarkerChanges(o._searchMarker,t.index,-s+r),t};class YTextEvent extends YEvent{constructor(e,t,r){super(e,t),this.childListChanged=!1,this.keysChanged=/* @__PURE__ */new Set,r.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:/* @__PURE__ */new Set,deleted:/* @__PURE__ */new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];transact(e,e=>{const r=/* @__PURE__ */new Map,s=/* @__PURE__ */new Map;let n=this.target._start,i=null;const o={};let a="",l=0,c=0;const d=()=>{if(null!==i){let e=null;switch(i){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof a||a.length>0)&&(e={insert:a},r.size>0&&(e.attributes={},r.forEach((t,r)=>{null!==t&&(e.attributes[r]=t)}))),a="";break;case"retain":l>0&&(e={retain:l},isEmpty(o)||(e.attributes=assign({},o))),l=0}e&&t.push(e),i=null}};for(;null!==n;){switch(n.content.constructor){case ContentType:case ContentEmbed:this.adds(n)?this.deletes(n)||(d(),i="insert",a=n.content.getContent()[0],d()):this.deletes(n)?("delete"!==i&&(d(),i="delete"),c+=1):n.deleted||("retain"!==i&&(d(),i="retain"),l+=1);break;case ContentString:this.adds(n)?this.deletes(n)||("insert"!==i&&(d(),i="insert"),a+=n.content.str):this.deletes(n)?("delete"!==i&&(d(),i="delete"),c+=n.length):n.deleted||("retain"!==i&&(d(),i="retain"),l+=n.length);break;case ContentFormat:{const{key:t,value:a}=n.content;if(this.adds(n)){if(!this.deletes(n)){const l=r.get(t)??null;equalAttrs(l,a)?null!==a&&n.delete(e):("retain"===i&&d(),equalAttrs(a,s.get(t)??null)?delete o[t]:o[t]=a)}}else if(this.deletes(n)){s.set(t,a);const e=r.get(t)??null;equalAttrs(e,a)||("retain"===i&&d(),o[t]=e)}else if(!n.deleted){s.set(t,a);const r=o[t];void 0!==r&&(equalAttrs(r,a)?null!==r&&n.delete(e):("retain"===i&&d(),null===a?delete o[t]:o[t]=a))}n.deleted||("insert"===i&&d(),updateCurrentAttributes(r,n.content));break}}n=n.right}for(d();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}}),this._delta=t}return this._delta}}class YText extends AbstractType{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??warnPrematureAccess(),this._length}_integrate(t,r){super._integrate(t,r);try{this._pending.forEach(e=>e())}catch(e){console.error(e)}this._pending=null}_copy(){return new YText}clone(){const e=new YText;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const r=new YTextEvent(this,e,t);callTypeObservers(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??warnPrematureAccess();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===ContentString&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?transact(this.doc,r=>{const s=new ItemTextListPosition(null,this._start,0,/* @__PURE__ */new Map);for(let n=0;n<e.length;n++){const i=e[n];if(void 0!==i.insert){const o=t||"string"!=typeof i.insert||n!==e.length-1||null!==s.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!=typeof o||o.length>0)&&insertText(r,this,s,o,i.attributes||{})}else void 0!==i.retain?formatText(r,this,s,i.retain,i.attributes||{}):void 0!==i.delete&&deleteText(r,s,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,r){this.doc??warnPrematureAccess();const s=[],n=/* @__PURE__ */new Map,i=this.doc;let o="",a=this._start;function l(){if(o.length>0){const e={};let t=!1;n.forEach((r,s)=>{t=!0,e[s]=r});const r={insert:o};t&&(r.attributes=e),s.push(r),o=""}}const c=()=>{for(;null!==a;){if(isVisible(a,e)||void 0!==t&&isVisible(a,t))switch(a.content.constructor){case ContentString:{const s=n.get("ychange");void 0===e||isVisible(a,e)?void 0===t||isVisible(a,t)?void 0!==s&&(l(),n.delete("ychange")):void 0!==s&&s.user===a.id.client&&"added"===s.type||(l(),n.set("ychange",r?r("added",a.id):{type:"added"})):void 0!==s&&s.user===a.id.client&&"removed"===s.type||(l(),n.set("ychange",r?r("removed",a.id):{type:"removed"})),o+=a.content.str;break}case ContentType:case ContentEmbed:{l();const e={insert:a.content.getContent()[0]};if(n.size>0){const t={};e.attributes=t,n.forEach((e,r)=>{t[r]=e})}s.push(e);break}case ContentFormat:isVisible(a,e)&&(l(),updateCurrentAttributes(n,a.content))}a=a.right}l()};return e||t?transact(i,r=>{e&&splitSnapshotAffectedStructs(r,e),t&&splitSnapshotAffectedStructs(r,t),c()},"cleanup"):c(),s}insert(e,t,r){if(t.length<=0)return;const s=this.doc;null!==s?transact(s,s=>{const n=findPosition(s,this,e,!r);r||(r={},n.currentAttributes.forEach((e,t)=>{r[t]=e})),insertText(s,this,n,t,r)}):this._pending.push(()=>this.insert(e,t,r))}insertEmbed(e,t,r){const s=this.doc;null!==s?transact(s,s=>{const n=findPosition(s,this,e,!r);insertText(s,this,n,t,r||{})}):this._pending.push(()=>this.insertEmbed(e,t,r||{}))}delete(e,t){if(0===t)return;const r=this.doc;null!==r?transact(r,r=>{deleteText(r,findPosition(r,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,r){if(0===t)return;const s=this.doc;null!==s?transact(s,s=>{const n=findPosition(s,this,e,!1);null!==n.right&&formatText(s,this,n,t,r)}):this._pending.push(()=>this.format(e,t,r))}removeAttribute(e){null!==this.doc?transact(this.doc,t=>{typeMapDelete(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?transact(this.doc,r=>{typeMapSet(r,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return typeMapGet(this,e)}getAttributes(){return typeMapGetAll(this)}_write(e){e.writeTypeRef(YTextRefID)}}class YXmlTreeWalker{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??warnPrematureAccess()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==YXmlElement&&t.constructor!==YXmlFragment||null===t._start)for(;null!==e;){const t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class YXmlFragment extends AbstractType{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new YXmlFragment}clone(){const e=new YXmlFragment;return e.insert(0,this.toArray().map(e=>e instanceof AbstractType?e.clone():e)),e}get length(){return this.doc??warnPrematureAccess(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new YXmlTreeWalker(this,e)}querySelector(e){e=e.toUpperCase();const t=new YXmlTreeWalker(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),from(new YXmlTreeWalker(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){callTypeObservers(this,e,new YXmlEvent(this,t,e))}toString(){return typeListMap(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},r){const s=e.createDocumentFragment();return void 0!==r&&r._createAssociation(s,this),typeListForEach(this,n=>{s.insertBefore(n.toDOM(e,t,r),null)}),s}insert(e,t){null!==this.doc?transact(this.doc,r=>{typeListInsertGenerics(r,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)transact(this.doc,r=>{const s=e&&e instanceof AbstractType?e._item:e;typeListInsertGenericsAfter(r,this,s,t)});else{const r=this._prelimContent,s=null===e?0:r.findIndex(t=>t===e)+1;if(0===s&&null!==e)throw create$3("Reference item not found");r.splice(s,0,...t)}}delete(e,t=1){null!==this.doc?transact(this.doc,r=>{typeListDelete(r,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return typeListToArray(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return typeListGet(this,e)}slice(e=0,t=this.length){return typeListSlice(this,e,t)}forEach(e){typeListForEach(this,e)}_write(e){e.writeTypeRef(YXmlFragmentRefID)}}class YXmlElement extends YXmlFragment{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=/* @__PURE__ */new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new YXmlElement(this.nodeName)}clone(){const e=new YXmlElement(this.nodeName),t=this.getAttributes();return forEach(t,(t,r)=>{e.setAttribute(r,t)}),e.insert(0,this.toArray().map(e=>e instanceof AbstractType?e.clone():e)),e}toString(){const e=this.getAttributes(),t=[],r=[];for(const i in e)r.push(i);r.sort();const s=r.length;for(let i=0;i<s;i++){const s=r[i];t.push(s+'="'+e[s]+'"')}const n=this.nodeName.toLocaleLowerCase();return`<${n}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${n}>`}removeAttribute(e){null!==this.doc?transact(this.doc,t=>{typeMapDelete(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?transact(this.doc,r=>{typeMapSet(r,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return typeMapGet(this,e)}hasAttribute(e){return typeMapHas(this,e)}getAttributes(e){return e?typeMapGetAllSnapshot(this,e):typeMapGetAll(this)}toDOM(e=document,t={},r){const s=e.createElement(this.nodeName),n=this.getAttributes();for(const i in n){const e=n[i];"string"==typeof e&&s.setAttribute(i,e)}return typeListForEach(this,n=>{s.appendChild(n.toDOM(e,t,r))}),void 0!==r&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(YXmlElementRefID),e.writeKey(this.nodeName)}}class YXmlEvent extends YEvent{constructor(e,t,r){super(e,r),this.childListChanged=!1,this.attributesChanged=/* @__PURE__ */new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class AbstractStruct{constructor(e,t){this.id=e,this.length=t}get deleted(){throw methodUnimplemented()}mergeWith(e){return!1}write(e,t,r){throw methodUnimplemented()}integrate(e,t){throw methodUnimplemented()}}const structGCRefNumber=0;class GC extends AbstractStruct{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),addStruct(e.doc.store,this)}write(e,t){e.writeInfo(structGCRefNumber),e.writeLen(this.length-t)}getMissing(e,t){return null}}class ContentBinary{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ContentBinary(this.content)}splice(e){throw methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class ContentDeleted{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ContentDeleted(this.len)}splice(e){const t=new ContentDeleted(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){addToDeleteSet(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const createDocFromOpts=(e,t)=>new Doc({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class ContentDoc{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ContentDoc(createDocFromOpts(this.doc.guid,this.opts))}splice(e){throw methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class ContentEmbed{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ContentEmbed(this.embed)}splice(e){throw methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class ContentFormat{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new ContentFormat(this.key,this.value)}splice(e){throw methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){const r=t.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const isDevMode="development"===getVariable("node_env");class ContentAny{constructor(e){this.arr=e,isDevMode&&deepFreeze(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ContentAny(this.arr)}splice(e){const t=new ContentAny(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const r=this.arr.length;e.writeLen(r-t);for(let s=t;s<r;s++){const t=this.arr[s];e.writeAny(t)}}getRef(){return 8}}class ContentString{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new ContentString(this.str)}splice(e){const t=new ContentString(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const YArrayRefID=0,YMapRefID=1,YTextRefID=2,YXmlElementRefID=3,YXmlFragmentRefID=4;class ContentType{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new ContentType(this.type._copy())}splice(e){throw methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=/* @__PURE__ */new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const followRedone=(e,t)=>{let r,s=t,n=0;do{n>0&&(s=createID(s.client,s.clock+n)),r=getItem(e,s),n=s.clock-r.id.clock,s=r.redone}while(null!==s&&r instanceof Item);return{item:r,diff:n}},keepItem=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},splitItem=(e,t,r)=>{const{client:s,clock:n}=t.id,i=new Item(createID(s,n+r),t,createID(s,n+r-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(r));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=createID(t.redone.client,t.redone.clock+r)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=r,i},isDeletedByUndoStack=(e,t)=>some(e,e=>isDeleted(e.deletions,t)),redoItem=(e,t,r,s,n,i)=>{const o=e.doc,a=o.store,l=o.clientID,c=t.redone;if(null!==c)return getItemCleanStart(e,c);let d,h=t.parent._item,u=null;if(null!==h&&!0===h.deleted){if(null===h.redone&&(!r.has(h)||null===redoItem(e,h,r,s,n,i)))return null;for(;null!==h.redone;)h=getItemCleanStart(e,h.redone)}const p=null===h?t.parent:h.content.type;if(null===t.parentSub){for(u=t.left,d=t;null!==u;){let t=u;for(;null!==t&&t.parent._item!==h;)t=null===t.redone?null:getItemCleanStart(e,t.redone);if(null!==t&&t.parent._item===h){u=t;break}u=u.left}for(;null!==d;){let t=d;for(;null!==t&&t.parent._item!==h;)t=null===t.redone?null:getItemCleanStart(e,t.redone);if(null!==t&&t.parent._item===h){d=t;break}d=d.right}}else if(d=null,t.right&&!n){for(u=t;null!==u&&null!==u.right&&(u.right.redone||isDeleted(s,u.right.id)||isDeletedByUndoStack(i.undoStack,u.right.id)||isDeletedByUndoStack(i.redoStack,u.right.id));)for(u=u.right;u.redone;)u=getItemCleanStart(e,u.redone);if(u&&null!==u.right)return null}else u=p._map.get(t.parentSub)||null;const g=getState(a,l),m=createID(l,g),f=new Item(m,u,u&&u.lastId,d,d&&d.id,p,t.parentSub,t.content.copy());return t.redone=m,keepItem(f,!0),f.integrate(e,0),f};class Item extends AbstractStruct{constructor(e,t,r,s,n,i,o,a){super(e,a.getLength()),this.origin=r,this.left=t,this.right=s,this.rightOrigin=n,this.parent=i,this.parentSub=o,this.redone=null,this.content=a,this.info=this.content.isCountable()?BIT2:0}set marker(e){(this.info&BIT4)>0!==e&&(this.info^=BIT4)}get marker(){return(this.info&BIT4)>0}get keep(){return(this.info&BIT1)>0}set keep(e){this.keep!==e&&(this.info^=BIT1)}get countable(){return(this.info&BIT2)>0}get deleted(){return(this.info&BIT3)>0}set deleted(e){this.deleted!==e&&(this.info^=BIT3)}markDeleted(){this.info|=BIT3}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=getState(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=getState(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ID&&this.id.client!==this.parent.client&&this.parent.clock>=getState(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=getItemCleanEnd(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=getItemCleanStart(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===GC||this.right&&this.right.constructor===GC)this.parent=null;else if(this.parent){if(this.parent.constructor===ID){const e=getItem(t,this.parent);e.constructor===GC?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===Item?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Item&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=getItemCleanEnd(e,e.doc.store,createID(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,r=this.left;if(null!==r)t=r.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const s=/* @__PURE__ */new Set,n=/* @__PURE__ */new Set;for(;null!==t&&t!==this.right;){if(n.add(t),s.add(t),compareIDs(this.origin,t.origin)){if(t.id.client<this.id.client)r=t,s.clear();else if(compareIDs(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!n.has(getItem(e.doc.store,t.origin)))break;s.has(getItem(e.doc.store,t.origin))||(r=t,s.clear())}t=t.right}this.left=r}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),addStruct(e.doc.store,this),this.content.integrate(e,this),addChangedTypeToTransaction(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new GC(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:createID(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&compareIDs(e.origin,this.lastId)&&this.right===e&&compareIDs(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),addToDeleteSet(e.deleteSet,this.id.client,this.id.clock,this.length),addChangedTypeToTransaction(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw unexpectedCase();this.content.gc(e),t?replaceStruct(e,this,new GC(this.id,this.length)):this.content=new ContentDeleted(this.length)}write(e,t){const r=t>0?createID(this.id.client,this.id.clock+t-1):this.origin,s=this.rightOrigin,n=this.parentSub,i=this.content.getRef()&BITS5|(null===r?0:BIT8)|(null===s?0:BIT7)|(null===n?0:BIT6);if(e.writeInfo(i),null!==r&&e.writeLeftID(r),null!==s&&e.writeRightID(s),null===r&&null===s){const t=this.parent;if(void 0!==t._item){const r=t._item;if(null===r){const r=findRootTypeKey(t);e.writeParentInfo(!0),e.writeString(r)}else e.writeParentInfo(!1),e.writeLeftID(r.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===ID?(e.writeParentInfo(!1),e.writeLeftID(t)):unexpectedCase();null!==n&&e.writeString(n)}this.content.write(e,t)}}const glo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{},importIdentifier="__ $YJS$ __";!0===glo[importIdentifier]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),glo[importIdentifier]=!0,jsxRuntimeExports.jsx(ForwardRef,{},"connecting"),jsxRuntimeExports.jsx(ForwardRef$1,{color:"lightgray"},"connected-unknown"),jsxRuntimeExports.jsx(ForwardRef$2,{},"connected-starting"),jsxRuntimeExports.jsx(ForwardRef$3,{},"connected-idle"),jsxRuntimeExports.jsx(ForwardRef$4,{},"connected-busy"),jsxRuntimeExports.jsx(ForwardRef$5,{},"connected-terminating"),jsxRuntimeExports.jsx(ForwardRef$6,{},"connected-restarting"),jsxRuntimeExports.jsx(ForwardRef$7,{},"connected-autorestarting"),jsxRuntimeExports.jsx(ForwardRef$8,{},"connected-dead"),jsxRuntimeExports.jsx(ForwardRef$9,{},"disconnecting"),jsxRuntimeExports.jsx(ForwardRef$a,{},"undefined");const toKernelState=(e,t)=>"connecting"===e||"disconnected"===e?e:e+"-"+t;var ExecutionPhase,ExecutionPhase2;ExecutionPhase2=ExecutionPhase||(ExecutionPhase={}),ExecutionPhase2.ready_to_run="READY_TO_RUN",ExecutionPhase2.running="RUNNING",ExecutionPhase2.completed="COMPLETED",ExecutionPhase2.completed_with_error="COMPLETED_WITH_ERROR",ExecutionPhase2.completed_with_warning="COMPLETED_WITH_WARNING";const kernelsStore=createStore((e,t)=>({kernels:/* @__PURE__ */new Map,getExecutionState:e=>t().kernels.get(e)?.executionState,setExecutionState:(r,s)=>{const n=t().kernels,i=n.get(r);i?i.executionState=s:n.set(r,{id:r,executionState:s}),e(e=>({kernels:n}))},getExecutionPhase:e=>t().kernels.get(e)?.executionPhase,setExecutionPhase:(r,s)=>{const n=t().kernels,i=n.get(r);i?i.executionPhase=s:n.set(r,{id:r,executionPhase:s}),e(e=>({kernels:n}))}}));class KernelExecutor{_executed;_kernelConnection;_kernelState;_model;_modelChanged=new Signal(this);_executionPhaseChanged=new Signal(this);_outputs;_stopOnError;_outputsChanged=new Signal(this);_future;_shellMessageHooks=new Array;_suppressCodeExecutionErrors=!1;_phaseChangeCallback;_onExecutionPhaseChanged;constructor({connection:e,model:t,onExecutionPhaseChanged:r}){this._executed=new PromiseDelegate,this._kernelConnection=e,this._model=t??new OutputAreaModel,this._outputs=[],this._kernelState=kernelsStore.getState(),this._onExecutionPhaseChanged=r}execute(e,{iopubMessageHooks:t=[],shellMessageHooks:r=[],silent:s=!1,stopOnError:n=!0,storeHistory:i=!0,allowStdin:o=!1,suppressCodeExecutionErrors:a=!1}={}){return this._onExecutionPhaseChanged&&(this._phaseChangeCallback=(e,t)=>{this._onExecutionPhaseChanged&&this._onExecutionPhaseChanged(t)},this._executionPhaseChanged.connect(this._phaseChangeCallback)),this._stopOnError=n,this._suppressCodeExecutionErrors=a,this._shellMessageHooks=r,kernelsStore.getState().setExecutionPhase(this._kernelConnection.id,ExecutionPhase.running),this._executionPhaseChanged.emit({executionPhase:ExecutionPhase.running}),this._future=this._kernelConnection.requestExecute({code:e,allow_stdin:o,silent:s,stop_on_error:n,store_history:i}),this._future.onIOPub=this._onIOPub,this._future.onReply=this._onReply,t.forEach(e=>this._future.registerMessageHook(e)),this._future.onStdin=e=>{libExports$3.KernelMessage.isInputRequestMsg(e)},this._future.done.then(()=>{this._modelChanged.emit(this._model),this._executed.resolve(this._model);if(kernelsStore.getState().getExecutionPhase(this._kernelConnection.id)!==ExecutionPhase.completed_with_error){let e=!1;for(let r=0;r<this.model.length;r++){const t=this.model.get(r);if("stream"===t.type&&"stderr"===t.toJSON().name){e=!0;break}}const t=e?ExecutionPhase.completed_with_warning:ExecutionPhase.completed;kernelsStore.getState().setExecutionPhase(this._kernelConnection.id,t),this._executionPhaseChanged.emit({executionPhase:t,outputModel:this._model})}}),this._executed.promise}clear(){this._shellMessageHooks.length=0,this._outputs.length=0,this._model.clear(),this._phaseChangeCallback&&this._executionPhaseChanged.disconnect(this._phaseChangeCallback)}registerIOPubMessageHook=e=>{this._future?.registerMessageHook(e)};get future(){return this._future}get done(){return this._executed.promise.then(()=>{})}get result(){return this._executed.promise.then(e=>outputsAsString(e.toJSON()))}get outputs(){return this._outputs}get model(){return this._model}get outputsChanged(){return this._outputsChanged}get modelChanged(){return this._modelChanged}get executionPhaseChanged(){return this._executionPhaseChanged}_onIOPub=e=>{if(this._future?.msg.header.msg_id!==e.parent_header.msg_id)return;console.debug("Kernel IOPub message",e);const t=e.header.msg_type,r={...e.content,output_type:t};switch(t){case"execute_result":case"display_data":case"stream":case"update_display_data":this._outputs.push(e.content),this._outputsChanged.emit(this._outputs),this._model.add(r),this._modelChanged.emit(this._model);break;case"error":this._outputs.push(e.content),this._outputsChanged.emit(this._outputs),this._model.add(r),this._modelChanged.emit(this._model),this._stopOnError&&(kernelsStore.getState().setExecutionPhase(this._kernelConnection.id,ExecutionPhase.completed_with_error),this._executionPhaseChanged.emit({executionPhase:ExecutionPhase.completed_with_error,outputModel:this._model}));break;case"clear_output":{const t=e.content.wait;this._model.clear(t);break}case"status":{const t=e.content.execution_state,r=this._kernelConnection.connectionStatus,s=toKernelState(r,t);this._kernelState.setExecutionState(this._kernelConnection.id,s);break}}};_onReply=e=>{if(this._future?.msg.header.msg_id!==e.parent_header.msg_id)return;console.debug("Kernel Reply message",e),this._shellMessageHooks.forEach(t=>t(e));const t=e.content;if("ok"!==t.status){switch(t.status){case"abort":this._executed.reject("Execution aborted.");break;case"error":{const{ename:e,evalue:r,traceback:s}=t;this._suppressCodeExecutionErrors&&this._executed.promise.catch(e=>console.debug("Error executing code : "+e)),this._executed.reject(`${e}: ${r}\n${(s??[]).join("\n")}`)}}return}const r=t?.payload;if(r?.length){const e=r.filter(e=>"page"===e.source);if(e.length){const t={output_type:"display_data",data:JSON.parse(JSON.stringify(e[0])).data,metadata:{}};this._outputs.push(t),this._outputsChanged.emit(this._outputs),this._model.add(t),this._modelChanged.emit(this._model)}}}}const JUPYTER_REACT_PATH_COOKIE_NAME="jupyter-react-kernel-path";class Kernel{_clientId;_connectionStatus;_id;_info;_kernelConnection;_kernelManager;_kernelName;_kernelSpecManager;_kernelSpecName;_kernelType;_path;_ready;_session;_sessionId;_sessionManager;constructor(e){const{kernelManager:t,kernelName:r,kernelType:s,kernelspecsManager:n,kernelSpecName:i,kernelModel:o,path:a,sessionManager:l}=e;this._kernelSpecManager=n,this._kernelManager=t,this._kernelName=r,this._kernelType=s??"notebook",this._kernelSpecName=i,this._sessionManager=l,this._ready=new PromiseDelegate,this.requestKernel(o,a)}async requestKernel(e,t){if(await this._kernelManager.ready,await this._sessionManager.ready,e){await this._kernelManager.refreshRunning();const t=find$1(Array.from(this.kernelManager.running()),t=>e.id===t.id);if(!t)return void console.log("Something is wrong... can not find an existing model for",e);{console.log("Creating a session to an existing Jupyter Kernel model.",t);const r="kernel-"+e.id;this._path=r,this._session=await this._sessionManager.startNew({name:t.name,path:r,type:"notebook",kernel:t},{kernelConnectionOptions:{handleComms:!0}})}}else{let e=t??getCookie(this.cookieName);e||(e="path-"+newUuid(),document.cookie=this.cookieName+"="+e),this._path=e;try{this._session=await this._sessionManager.startNew({name:this._kernelName,path:this._path,type:this._kernelType,kernel:{name:this._kernelSpecName}},{kernelConnectionOptions:{handleComms:!0}})}catch(s){return void console.error("Failed to start new kernel session:",s)}}this._kernelConnection=this._session.kernel;const r=()=>{"connected"===this._connectionStatus&&(this._clientId=this._session.kernel.clientId,this._id=this._session.kernel.id,this._ready.resolve())};this._kernelConnection&&(this._sessionId=this._session.id,this._connectionStatus=this._kernelConnection.connectionStatus,r(),this._kernelConnection.connectionStatusChanged.connect((e,t)=>{this._connectionStatus=t,r()}),this._kernelConnection.info.then(e=>{this._info=e,console.log("Kernel Information",e),console.log("Kernel Session",this._session),console.log("Kernel Details",this.toJSON())}))}get clientId(){return this._clientId}get connection(){return this._kernelConnection}get cookieName(){return JUPYTER_REACT_PATH_COOKIE_NAME+"_"+this._kernelSpecName}get id(){return this._id}get info(){return this._info}get kernelManager(){return this._kernelManager}get kernelSpecManager(){return this._kernelSpecManager}get path(){return this._path}get ready(){return this._ready.promise}get sessionId(){return this._sessionId}get session(){return this._session}get sessionManager(){return this._sessionManager}execute(e,{model:t,iopubMessageHooks:r=[],shellMessageHooks:s=[],silent:n,stopOnError:i,storeHistory:o,allowStdin:a,suppressCodeExecutionErrors:l=!1,onExecutionPhaseChanged:c}={}){if(this._kernelConnection){const d=new KernelExecutor({connection:this._kernelConnection,model:t,onExecutionPhaseChanged:c});return d.execute(e,{iopubMessageHooks:r,shellMessageHooks:s,silent:n,stopOnError:i,storeHistory:o,allowStdin:a,suppressCodeExecutionErrors:l}),d}}interrupt(){return this._kernelConnection?.interrupt()??Promise.resolve()}restart(){return this._kernelConnection?.restart()??Promise.resolve()}async shutdown(){await(this._session.kernel?.shutdown()),this.connection?.dispose()}toJSON(){return{path:this._path,id:this.id,clientId:this.clientId,sessionId:this.sessionId,kernelInfo:this.info}}toString(){return`id:${this.id} - client_id:${this.clientId} - session_id:${this.sessionId} - path:${this._path}`}}const areAllKernelSessionsAvailable=e=>{for(const t of e.values())if(!t.isKernelSessionAvailable)return!1;return!0},isAnyCellRunning=e=>{for(const t of e.values())if(t.isExecuting)return!0;return!1},cellsStore=createStore((e,t)=>({cells:/* @__PURE__ */new Map,source:"",outputsCount:0,adapter:void 0,areAllKernelSessionsReady:!1,isAnyCellExecuting:!1,setCells:t=>e(e=>({cells:t})),setSource:(r,s)=>{const n=t().cells,i=n.get(r);i?i.source=s:n.set(r,{source:s}),e(e=>({cells:n}))},setOutputsCount:(r,s)=>{const n=t().cells,i=n.get(r);i?i.outputsCount=s:n.set(r,{outputsCount:s}),e(e=>({cells:n}))},setKernelSessionAvailable:(r,s)=>{const n=t().cells,i=n.get(r);i?i.isKernelSessionAvailable=s:n.set(r,{isKernelSessionAvailable:s});const o=areAllKernelSessionsAvailable(n);e(e=>({cells:n,areAllKernelSessionsReady:o}))},setAdapter:(r,s)=>{const n=t().cells,i=n.get(r);i?i.adapter=s:n.set(r,{adapter:s}),e(e=>({cells:n}))},getAdapter:e=>t().cells.get(e)?.adapter,getSource:e=>t().cells.get(e)?.source,getOutputsCount:e=>t().cells.get(e)?.outputsCount,isKernelSessionAvailable:e=>t().cells.get(e)?.isKernelSessionAvailable,execute:e=>{const r=t().cells.get(e);r?r.adapter?.execute():t().cells.forEach(e=>e.adapter?.execute())},setIsExecuting:(r,s)=>{const n=t().cells,i=n.get(r);i?i.isExecuting=s:(t().cells.forEach(e=>e.adapter?.execute()),n.set(r,{isExecuting:s}));const o=isAnyCellRunning(n);e(e=>({cells:n,isAnyCellExecuting:o}))}}));function useCellsStore(e){return useStore(cellsStore,e)}const consoleStore=createStore((e,t)=>({outputs:0,adapter:void 0,execute:()=>{},setOutputs:t=>e(e=>({outputs:t})),setAdapter:t=>e(e=>({adapter:t}))}));function useConsoleStore(e){return useStore(consoleStore,e)}class SearchProvider{constructor(e){this.widget=e,this._stateChanged=new Signal(this),this._filtersChanged=new Signal(this),this._disposed=!1}get stateChanged(){return this._stateChanged}get filtersChanged(){return this._filtersChanged}get currentMatchIndex(){return null}get isDisposed(){return this._disposed}get matchesCount(){return null}dispose(){this._disposed||(this._disposed=!0,Signal.clearData(this))}getInitialQuery(){return""}getFilters(){return{}}static preserveCase(e,t){return e.toUpperCase()===e?t.toUpperCase():e.toLowerCase()===e?t.toLowerCase():toSentenceCase(e)===e?toSentenceCase(t):t}}function toSentenceCase([e="",...t]){return e.toUpperCase()+""+t.join("").toLowerCase()}const FOUND_CLASSES=["cm-string","cm-overlay","cm-searching"],SELECTED_CLASSES=["CodeMirror-selectedtext","jp-current-match"];class HTMLSearchEngine{static search(e,t){if(!(t instanceof Node))return console.warn("Unable to search with HTMLSearchEngine the provided object.",t),Promise.resolve([]);e.global||(e=new RegExp(e.source,e.flags+"g"));const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:r=>{let s=r.parentElement;for(;s!==t;){if(s.nodeName in HTMLSearchEngine.UNSUPPORTED_ELEMENTS)return NodeFilter.FILTER_REJECT;s=s.parentElement}return e.test(r.textContent)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let n=null;for(;null!==(n=s.nextNode());){e.lastIndex=0;let t=null;for(;null!==(t=e.exec(n.textContent));)r.push({text:t[0],position:t.index,node:n})}return Promise.resolve(r)}}HTMLSearchEngine.UNSUPPORTED_ELEMENTS={BASE:!0,HEAD:!0,LINK:!0,META:!0,STYLE:!0,TITLE:!0,BODY:!0,AREA:!0,AUDIO:!0,IMG:!0,MAP:!0,TRACK:!0,VIDEO:!0,APPLET:!0,EMBED:!0,IFRAME:!0,NOEMBED:!0,OBJECT:!0,PARAM:!0,PICTURE:!0,SOURCE:!0,CANVAS:!0,NOSCRIPT:!0,SCRIPT:!0,svg:!0,SVG:!0};class GenericSearchProvider extends SearchProvider{constructor(){super(...arguments),this.isReadOnly=!0,this._matches=[],this._mutationObserver=new MutationObserver(this._onWidgetChanged.bind(this)),this._markNodes=new Array}static isApplicable(e){return e instanceof Widget}static createNew(e,t,r){return new GenericSearchProvider(e)}get currentMatchIndex(){return this._currentMatchIndex>=0?this._currentMatchIndex:null}get currentMatch(){var e;return null!==(e=this._matches[this._currentMatchIndex])&&void 0!==e?e:null}get matches(){return this._matches?this._matches.map(e=>Object.assign({},e)):this._matches}get matchesCount(){return this._matches.length}clearHighlight(){if(this._currentMatchIndex>=0){this._markNodes[this._currentMatchIndex].classList.remove(...SELECTED_CLASSES)}return this._currentMatchIndex=-1,Promise.resolve()}dispose(){this.isDisposed||(this.endQuery().catch(e=>{console.error("Failed to end search query.",e)}),super.dispose())}async highlightNext(e){var t;return null!==(t=this._highlightNext(!1,null==e||e))&&void 0!==t?t:void 0}async highlightPrevious(e){var t;return null!==(t=this._highlightNext(!0,null==e||e))&&void 0!==t?t:void 0}async replaceCurrentMatch(e,t){return Promise.resolve(!1)}async replaceAllMatches(e){return Promise.resolve(!1)}async startQuery(e,t={}){if(await this.endQuery(),this._query=e,null===e)return Promise.resolve();const r=await HTMLSearchEngine.search(e,this.widget.node);let s=0;for(;s<r.length;){let e=r[s].node,t=e.parentNode,n=[r[s]];for(;++s<r.length&&r[s].node===e;)n.unshift(r[s]);const i=n.map(r=>{const s=document.createElement("mark");s.classList.add(...FOUND_CLASSES),s.textContent=r.text;const n=e.splitText(r.position);return n.textContent=n.textContent.slice(r.text.length),t.insertBefore(s,n),s});for(let r=i.length-1;r>=0;r--)this._markNodes.push(i[r])}this._mutationObserver.observe(this.widget.node,{attributes:!1,characterData:!0,childList:!0,subtree:!0}),this._matches=r}async endQuery(){this._mutationObserver.disconnect(),this._markNodes.forEach(e=>{const t=e.parentNode;t.replaceChild(document.createTextNode(e.textContent),e),t.normalize()}),this._markNodes=[],this._matches=[],this._currentMatchIndex=-1}_highlightNext(e,t){if(0===this._matches.length)return null;if(-1===this._currentMatchIndex)this._currentMatchIndex=e?this.matches.length-1:0;else{this._markNodes[this._currentMatchIndex].classList.remove(...SELECTED_CLASSES),this._currentMatchIndex=e?this._currentMatchIndex-1:this._currentMatchIndex+1,t&&(this._currentMatchIndex<0||this._currentMatchIndex>=this._matches.length)&&(this._currentMatchIndex=(this._currentMatchIndex+this._matches.length)%this._matches.length)}if(this._currentMatchIndex>=0&&this._currentMatchIndex<this._matches.length){const t=this._markNodes[this._currentMatchIndex];return t.classList.add(...SELECTED_CLASSES),elementInViewport(t)||t.scrollIntoView(e),t.focus(),this._matches[this._currentMatchIndex]}return this._currentMatchIndex=-1,null}async _onWidgetChanged(e,t){this._currentMatchIndex=-1,await this.startQuery(this._query),this._stateChanged.emit()}}function elementInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}const TextSearchEngine={search(e,t){if("string"!=typeof t)try{t=JSON.stringify(t)}catch(n){return console.warn("Unable to search with TextSearchEngine non-JSON serializable object.",n,t),Promise.resolve([])}e.global||(e=new RegExp(e.source,e.flags+"g"));const r=new Array;let s=null;for(;null!==(s=e.exec(t));)r.push({text:s[0],position:s.index});return Promise.resolve(r)}};class SearchDocumentModel extends VDomModel{constructor(e,t){if(super(),this.searchProvider=e,this._caseSensitive=!1,this._disposed=new Signal(this),this._parsingError="",this._preserveCase=!1,this._initialQuery="",this._filters={},this._replaceText="",this._searchActive=!1,this._searchExpression="",this._useRegex=!1,this._wholeWords=!1,this._filters={},this.searchProvider.getFilters){const e=this.searchProvider.getFilters();for(const t in e)this._filters[t]=e[t].default}e.stateChanged.connect(this._onProviderStateChanged,this),this._searchDebouncer=new Debouncer(()=>{this._updateSearch().catch(e=>{console.error("Failed to update search on document.",e)})},t)}get caseSensitive(){return this._caseSensitive}set caseSensitive(e){this._caseSensitive!==e&&(this._caseSensitive=e,this.stateChanged.emit(),this.refresh())}get currentIndex(){return this.searchProvider.currentMatchIndex}get disposed(){return this._disposed}get filters(){return this._filters}get filtersDefinition(){var e,t,r;return null!==(r=null===(t=(e=this.searchProvider).getFilters)||void 0===t?void 0:t.call(e))&&void 0!==r?r:{}}get filtersDefinitionChanged(){return this.searchProvider.filtersChanged||null}get initialQuery(){return this._initialQuery}set initialQuery(e){this._initialQuery=e}get suggestedInitialQuery(){return this.searchProvider.getInitialQuery()}get selectionState(){return this.searchProvider.getSelectionState?this.searchProvider.getSelectionState():void 0}get isReadOnly(){return this.searchProvider.isReadOnly}get replaceOptionsSupport(){return this.searchProvider.replaceOptionsSupport}get parsingError(){return this._parsingError}get preserveCase(){return this._preserveCase}set preserveCase(e){this._preserveCase!==e&&(this._preserveCase=e,this.stateChanged.emit(),this.refresh())}get replaceText(){return this._replaceText}set replaceText(e){this._replaceText!==e&&(this._replaceText=e,this.stateChanged.emit())}get searchExpression(){return this._searchExpression}set searchExpression(e){this._searchExpression!==e&&(this._searchExpression=e,this.stateChanged.emit(),this.refresh())}get totalMatches(){return this.searchProvider.matchesCount}get useRegex(){return this._useRegex}set useRegex(e){this._useRegex!==e&&(this._useRegex=e,this.stateChanged.emit(),this.refresh())}get wholeWords(){return this._wholeWords}set wholeWords(e){this._wholeWords!==e&&(this._wholeWords=e,this.stateChanged.emit(),this.refresh())}dispose(){this.isDisposed||(this._searchExpression&&this.endQuery().catch(e=>{console.error(`Failed to end query '${this._searchExpression}.`,e)}),this.searchProvider.stateChanged.disconnect(this._onProviderStateChanged,this),this._searchDebouncer.dispose(),super.dispose())}async endQuery(){this._searchActive=!1,await this.searchProvider.endQuery(),this.stateChanged.emit()}async highlightNext(){await this.searchProvider.highlightNext(),this.stateChanged.emit()}async highlightPrevious(){await this.searchProvider.highlightPrevious(),this.stateChanged.emit()}refresh(){this._searchDebouncer.invoke().catch(e=>{console.error("Failed to invoke search document debouncer.",e)})}async replaceAllMatches(){await this.searchProvider.replaceAllMatches(this._replaceText,{preserveCase:this.preserveCase,regularExpression:this.useRegex}),this.stateChanged.emit()}async replaceCurrentMatch(){await this.searchProvider.replaceCurrentMatch(this._replaceText,!0,{preserveCase:this.preserveCase,regularExpression:this.useRegex}),this.stateChanged.emit()}async setFilter(e,t){this._filters[e]!==t&&(this.searchProvider.validateFilter?(this._filters[e]=await this.searchProvider.validateFilter(e,t),this._filters[e]===t&&(this.stateChanged.emit(),this.refresh())):(this._filters[e]=t,this.stateChanged.emit(),this.refresh()))}async _updateSearch(){this._parsingError&&(this._parsingError="",this.stateChanged.emit());try{const e=this.searchExpression?Private$4.parseQuery(this.searchExpression,this.caseSensitive,this.useRegex,this.wholeWords):null;e?(this._searchActive=!0,await this.searchProvider.startQuery(e,this._filters)):(this._searchActive=!1,await this.searchProvider.endQuery()),this.stateChanged.emit()}catch(e){this._parsingError=e.toString(),this.stateChanged.emit(),console.error(`Failed to parse expression ${this.searchExpression}`,e)}}_onProviderStateChanged(){this._searchActive&&this.refresh()}}var Private$4;(Private$4||(Private$4={})).parseQuery=function(e,t,r,s){const n=t?"gm":"gim";let i=r?e:e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");s&&(i="\\b"+i+"\\b");const o=new RegExp(i,n);return o.test("")?null:o};const OVERLAY_CLASS="jp-DocumentSearch-overlay",OVERLAY_ROW_CLASS="jp-DocumentSearch-overlay-row",INPUT_CLASS="jp-DocumentSearch-input",INPUT_LABEL_CLASS="jp-DocumentSearch-input-label",INPUT_WRAPPER_CLASS="jp-DocumentSearch-input-wrapper",INPUT_BUTTON_CLASS_OFF="jp-DocumentSearch-input-button-off",INPUT_BUTTON_CLASS_ON="jp-DocumentSearch-input-button-on",INDEX_COUNTER_CLASS="jp-DocumentSearch-index-counter",UP_DOWN_BUTTON_WRAPPER_CLASS="jp-DocumentSearch-up-down-wrapper",UP_DOWN_BUTTON_CLASS="jp-DocumentSearch-up-down-button",FILTER_BUTTON_CLASS="jp-DocumentSearch-filter-button",FILTER_BUTTON_ENABLED_CLASS="jp-DocumentSearch-filter-button-enabled",REGEX_ERROR_CLASS="jp-DocumentSearch-regex-error",SEARCH_OPTIONS_CLASS="jp-DocumentSearch-search-options",SEARCH_FILTER_DISABLED_CLASS="jp-DocumentSearch-search-filter-disabled",SEARCH_FILTER_CLASS="jp-DocumentSearch-search-filter",REPLACE_BUTTON_CLASS="jp-DocumentSearch-replace-button",REPLACE_BUTTON_WRAPPER_CLASS="jp-DocumentSearch-replace-button-wrapper",REPLACE_WRAPPER_CLASS="jp-DocumentSearch-replace-wrapper-class",REPLACE_TOGGLE_CLASS="jp-DocumentSearch-replace-toggle",TOGGLE_WRAPPER="jp-DocumentSearch-toggle-wrapper",TOGGLE_PLACEHOLDER="jp-DocumentSearch-toggle-placeholder",BUTTON_CONTENT_CLASS="jp-DocumentSearch-button-content",BUTTON_WRAPPER_CLASS="jp-DocumentSearch-button-wrapper",SPACER_CLASS="jp-DocumentSearch-spacer";function SearchInput(e){const[t,r]=reactExports.useState(1),s=reactExports.useCallback(t=>{var s;const n=t?t.target:null===(s=e.inputRef)||void 0===s?void 0:s.current;if(n){const e=n.value.split(/\n/);let t=e.reduce((e,t)=>e.length>t.length?e:t,"");n.parentNode&&n.parentNode instanceof HTMLElement&&(n.parentNode.dataset.value=t),r(e.length)}},[]);return reactExports.useEffect(()=>{var t,r;null===(r=null===(t=e.inputRef)||void 0===t?void 0:t.current)||void 0===r||r.select(),s()},[e.initialValue]),reactExports.createElement("label",{className:INPUT_LABEL_CLASS},reactExports.createElement("textarea",{onChange:t=>{e.onChange(t),s(t)},onKeyDown:t=>{e.onKeyDown(t),s(t)},rows:t,placeholder:e.placeholder,className:INPUT_CLASS,key:e.autoUpdate?e.initialValue:null,tabIndex:0,ref:e.inputRef,title:e.title,defaultValue:e.initialValue||e.lastSearchText,autoFocus:e.autoFocus}))}function SearchEntry(e){var t;const r=(null!==(t=e.translator)&&void 0!==t?t:nullTranslator).load("jupyterlab"),s=classes(e.caseSensitive?INPUT_BUTTON_CLASS_ON:INPUT_BUTTON_CLASS_OFF,BUTTON_CONTENT_CLASS),n=classes(e.useRegex?INPUT_BUTTON_CLASS_ON:INPUT_BUTTON_CLASS_OFF,BUTTON_CONTENT_CLASS),i=classes(e.wholeWords?INPUT_BUTTON_CLASS_ON:INPUT_BUTTON_CLASS_OFF,BUTTON_CONTENT_CLASS),o=INPUT_WRAPPER_CLASS;return reactExports.createElement("div",{className:o},reactExports.createElement(SearchInput,{placeholder:r.__("Find"),onChange:t=>e.onChange(t),onKeyDown:t=>e.onKeydown(t),inputRef:e.inputRef,initialValue:e.initialSearchText,lastSearchText:e.lastSearchText,title:r.__("Find"),autoFocus:!0,autoUpdate:!0}),reactExports.createElement("button",{className:BUTTON_WRAPPER_CLASS,onClick:()=>{e.onCaseSensitiveToggled()},tabIndex:0,title:r.__("Match Case")},reactExports.createElement(caseSensitiveIcon.react,{className:s,tag:"span"})),reactExports.createElement("button",{className:BUTTON_WRAPPER_CLASS,onClick:()=>e.onWordToggled(),tabIndex:0,title:r.__("Match Whole Word")},reactExports.createElement(wordIcon.react,{className:i,tag:"span"})),reactExports.createElement("button",{className:BUTTON_WRAPPER_CLASS,onClick:()=>e.onRegexToggled(),tabIndex:0,title:r.__("Use Regular Expression")},reactExports.createElement(regexIcon.react,{className:n,tag:"span"})))}function ReplaceEntry(e){var t,r,s;const n=(null!==(t=e.translator)&&void 0!==t?t:nullTranslator).load("jupyterlab"),i=classes(e.preserveCase?INPUT_BUTTON_CLASS_ON:INPUT_BUTTON_CLASS_OFF,BUTTON_CONTENT_CLASS);return reactExports.createElement("div",{className:REPLACE_WRAPPER_CLASS},reactExports.createElement("div",{className:INPUT_WRAPPER_CLASS},reactExports.createElement(SearchInput,{placeholder:n.__("Replace"),initialValue:null!==(r=e.replaceText)&&void 0!==r?r:"",onKeyDown:t=>e.onReplaceKeydown(t),onChange:t=>e.onChange(t),title:n.__("Replace"),autoFocus:!1,autoUpdate:!1}),(null===(s=e.replaceOptionsSupport)||void 0===s?void 0:s.preserveCase)?reactExports.createElement("button",{className:BUTTON_WRAPPER_CLASS,onClick:()=>e.onPreserveCaseToggled(),tabIndex:0,title:n.__("Preserve Case")},reactExports.createElement(caseSensitiveIcon.react,{className:i,tag:"span"})):null),reactExports.createElement("button",{className:REPLACE_BUTTON_WRAPPER_CLASS,onClick:()=>e.onReplaceCurrent(),tabIndex:0},reactExports.createElement("span",{className:`${REPLACE_BUTTON_CLASS} ${BUTTON_CONTENT_CLASS}`,tabIndex:0},n.__("Replace"))),reactExports.createElement("button",{className:REPLACE_BUTTON_WRAPPER_CLASS,tabIndex:0,onClick:()=>e.onReplaceAll()},reactExports.createElement("span",{className:`${REPLACE_BUTTON_CLASS} ${BUTTON_CONTENT_CLASS}`,tabIndex:-1},n.__("Replace All"))))}function UpDownButtons(e){var t,r;const s=null===(t=e.keyBindings)||void 0===t?void 0:t.next,n=null===(r=e.keyBindings)||void 0===r?void 0:r.previous,i=s?CommandRegistry.formatKeystroke(s.keys):"",o=n?CommandRegistry.formatKeystroke(n.keys):"",a=o?` (${o})`:"",l=i?` (${i})`:"",c=reactExports.createElement("button",{className:BUTTON_WRAPPER_CLASS,onClick:()=>!!e.isEnabled&&e.onHighlightPrevious(),tabIndex:0,title:`${e.trans.__("Previous Match")}${a}`,disabled:!e.isEnabled},reactExports.createElement(caretUpEmptyThinIcon.react,{className:classes(UP_DOWN_BUTTON_CLASS,BUTTON_CONTENT_CLASS),tag:"span"})),d=reactExports.createElement("button",{className:BUTTON_WRAPPER_CLASS,onClick:()=>!!e.isEnabled&&e.onHighlightNext(),tabIndex:0,title:`${e.trans.__("Next Match")}${l}`,disabled:!e.isEnabled},reactExports.createElement(caretDownEmptyThinIcon.react,{className:classes(UP_DOWN_BUTTON_CLASS,BUTTON_CONTENT_CLASS),tag:"span"}));return reactExports.createElement("div",{className:UP_DOWN_BUTTON_WRAPPER_CLASS},c,d)}function SearchIndices(e){return reactExports.createElement("div",{className:INDEX_COUNTER_CLASS},0===e.totalMatches?"-/-":`${null===e.currentIndex?"-":e.currentIndex+1}/${e.totalMatches}`)}function FilterToggle(e){let t=`${FILTER_BUTTON_CLASS} ${BUTTON_CONTENT_CLASS}`;e.visible&&(t=`${t} ${FILTER_BUTTON_ENABLED_CLASS}`);const r=e.anyEnabled?filterDotIcon:filterIcon;return reactExports.createElement("button",{className:BUTTON_WRAPPER_CLASS,onClick:()=>e.toggleVisible(),tabIndex:0,title:e.visible?e.trans.__("Hide Search Filters"):e.trans.__("Show Search Filters")},reactExports.createElement(r.react,{className:t,tag:"span",height:"20px",width:"20px"}))}function FilterSelection(e){return reactExports.createElement("label",{className:e.isEnabled?SEARCH_FILTER_CLASS:`${SEARCH_FILTER_CLASS} ${SEARCH_FILTER_DISABLED_CLASS}`,title:e.description},reactExports.createElement("input",{type:"checkbox",className:"jp-mod-styled",disabled:!e.isEnabled,checked:e.value,onChange:e.onToggle}),e.title)}class SearchOverlay extends reactExports.Component{constructor(e){super(e),this.translator=e.translator||nullTranslator}_onSearchChange(e){const t=e.target.value;this.props.onSearchChanged(t)}_onSearchKeydown(e){if(13===e.keyCode)if(e.stopPropagation(),e.preventDefault(),e.ctrlKey){const t=e.target;this._insertNewLine(t),this.props.onSearchChanged(t.value)}else e.shiftKey?this.props.onHighlightPrevious():this.props.onHighlightNext()}_onReplaceKeydown(e){13===e.keyCode&&(e.stopPropagation(),e.preventDefault(),e.ctrlKey?this._insertNewLine(e.target):this.props.onReplaceCurrent())}_insertNewLine(e){const[t,r]=[e.selectionStart,e.selectionEnd];e.setRangeText("\n",t,r,"end")}_onClose(){this.props.onClose()}_onReplaceToggled(){if(!this.props.replaceEntryVisible)for(const e in this.props.filtersDefinition){const t=this.props.filtersDefinition[e];t.supportReplace||this.props.onFilterChanged(e,!1).catch(e=>{console.error(`Fail to update filter value for ${t.title}:\n${e}`)})}this.props.onReplaceEntryShown(!this.props.replaceEntryVisible)}_toggleFiltersVisibility(){this.props.onFiltersVisibilityChanged(!this.props.filtersVisible)}render(){var e,t,r;const s=this.translator.load("jupyterlab"),n=!this.props.isReadOnly&&this.props.replaceEntryVisible,i=this.props.filtersDefinition,o=Object.keys(i).length>0,a=o?reactExports.createElement(FilterToggle,{visible:this.props.filtersVisible,anyEnabled:Object.keys(i).some(e=>{var t;const r=i[e];return null!==(t=this.props.filters[e])&&void 0!==t?t:r.default}),toggleVisible:()=>this._toggleFiltersVisibility(),trans:s}):null,l=null===(e=this.props.keyBindings)||void 0===e?void 0:e.toggleSearchInSelection,c=l?CommandRegistry.formatKeystroke(l.keys):"",d=c?` (${c})`:"",h=o?reactExports.createElement("div",{className:SEARCH_OPTIONS_CLASS},Object.keys(i).map(e=>{var t,r;const s=i[e],o=!n||s.supportReplace,a=o?s.description:null!==(t=s.disabledDescription)&&void 0!==t?t:s.description;return reactExports.createElement(FilterSelection,{key:e,title:s.title,description:a+("selection"==e?d:""),isEnabled:o,onToggle:async()=>{await this.props.onFilterChanged(e,!this.props.filters[e])},value:null!==(r=this.props.filters[e])&&void 0!==r?r:s.default})})):null,u=this.props.replaceEntryVisible?caretDownIcon:caretRightIcon;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("div",{className:OVERLAY_ROW_CLASS},this.props.isReadOnly?reactExports.createElement("div",{className:TOGGLE_PLACEHOLDER}):reactExports.createElement("button",{className:TOGGLE_WRAPPER,onClick:()=>this._onReplaceToggled(),tabIndex:0,title:n?s.__("Hide Replace"):s.__("Show Replace")},reactExports.createElement(u.react,{className:`${REPLACE_TOGGLE_CLASS} ${BUTTON_CONTENT_CLASS}`,tag:"span",elementPosition:"center",height:"20px",width:"20px"})),reactExports.createElement(SearchEntry,{inputRef:this.props.searchInputRef,useRegex:this.props.useRegex,caseSensitive:this.props.caseSensitive,wholeWords:this.props.wholeWords,onCaseSensitiveToggled:this.props.onCaseSensitiveToggled,onRegexToggled:this.props.onRegexToggled,onWordToggled:this.props.onWordToggled,onKeydown:e=>this._onSearchKeydown(e),onChange:e=>this._onSearchChange(e),initialSearchText:this.props.initialSearchText,lastSearchText:this.props.lastSearchText,translator:this.translator}),a,reactExports.createElement(SearchIndices,{currentIndex:this.props.currentIndex,totalMatches:null!==(t=this.props.totalMatches)&&void 0!==t?t:0}),reactExports.createElement(UpDownButtons,{onHighlightPrevious:()=>{this.props.onHighlightPrevious()},onHighlightNext:()=>{this.props.onHighlightNext()},trans:s,keyBindings:this.props.keyBindings,isEnabled:!!(null===(r=this.props.searchInputRef.current)||void 0===r?void 0:r.value)}),reactExports.createElement("button",{className:BUTTON_WRAPPER_CLASS,onClick:()=>this._onClose(),tabIndex:0,title:s.__("Close Search Box")},reactExports.createElement(closeIcon.react,{className:"jp-icon-hover",elementPosition:"center",height:"16px",width:"16px"}))),reactExports.createElement("div",{className:OVERLAY_ROW_CLASS},n?reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReplaceEntry,{onPreserveCaseToggled:this.props.onPreserveCaseToggled,onReplaceKeydown:e=>this._onReplaceKeydown(e),onChange:e=>this.props.onReplaceChanged(e.target.value),onReplaceCurrent:()=>this.props.onReplaceCurrent(),onReplaceAll:()=>this.props.onReplaceAll(),replaceOptionsSupport:this.props.replaceOptionsSupport,replaceText:this.props.replaceText,preserveCase:this.props.preserveCase,translator:this.translator}),reactExports.createElement("div",{className:SPACER_CLASS})):null),this.props.filtersVisible?h:null,!!this.props.errorMessage&&reactExports.createElement("div",{className:REGEX_ERROR_CLASS},this.props.errorMessage))}}class SearchDocumentView extends VDomRenderer{constructor(e,t,r){super(e),this.translator=t,this._showReplace=!1,this._showFilters=!1,this._closed=new Signal(this),this.addClass(OVERLAY_CLASS),this._searchInput=reactExports.createRef(),this._keyBindings=r}get closed(){return this._closed}focusSearchInput(){var e;null===(e=this._searchInput.current)||void 0===e||e.select()}setSearchText(e){this.model.initialQuery=e,e&&(this.model.searchExpression=e)}setReplaceText(e){this.model.replaceText=e}showReplace(){this.setReplaceInputVisibility(!0)}onCloseRequest(e){super.onCloseRequest(e),this._closed.emit(),this.model.endQuery()}setReplaceInputVisibility(e){this._showReplace!==e&&(this._showReplace=e,this.update())}setFiltersVisibility(e){this._showFilters!==e&&(this._showFilters=e,this.update())}render(){return this.model.filtersDefinitionChanged?reactExports.createElement(UseSignal,{signal:this.model.filtersDefinitionChanged},()=>this._renderOverlay()):this._renderOverlay()}_renderOverlay(){return reactExports.createElement(SearchOverlay,{caseSensitive:this.model.caseSensitive,currentIndex:this.model.currentIndex,isReadOnly:this.model.isReadOnly,errorMessage:this.model.parsingError,filters:this.model.filters,filtersDefinition:this.model.filtersDefinition,preserveCase:this.model.preserveCase,replaceEntryVisible:this._showReplace,filtersVisible:this._showFilters,replaceOptionsSupport:this.model.replaceOptionsSupport,replaceText:this.model.replaceText,initialSearchText:this.model.initialQuery,lastSearchText:this.model.searchExpression,searchInputRef:this._searchInput,totalMatches:this.model.totalMatches,translator:this.translator,useRegex:this.model.useRegex,wholeWords:this.model.wholeWords,onCaseSensitiveToggled:()=>{this.model.caseSensitive=!this.model.caseSensitive},onRegexToggled:()=>{this.model.useRegex=!this.model.useRegex},onWordToggled:()=>{this.model.wholeWords=!this.model.wholeWords},onFilterChanged:async(e,t)=>{await this.model.setFilter(e,t)},onFiltersVisibilityChanged:e=>{this.setFiltersVisibility(e)},onHighlightNext:()=>{this.model.highlightNext()},onHighlightPrevious:()=>{this.model.highlightPrevious()},onPreserveCaseToggled:()=>{this.model.preserveCase=!this.model.preserveCase},onSearchChanged:e=>{this.model.searchExpression=e},onClose:()=>{this.close()},onReplaceEntryShown:e=>{this.setReplaceInputVisibility(e)},onReplaceChanged:e=>{this.model.replaceText=e},onReplaceCurrent:()=>{this.model.replaceCurrentMatch()},onReplaceAll:()=>{this.model.replaceAllMatches()},keyBindings:this._keyBindings})}}const COLLAPSER_CLASS="jp-Collapser",COLLAPSER_CHILD_CLASS="jp-Collapser-child",INPUT_COLLAPSER="jp-InputCollapser",OUTPUT_COLLAPSER="jp-OutputCollapser";class Collapser extends ReactWidget{constructor(){super(),this.addClass(COLLAPSER_CLASS)}get collapsed(){return!1}render(){const e=COLLAPSER_CHILD_CLASS;return reactExports.createElement("div",{className:e,onClick:e=>this.handleClick(e)})}}class InputCollapser extends Collapser{constructor(){super(),this.addClass(INPUT_COLLAPSER)}get collapsed(){var e;const t=null===(e=this.parent)||void 0===e?void 0:e.parent;return!!t&&t.inputHidden}handleClick(e){var t;const r=null===(t=this.parent)||void 0===t?void 0:t.parent;r&&(r.inputHidden=!r.inputHidden),this.update()}}class OutputCollapser extends Collapser{constructor(){super(),this.addClass(OUTPUT_COLLAPSER)}get collapsed(){var e;const t=null===(e=this.parent)||void 0===e?void 0:e.parent;return!!t&&t.outputHidden}handleClick(e){var t,r;const s=null===(t=this.parent)||void 0===t?void 0:t.parent;if(s&&(s.outputHidden=!s.outputHidden,s.outputHidden)){let e=null===(r=s.parent)||void 0===r?void 0:r.node;e&&ElementExt.scrollIntoViewIfNeeded(e,s.node)}this.update()}}const CELL_HEADER_CLASS$1="jp-CellHeader",CELL_FOOTER_CLASS$1="jp-CellFooter";class CellHeader extends Widget{constructor(){super(),this.addClass(CELL_HEADER_CLASS$1)}}class CellFooter extends Widget{constructor(){super(),this.addClass(CELL_FOOTER_CLASS$1)}}const createMutex=()=>{let e=!0;return t=>{if(e){e=!1;try{t()}finally{e=!0}}}},outdatedTimeout=3e4;class Awareness extends Observable{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=/* @__PURE__ */new Map,this.meta=/* @__PURE__ */new Map,this._checkInterval=setInterval(()=>{const e=getUnixTime();null!==this.getLocalState()&&outdatedTimeout/2<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach((r,s)=>{s!==this.clientID&&outdatedTimeout<=e-r.lastUpdated&&this.states.has(s)&&t.push(s)}),t.length>0&&removeAwarenessStates(this,t,"timeout")},floor(outdatedTimeout/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,r=this.meta.get(t),s=void 0===r?0:r.clock+1,n=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:s,lastUpdated:getUnixTime()});const i=[],o=[],a=[],l=[];null===e?l.push(t):null==n?null!=e&&i.push(t):(o.push(t),equalityDeep(n,e)||a.push(t)),(i.length>0||a.length>0||l.length>0)&&this.emit("change",[{added:i,updated:a,removed:l},"local"]),this.emit("update",[{added:i,updated:o,removed:l},"local"])}setLocalStateField(e,t){const r=this.getLocalState();null!==r&&this.setLocalState({...r,[e]:t})}getStates(){return this.states}}const removeAwarenessStates=(e,t,r)=>{const s=[];for(let n=0;n<t.length;n++){const r=t[n];if(e.states.has(r)){if(e.states.delete(r),r===e.clientID){const t=e.meta.get(r);e.meta.set(r,{clock:t.clock+1,lastUpdated:getUnixTime()})}s.push(r)}}s.length>0&&(e.emit("change",[{added:[],updated:[],removed:s},r]),e.emit("update",[{added:[],updated:[],removed:s},r]))};class YDocument{constructor(e){var t;this.onStateChanged=e=>{const t=new Array;e.keysChanged.forEach(r=>{const s=e.changes.keys.get(r);s&&t.push({name:r,oldValue:s.oldValue,newValue:this.ystate.get(r)})}),this._changed.emit({stateChange:t})},this._changed=new Signal(this),this._isDisposed=!1,this._disposed=new Signal(this),this._ydoc=null!==(t=null==e?void 0:e.ydoc)&&void 0!==t?t:new Doc,this._ystate=this._ydoc.getMap("state"),this._undoManager=new UndoManager([],{trackedOrigins:/* @__PURE__ */new Set([this]),doc:this._ydoc}),this._awareness=new Awareness(this._ydoc),this._ystate.observe(this.onStateChanged)}get ydoc(){return this._ydoc}get ystate(){return this._ystate}get undoManager(){return this._undoManager}get awareness(){return this._awareness}get changed(){return this._changed}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}get state(){return JSONExt.deepCopy(this.ystate.toJSON())}canUndo(){return this.undoManager.undoStack.length>0}canRedo(){return this.undoManager.redoStack.length>0}dispose(){this._isDisposed||(this._isDisposed=!0,this.ystate.unobserve(this.onStateChanged),this.awareness.destroy(),this.undoManager.destroy(),this.ydoc.destroy(),this._disposed.emit(),Signal.clearData(this))}getState(e){const t=this.ystate.get(e);return void 0===t?t:JSONExt.deepCopy(t)}setState(e,t){JSONExt.deepEqual(this.ystate.get(e),t)||this.ystate.set(e,t)}get source(){return this.getSource()}set source(e){this.setSource(e)}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}clearUndoHistory(){this.undoManager.clear()}transact(e,t=!0,r=null){this.ydoc.transact(e,t?this:r)}}class YFile extends YDocument{constructor(){super(),this.version="1.0.0",this.ysource=this.ydoc.getText("source"),this._modelObserver=e=>{this._changed.emit({sourceChange:e.changes.delta})},this.undoManager.addToScope(this.ysource),this.ysource.observe(this._modelObserver)}static create(){return new YFile}get source(){return this.getSource()}set source(e){this.setSource(e)}dispose(){this.isDisposed||(this.ysource.unobserve(this._modelObserver),super.dispose())}getSource(){return this.ysource.toString()}setSource(e){this.transact(()=>{const t=this.ysource;t.delete(0,t.length),t.insert(0,e)})}updateSource(e,t,r=""){this.transact(()=>{const s=this.ysource;s.insert(e,r),s.delete(e+r.length,t-e)})}}const createCellModelFromSharedType=(e,t={})=>{switch(e.get("cell_type")){case"code":return new YCodeCell(e,e.get("source"),e.get("outputs"),t);case"markdown":return new YMarkdownCell(e,e.get("source"),t);case"raw":return new YRawCell(e,e.get("source"),t);default:throw new Error("Found unknown cell type")}},createCell=(e,t)=>{var r,s;const n=new YMap,i=new YText,o=new YMap;let a;switch(n.set("source",i),n.set("metadata",o),n.set("cell_type",e.cell_type),n.set("id",null!==(r=e.id)&&void 0!==r?r:UUID.uuid4()),e.cell_type){case"markdown":a=new YMarkdownCell(n,i,{notebook:t},o),null!=e.attachments&&a.setAttachments(e.attachments);break;case"code":{const r=new YArray;n.set("outputs",r),a=new YCodeCell(n,i,r,{notebook:t},o);const l=e;a.execution_count=null!==(s=l.execution_count)&&void 0!==s?s:null,l.outputs&&a.setOutputs(l.outputs);break}default:a=new YRawCell(n,i,{notebook:t},o),e.attachments&&a.setAttachments(e.attachments)}return null!=e.metadata&&a.setMetadata(e.metadata),null!=e.source&&a.setSource("string"==typeof e.source?e.source:e.source.join("")),a},createStandaloneCell=e=>createCell(e);class YBaseCell{static create(e){return createCell({id:e,cell_type:this.prototype.cell_type})}constructor(e,t,r={},s){if(this._modelObserver=(e,t)=>{"silent-change"!==t.origin&&this._changed.emit(this.getChanges(e))},this._metadataChanged=new Signal(this),this._notebook=null,this._changed=new Signal(this),this._disposed=new Signal(this),this._isDisposed=!1,this._undoManager=null,this.ymodel=e,this._ysource=t,this._ymetadata=null!=s?s:this.ymodel.get("metadata"),this._prevSourceLength=t?t.length:0,this._notebook=null,this._awareness=null,this._undoManager=null,r.notebook)this._notebook=r.notebook,this._notebook.disableDocumentWideUndoRedo&&(this._undoManager=new UndoManager([this.ymodel],{trackedOrigins:/* @__PURE__ */new Set([this]),doc:this._notebook.ydoc}));else{const e=new Doc;e.getArray().insert(0,[this.ymodel]),this._awareness=new Awareness(e),this._undoManager=new UndoManager([this.ymodel],{trackedOrigins:/* @__PURE__ */new Set([this])})}this.ymodel.observeDeep(this._modelObserver)}get awareness(){var e,t,r;return null!==(r=null!==(e=this._awareness)&&void 0!==e?e:null===(t=this.notebook)||void 0===t?void 0:t.awareness)&&void 0!==r?r:null}get cell_type(){throw new Error("A YBaseCell must not be constructed")}get changed(){return this._changed}get disposed(){return this._disposed}get id(){return this.getId()}get isDisposed(){return this._isDisposed}get isStandalone(){return null!==this._notebook}get metadata(){return this.getMetadata()}set metadata(e){this.setMetadata(e)}get metadataChanged(){return this._metadataChanged}get notebook(){return this._notebook}get source(){return this.getSource()}set source(e){this.setSource(e)}get undoManager(){var e;return this.notebook?(null===(e=this.notebook)||void 0===e?void 0:e.disableDocumentWideUndoRedo)?this._undoManager:this.notebook.undoManager:this._undoManager}get ysource(){return this._ysource}canUndo(){return!!this.undoManager&&this.undoManager.undoStack.length>0}canRedo(){return!!this.undoManager&&this.undoManager.redoStack.length>0}clearUndoHistory(){var e;null===(e=this.undoManager)||void 0===e||e.clear()}undo(){var e;null===(e=this.undoManager)||void 0===e||e.undo()}redo(){var e;null===(e=this.undoManager)||void 0===e||e.redo()}dispose(){var e;if(!this._isDisposed){if(this._isDisposed=!0,this.ymodel.unobserveDeep(this._modelObserver),this._awareness){const e=this._awareness.doc;this._awareness.destroy(),e.destroy()}this._undoManager&&(this._undoManager===(null===(e=this.notebook)||void 0===e?void 0:e.undoManager)?this._undoManager=null:this._undoManager.destroy()),this._disposed.emit(),Signal.clearData(this)}}getId(){return this.ymodel.get("id")}getSource(){return this.ysource.toString()}setSource(e){this.transact(()=>{this.ysource.delete(0,this.ysource.length),this.ysource.insert(0,e)})}updateSource(e,t,r=""){this.transact(()=>{const s=this.ysource;s.insert(e,r),s.delete(e+r.length,t-e)})}deleteMetadata(e){void 0!==this.getMetadata(e)&&this.transact(()=>{this._ymetadata.delete(e);const t=this.getMetadata("jupyter");if("collapsed"===e&&t){const{outputs_hidden:e,...r}=t;0===Object.keys(r).length?this._ymetadata.delete("jupyter"):this._ymetadata.set("jupyter",r)}else"jupyter"===e&&this._ymetadata.delete("collapsed")},!1)}getMetadata(e){const t=this._ymetadata;if(void 0!==t){if("string"==typeof e){return void 0===t.get(e)?void 0:JSONExt.deepCopy(t.get(e))}return JSONExt.deepCopy(t.toJSON())}}setMetadata(e,t){var r,s;if("string"==typeof e){if(void 0===t)throw new TypeError(`Metadata value for ${e} cannot be 'undefined'; use deleteMetadata.`);const s=e;if(JSONExt.deepEqual(null!==(r=this.getMetadata(s))&&void 0!==r?r:null,t))return;this.transact(()=>{var e;if(this._ymetadata.set(s,t),"collapsed"===s){const r=null!==(e=this.getMetadata("jupyter"))&&void 0!==e?e:{};r.outputs_hidden!==t&&this.setMetadata("jupyter",{...r,outputs_hidden:t})}else if("jupyter"===s){const e=t.outputs_hidden;void 0!==e?this.getMetadata("collapsed")!==e&&this.setMetadata("collapsed",e):this.deleteMetadata("collapsed")}},!1)}else{const t=JSONExt.deepCopy(e);null!=t.collapsed?(t.jupyter=t.jupyter||{},t.jupyter.outputs_hidden=t.collapsed):null!=(null===(s=null==t?void 0:t.jupyter)||void 0===s?void 0:s.outputs_hidden)&&(t.collapsed=t.jupyter.outputs_hidden),JSONExt.deepEqual(t,this.getMetadata())||this.transact(()=>{for(const[e,r]of Object.entries(t))this._ymetadata.set(e,r)},!1)}}toJSON(){return{id:this.getId(),cell_type:this.cell_type,source:this.getSource(),metadata:this.getMetadata()}}transact(e,t=!0,r=null){!this.notebook||this.notebook.disableDocumentWideUndoRedo?null==this.ymodel.doc?e():this.ymodel.doc.transact(e,t?this:r):this.notebook.transact(e,t)}getChanges(e){const t={},r=e.find(e=>e.target===this.ymodel.get("source"));r&&(t.sourceChange=r.changes.delta);const s=e.find(e=>e.target===this._ymetadata);s&&(t.metadataChange=s.changes.keys,s.changes.keys.forEach((e,t)=>{switch(e.action){case"add":this._metadataChanged.emit({key:t,newValue:this._ymetadata.get(t),type:"add"});break;case"delete":this._metadataChanged.emit({key:t,oldValue:e.oldValue,type:"remove"});break;case"update":{const r=this._ymetadata.get(t),s=e.oldValue;let n=!0;n="object"==typeof s&&"object"==typeof r?JSONExt.deepEqual(s,r):s===r,n||this._metadataChanged.emit({key:t,type:"change",oldValue:s,newValue:r})}}}));const n=e.find(e=>e.target===this.ymodel),i=this.ymodel.get("source");return n&&n.keysChanged.has("source")&&(t.sourceChange=[{delete:this._prevSourceLength},{insert:i.toString()}]),this._prevSourceLength=i.length,t}}class YCodeCell extends YBaseCell{static create(e){return super.create(e)}constructor(e,t,r,s={},n){super(e,t,s,n),this._youtputs=r}get cell_type(){return"code"}get execution_count(){return this.ymodel.get("execution_count")||null}set execution_count(e){this.ymodel.get("execution_count")!==e&&this.transact(()=>{this.ymodel.set("execution_count",e)},!1)}get executionState(){var e;return null!==(e=this.ymodel.get("execution_state"))&&void 0!==e?e:"idle"}set executionState(e){this.ymodel.get("execution_state")!==e&&this.transact(()=>{this.ymodel.set("execution_state",e)},!1)}get outputs(){return this.getOutputs()}set outputs(e){this.setOutputs(e)}get youtputs(){return this._youtputs}getOutputs(){return JSONExt.deepCopy(this._youtputs.toJSON())}createOutputs(e){const t=[];for(const r of JSONExt.deepCopy(e)){let e;if("stream"===r.output_type){const{text:t,...s}=r;e=s;const n=new YText;let i=t instanceof Array?t.join():t;n.insert(0,i),e.text=n}else e=r;const s=[];for(const[t,r]of Object.entries(e))s.push([t,r]);const n=new YMap(s);t.push(n)}return t}setOutputs(e){this.transact(()=>{this._youtputs.delete(0,this._youtputs.length);const t=this.createOutputs(e);this._youtputs.insert(0,t)},!1)}removeStreamOutput(e,t,r=null){this.transact(()=>{const r=this._youtputs.get(e).get("text"),s=r.length-t;r.delete(t,s)},!1,r)}appendStreamOutput(e,t,r=null){this.transact(()=>{const r=this._youtputs.get(e).get("text");r.insert(r.length,t)},!1,r)}updateOutputs(e,t,r=[],s=null){const n=t<this._youtputs.length?t-e:this._youtputs.length-e;this.transact(()=>{this._youtputs.delete(e,n);const t=this.createOutputs(r);this._youtputs.insert(e,t)},!1,s)}clearOutputs(e=null){this.transact(()=>{this._youtputs.delete(0,this._youtputs.length)},!1,e)}toJSON(){return{...super.toJSON(),outputs:this.getOutputs(),execution_count:this.execution_count}}getChanges(e){const t=super.getChanges(e),r=e.find(e=>3===e.path.length&&"outputs"===e.path[0]&&"text"===e.path[2]);r&&(t.streamOutputChange=r.changes.delta);const s=e.find(e=>e.target===this.ymodel.get("outputs"));s&&(t.outputsChange=s.changes.delta);const n=e.find(e=>e.target===this.ymodel);if(n&&n.keysChanged.has("execution_count")){const e=n.changes.keys.get("execution_count");t.executionCountChange={oldValue:e.oldValue,newValue:this.ymodel.get("execution_count")}}if(n&&n.keysChanged.has("execution_state")){const e=n.changes.keys.get("execution_state");t.executionStateChange={oldValue:e.oldValue,newValue:this.ymodel.get("execution_state")}}return t}}class YAttachmentCell extends YBaseCell{get attachments(){return this.getAttachments()}set attachments(e){this.setAttachments(e)}getAttachments(){return this.ymodel.get("attachments")}setAttachments(e){this.transact(()=>{null==e?this.ymodel.delete("attachments"):this.ymodel.set("attachments",e)},!1)}getChanges(e){const t=super.getChanges(e),r=e.find(e=>e.target===this.ymodel);if(r&&r.keysChanged.has("attachments")){const e=r.changes.keys.get("attachments");t.attachmentsChange={oldValue:e.oldValue,newValue:this.ymodel.get("attachments")}}return t}}class YRawCell extends YAttachmentCell{static create(e){return super.create(e)}get cell_type(){return"raw"}toJSON(){return{id:this.getId(),cell_type:"raw",source:this.getSource(),metadata:this.getMetadata(),attachments:this.getAttachments()}}}class YMarkdownCell extends YAttachmentCell{static create(e){return super.create(e)}get cell_type(){return"markdown"}toJSON(){return{id:this.getId(),cell_type:"markdown",source:this.getSource(),metadata:this.getMetadata(),attachments:this.getAttachments()}}}var IEditorMimeTypeService,CodeEditor,CodeEditor2;(IEditorMimeTypeService||(IEditorMimeTypeService={})).defaultMimeType="text/plain",CodeEditor2=CodeEditor||(CodeEditor={}),CodeEditor2.Model=class{constructor(e={}){var t,r;this.standaloneModel=!1,this._isDisposed=!1,this._selections=new ObservableMap,this._mimeType=IEditorMimeTypeService.defaultMimeType,this._mimeTypeChanged=new Signal(this),this.standaloneModel=void 0===e.sharedModel,this.sharedModel=null!==(t=e.sharedModel)&&void 0!==t?t:new YFile,this._mimeType=null!==(r=e.mimeType)&&void 0!==r?r:IEditorMimeTypeService.defaultMimeType}get mimeTypeChanged(){return this._mimeTypeChanged}get selections(){return this._selections}get mimeType(){return this._mimeType}set mimeType(e){const t=this.mimeType;t!==e&&(this._mimeType=e,this._mimeTypeChanged.emit({name:"mimeType",oldValue:t,newValue:e}))}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._selections.dispose(),this.standaloneModel&&this.sharedModel.dispose(),Signal.clearData(this))}};const COMPLETER_ENABLED_CLASS="jp-mod-completer-enabled",COMPLETER_ACTIVE_CLASS="jp-mod-completer-active",COMPLETER_LINE_BEGINNING_CLASS="jp-mod-at-line-beginning",HAS_SELECTION_CLASS="jp-mod-has-primary-selection",HAS_IN_LEADING_WHITESPACE_CLASS="jp-mod-in-leading-whitespace",DROP_TARGET_CLASS$1="jp-mod-dropTarget",leadingWhitespaceRe=/^\s+$/;class CodeEditorWrapper extends Widget{constructor(e){super();const{factory:t,model:r,editorOptions:s}=e;(this.editor=t({host:this.node,model:r,...s})).model.selections.changed.connect(this._onSelectionsChanged,this)}get model(){return this.editor.model}dispose(){this.isDisposed||(this.editor.dispose(),super.dispose())}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e)}}onActivateRequest(e){this.editor.focus()}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("lm-dragenter",this),t.addEventListener("lm-dragleave",this),t.addEventListener("lm-dragover",this),t.addEventListener("lm-drop",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("lm-dragenter",this),t.removeEventListener("lm-dragleave",this),t.removeEventListener("lm-dragover",this),t.removeEventListener("lm-drop",this)}_onSelectionsChanged(){const{start:e,end:t}=this.editor.getSelection();e.column!==t.column||e.line!==t.line?(this.addClass(HAS_SELECTION_CLASS),this.removeClass(HAS_IN_LEADING_WHITESPACE_CLASS)):(this.removeClass(HAS_SELECTION_CLASS),this.editor.getLine(t.line).slice(0,t.column).match(leadingWhitespaceRe)?this.addClass(HAS_IN_LEADING_WHITESPACE_CLASS):this.removeClass(HAS_IN_LEADING_WHITESPACE_CLASS))}_evtDragEnter(e){if(!0===this.editor.getOption("readOnly"))return;void 0!==Private$3.findTextData(e.mimeData)&&(e.preventDefault(),e.stopPropagation(),this.addClass("jp-mod-dropTarget"))}_evtDragLeave(e){if(this.removeClass(DROP_TARGET_CLASS$1),!0===this.editor.getOption("readOnly"))return;void 0!==Private$3.findTextData(e.mimeData)&&(e.preventDefault(),e.stopPropagation())}_evtDragOver(e){if(this.removeClass(DROP_TARGET_CLASS$1),!0===this.editor.getOption("readOnly"))return;void 0!==Private$3.findTextData(e.mimeData)&&(e.preventDefault(),e.stopPropagation(),e.dropAction="copy",this.addClass(DROP_TARGET_CLASS$1))}_evtDrop(e){if(!0===this.editor.getOption("readOnly"))return;const t=Private$3.findTextData(e.mimeData);if(void 0===t)return;const r={top:e.y,bottom:e.y,left:e.x,right:e.x},s=this.editor.getPositionForCoordinate(r);if(null===s)return;if(this.removeClass(DROP_TARGET_CLASS$1),e.preventDefault(),e.stopPropagation(),"none"===e.proposedAction)return void(e.dropAction="none");const n=this.editor.getOffsetAt(s);this.model.sharedModel.updateSource(n,n,t)}}var Private$3;(Private$3||(Private$3={})).findTextData=function(e){const t=e.types().find(e=>0===e.indexOf("text"));if(void 0!==t)return e.getData(t)};const INPUT_AREA_CLASS="jp-InputArea",INPUT_AREA_PROMPT_CLASS="jp-InputArea-prompt",INPUT_PROMPT_CLASS$1="jp-InputPrompt",INPUT_AREA_EDITOR_CLASS="jp-InputArea-editor";class InputArea extends Widget{constructor(e){super(),this.addClass(INPUT_AREA_CLASS);const{contentFactory:t,editorOptions:r,model:s}=e;this.model=s,this.contentFactory=t;const n=this._prompt=t.createInputPrompt();n.addClass(INPUT_AREA_PROMPT_CLASS);const i=this._editor=new CodeEditorWrapper({factory:t.editorFactory,model:s,editorOptions:r});i.addClass(INPUT_AREA_EDITOR_CLASS);const o=this.layout=new PanelLayout;o.addWidget(n),o.addWidget(i)}get editorWidget(){return this._editor}get editor(){return this._editor.editor}get promptNode(){return this._prompt.node}get renderedInput(){return this._rendered}renderInput(e){const t=this.layout;this._rendered&&(this._rendered.parent=null),this._editor.hide(),this._rendered=e,t.addWidget(e)}showEditor(){this._rendered&&(this._rendered.parent=null),this._editor.show()}setPrompt(e){this._prompt.executionCount=e}dispose(){this.isDisposed||(this._prompt=null,this._editor=null,this._rendered=null,super.dispose())}}var InputArea2;InputArea2=InputArea||(InputArea={}),InputArea2.ContentFactory=class{constructor(e){this._editor=e.editorFactory}get editorFactory(){return this._editor}createInputPrompt(){return new InputPrompt}};class InputPrompt extends Widget{constructor(){super(),this._executionCount=null,this.addClass(INPUT_PROMPT_CLASS$1)}get executionCount(){return this._executionCount}set executionCount(e){this._executionCount=e,this.node.textContent=null===e?" ":`[${e||" "}]:`}}class AttachmentsModel{constructor(e){var t;if(this._map=new ObservableMap,this._isDisposed=!1,this._stateChanged=new Signal(this),this._changed=new Signal(this),this._serialized=null,this._changeGuard=!1,this.contentFactory=null!==(t=e.contentFactory)&&void 0!==t?t:AttachmentsModel.defaultContentFactory,e.values)for(const r of Object.keys(e.values))void 0!==e.values[r]&&this.set(r,e.values[r]);this._map.changed.connect(this._onMapChanged,this)}get stateChanged(){return this._stateChanged}get changed(){return this._changed}get keys(){return this._map.keys()}get length(){return this._map.keys().length}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this._map.dispose(),Signal.clearData(this))}has(e){return this._map.has(e)}get(e){return this._map.get(e)}set(e,t){const r=this._createItem({value:t});this._map.set(e,r)}remove(e){this._map.delete(e)}clear(){this._map.values().forEach(e=>{e.dispose()}),this._map.clear()}fromJSON(e){this.clear(),Object.keys(e).forEach(t=>{void 0!==e[t]&&this.set(t,e[t])})}toJSON(){const e={};for(const t of this._map.keys())e[t]=this._map.get(t).toJSON();return e}_createItem(e){const t=this.contentFactory.createAttachmentModel(e);return t.changed.connect(this._onGenericChange,this),t}_onMapChanged(e,t){this._serialized&&!this._changeGuard&&(this._changeGuard=!0,this._serialized.set(this.toJSON()),this._changeGuard=!1),this._changed.emit(t),this._stateChanged.emit(void 0)}_onGenericChange(){this._stateChanged.emit(void 0)}}!function(e){class t{createAttachmentModel(e){return new AttachmentModel(e)}}e.ContentFactory=t,e.defaultContentFactory=new t}(AttachmentsModel||(AttachmentsModel={}));class AttachmentsResolver{constructor(e){this._parent=e.parent||null,this._model=e.model}async resolveUrl(e,t){return this._parent&&!e.startsWith("attachment:")?this._parent.resolveUrl(e,t):e}async getDownloadUrl(e){if(this._parent&&!e.startsWith("attachment:"))return this._parent.getDownloadUrl(e);const t=e.slice(11),r=this._model.get(t);if(void 0===r)return e;const{data:s}=r,n=Object.keys(s)[0];if(void 0===n||-1===imageRendererFactory.mimeTypes.indexOf(n))throw new Error(`Cannot render unknown image mime type "${n}".`);return`data:${n};base64,${s[n]}`}isLocal(e){var t,r,s;return!(this._parent&&!e.startsWith("attachment:"))||(null===(s=null===(r=(t=this._parent).isLocal)||void 0===r?void 0:r.call(t,e))||void 0===s||s)}}const globalModelDBMutex=createMutex();function isCodeCellModel(e){return"code"===e.type}function isMarkdownCellModel(e){return"markdown"===e.type}function isRawCellModel(e){return"raw"===e.type}class CellModel extends CodeEditor.Model{constructor(e={}){const{cell_type:t,sharedModel:r,...s}=e;super({sharedModel:null!=r?r:createStandaloneCell({cell_type:null!=t?t:"raw",id:e.id}),...s}),this.contentChanged=new Signal(this),this.stateChanged=new Signal(this),this._metadataChanged=new Signal(this),this._trusted=!1,this.standaloneModel=void 0===e.sharedModel,this.trusted=!!this.getMetadata("trusted")||!!e.trusted,this.sharedModel.changed.connect(this.onGenericChange,this),this.sharedModel.metadataChanged.connect(this._onMetadataChanged,this)}get metadataChanged(){return this._metadataChanged}get id(){return this.sharedModel.getId()}get metadata(){return this.sharedModel.metadata}get trusted(){return this._trusted}set trusted(e){const t=this.trusted;t!==e&&(this._trusted=e,this.onTrustedChanged(this,{newValue:e,oldValue:t}))}dispose(){this.isDisposed||(this.sharedModel.changed.disconnect(this.onGenericChange,this),this.sharedModel.metadataChanged.disconnect(this._onMetadataChanged,this),super.dispose())}onTrustedChanged(e,t){}deleteMetadata(e){return this.sharedModel.deleteMetadata(e)}getMetadata(e){return this.sharedModel.getMetadata(e)}setMetadata(e,t){void 0===t?this.sharedModel.deleteMetadata(e):this.sharedModel.setMetadata(e,t)}toJSON(){return this.sharedModel.toJSON()}onGenericChange(){this.contentChanged.emit(void 0)}_onMetadataChanged(e,t){this._metadataChanged.emit(t)}}class AttachmentsCellModel extends CellModel{constructor(e){var t;super(e);const r=null!==(t=e.contentFactory)&&void 0!==t?t:AttachmentsCellModel.defaultContentFactory,s=this.sharedModel.getAttachments();this._attachments=r.createAttachmentsModel({values:s}),this._attachments.stateChanged.connect(this.onGenericChange,this),this._attachments.changed.connect(this._onAttachmentsChange,this),this.sharedModel.changed.connect(this._onSharedModelChanged,this)}get attachments(){return this._attachments}dispose(){this.isDisposed||(this._attachments.stateChanged.disconnect(this.onGenericChange,this),this._attachments.changed.disconnect(this._onAttachmentsChange,this),this._attachments.dispose(),this.sharedModel.changed.disconnect(this._onSharedModelChanged,this),super.dispose())}toJSON(){return super.toJSON()}_onAttachmentsChange(e,t){const r=this.sharedModel;globalModelDBMutex(()=>r.setAttachments(e.toJSON()))}_onSharedModelChanged(e,t){if(t.attachmentsChange){const e=this.sharedModel;globalModelDBMutex(()=>{var t;return this._attachments.fromJSON(null!==(t=e.getAttachments())&&void 0!==t?t:{})})}}}!function(e){class t{createAttachmentsModel(e){return new AttachmentsModel(e)}}e.ContentFactory=t,e.defaultContentFactory=new t}(AttachmentsCellModel||(AttachmentsCellModel={}));class RawCellModel extends AttachmentsCellModel{constructor(e={}){super({cell_type:"raw",...e})}get type(){return"raw"}toJSON(){return super.toJSON()}}class MarkdownCellModel extends AttachmentsCellModel{constructor(e={}){super({cell_type:"markdown",...e}),this.mimeType="text/x-ipythongfm"}get type(){return"markdown"}toJSON(){return super.toJSON()}}class CodeCellModel extends CellModel{constructor(e={}){var t;super({cell_type:"code",...e}),this._executedCode="",this._isDirty=!1;const r=null!==(t=null==e?void 0:e.contentFactory)&&void 0!==t?t:CodeCellModel.defaultContentFactory,s=this.trusted,n=this.sharedModel.getOutputs();this._outputs=r.createOutputArea({trusted:s,values:n}),this.sharedModel.changed.connect(this._onSharedModelChanged,this),this._outputs.changed.connect(this.onGenericChange,this),this._outputs.changed.connect(this.onOutputsChange,this)}get type(){return"code"}get executionCount(){return this.sharedModel.execution_count||null}set executionCount(e){this.sharedModel.execution_count=e||null}get executionState(){return this.sharedModel.executionState}set executionState(e){this.sharedModel.executionState=e}get isDirty(){return this._isDirty}set isDirty(e){this._setDirty(e)}get outputs(){return this._outputs}clearExecution(){this.outputs.clear(),this.executionCount=null,this.executionState="idle",this._setDirty(!1),this.sharedModel.deleteMetadata("execution"),this.trusted=!0}dispose(){this.isDisposed||(this.sharedModel.changed.disconnect(this._onSharedModelChanged,this),this._outputs.changed.disconnect(this.onGenericChange,this),this._outputs.changed.disconnect(this.onOutputsChange,this),this._outputs.dispose(),this._outputs=null,super.dispose())}onTrustedChanged(e,t){const r=t.newValue;if(this._outputs&&(this._outputs.trusted=r),r){const e=this.sharedModel,t=e.getMetadata();t.trusted=!0,e.setMetadata(t)}this.stateChanged.emit({name:"trusted",oldValue:t.oldValue,newValue:r})}toJSON(){return super.toJSON()}onOutputsChange(e,t){const r=this.sharedModel;globalModelDBMutex(()=>{switch(t.type){case"add":{for(const r of t.newValues)"stream"===r.type&&r.streamText.changed.connect((e,r)=>{if(void 0!==r.options&&r.options.silent)return;const s=this.sharedModel;"remove"===r.type?s.removeStreamOutput(t.newIndex,r.start,"silent-change"):s.appendStreamOutput(t.newIndex,r.value,"silent-change")},this);const e=t.newValues.map(e=>e.toJSON());r.updateOutputs(t.newIndex,t.newIndex,e,"silent-change");break}case"set":{const e=t.newValues.map(e=>e.toJSON());r.updateOutputs(t.oldIndex,t.oldIndex+e.length,e,"silent-change");break}case"remove":r.updateOutputs(t.oldIndex,t.oldValues.length,[],"silent-change");break;case"clear":r.clearOutputs();break;default:throw new Error(`Invalid event type: ${t.type}`)}})}_onSharedModelChanged(e,t){t.streamOutputChange&&globalModelDBMutex(()=>{for(const e of t.streamOutputChange)"delete"in e&&this._outputs.removeStreamOutput(e.delete),"insert"in e&&this._outputs.appendStreamOutput(e.insert.toString())}),t.outputsChange&&globalModelDBMutex(()=>{let e=0;for(const r of t.outputsChange){if("retain"in r&&(e+=r.retain),"delete"in r)for(let t=0;t<r.delete;t++)this._outputs.remove(e);if("insert"in r)for(const e of r.insert)this._outputs.add("toJSON"in e?e.toJSON():e)}}),t.executionCountChange&&this.stateChanged.emit({name:"executionCount",oldValue:t.executionCountChange.oldValue,newValue:t.executionCountChange.newValue}),t.executionStateChange&&("running"===t.executionStateChange.newValue&&this._setDirty(!1),this.stateChanged.emit({name:"executionState",oldValue:t.executionStateChange.oldValue,newValue:t.executionStateChange.newValue})),!t.sourceChange||null===this.executionCount&&"running"!==this.executionState||this._setDirty(this._executedCode!==this.sharedModel.getSource().trim())}_setDirty(e){e||(this._executedCode=this.sharedModel.getSource().trim()),e!==this._isDirty&&(this._isDirty=e,this.stateChanged.emit({name:"isDirty",oldValue:!e,newValue:e}))}}!function(e){class t{createOutputArea(e){return new OutputAreaModel(e)}}e.ContentFactory=t,e.defaultContentFactory=new t}(CodeCellModel||(CodeCellModel={}));const PLACEHOLDER_CLASS="jp-Placeholder",INPUT_PROMPT_CLASS="jp-Placeholder-prompt jp-InputPrompt",OUTPUT_PROMPT_CLASS="jp-Placeholder-prompt jp-OutputPrompt",CONTENT_CLASS="jp-Placeholder-content",INPUT_PLACEHOLDER_CLASS="jp-InputPlaceholder",OUTPUT_PLACEHOLDER_CLASS="jp-OutputPlaceholder";class Placeholder extends Widget{constructor(e){var t,r,s;const n=document.createElement("div");super({node:n});const i=(null!==(t=e.translator)&&void 0!==t?t:nullTranslator).load("jupyterlab"),o=document.createElement("div");o.className=null!==(r=e.promptClass)&&void 0!==r?r:"",n.insertAdjacentHTML("afterbegin",o.outerHTML),this._cell=document.createElement("div"),this._cell.classList.add(CONTENT_CLASS),this._cell.title=i.__("Click to expand");const a=this._cell.appendChild(document.createElement("div"));a.classList.add("jp-Placeholder-contentContainer"),this._textContent=a.appendChild(document.createElement("span")),this._textContent.className="jp-PlaceholderText",this._textContent.innerText=null!==(s=e.text)&&void 0!==s?s:"",n.appendChild(this._cell),ellipsesIcon.element({container:a.appendChild(document.createElement("span")),className:"jp-MoreHorizIcon",elementPosition:"center",height:"auto",width:"32px"}),this.addClass(PLACEHOLDER_CLASS),this._callback=e.callback}set text(e){this._textContent.innerText=e}get text(){return this._textContent.innerText}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("click",this._callback)}onBeforeDetach(e){this.node.removeEventListener("click",this._callback),super.onBeforeDetach(e)}}class InputPlaceholder extends Placeholder{constructor(e){super({...e,promptClass:INPUT_PROMPT_CLASS}),this.addClass(INPUT_PLACEHOLDER_CLASS)}}class OutputPlaceholder extends Placeholder{constructor(e){super({...e,promptClass:OUTPUT_PROMPT_CLASS}),this.addClass(OUTPUT_PLACEHOLDER_CLASS)}}const CODE_RUNNER_SELECTOR="[data-jp-code-runner]",TERMINAL_CODE_RUNNER_SELECTOR='[data-jp-interaction-mode="terminal"]',TOOLTIP_OPENER_SELECTOR=".jp-CodeMirrorEditor:not(.jp-mod-has-primary-selection):not(.jp-mod-in-leading-whitespace):not(.jp-mod-completer-active)",ACTIVE_CELL_IN_EDIT_MODE_SELECTOR=".jp-mod-editMode .jp-Cell.jp-mod-active";var StateCommands,StateCommands2;StateCommands2=StateCommands||(StateCommands={}),StateCommands2.indentMoreOrInsertTab=function(e){var t;let r=null===(t=e.dom.parentElement)||void 0===t?void 0:t.classList,s=null==r?void 0:r.contains(COMPLETER_ENABLED_CLASS),n=null==r?void 0:r.contains(COMPLETER_LINE_BEGINNING_CLASS);if(s&&!n)return!1;const i={state:e.state,dispatch:e.dispatch},o=e.state.selection.main.from;if(o!=e.state.selection.main.to)return indentMore(i);const a=e.state.doc.lineAt(o),l=e.state.doc.slice(a.from,o).toString();return/^\s*$/.test(l)?indentMore(i):insertTab(i)},StateCommands2.completerOrInsertNewLine=function(e){var t;if(null===(t=e.dom.parentElement)||void 0===t?void 0:t.classList.contains(COMPLETER_ACTIVE_CLASS))return!1;if(e.dom.closest(TERMINAL_CODE_RUNNER_SELECTOR))return!1;const r={state:e.state,dispatch:e.dispatch};return insertNewlineAndIndent(r)},StateCommands2.preventNewLineOnRun=function(e){return!!e.dom.closest(CODE_RUNNER_SELECTOR)},StateCommands2.insertBlankLineOnRun=function(e){if(e.dom.closest(CODE_RUNNER_SELECTOR))return!1;{const t={state:e.state,dispatch:e.dispatch};return insertBlankLine(t)}},StateCommands2.simplifySelectionAndMaybeSwitchToCommandMode=function(e){const t={state:e.state,dispatch:e.dispatch},r=simplifySelection(t);return!e.dom.closest(ACTIVE_CELL_IN_EDIT_MODE_SELECTOR)&&r},StateCommands2.dedentIfNotLaunchingTooltip=function(e){return!e.dom.closest(TOOLTIP_OPENER_SELECTOR)&&indentLess(e)};const customThemeConfig=Facet.define({combine:e=>combineConfig(e,{fontFamily:null,fontSize:null,lineHeight:null},{fontFamily:(e,t)=>null!=e?e:t,fontSize:(e,t)=>null!=e?e:t,lineHeight:(e,t)=>null!=e?e:t})});function setEditorStyle(e){const{fontFamily:t,fontSize:r,lineHeight:s}=e.state.facet(customThemeConfig);let n="";return r&&(n+=`font-size: ${r}px !important;`),t&&(n+=`font-family: ${t} !important;`),s&&(n+=`line-height: ${s.toString()} !important`),{style:n}}function customTheme(e){return[customThemeConfig.of(e),EditorView.editorAttributes.of(setEditorStyle)]}const INLINE_MATH_DOLLAR="InlineMathDollar",INLINE_MATH_BRACKET="InlineMathBracket",BLOCK_MATH_DOLLAR="BlockMathDollar",BLOCK_MATH_BRACKET="BlockMathBracket",DELIMITER_LENGTH={[INLINE_MATH_DOLLAR]:1,[INLINE_MATH_BRACKET]:3,[BLOCK_MATH_DOLLAR]:2,[BLOCK_MATH_BRACKET]:3};Object.keys(DELIMITER_LENGTH).reduce((e,t)=>(e[t]={mark:`${t}Mark`,resolve:t},e),{});const RULERS_CLASSNAME="cm-rulers",baseTheme=EditorView.baseTheme({[`.${RULERS_CLASSNAME}`]:{borderRight:"1px dotted gray",opacity:.7}}),rulerConfig=Facet.define({combine:e=>e.reduce((e,t)=>e.concat(t.filter((r,s)=>!e.includes(r)&&s==t.lastIndexOf(r))),[])}),plugin=ViewPlugin.fromClass(class{constructor(e){var t,r;this.rulersContainer=e.dom.appendChild(document.createElement("div")),this.rulersContainer.style.cssText="\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                height: 100%;\n                pointer-events: none;\n                overflow: hidden;\n            ";const s=e.defaultCharacterWidth,n=e.state.facet(rulerConfig),i=null!==(r=null===(t=e.scrollDOM.querySelector(".cm-gutters"))||void 0===t?void 0:t.clientWidth)&&void 0!==r?r:0;this.rulers=n.map(e=>{const t=this.rulersContainer.appendChild(document.createElement("div"));return t.classList.add(RULERS_CLASSNAME),t.style.cssText=`\n                position: absolute;\n                left: ${i+e*s}px;\n                height: 100%;\n            `,t.style.width="6px",t})}update(e){var t,r;const s=e.view.state.facet(rulerConfig);if(e.viewportChanged||e.geometryChanged||!JSONExt.deepEqual(s,e.startState.facet(rulerConfig))){const n=null!==(r=null===(t=e.view.scrollDOM.querySelector(".cm-gutters"))||void 0===t?void 0:t.clientWidth)&&void 0!==r?r:0,i=e.view.defaultCharacterWidth;this.rulers.forEach((e,t)=>{e.style.left=`${n+s[t]*i}px`})}}destroy(){this.rulers.forEach(e=>{e.remove()}),this.rulersContainer.remove()}});function rulers(e){return[baseTheme,rulerConfig.of(e),plugin]}class YUndoManagerConfig{constructor(e){this.undoManager=e}}const yUndoManagerFacet=Facet.define({combine:e=>e[e.length-1]});class YUndoManagerPluginValue{constructor(e){this._onStackItemAdded=({stackItem:e,changedParentTypes:t})=>{t.has(this._syncConf.ytext)&&this._beforeChangeSelection&&!e.meta.has(this)&&e.meta.set(this,this._beforeChangeSelection)},this._onStackItemPopped=({stackItem:e})=>{const t=e.meta.get(this);if(t){const e=this._syncConf.fromYRange(t);this._view.dispatch(this._view.state.update({selection:e,effects:[EditorView.scrollIntoView(e)]})),this._storeSelection()}},this._storeSelection=()=>{this._beforeChangeSelection=this._syncConf.toYRange(this._view.state.selection.main)},this._view=e,this._conf=e.state.facet(yUndoManagerFacet),this._undoManager=this._conf.undoManager,this._syncConf=e.state.facet(ySyncFacet),this._beforeChangeSelection=null,this._undoManager.on("stack-item-added",this._onStackItemAdded),this._undoManager.on("stack-item-popped",this._onStackItemPopped),this._undoManager.addTrackedOrigin(this._syncConf)}update(e){!e.selectionSet||0!==e.transactions.length&&e.transactions[0].annotation(ySyncAnnotation)===this._syncConf||this._storeSelection()}destroy(){this._undoManager.off("stack-item-added",this._onStackItemAdded),this._undoManager.off("stack-item-popped",this._onStackItemPopped),this._undoManager.removeTrackedOrigin(this._syncConf)}}const yUndoManager=ViewPlugin.fromClass(YUndoManagerPluginValue);class YRange{constructor(e,t){this.yanchor=e,this.yhead=t}toJSON(){return{yanchor:relativePositionToJSON(this.yanchor),yhead:relativePositionToJSON(this.yhead)}}static fromJSON(e){return new YRange(createRelativePositionFromJSON(e.yanchor),createRelativePositionFromJSON(e.yhead))}}class YSyncConfig{constructor(e){this.ytext=e}toYPos(e,t=0){return createRelativePositionFromTypeIndex(this.ytext,e,t)}fromYPos(e){const t=createAbsolutePositionFromRelativePosition(createRelativePositionFromJSON(e),this.ytext.doc);if(null==t||t.type!==this.ytext)throw new Error("[y-codemirror] The position you want to retrieve was created by a different document");return{pos:t.index,assoc:t.assoc}}toYRange(e){const t=e.assoc,r=this.toYPos(e.anchor,t),s=this.toYPos(e.head,t);return new YRange(r,s)}fromYRange(e){const t=this.fromYPos(e.yanchor),r=this.fromYPos(e.yhead);return t.pos===r.pos?EditorSelection.cursor(r.pos,r.assoc):EditorSelection.range(t.pos,r.pos)}}const ySyncFacet=Facet.define({combine:e=>e[e.length-1]}),ySyncAnnotation=Annotation.define(),ySync=ViewPlugin.fromClass(class{constructor(e){this.conf=e.state.facet(ySyncFacet),this._observer=(t,r)=>{var s;if(r.origin!==this.conf){const r=t.delta,n=[];let i=0;for(let e=0;e<r.length;e++){const t=r[e];null!=t.insert?n.push({from:i,to:i,insert:t.insert}):null!=t.delete?(n.push({from:i,to:i+t.delete,insert:""}),i+=t.delete):i+=null!==(s=t.retain)&&void 0!==s?s:0}e.dispatch({changes:n,annotations:[ySyncAnnotation.of(this.conf)]})}},this._ytext=this.conf.ytext,this._ytext.observe(this._observer)}update(e){if(!e.docChanged||e.transactions.length>0&&e.transactions[0].annotation(ySyncAnnotation)===this.conf)return;const t=this.conf.ytext;t.doc.transact(()=>{let r=0;e.changes.iterChanges((e,s,n,i,o)=>{const a=o.sliceString(0,o.length,"\n");e!==s&&t.delete(e+r,s-e),a.length>0&&t.insert(e+r,a),r+=a.length-(s-e)})},this.conf)}destroy(){this._ytext.unobserve(this._observer)}});function ybinding(e){const{ytext:t,undoManager:r}=e,s=new YSyncConfig(t),n=[ySyncFacet.of(s),ySync];return r&&n.push(yUndoManagerFacet.of(new YUndoManagerConfig(r)),yUndoManager),n}const READ_ONLY_CLASS="jp-mod-readOnly";class ExtensionsHandler{constructor({baseConfiguration:e,config:t,defaultExtensions:r}={}){this._configChanged=new Signal(this),this._disposed=new Signal(this),this._isDisposed=!1,this._immutables=/* @__PURE__ */new Set,this._baseConfig=null!=e?e:{},this._config=null!=t?t:{},this._configurableBuilderMap=new Map(r);const s=Object.keys(this._config).concat(Object.keys(this._baseConfig));this._immutables=new Set([...this._configurableBuilderMap.keys()].filter(e=>!s.includes(e)))}get configChanged(){return this._configChanged}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),Signal.clearData(this))}getOption(e){var t;return null!==(t=this._config[e])&&void 0!==t?t:this._baseConfig[e]}hasOption(e){return Object.keys(this._config).includes(e)||Object.keys(this._baseConfig).includes(e)}setOption(e,t){this._config[e]!==t&&(this._config[e]=t,this._configChanged.emit({[e]:t}))}setBaseOptions(e){const t=this._getChangedOptions(e,this._baseConfig);if(t.length>0){this._baseConfig=e;const r=Object.keys(this._config),s=t.filter(e=>!r.includes(e));s.length>0&&this._configChanged.emit(s.reduce((e,t)=>(e[t]=this._baseConfig[t],e),{}))}for(const r of Object.keys(e))r in this._config&&this._config[r]!=e[r]&&this.setOption(r,e[r])}setOptions(e){const t=this._getChangedOptions(e,this._config);t.length>0&&(this._config={...e},this._configChanged.emit(t.reduce((e,t)=>{var r;return e[t]=null!==(r=this._config[t])&&void 0!==r?r:this._baseConfig[t],e},{})))}reconfigureExtension(e,t,r){const s=this.getEffect(e.state,t,r);s&&e.dispatch({effects:[s]})}reconfigureExtensions(e,t){const r=Object.keys(t).filter(e=>this.has(e)).map(r=>this.getEffect(e.state,r,t[r]));e.dispatch({effects:r.filter(e=>null!==e)})}injectExtension(e,t){e.dispatch({effects:StateEffect.appendConfig.of(t)})}getInitialExtensions(){const e={...this._baseConfig,...this._config},t=[...this._immutables].map(e=>{var t;return null===(t=this.get(e))||void 0===t?void 0:t.instance(void 0)}).filter(e=>e);for(const r of Object.keys(e)){const s=this.get(r);if(s){const n=e[r];t.push(s.instance(n))}}return t}get(e){return this._configurableBuilderMap.get(e)}has(e){return this._configurableBuilderMap.has(e)}getEffect(e,t,r){var s;const n=this.get(t);return null!==(s=null==n?void 0:n.reconfigure(r))&&void 0!==s?s:null}_getChangedOptions(e,t){const r=new Array,s=new Array;for(const[n,i]of Object.entries(e))s.push(n),t[n]!==i&&r.push(n);return r.push(...Object.keys(t).filter(e=>!s.includes(e))),r}}class EditorExtensionRegistry{constructor(){this.configurationBuilder=/* @__PURE__ */new Map,this.configurationSchema={},this.defaultOptions={},this.handlers=/* @__PURE__ */new Set,this.immutableExtensions=/* @__PURE__ */new Set,this._baseConfiguration={}}get baseConfiguration(){return{...this.defaultOptions,...this._baseConfiguration}}set baseConfiguration(e){if(!JSONExt.deepEqual(e,this._baseConfiguration)){this._baseConfiguration=e;for(const e of this.handlers)e.setBaseOptions(this.baseConfiguration)}}get defaultConfiguration(){return Object.freeze({...this.defaultOptions})}get settingsSchema(){return Object.freeze(JSONExt.deepCopy(this.configurationSchema))}addExtension(e){var t;if(this.configurationBuilder.has(e.name))throw new Error(`Extension named ${e.name} is already registered.`);this.configurationBuilder.set(e.name,e),void 0!==e.default&&(this.defaultOptions[e.name]=e.default),e.schema&&(this.configurationSchema[e.name]={default:null!==(t=e.default)&&void 0!==t?t:null,...e.schema},this.defaultOptions[e.name]=this.configurationSchema[e.name].default)}createNew(e){const t=new Array;for(const[s,n]of this.configurationBuilder.entries()){const r=n.factory(e);r&&t.push([s,r])}const r=new ExtensionsHandler({baseConfiguration:this.baseConfiguration,config:e.config,defaultExtensions:t});return this.handlers.add(r),r.disposed.connect(()=>{this.handlers.delete(r)}),r}}!function(e){class t{constructor(e){this._compartment=new Compartment,this._builder=e}instance(e){return this._compartment.of(this._builder(e))}reconfigure(e){return this._compartment.reconfigure(this._builder(e))}}class r{constructor(e){this._extension=e}instance(){return this._extension}reconfigure(){return null}}function s(e){return new t(e)}function n(e,r=[]){return new t(t=>t?e:r)}function i(e){return new r(e)}e.createConfigurableExtension=s,e.createConditionalExtension=n,e.createImmutableExtension=i,e.getDefaultExtensions=function(e={}){const{themes:t,translator:r}=e,o=(null!=r?r:nullTranslator).load("jupyterlab"),a=[Object.freeze({name:"autoClosingBrackets",default:!1,factory:()=>n(closeBrackets()),schema:{type:"boolean",title:o.__("Auto Closing Brackets")}}),Object.freeze({name:"codeFolding",default:!1,factory:()=>n(foldGutter()),schema:{type:"boolean",title:o.__("Code Folding")}}),Object.freeze({name:"cursorBlinkRate",default:1200,factory:()=>s(e=>drawSelection({cursorBlinkRate:e})),schema:{type:"number",title:o.__("Cursor blinking rate"),description:o.__("Half-period in milliseconds used for cursor blinking. The default blink rate is 1200ms. By setting this to zero, blinking can be disabled.")}}),Object.freeze({name:"highlightActiveLine",default:!1,factory:()=>n(highlightActiveLine()),schema:{type:"boolean",title:o.__("Highlight the active line")}}),Object.freeze({name:"highlightSpecialCharacters",default:!0,factory:()=>n(highlightSpecialChars()),schema:{type:"boolean",title:o.__("Highlight special characters")}}),Object.freeze({name:"highlightTrailingWhitespace",default:!1,factory:()=>n(highlightTrailingWhitespace()),schema:{type:"boolean",title:o.__("Highlight trailing white spaces")}}),Object.freeze({name:"highlightWhitespace",default:!1,factory:()=>n(highlightWhitespace()),schema:{type:"boolean",title:o.__("Highlight white spaces")}}),Object.freeze({name:"indentUnit",default:"4",factory:()=>s(e=>"Tab"==e?indentUnit.of("\t"):indentUnit.of(" ".repeat(parseInt(e,10)))),schema:{type:"string",title:o.__("Indentation unit"),description:o.__("The indentation is a `Tab` or the number of spaces. This defaults to 4 spaces."),enum:["Tab","1","2","4","8"]}}),Object.freeze({name:"keymap",default:[{key:"Mod-Enter",run:StateCommands.insertBlankLineOnRun},{key:"Enter",run:StateCommands.completerOrInsertNewLine},{key:"Escape",run:StateCommands.simplifySelectionAndMaybeSwitchToCommandMode},...defaultKeymap.filter(e=>!["Ctrl-m","Mod-Enter","Shift-Mod-k","Mod-/","Alt-A","Escape","Enter"].includes(e.key)),{key:"Tab",run:StateCommands.indentMoreOrInsertTab,shift:StateCommands.dedentIfNotLaunchingTooltip}],factory:()=>s(e=>keymap.of(e))}),Object.freeze({name:"lineNumbers",default:!0,factory:()=>n(lineNumbers()),schema:{type:"boolean",title:o.__("Line Numbers")}}),Object.freeze({name:"lineWrap",factory:()=>n(EditorView.lineWrapping),default:!0,schema:{type:"boolean",title:o.__("Line Wrap")}}),Object.freeze({name:"dropCursor",default:!0,factory:()=>n(dropCursor()),schema:{type:"boolean",title:o.__("Drop Cursor")}}),Object.freeze({name:"matchBrackets",default:!0,factory:()=>n([bracketMatching(),Prec.high(keymap.of(closeBracketsKeymap))]),schema:{type:"boolean",title:o.__("Match Brackets")}}),Object.freeze({name:"rectangularSelection",default:!0,factory:()=>n([rectangularSelection(),crosshairCursor()]),schema:{type:"boolean",title:o.__("Rectangular selection"),description:o.__("Rectangular (block) selection can be created by dragging the mouse pointer while holding the left mouse button and the Alt key. When the Alt key is pressed, a crosshair cursor will appear, indicating that the rectangular selection mode is active.")}}),Object.freeze({name:"readOnly",default:!1,factory:()=>s(e=>[EditorState.readOnly.of(e),e?EditorView.editorAttributes.of({class:READ_ONLY_CLASS}):[]])}),Object.freeze({name:"rulers",default:[],factory:()=>s(e=>e.length>0?rulers(e):[]),schema:{type:"array",title:o.__("Rulers"),items:{type:"number",minimum:0}}}),Object.freeze({name:"extendSelection",default:!0,factory:()=>n(keymap.of([{key:"Mod-Shift-l",run:selectSelectionMatches,preventDefault:!0}]))}),Object.freeze({name:"searchWithCM",default:!1,factory:()=>n(keymap.of([{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"}]))}),Object.freeze({name:"scrollPastEnd",default:!1,factory:e=>e.inline?null:n(scrollPastEnd())}),Object.freeze({name:"smartIndent",default:!0,factory:()=>n(indentOnInput()),schema:{type:"boolean",title:o.__("Smart Indentation")}}),Object.freeze({name:"tabFocusable",default:!0,factory:()=>n(EditorView.contentAttributes.of({tabIndex:"0"}),EditorView.contentAttributes.of({tabIndex:"-1"}))}),Object.freeze({name:"tabSize",default:4,factory:()=>s(e=>EditorState.tabSize.of(e)),schema:{type:"number",title:o.__("Tab size")}}),Object.freeze({name:"tooltips",factory:()=>i(tooltips({position:"absolute",parent:document.body}))}),Object.freeze({name:"allowMultipleSelections",default:!0,factory:()=>s(e=>EditorState.allowMultipleSelections.of(e)),schema:{type:"boolean",title:o.__("Multiple selections")}}),Object.freeze({name:"customStyles",factory:()=>s(e=>customTheme(e)),default:{fontFamily:null,fontSize:null,lineHeight:null},schema:{title:o.__("Custom editor styles"),type:"object",properties:{fontFamily:{type:["string","null"],title:o.__("Font Family")},fontSize:{type:["number","null"],minimum:1,maximum:100,title:o.__("Font Size")},lineHeight:{type:["number","null"],title:o.__("Line Height")}},additionalProperties:!1}})];return t&&a.push(Object.freeze({name:"theme",default:"jupyter",factory:()=>s(e=>t.getTheme(e)),schema:{type:"string",title:o.__("Theme"),description:o.__("CodeMirror theme")}})),r&&a.push(Object.freeze({name:"translation",default:{"Control character":o.__("Control character"),"Selection deleted":o.__("Selection deleted"),"Folded lines":o.__("Folded lines"),"Unfolded lines":o.__("Unfolded lines"),to:o.__("to"),"folded code":o.__("folded code"),unfold:o.__("unfold"),"Fold line":o.__("Fold line"),"Unfold line":o.__("Unfold line"),"Go to line":o.__("Go to line"),go:o.__("go"),Find:o.__("Find"),Replace:o.__("Replace"),next:o.__("next"),previous:o.__("previous"),all:o.__("all"),"match case":o.__("match case"),replace:o.__("replace"),"replace all":o.__("replace all"),close:o.__("close"),"current match":o.__("current match"),"replaced $ matches":o.__("replaced $ matches"),"replaced match on line $":o.__("replaced match on line $"),"on line":o.__("on line"),Completions:o.__("Completions"),Diagnostics:o.__("Diagnostics"),"No diagnostics":o.__("No diagnostics"),Breakpoint:o.__("Breakpoint"),"Selected breakpoint":o.__("Selected breakpoint")},factory:()=>s(e=>EditorState.phrases.of(e))})),a}}(EditorExtensionRegistry||(EditorExtensionRegistry={}));const jupyterEditorTheme=EditorView.theme({"&":{background:"var(--jp-layout-color0)",color:"var(--jp-content-font-color1)"},".cm-panels":{color:"var(--jp-ui-font-color2)",backgroundColor:"var(--jp-layout-color2)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--jp-border-color2)"},".cm-button":{background:"var(--jp-layout-color2)",border:"var(--jp-border-width) solid var(--jp-border-color1)",color:"var(--jp-ui-font-color1)",borderRadius:"var(--jp-border-radius)"},".cm-button:hover":{background:"var(--jp-layout-color1)"},".cm-panel.cm-search > label":{color:"var(--jp-ui-font-color1)"},".cm-textfield":{backgroundColor:"var(--jp-layout-color2)",color:"var(--jp-ui-font-color1)",border:"var(--jp-border-width) solid var(--jp-border-color1)"},".jp-CodeConsole &, .jp-Notebook &":{background:"transparent"},".cm-content":{caretColor:"var(--jp-editor-cursor-color)"},".cm-scroller":{fontFamily:"inherit"},".cm-cursor, .cm-dropCursor":{borderLeft:"var(--jp-code-cursor-width0) solid var(--jp-editor-cursor-color)"},".cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--jp-editor-selected-background)"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--jp-editor-selected-focused-background)"},".cm-gutters":{borderRight:"1px solid var(--jp-border-color2)",backgroundColor:"var(--jp-layout-color2)"},".cm-gutter":{backgroundColor:"var(--jp-layout-color2)"},".cm-activeLine":{backgroundColor:"color-mix(in srgb, var(--jp-layout-color3) 25%, transparent)"},".cm-lineNumbers":{color:"var(--jp-ui-font-color2)"},".cm-searchMatch":{backgroundColor:"var(--jp-search-unselected-match-background-color)",color:"var(--jp-search-unselected-match-color)"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"var(--jp-search-selected-match-background-color) !important",color:"var(--jp-search-selected-match-color) !important"},".cm-tooltip":{backgroundColor:"var(--jp-layout-color1)"}}),jupyterHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"var(--jp-mirror-editor-meta-color)"},{tag:tags.heading,color:"var(--jp-mirror-editor-header-color)"},{tag:[tags.heading1,tags.heading2,tags.heading3,tags.heading4],color:"var(--jp-mirror-editor-header-color)",fontWeight:"bold"},{tag:tags.keyword,color:"var(--jp-mirror-editor-keyword-color)",fontWeight:"bold"},{tag:tags.atom,color:"var(--jp-mirror-editor-atom-color)"},{tag:tags.number,color:"var(--jp-mirror-editor-number-color)"},{tag:[tags.definition(tags.name),tags.function(tags.definition(tags.variableName))],color:"var(--jp-mirror-editor-def-color)"},{tag:tags.standard(tags.variableName),color:"var(--jp-mirror-editor-builtin-color)"},{tag:[tags.special(tags.variableName),tags.self],color:"var(--jp-mirror-editor-variable-2-color)"},{tag:tags.punctuation,color:"var(--jp-mirror-editor-punctuation-color)"},{tag:tags.propertyName,color:"var(--jp-mirror-editor-property-color)"},{tag:tags.operator,color:"var(--jp-mirror-editor-operator-color)",fontWeight:"bold"},{tag:tags.comment,color:"var(--jp-mirror-editor-comment-color)",fontStyle:"italic"},{tag:tags.string,color:"var(--jp-mirror-editor-string-color)"},{tag:[tags.labelName,tags.monospace,tags.special(tags.string)],color:"var(--jp-mirror-editor-string-2-color)"},{tag:tags.bracket,color:"var(--jp-mirror-editor-bracket-color)"},{tag:tags.tagName,color:"var(--jp-mirror-editor-tag-color)"},{tag:tags.attributeName,color:"var(--jp-mirror-editor-attribute-color)"},{tag:tags.quote,color:"var(--jp-mirror-editor-quote-color)"},{tag:tags.link,color:"var(--jp-mirror-editor-link-color)",textDecoration:"underline"},{tag:[tags.separator,tags.derefOperator,tags.paren],color:""},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.bool,color:"var(--jp-mirror-editor-keyword-color)",fontWeight:"bold"}]),jupyterTheme=[jupyterEditorTheme,syntaxHighlighting(jupyterHighlightStyle)];class EditorThemeRegistry{constructor(){this._themeMap=/* @__PURE__ */new Map([["jupyter",Object.freeze({name:"jupyter",theme:jupyterTheme})]])}get themes(){return Array.from(this._themeMap.values())}defaultTheme(){return this._themeMap.get("jupyter").theme}addTheme(e){if(this._themeMap.has(e.name))throw new Error(`A theme named '${e.name}' is already registered.`);this._themeMap.set(e.name,{displayName:e.name,...e})}getTheme(e){var t;const r=null===(t=this._themeMap.get(e))||void 0===t?void 0:t.theme;return null!=r?r:this.defaultTheme()}}(EditorThemeRegistry||(EditorThemeRegistry={})).getDefaultThemes=function(e){const t=(null!=e?e:nullTranslator).load("jupyterlab");return[Object.freeze({name:"codemirror",displayName:t.__("codemirror"),theme:[EditorView.baseTheme({}),syntaxHighlighting(defaultHighlightStyle)]})]};class PythonBuiltin{constructor(e,t){this.langPython=t,this.tree=syntaxTree(e.state),this.mark=Decoration.mark({class:"cm-builtin"}),this.decorations=this.buildDeco(e),this.decoratedTo=e.viewport.to}update(e){let t=syntaxTree(e.state),{viewport:r}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&t.type==this.tree.type&&s>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged)&&(this.tree=t,this.decorations=this.buildDeco(e.view),this.decoratedTo=r.to)}buildDeco(e){if(!this.tree.length)return Decoration.none;let t=new RangeSetBuilder;const r=s=>{var n;const i=s.node.cursor(),o=i.tree&&i.tree.prop(NodeProp.mounted);if(o&&o.overlay&&(null===(n=s.node.enter(o.overlay[0].from+s.from,1))||void 0===n||n.cursor().iterate(r)),this.langPython.isActiveAt(e.state,s.from+1)&&"VariableName"===s.name){const r=e.state.sliceDoc(s.from,s.to);builtins.includes(r)&&t.add(s.from,s.to,this.mark)}};for(let{from:s,to:n}of e.visibleRanges)this.tree.iterate({enter:r,from:s,to:n});return t.finish()}}function pythonBuiltin(e){return ViewPlugin.define(t=>new PythonBuiltin(t,e),{decorations:e=>e.decorations})}const builtins=["abs","aiter","all","any","anext","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__"];class EditorLanguageRegistry{constructor(){this._modeList=[],this.addLanguage({name:"none",mime:"text/plain",support:new LanguageSupport(LRLanguage.define({parser:buildParser("@top Program { }")}))})}addLanguage(e){var t;if(null!==(t=this.findByName(e.name))&&void 0!==t?t:this.findByMIME(e.mime,!0))throw new Error(`${e.mime} already registered`);this._modeList.push(this.makeSpec(e))}async getLanguage(e){const t=this.findBest(e);return t&&!t.support&&(t.support=await t.load()),t}getLanguages(){return[...this._modeList]}findByMIME(e,t=!1){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const r=this.findByMIME(e[t]);if(r)return r}return null}e=e.toLowerCase();for(let r=0;r<this._modeList.length;r++){let t=this._modeList[r];if(Array.isArray(t.mime)){for(let r=0;r<t.mime.length;r++)if(t.mime[r]==e)return t}else if(t.mime==e)return t}if(!t){if(/\+xml$/.test(e))return this.findByMIME("application/xml");if(/\+json$/.test(e))return this.findByMIME("application/json")}return null}findByName(e){e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let r=this._modeList[t];if(r.name.toLowerCase()==e)return r;if(r.alias)for(let t=0;t<r.alias.length;t++)if(r.alias[t].toLowerCase()==e)return r}return null}findByExtension(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const r=this.findByExtension(e[t]);if(r)return r}return null}e=e.toLowerCase();for(let t=0;t<this._modeList.length;t++){let r=this._modeList[t];for(let t=0;t<r.extensions.length;t++)if(r.extensions[t].toLowerCase()==e)return r}return null}findByFileName(e){const t=libExports$2.PathExt.basename(e);for(let n=0;n<this._modeList.length;n++){let e=this._modeList[n];if(e.filename&&e.filename.test(t))return e}let r=t.lastIndexOf("."),s=r>-1&&t.substring(r+1,t.length);return s?this.findByExtension(s):null}findBest(e,t=!0){var r,s,n,i;const o="string"==typeof e?e:e.name,a="string"!=typeof e?e.mime:o,l="string"!=typeof e&&null!==(r=e.extensions)&&void 0!==r?r:[];return null!==(i=null!==(n=null!==(s=o?this.findByName(o):null)&&void 0!==s?s:a?this.findByMIME(a):null)&&void 0!==n?n:this.findByExtension(l))&&void 0!==i?i:t?this.findByMIME(IEditorMimeTypeService.defaultMimeType):null}async highlight(e,t,r){var s;t&&await this.getLanguage(t);const n=null===(s=null==t?void 0:t.support)||void 0===s?void 0:s.language;if(!n)return void r.appendChild(document.createTextNode(e));const i=n.parser.parse(e);let o=0;highlightTree(i,jupyterHighlightStyle,(t,s,n)=>{t>o&&r.appendChild(document.createTextNode(e.slice(o,t)));const i=r.appendChild(document.createElement("span"));i.className=n,i.appendChild(document.createTextNode(e.slice(t,s))),o=s}),o<i.length-1&&r.appendChild(document.createTextNode(e.slice(o,i.length)))}makeSpec(e){let t=LanguageDescription.of(e);return t.mime=e.mime,t.displayName=e.displayName,t}}!function(e){function t(e){return new LanguageSupport(StreamLanguage.define(e))}async function r(e){const t=await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.ai);return t.sql({dialect:t[e]})}e.legacy=t,e.getDefaultLanguages=function(e){const s=(null!=e?e:nullTranslator).load("jupyterlab");return[{name:"C",displayName:s.__("C"),mime:"text/x-csrc",extensions:["c","h","ino"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aj)).cpp()},{name:"C++",displayName:s.__("C++"),mime:"text/x-c++src",extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aj)).cpp()},{name:"CQL",displayName:s.__("CQL"),mime:"text/x-cassandra",extensions:["cql"],load:()=>r("Cassandra")},{name:"CSS",displayName:s.__("CSS"),mime:"text/css",extensions:["css"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.ak)).css()},{name:"HTML",displayName:s.__("HTML"),alias:["xhtml"],mime:"text/html",extensions:["html","htm","handlebars","hbs"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.am)).html()},{name:"Java",displayName:s.__("Java"),mime:"text/x-java",extensions:["java"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.an)).java()},{name:"Javascript",displayName:s.__("Javascript"),alias:["ecmascript","js","node"],mime:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],extensions:["js","mjs","cjs"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.al)).javascript()},{name:"JSON",displayName:s.__("JSON"),alias:["json5"],mime:["application/json","application/x-json"],extensions:["json","map"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.ao)).json()},{name:"JSX",displayName:s.__("JSX"),mime:"text/jsx",extensions:["jsx"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.al)).javascript({jsx:!0})},{name:"MariaDB SQL",displayName:s.__("MariaDB SQL"),mime:"text/x-mariadb",load:()=>r("MariaSQL")},{name:"Markdown",displayName:s.__("Markdown"),mime:"text/x-markdown",extensions:["md","markdown","mkd"],async load(){return(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.ap)).markdown({codeLanguages:this._modeList})}},{name:"MS SQL",displayName:s.__("MS SQL"),mime:"text/x-mssql",load:()=>r("MSSQL")},{name:"MySQL",displayName:s.__("MySQL"),mime:"text/x-mysql",load:()=>r("MySQL")},{name:"PHP",displayName:s.__("PHP"),mime:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],extensions:["php","php3","php4","php5","php7","phtml"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aq)).php()},{name:"PLSQL",displayName:s.__("PLSQL"),mime:"text/x-plsql",extensions:["pls"],load:()=>r("PLSQL")},{name:"PostgreSQL",displayName:s.__("PostgreSQL"),mime:"text/x-pgsql",load:()=>r("PostgreSQL")},{name:"Python",displayName:s.__("Python"),mime:"text/x-python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,async load(){const e=await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.ah);return new LanguageSupport(e.pythonLanguage,pythonBuiltin(e.pythonLanguage))}},{name:"ipython",displayName:s.__("ipython"),mime:"text/x-ipython",async load(){const e=await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.ah);return new LanguageSupport(e.pythonLanguage,pythonBuiltin(e.pythonLanguage))}},{name:"Rust",displayName:s.__("Rust"),mime:"text/x-rustsrc",extensions:["rs"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.ar)).rust()},{name:"SQL",displayName:s.__("SQL"),mime:["application/sql","text/x-sql"],extensions:["sql"],load:()=>r("StandardSQL")},{name:"SQLite",displayName:s.__("SQLite"),mime:"text/x-sqlite",load:()=>r("SQLite")},{name:"TSX",displayName:s.__("TSX"),alias:["TypeScript-JSX"],mime:"text/typescript-jsx",extensions:["tsx"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.al)).javascript({jsx:!0,typescript:!0})},{name:"TypeScript",displayName:s.__("TypeScript"),alias:["ts"],mime:"application/typescript",extensions:["ts"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.al)).javascript({typescript:!0})},{name:"WebAssembly",displayName:s.__("WebAssembly"),mime:"text/webassembly",extensions:["wat","wast"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.as)).wast()},{name:"XML",displayName:s.__("XML"),alias:["rss","wsdl","xsd"],mime:["application/xml","text/xml"],extensions:["xml","xsl","xsd","svg"],load:async()=>(await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.at)).xml()},{name:"APL",displayName:s.__("APL"),mime:"text/apl",extensions:["dyalog","apl"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.au)).apl)},{name:"PGP",displayName:s.__("PGP"),alias:["asciiarmor"],mime:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],extensions:["asc","pgp","sig"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.av)).asciiArmor)},{name:"ASN.1",displayName:s.__("ASN.1"),mime:"text/x-ttcn-asn",extensions:["asn","asn1"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aw)).asn1({}))},{name:"Asterisk",displayName:s.__("Asterisk"),mime:"text/x-asterisk",filename:/^extensions\.conf$/i,load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.ax)).asterisk)},{name:"Brainfuck",displayName:s.__("Brainfuck"),mime:"text/x-brainfuck",extensions:["b","bf"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.ay)).brainfuck)},{name:"Cobol",displayName:s.__("Cobol"),mime:"text/x-cobol",extensions:["cob","cpy"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.az)).cobol)},{name:"C#",displayName:s.__("C#"),alias:["csharp","cs"],mime:"text/x-csharp",extensions:["cs"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aA)).csharp)},{name:"Clojure",displayName:s.__("Clojure"),mime:"text/x-clojure",extensions:["clj","cljc","cljx"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aB)).clojure)},{name:"ClojureScript",displayName:s.__("ClojureScript"),mime:"text/x-clojurescript",extensions:["cljs"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aB)).clojure)},{name:"Closure Stylesheets (GSS)",displayName:s.__("Closure Stylesheets (GSS)"),mime:"text/x-gss",extensions:["gss"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aC)).gss)},{name:"CMake",displayName:s.__("CMake"),mime:"text/x-cmake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aD)).cmake)},{name:"CoffeeScript",displayName:s.__("CoffeeScript"),alias:["coffee","coffee-script"],mime:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],extensions:["coffee"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aE)).coffeeScript)},{name:"Common Lisp",displayName:s.__("Common Lisp"),alias:["lisp"],mime:"text/x-common-lisp",extensions:["cl","lisp","el"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aF)).commonLisp)},{name:"Cypher",displayName:s.__("Cypher"),mime:"application/x-cypher-query",extensions:["cyp","cypher"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aG)).cypher)},{name:"Cython",displayName:s.__("Cython"),mime:"text/x-cython",extensions:["pyx","pxd","pxi"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aH)).cython)},{name:"Crystal",displayName:s.__("Crystal"),mime:"text/x-crystal",extensions:["cr"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aI)).crystal)},{name:"D",displayName:s.__("D"),mime:"text/x-d",extensions:["d"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aJ)).d)},{name:"Dart",displayName:s.__("Dart"),mime:["application/dart","text/x-dart"],extensions:["dart"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aA)).dart)},{name:"diff",displayName:s.__("diff"),mime:"text/x-diff",extensions:["diff","patch"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aK)).diff)},{name:"Dockerfile",displayName:s.__("Dockerfile"),mime:"text/x-dockerfile",filename:/^Dockerfile$/,load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aL)).dockerFile)},{name:"DTD",displayName:s.__("DTD"),mime:"application/xml-dtd",extensions:["dtd"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aM)).dtd)},{name:"Dylan",displayName:s.__("Dylan"),mime:"text/x-dylan",extensions:["dylan","dyl","intr"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aN)).dylan)},{name:"EBNF",displayName:s.__("EBNF"),mime:"text/x-ebnf",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aO)).ebnf)},{name:"ECL",displayName:s.__("ECL"),mime:"text/x-ecl",extensions:["ecl"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aP)).ecl)},{name:"edn",displayName:s.__("edn"),mime:"application/edn",extensions:["edn"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aB)).clojure)},{name:"Eiffel",displayName:s.__("Eiffel"),mime:"text/x-eiffel",extensions:["e"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aQ)).eiffel)},{name:"Elm",displayName:s.__("Elm"),mime:"text/x-elm",extensions:["elm"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aR)).elm)},{name:"Erlang",displayName:s.__("Erlang"),mime:"text/x-erlang",extensions:["erl"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aS)).erlang)},{name:"Esper",displayName:s.__("Esper"),mime:"text/x-esper",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aT)).esper)},{name:"Factor",displayName:s.__("Factor"),mime:"text/x-factor",extensions:["factor"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aU)).factor)},{name:"FCL",displayName:s.__("FCL"),mime:"text/x-fcl",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aV)).fcl)},{name:"Forth",displayName:s.__("Forth"),mime:"text/x-forth",extensions:["forth","fth","4th"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aW)).forth)},{name:"Fortran",displayName:s.__("Fortran"),mime:"text/x-fortran",extensions:["f","for","f77","f90","f95"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aX)).fortran)},{name:"F#",displayName:s.__("F#"),alias:["fsharp"],mime:"text/x-fsharp",extensions:["fs"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aY)).fSharp)},{name:"Gas",displayName:s.__("Gas"),mime:"text/x-gas",extensions:["s"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aZ)).gas)},{name:"Gherkin",displayName:s.__("Gherkin"),mime:"text/x-feature",extensions:["feature"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.a_)).gherkin)},{name:"Go",displayName:s.__("Go"),mime:"text/x-go",extensions:["go"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.a$)).go)},{name:"Groovy",displayName:s.__("Groovy"),mime:"text/x-groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b0)).groovy)},{name:"Haskell",displayName:s.__("Haskell"),mime:"text/x-haskell",extensions:["hs"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b1)).haskell)},{name:"Haxe",displayName:s.__("Haxe"),mime:"text/x-haxe",extensions:["hx"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b2)).haxe)},{name:"HXML",displayName:s.__("HXML"),mime:"text/x-hxml",extensions:["hxml"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b2)).hxml)},{name:"HTTP",displayName:s.__("HTTP"),mime:"message/http",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b3)).http)},{name:"IDL",displayName:s.__("IDL"),mime:"text/x-idl",extensions:["pro"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b4)).idl)},{name:"JSON-LD",displayName:s.__("JSON-LD"),alias:["jsonld"],mime:"application/ld+json",extensions:["jsonld"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b5)).jsonld)},{name:"Jinja2",displayName:s.__("Jinja2"),mime:"text/jinja2",extensions:["j2","jinja","jinja2"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b6)).jinja2)},{name:"Julia",displayName:s.__("Julia"),mime:"text/x-julia",extensions:["jl"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b7)).julia)},{name:"Kotlin",displayName:s.__("Kotlin"),mime:"text/x-kotlin",extensions:["kt"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aA)).kotlin)},{name:"LESS",displayName:s.__("LESS"),mime:"text/x-less",extensions:["less"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aC)).less)},{name:"LiveScript",displayName:s.__("LiveScript"),alias:["ls"],mime:"text/x-livescript",extensions:["ls"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b8)).liveScript)},{name:"Lua",displayName:s.__("Lua"),mime:"text/x-lua",extensions:["lua"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b9)).lua)},{name:"mIRC",displayName:s.__("mIRC"),mime:"text/mirc",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.ba)).mirc)},{name:"Mathematica",displayName:s.__("Mathematica"),mime:"text/x-mathematica",extensions:["m","nb","wl","wls"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bb)).mathematica)},{name:"Modelica",displayName:s.__("Modelica"),mime:"text/x-modelica",extensions:["mo"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bc)).modelica)},{name:"MUMPS",displayName:s.__("MUMPS"),mime:"text/x-mumps",extensions:["mps"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bd)).mumps)},{name:"mbox",displayName:s.__("mbox"),mime:"application/mbox",extensions:["mbox"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.be)).mbox)},{name:"Nginx",displayName:s.__("Nginx"),mime:"text/x-nginx-conf",filename:/nginx.*\.conf$/i,load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bf)).nginx)},{name:"NSIS",displayName:s.__("NSIS"),mime:"text/x-nsis",extensions:["nsh","nsi"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bg)).nsis)},{name:"NTriples",displayName:s.__("NTriples"),mime:["application/n-triples","application/n-quads","text/n-triples"],extensions:["nt","nq"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bh)).ntriples)},{name:"Objective-C",displayName:s.__("Objective-C"),alias:["objective-c","objc"],mime:"text/x-objectivec",extensions:["m"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aA)).objectiveC)},{name:"Objective-C++",displayName:s.__("Objective-C++"),alias:["objective-c++","objc++"],mime:"text/x-objectivec++",extensions:["mm"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aA)).objectiveCpp)},{name:"OCaml",displayName:s.__("OCaml"),mime:"text/x-ocaml",extensions:["ml","mli","mll","mly"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aY)).oCaml)},{name:"Octave",displayName:s.__("Octave"),mime:"text/x-octave",extensions:["m"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bi)).octave)},{name:"Oz",displayName:s.__("Oz"),mime:"text/x-oz",extensions:["oz"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bj)).oz)},{name:"Pascal",displayName:s.__("Pascal"),mime:"text/x-pascal",extensions:["p","pas"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bk)).pascal)},{name:"Perl",displayName:s.__("Perl"),mime:"text/x-perl",extensions:["pl","pm"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bl)).perl)},{name:"Pig",displayName:s.__("Pig"),mime:"text/x-pig",extensions:["pig"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bm)).pig)},{name:"PowerShell",displayName:s.__("PowerShell"),mime:"application/x-powershell",extensions:["ps1","psd1","psm1"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bn)).powerShell)},{name:"Properties files",displayName:s.__("Properties files"),alias:["ini","properties"],mime:"text/x-properties",extensions:["properties","ini","in"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bo)).properties)},{name:"ProtoBuf",displayName:s.__("ProtoBuf"),mime:"text/x-protobuf",extensions:["proto"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bp)).protobuf)},{name:"Pug",displayName:s.__("Pug"),mime:"text/x-pug",extensions:["pug"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bq)).pug)},{name:"Puppet",displayName:s.__("Puppet"),mime:"text/x-puppet",extensions:["pp"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.br)).puppet)},{name:"Q",displayName:s.__("Q"),mime:"text/x-q",extensions:["q"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bs)).q)},{name:"R",displayName:s.__("R"),alias:["rscript"],mime:"text/x-rsrc",extensions:["r","R"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bt)).r)},{name:"RPM Changes",displayName:s.__("RPM Changes"),mime:"text/x-rpm-changes",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bu)).rpmChanges)},{name:"RPM Spec",displayName:s.__("RPM Spec"),mime:"text/x-rpm-spec",extensions:["spec"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bu)).rpmSpec)},{name:"Ruby",displayName:s.__("Ruby"),alias:["jruby","macruby","rake","rb","rbx"],mime:"text/x-ruby",extensions:["rb"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bv)).ruby)},{name:"SAS",displayName:s.__("SAS"),mime:"text/x-sas",extensions:["sas"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bw)).sas)},{name:"Scala",displayName:s.__("Scala"),mime:"text/x-scala",extensions:["scala"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aA)).scala)},{name:"Scheme",displayName:s.__("Scheme"),mime:"text/x-scheme",extensions:["scm","ss"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bx)).scheme)},{name:"SCSS",displayName:s.__("SCSS"),mime:"text/x-scss",extensions:["scss"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aC)).sCSS)},{name:"Shell",displayName:s.__("Shell"),alias:["bash","sh","zsh"],mime:["text/x-sh","application/x-sh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.by)).shell)},{name:"Sieve",displayName:s.__("Sieve"),mime:"application/sieve",extensions:["siv","sieve"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bz)).sieve)},{name:"Smalltalk",displayName:s.__("Smalltalk"),mime:"text/x-stsrc",extensions:["st"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bA)).smalltalk)},{name:"Solr",displayName:s.__("Solr"),mime:"text/x-solr",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bB)).solr)},{name:"SML",displayName:s.__("SML"),mime:"text/x-sml",extensions:["sml","sig","fun","smackspec"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aY)).sml)},{name:"SPARQL",displayName:s.__("SPARQL"),alias:["sparul"],mime:"application/sparql-query",extensions:["rq","sparql"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bC)).sparql)},{name:"Spreadsheet",displayName:s.__("Spreadsheet"),alias:["excel","formula"],mime:"text/x-spreadsheet",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bD)).spreadsheet)},{name:"Squirrel",displayName:s.__("Squirrel"),mime:"text/x-squirrel",extensions:["nut"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.aA)).squirrel)},{name:"Stylus",displayName:s.__("Stylus"),mime:"text/x-styl",extensions:["styl"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bE)).stylus)},{name:"Swift",displayName:s.__("Swift"),mime:"text/x-swift",extensions:["swift"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bF)).swift)},{name:"sTeX",displayName:s.__("sTeX"),mime:"text/x-stex",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bG)).stex)},{name:"LaTeX",displayName:s.__("LaTeX"),alias:["tex"],mime:"text/x-latex",extensions:["text","ltx","tex"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bG)).stex)},{name:"SystemVerilog",displayName:s.__("SystemVerilog"),mime:"text/x-systemverilog",extensions:["v","sv","svh"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bH)).verilog)},{name:"Tcl",displayName:s.__("Tcl"),mime:"text/x-tcl",extensions:["tcl"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bI)).tcl)},{name:"Textile",displayName:s.__("Textile"),mime:"text/x-textile",extensions:["textile"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bJ)).textile)},{name:"TiddlyWiki",displayName:s.__("TiddlyWiki"),mime:"text/x-tiddlywiki",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bK)).tiddlyWiki)},{name:"Tiki wiki",displayName:s.__("Tiki wiki"),mime:"text/tiki",load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bL)).tiki)},{name:"TOML",displayName:s.__("TOML"),mime:"text/x-toml",extensions:["toml"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bM)).toml)},{name:"troff",displayName:s.__("troff"),mime:"text/troff",extensions:["1","2","3","4","5","6","7","8","9"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bN)).troff)},{name:"TTCN",displayName:s.__("TTCN"),mime:"text/x-ttcn",extensions:["ttcn","ttcn3","ttcnpp"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bO)).ttcn)},{name:"TTCN_CFG",displayName:s.__("TTCN_CFG"),mime:"text/x-ttcn-cfg",extensions:["cfg"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bP)).ttcnCfg)},{name:"Turtle",displayName:s.__("Turtle"),mime:"text/turtle",extensions:["ttl"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bQ)).turtle)},{name:"Web IDL",displayName:s.__("Web IDL"),mime:"text/x-webidl",extensions:["webidl"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bR)).webIDL)},{name:"VB.NET",displayName:s.__("VB.NET"),mime:"text/x-vb",extensions:["vb"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bS)).vb)},{name:"VBScript",displayName:s.__("VBScript"),mime:"text/vbscript",extensions:["vbs"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bT)).vbScript)},{name:"Velocity",displayName:s.__("Velocity"),mime:"text/velocity",extensions:["vtl"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bU)).velocity)},{name:"Verilog",displayName:s.__("Verilog"),mime:"text/x-verilog",extensions:["v"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bH)).verilog)},{name:"VHDL",displayName:s.__("VHDL"),mime:"text/x-vhdl",extensions:["vhd","vhdl"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bV)).vhdl)},{name:"XQuery",displayName:s.__("XQuery"),mime:"application/xquery",extensions:["xy","xquery"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bW)).xQuery)},{name:"Yacas",displayName:s.__("Yacas"),mime:"text/x-yacas",extensions:["ys"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bX)).yacas)},{name:"YAML",displayName:s.__("YAML"),alias:["yml"],mime:["text/x-yaml","text/yaml"],extensions:["yaml","yml"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bY)).yaml)},{name:"Z80",displayName:s.__("Z80"),mime:"text/x-z80",extensions:["z80"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.bZ)).z80)},{name:"mscgen",displayName:s.__("mscgen"),mime:"text/x-mscgen",extensions:["mscgen","mscin","msc"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b_)).mscgen)},{name:"xu",displayName:s.__("xu"),mime:"text/x-xu",extensions:["xu"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b_)).xu)},{name:"msgenny",displayName:s.__("msgenny"),mime:"text/x-msgenny",extensions:["msgenny"],load:async()=>t((await import("./vendor-codemirror-OzOnFEf0.js").then(e=>e.b_)).msgenny)}]}}(EditorLanguageRegistry||(EditorLanguageRegistry={}));const EDITOR_CLASS="jp-CodeMirrorEditor",UP_ARROW=38,DOWN_ARROW=40;class CodeMirrorEditor{constructor(e){var t,r,s,n,i,o;this.edgeRequested=new Signal(this),this._isDisposed=!1,this._language=new Compartment,this._uuid="",this._languages=null!==(t=e.languages)&&void 0!==t?t:new EditorLanguageRegistry,this._configurator=null!==(n=null===(r=e.extensionsRegistry)||void 0===r?void 0:r.createNew({...e,inline:null!==(s=e.inline)&&void 0!==s&&s}))&&void 0!==n?n:new ExtensionsHandler;const a=this.host=e.host;a.classList.add(EDITOR_CLASS),a.classList.add("jp-Editor"),a.addEventListener("focus",this,!0),a.addEventListener("blur",this,!0),a.addEventListener("scroll",this,!0),this._uuid=null!==(i=e.uuid)&&void 0!==i?i:UUID.uuid4();const l=this._model=e.model,c=EditorView.domEventHandlers({keydown:(e,t)=>this.onKeydown(e)}),d=EditorView.updateListener.of(e=>{this._onDocChanged(e)});this._editor=Private$2.createEditor(a,this._configurator,[Prec.high(c),d,this._language.of([]),...null!==(o=e.extensions)&&void 0!==o?o:[]],l.sharedModel.source),this._onMimeTypeChanged(),this._onCursorActivity(),this._configurator.configChanged.connect(this.onConfigChanged,this),l.mimeTypeChanged.connect(this._onMimeTypeChanged,this)}get uuid(){return this._uuid}set uuid(e){this._uuid=e}get editor(){return this._editor}get doc(){return this._editor.state.doc}get lineCount(){return this.doc.lines}get model(){return this._model}get lineHeight(){return this._editor.defaultLineHeight}get charWidth(){return this._editor.defaultCharacterWidth}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this.host.removeEventListener("focus",this,!0),this.host.removeEventListener("blur",this,!0),this.host.removeEventListener("scroll",this,!0),this._configurator.dispose(),Signal.clearData(this),this.editor.destroy())}getOption(e){return this._configurator.getOption(e)}hasOption(e){return this._configurator.hasOption(e)}setOption(e,t){this._configurator.setOption(e,t)}setOptions(e){this._configurator.setOptions(e)}setBaseOptions(e){this._configurator.setBaseOptions(e)}injectExtension(e){this._configurator.injectExtension(this._editor,e)}getLine(e){return(e+=1)<=this.doc.lines?this.doc.line(e).text:void 0}getOffsetAt(e){return this.doc.line(e.line+1).from+e.column}getPositionAt(e){const t=this.doc.lineAt(e);return{line:t.number-1,column:e-t.from}}undo(){this.model.sharedModel.undo()}redo(){this.model.sharedModel.redo()}clearHistory(){this.model.sharedModel.clearUndoHistory()}focus(){this.host.classList.add("jp-mod-focused"),this._editor.focus()}hasFocus(){return this._editor.hasFocus}blur(){this._editor.contentDOM.blur()}get state(){return this._editor.state}firstLine(){return 0}lastLine(){return this.doc.lines-1}cursorCoords(e,t){const r=this.state.selection.main,s=e?r.from:r.to;return this.editor.coordsAtPos(s)}getRange(e,t,r){const s=this.getOffsetAt(this._toPosition(e)),n=this.getOffsetAt(this._toPosition(t));return this.state.sliceDoc(s,n)}revealPosition(e,t){const r=this.getOffsetAt(e);this._editor.dispatch({effects:EditorView.scrollIntoView(r,{y:null==t?void 0:t.block,x:null==t?void 0:t.inline})})}revealSelection(e,t){const r=this.getOffsetAt(e.start),s=this.getOffsetAt(e.end);this._editor.dispatch({effects:EditorView.scrollIntoView(EditorSelection.range(r,s),{y:null==t?void 0:t.block,x:null==t?void 0:t.inline})})}getCoordinateForPosition(e){const t=this.getOffsetAt(e);return this.editor.coordsAtPos(t)}getPositionForCoordinate(e){const t=this.editor.posAtCoords({x:e.left,y:e.top});return this.getPositionAt(t)||null}getCursorPosition(){const e=this.state.selection.main.head;return this.getPositionAt(e)}setCursorPosition(e,t={}){const r=this.getOffsetAt(e);this.editor.dispatch({selection:{anchor:r},scrollIntoView:!1!==t.scroll}),this.editor.hasFocus||this.model.selections.set(this.uuid,this.getSelections())}getSelection(){return this.getSelections()[0]}setSelection(e){this.setSelections([e])}getSelections(){const e=this.state.selection.ranges;if(e.length>0){return e.map(e=>({anchor:this._toCodeMirrorPosition(this.getPositionAt(e.from)),head:this._toCodeMirrorPosition(this.getPositionAt(e.to))})).map(e=>this._toSelection(e))}const t=this._toCodeMirrorPosition(this.getPositionAt(this.state.selection.main.head));return[this._toSelection({anchor:t,head:t})]}setSelections(e){const t=e.length?e.map(e=>EditorSelection.range(this.getOffsetAt(e.start),this.getOffsetAt(e.end))):[EditorSelection.range(0,0)];this.editor.dispatch({selection:EditorSelection.create(t)})}replaceSelection(e){const t=this.getSelections()[0];this.model.sharedModel.updateSource(this.getOffsetAt(t.start),this.getOffsetAt(t.end),e);const r=this.getPositionAt(this.getOffsetAt(t.start)+e.length);this.setSelection({start:r,end:r})}getTokens(){const e=[],t=ensureSyntaxTree(this.state,this.doc.length);return t&&t.iterate({enter:t=>(null===t.node.firstChild&&e.push({value:this.state.sliceDoc(t.from,t.to),offset:t.from,type:t.name}),!0)}),e}getTokenAt(e){const t=ensureSyntaxTree(this.state,e);let r=null;return t&&t.iterate({enter:t=>{if(r)return!1;if(t.node.firstChild)return!0;if(e>=t.from&&e<=t.to){let e=t;return""===t.name&&t.from===t.to&&t.node.parent&&(e=t.node.parent),r={value:this.state.sliceDoc(e.from,e.to),offset:e.from,type:e.name},!1}return!0}}),r||{offset:e,value:""}}getTokenAtCursor(){return this.getTokenAt(this.state.selection.main.head)}newIndentedLine(){insertNewlineAndIndent({state:this.state,dispatch:this.editor.dispatch})}execCommand(e){e(this.editor)}onConfigChanged(e,t){const r=Object.keys(t).reduce((e,r)=>(null!=t[r]&&(e[r]=t[r]),e),{});e.reconfigureExtensions(this._editor,r),t.customStyles&&!t.fontSize&&this.editor.setState(this.editor.state)}onKeydown(e){const t=this.state.selection.main.head;if(0===t&&e.keyCode===UP_ARROW)return e.shiftKey||this.edgeRequested.emit("top"),!1;if(1===this.doc.lineAt(t).number&&e.keyCode===UP_ARROW)return e.shiftKey||this.edgeRequested.emit("topLine"),!1;return t===this.doc.length&&e.keyCode===DOWN_ARROW&&(e.shiftKey||this.edgeRequested.emit("bottom"),!1)}_onMimeTypeChanged(){this._languages.getLanguage(this._model.mimeType).then(e=>{var t;this._editor.dispatch({effects:this._language.reconfigure(null!==(t=null==e?void 0:e.support)&&void 0!==t?t:[])})}).catch(e=>{console.log(`Failed to load language for '${this._model.mimeType}'.`,e),this._editor.dispatch({effects:this._language.reconfigure([])})})}_onCursorActivity(){if(this._editor.hasFocus){const e=this.getSelections();this.model.selections.set(this.uuid,e)}}_toSelection(e){return{uuid:this.uuid,start:this._toPosition(e.anchor),end:this._toPosition(e.head)}}_toPosition(e){return{line:e.line,column:e.ch}}_toCodeMirrorPosition(e){return{line:e.line,ch:e.column}}_onDocChanged(e){e.transactions.length&&e.transactions[0].selection&&this._onCursorActivity()}handleEvent(e){switch(e.type){case"focus":this._evtFocus(e);break;case"blur":this._evtBlur(e)}}_evtFocus(e){this.host.classList.add("jp-mod-focused"),this._onCursorActivity()}_evtBlur(e){this.host.classList.remove("jp-mod-focused")}}var Private$2,Utils;(Private$2||(Private$2={})).createEditor=function(e,t,r,s){const n=t.getInitialExtensions();return n.push(...r),new EditorView({state:EditorState.create({doc:s,extensions:n}),parent:e})};class EditorSearchProvider{constructor(){this.currentIndex=null,this.query=null,this._isActive=!0,this._inSelection=null,this._isDisposed=!1,this._cmHandler=null,this.currentIndex=null,this._stateChanged=new Signal(this)}get cmHandler(){return this._cmHandler||(this._cmHandler=new CodeMirrorSearchHighlighter(this.editor)),this._cmHandler}get stateChanged(){return this._stateChanged}get currentMatchIndex(){return this.isActive?this.currentIndex:null}get isActive(){return this._isActive}get isDisposed(){return this._isDisposed}get matchesCount(){return this.isActive?this.cmHandler.matches.length:0}clearHighlight(){return this.currentIndex=null,this.cmHandler.clearHighlight(),Promise.resolve()}dispose(){this._isDisposed||(this._isDisposed=!0,Signal.clearData(this),this.isActive&&this.endQuery().catch(e=>{console.error("Failed to end search query on cells.",e)}))}async setIsActive(e){this._isActive!==e&&(this._isActive=e,this._isActive?null!==this.query&&await this.startQuery(this.query,this.filters):await this.endQuery())}async setSearchSelection(e){this._inSelection!==e&&(this._inSelection=e,await this.updateCodeMirror(this.model.sharedModel.getSource()),this._stateChanged.emit())}setProtectSelection(e){this.cmHandler.protectSelection=e}async startQuery(e,t){this.query=e,this.filters=t;const r=this.model.sharedModel.getSource();await this.updateCodeMirror(r),this.model.sharedModel.changed.connect(this.onSharedModelChanged,this)}async endQuery(){await this.clearHighlight(),await this.cmHandler.endQuery(),this.currentIndex=null}async highlightNext(e=!0,t){if(0!==this.matchesCount&&this.isActive){let r=await this.cmHandler.highlightNext(t);return this.currentIndex=r?this.cmHandler.currentIndex:e?0:null,r}return this.currentIndex=null,Promise.resolve(this.getCurrentMatch())}async highlightPrevious(e=!0,t){if(0!==this.matchesCount&&this.isActive){let r=await this.cmHandler.highlightPrevious(t);return this.currentIndex=r?this.cmHandler.currentIndex:e?this.matchesCount-1:null,r}return this.currentIndex=null,Promise.resolve(this.getCurrentMatch())}replaceCurrentMatch(e,t,r){if(!this.isActive)return Promise.resolve(!1);if(null!==this.currentIndex&&this.currentIndex<this.cmHandler.matches.length){const t=this.getCurrentMatch();if(t){const s=(null==r?void 0:r.regularExpression)?t.text.replace(this.query,e):e,n=(null==r?void 0:r.preserveCase)?GenericSearchProvider.preserveCase(t.text,s):s;return this.model.sharedModel.updateSource(t.position,t.position+t.text.length,n),new Promise((e,r)=>{this.updateCodeMirror(this.model.sharedModel.getSource()).then(()=>{const r=this.cmHandler.matches,s=t.position+n.length;let i=!1;for(let e=this.currentIndex||0;e<r.length;e++){if(r[e].position>=s){this.currentIndex=e,i=!0;break}this.highlightNext(!1,{from:"previous-match"})}i||(this.currentIndex=null),e(!0)}).catch(e=>{const t=`Failed to regenerate match list: ${e}`;console.error(t),r(t)})})}this.currentIndex=null}return Promise.resolve(!1)}replaceAllMatches(e,t){if(!this.isActive)return Promise.resolve(!1);let r=this.cmHandler.matches.length>0,s=this.model.sharedModel.getSource(),n=0;const i=this.cmHandler.matches.reduce((r,i)=>{const o=i.position,a=o+i.text.length,l=(null==t?void 0:t.regularExpression)?i.text.replace(this.query,e):e,c=(null==t?void 0:t.preserveCase)?GenericSearchProvider.preserveCase(i.text,l):l,d=`${r}${s.slice(n,o)}${c}`;return n=a,d},"");return r&&(this.cmHandler.matches=[],this.currentIndex=null,this.model.sharedModel.setSource(`${i}${s.slice(n)}`)),Promise.resolve(r)}getCurrentMatch(){if(null!==this.currentIndex){let e;return this.currentIndex<this.cmHandler.matches.length&&(e=this.cmHandler.matches[this.currentIndex]),e}}async onSharedModelChanged(e,t){t.sourceChange&&(await this.updateCodeMirror(e.getSource()),this._stateChanged.emit())}async updateCodeMirror(e){if(null!==this.query&&this.isActive){const t=await TextSearchEngine.search(this.query,e);if(this._inSelection){const e=this.editor,r=e.getOffsetAt(this._inSelection.start),s=e.getOffsetAt(this._inSelection.end);this.cmHandler.matches=t.filter(e=>e.position>=r&&e.position<=s),null===this.cmHandler.currentIndex&&this.cmHandler.matches.length>0&&await this.cmHandler.highlightNext({from:"selection",select:!1,scroll:!1}),this.currentIndex=this.cmHandler.currentIndex}else this.cmHandler.matches=t}else this.cmHandler.matches=[]}}class CodeMirrorSearchHighlighter{constructor(e){this._current=null,this._cm=e,this._matches=new Array,this._currentIndex=null,this._highlightEffect=StateEffect.define({map:(e,t)=>{const r=e=>({text:e.text,position:t.mapPos(e.position)});return{matches:e.matches.map(r),currentMatch:e.currentMatch?r(e.currentMatch):null}}}),this._highlightMark=Decoration.mark({class:"cm-searching"}),this._currentMark=Decoration.mark({class:"jp-current-match"}),this._highlightField=StateField.define({create:()=>Decoration.none,update:(e,t)=>{e=e.map(t.changes);for(let r of t.effects)if(r.is(this._highlightEffect)){const t=r;e=t.value.matches.length?(e=e.update({add:t.value.matches.map(e=>this._highlightMark.range(e.position,e.position+e.text.length)),filter:()=>!1})).update({add:t.value.currentMatch?[this._currentMark.range(t.value.currentMatch.position,t.value.currentMatch.position+t.value.currentMatch.text.length)]:[]}):Decoration.none}return e},provide:e=>EditorView.decorations.from(e)}),this._domEventHandlers=EditorView.domEventHandlers({focus:()=>{this._selectCurrentMatch()}})}get currentIndex(){return this._currentIndex}get matches(){return this._matches}set matches(e){this._matches=e,null!==this._currentIndex&&this._currentIndex>this._matches.length&&(this._currentIndex=this._matches.length>0?0:null),this._highlightCurrentMatch({select:!1})}get protectSelection(){return this._protectSelection}set protectSelection(e){this._protectSelection=e}clearHighlight(){this._currentIndex=null,this._highlightCurrentMatch()}endQuery(){return this._currentIndex=null,this._matches=[],this._cm&&this._cm.editor.dispatch({effects:this._highlightEffect.of({matches:[],currentMatch:null})}),Promise.resolve()}highlightNext(e){var t;return this._currentIndex=this._findNext(!1,null!==(t=null==e?void 0:e.from)&&void 0!==t?t:"auto"),this._highlightCurrentMatch(e),Promise.resolve(null!==this._currentIndex?this._matches[this._currentIndex]:void 0)}highlightPrevious(e){var t;return this._currentIndex=this._findNext(!0,null!==(t=null==e?void 0:e.from)&&void 0!==t?t:"auto"),this._highlightCurrentMatch(e),Promise.resolve(null!==this._currentIndex?this._matches[this._currentIndex]:void 0)}setEditor(e){if(this._cm)throw new Error("CodeMirrorEditor already set.");this._cm=e,null!==this._currentIndex&&this._highlightCurrentMatch(),this._cm.editor.dispatch({effects:StateEffect.appendConfig.of(this._domEventHandlers)}),this._refresh()}_selectCurrentMatch(e=!0){const t=this._current;if(!t)return;if(!this._cm)return;const r={anchor:t.position,head:t.position+t.text.length},s=this._cm.editor.state.selection.main;if(s.from===t.position&&s.to===t.position+t.text.length||this._protectSelection){if(e)return void this._cm.editor.dispatch({effects:EditorView.scrollIntoView(EditorSelection.range(r.anchor,r.head))})}else this._cm.editor.dispatch({selection:r,scrollIntoView:e})}_highlightCurrentMatch(e){var t,r,s;if(this._cm){if(null!==this._currentIndex){const n=this.matches[this._currentIndex];this._current=n,(null===(t=null==e?void 0:e.select)||void 0===t||t)&&(this._cm.hasFocus()?this._selectCurrentMatch(null===(r=null==e?void 0:e.scroll)||void 0===r||r):(null===(s=null==e?void 0:e.scroll)||void 0===s||s)&&this._cm.editor.dispatch({effects:EditorView.scrollIntoView(n.position)}))}else this._current=null;this._refresh()}}_refresh(){if(!this._cm)return;let e=[this._highlightEffect.of({matches:this.matches,currentMatch:this._current})];this._cm.state.field(this._highlightField,!1)||e.push(StateEffect.appendConfig.of([this._highlightField])),this._cm.editor.dispatch({effects:e})}_findNext(e,t="auto"){var r,s,n,i;if(0===this._matches.length)return null;this._cm||["previous-match","start"].includes(t)||(t="previous-match");let o=0;if("auto"===t&&null!==(s=null===(r=this._cm)||void 0===r?void 0:r.hasFocus())&&void 0!==s&&s||"selection"===t){const t=this._cm.state.selection.main;o=e?t.anchor:t.head}else if("selection-start"===t){const e=this._cm.state.selection.main;o=Math.min(e.anchor,e.head)}else"start"===t?o=0:this._current&&(o=e?this._current.position:this._current.position+this._current.text.length);var a;0===o&&e&&null===this.currentIndex&&(o=null!==(i=null===(n=this._cm)||void 0===n?void 0:n.doc.length)&&void 0!==i?i:(a=this._matches[this._matches.length-1])?a.position+a.text.length:0);const l=o;let c=Utils.findNext(this._matches,l,0,this._matches.length-1);return null===c?e?this._matches.length-1:null:e&&(c-=1,c<0)?null:c}}(Utils||(Utils={})).findNext=function(e,t,r=0,s=1/0){for(s=Math.min(e.length-1,s);r<=s;){let n=Math.floor(.5*(r+s));const i=e[n].position;if(i<t){if((r=n+1)<e.length&&e[r].position>t)return r}else{if(!(i>t))return n;if((s=n-1)>0&&e[s].position<t)return n}}const n=r>0?r-1:0;return e[n].position>=t?n:null};class CellSearchProvider extends EditorSearchProvider{constructor(e){super(),this.cell=e,this.cell.inViewport||this.cell.editor||libExports$2.signalToPromise(e.inViewportChanged).then(([,e])=>{e&&this.cmHandler.setEditor(this.editor)})}get editor(){return this.cell.editor}get model(){return this.cell.model}}class CodeCellSearchProvider extends CellSearchProvider{constructor(e){super(e),this.currentProviderIndex=-1,this.outputsProvider=[];const t=this.cell.outputArea;this._onOutputsChanged(t,t.widgets.length).catch(e=>{console.error("Failed to initialize search on cell outputs.",e)}),t.outputLengthChanged.connect(this._onOutputsChanged,this),t.disposed.connect(()=>{t.outputLengthChanged.disconnect(this._onOutputsChanged)},this)}get matchesCount(){return this.isActive?super.matchesCount+this.outputsProvider.reduce((e,t)=>{var r;return e+(null!==(r=t.matchesCount)&&void 0!==r?r:0)},0):0}async clearHighlight(){await super.clearHighlight(),await Promise.all(this.outputsProvider.map(e=>e.clearHighlight()))}dispose(){this.isDisposed||(super.dispose(),this.outputsProvider.map(e=>{e.dispose()}),this.outputsProvider.length=0)}getCurrentMatch(){var e;if(-1===this.currentProviderIndex)return super.getCurrentMatch();if(this.currentProviderIndex<this.outputsProvider.length){return null!==(e=this.outputsProvider[this.currentProviderIndex].currentMatch)&&void 0!==e?e:void 0}}async highlightNext(e,t){var r;const s=null!==(r=null==t?void 0:t.from)&&void 0!==r?r:"";if(!(0===this.matchesCount||"previous-match"===s&&null!==this.currentIndex&&this.currentIndex+1>=this.cmHandler.matches.length)&&this.isActive){if(-1===this.currentProviderIndex){const r=await super.highlightNext(e,t);if(r)return this.currentIndex=this.cmHandler.currentIndex,r;this.currentProviderIndex=0}for(;this.currentProviderIndex<this.outputsProvider.length;){const e=this.outputsProvider[this.currentProviderIndex],t=await e.highlightNext(!1);if(t)return this.currentIndex=super.matchesCount+this.outputsProvider.slice(0,this.currentProviderIndex).reduce((e,t)=>{var r;return e+(null!==(r=t.matchesCount)&&void 0!==r?r:0)},0)+e.currentMatchIndex,t;this.currentProviderIndex+=1}return this.currentProviderIndex=-1,void(this.currentIndex=null)}this.currentIndex=null}async highlightPrevious(){if(0!==this.matchesCount&&this.isActive){for(null===this.currentIndex&&(this.currentProviderIndex=this.outputsProvider.length-1);this.currentProviderIndex>=0;){const e=this.outputsProvider[this.currentProviderIndex],t=await e.highlightPrevious(!1);if(t)return this.currentIndex=super.matchesCount+this.outputsProvider.slice(0,this.currentProviderIndex).reduce((e,t)=>{var r;return e+(null!==(r=t.matchesCount)&&void 0!==r?r:0)},0)+e.currentMatchIndex,t;this.currentProviderIndex-=1}const e=await super.highlightPrevious();return e?(this.currentIndex=this.cmHandler.currentIndex,e):void(this.currentIndex=null)}this.currentIndex=null}async startQuery(e,t){await super.startQuery(e,t),!1!==(null==t?void 0:t.output)&&this.isActive&&await Promise.all(this.outputsProvider.map(t=>t.startQuery(e)))}async endQuery(){var e;await super.endQuery(),!1!==(null===(e=this.filters)||void 0===e?void 0:e.output)&&this.isActive&&await Promise.all(this.outputsProvider.map(e=>e.endQuery()))}async replaceAllMatches(e,t){if(!1===this.model.getMetadata("editable"))return Promise.resolve(!1);return await super.replaceAllMatches(e,t)}async replaceCurrentMatch(e,t,r){if(!1===this.model.getMetadata("editable"))return Promise.resolve(!1);return await super.replaceCurrentMatch(e,t,r)}async _onOutputsChanged(e,t){var r;this.outputsProvider.forEach(e=>{e.dispose()}),this.outputsProvider.length=0,this.currentProviderIndex=-1,this.outputsProvider=this.cell.outputArea.widgets.map(e=>new GenericSearchProvider(e)),this.isActive&&this.query&&!1!==(null===(r=this.filters)||void 0===r?void 0:r.output)&&await Promise.all([this.outputsProvider.map(e=>{e.startQuery(this.query)})]),this._stateChanged.emit()}}class MarkdownCellSearchProvider extends CellSearchProvider{constructor(e){super(e),this._unrenderedByHighlight=!1,this.renderedProvider=new GenericSearchProvider(e.renderer)}async clearHighlight(){await super.clearHighlight(),await this.renderedProvider.clearHighlight()}dispose(){this.isDisposed||(super.dispose(),this.renderedProvider.dispose())}async endQuery(){await super.endQuery(),await this.renderedProvider.endQuery()}async highlightNext(e=!0,t){let r;if(!this.isActive)return r;const s=this.cell;if(s.rendered&&this.matchesCount>0){this._unrenderedByHighlight=!0;const e=libExports$2.signalToPromise(s.renderedChanged);s.rendered=!1,await e}return r=await super.highlightNext(e,t),r}async highlightPrevious(){let e;const t=this.cell;if(t.rendered&&this.matchesCount>0){this._unrenderedByHighlight=!0;const e=libExports$2.signalToPromise(t.renderedChanged);t.rendered=!1,await e}return e=await super.highlightPrevious(),e}async startQuery(e,t){await super.startQuery(e,t);const r=this.cell;r.rendered&&this.onRenderedChanged(r,r.rendered),r.renderedChanged.connect(this.onRenderedChanged,this)}async replaceAllMatches(e,t){if(!1===this.model.getMetadata("editable"))return Promise.resolve(!1);const r=await super.replaceAllMatches(e,t);return this.cell.rendered&&this.cell.update(),r}async replaceCurrentMatch(e,t,r){if(!1===this.model.getMetadata("editable"))return Promise.resolve(!1);return await super.replaceCurrentMatch(e,t,r)}onRenderedChanged(e,t){var r;this._unrenderedByHighlight||(this.currentIndex=null),this._unrenderedByHighlight=!1,this.isActive&&(t?this.renderedProvider.startQuery(this.query):(null===(r=e.editor)||void 0===r||r.setCursorPosition({column:0,line:0}),this.renderedProvider.endQuery()))}}function createCellSearchProvider(e){if(e.isPlaceholder())return new CellSearchProvider(e);switch(e.model.type){case"code":return new CodeCellSearchProvider(e);case"markdown":return new MarkdownCellSearchProvider(e);default:return new CellSearchProvider(e)}}function isHTML(e){return"text/html"===e}function getHTMLHeadings(e,t=!0){var r;const s=document.createElement("div");s.innerHTML=e;const n=new Array,i=s.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const o of i){const e=parseInt(o.tagName[1],10);n.push({text:null!==(r=o.textContent)&&void 0!==r?r:"",level:e,id:null==o?void 0:o.getAttribute("id"),skip:o.classList.contains("jp-toc-ignore")||o.classList.contains("tocSkip")})}return n}async function getHeadingId(e,t,r,s){try{const n=document.createElement("div");await renderMarkdown({markdownParser:e,host:n,source:t,trusted:!1,sanitizer:null!=s?s:new Sanitizer,shouldTypeset:!1,resolver:null,linkHandler:null,latexTypesetter:null});const i=n.querySelector(`h${r}`);return i?(null==s?void 0:s.allowNamedProperties)?i.id:i.getAttribute("data-jupyter-id"):null}catch(n){console.error("Failed to parse a heading.",n)}return null}async function parseHeadings(e,t){if(!t)return console.warn("Couldn't parse headings; Markdown parser is null"),[];const r=await t.render(e),s=new Array;return(new DOMParser).parseFromString(r,"text/html").querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((e,t)=>{var r;const n=parseInt(e.tagName.substring(1),10),i=(null===(r=e.textContent)||void 0===r?void 0:r.trim())||"";s.push({text:i,line:t,level:n,raw:e.outerHTML,skip:skipHeading.test(e.outerHTML)})}),s}const MARKDOWN_MIME_TYPE=["text/x-ipythongfm","text/x-markdown","text/x-gfm","text/markdown"];function isMarkdown(e){return MARKDOWN_MIME_TYPE.includes(e)}const skipHeading=/<\w+\s(.*?\s)?class="(.*?\s)?(jp-toc-ignore|tocSkip)(\s.*?)?"(\s.*?)?>/,RESIZE_HANDLE_CLASS="jp-CellResizeHandle",CELL_RESIZED_CLASS="jp-mod-resizedCell";class ResizeHandle extends Widget{constructor(e){super(),this.targetNode=e,this._isActive=!1,this._isDragging=!1,this.sizeChanged=new Signal(this),this.addClass(RESIZE_HANDLE_CLASS),this._resizer=new Throttler(e=>this._resize(e),50)}dispose(){this._resizer.dispose(),super.dispose()}handleEvent(e){var t,r;switch(e.type){case"dblclick":null===(t=this.targetNode.parentNode)||void 0===t||t.childNodes.forEach(e=>{e.classList.remove(CELL_RESIZED_CLASS)}),document.documentElement.style.setProperty("--jp-side-by-side-output-size","1fr"),this._isActive=!1;break;case"mousedown":this._isDragging=!0,this._isActive||(null===(r=this.targetNode.parentNode)||void 0===r||r.childNodes.forEach(e=>{e.classList.add(CELL_RESIZED_CLASS)}),this._isActive=!0),window.addEventListener("mousemove",this),window.addEventListener("mouseup",this);break;case"mousemove":this._isActive&&this._isDragging&&this._resizer.invoke(e);break;case"mouseup":this._isDragging=!1,window.removeEventListener("mousemove",this),window.removeEventListener("mouseup",this)}}onAfterAttach(e){this.node.addEventListener("dblclick",this),this.node.addEventListener("mousedown",this),super.onAfterAttach(e)}onBeforeDetach(e){this.node.removeEventListener("dblclick",this),this.node.removeEventListener("mousedown",this),super.onBeforeDetach(e)}_resize(e){const{width:t,x:r}=this.targetNode.getBoundingClientRect(),s=t/(e.clientX-r)-1;if(0<s){const e=Math.max(Math.min(Math.abs(s),50),.05);document.documentElement.style.setProperty("--jp-side-by-side-output-size",`${e}fr`),this.sizeChanged.emit(e)}}}const CELL_CLASS="jp-Cell",CELL_HEADER_CLASS="jp-Cell-header",CELL_FOOTER_CLASS="jp-Cell-footer",CELL_INPUT_WRAPPER_CLASS="jp-Cell-inputWrapper",CELL_OUTPUT_WRAPPER_CLASS="jp-Cell-outputWrapper",CELL_INPUT_AREA_CLASS="jp-Cell-inputArea",CELL_OUTPUT_AREA_CLASS="jp-Cell-outputArea",CELL_INPUT_COLLAPSER_CLASS="jp-Cell-inputCollapser",CELL_OUTPUT_COLLAPSER_CLASS="jp-Cell-outputCollapser",DIRTY_CLASS$2="jp-mod-dirty",CODE_CELL_CLASS="jp-CodeCell",MARKDOWN_CELL_CLASS="jp-MarkdownCell",MARKDOWN_OUTPUT_CLASS="jp-MarkdownOutput",MARKDOWN_HEADING_COLLAPSED="jp-MarkdownHeadingCollapsed",HEADING_COLLAPSER_CLASS$1="jp-collapseHeadingButton",SHOW_HIDDEN_CELLS_CLASS="jp-showHiddenCellsButton",RAW_CELL_CLASS="jp-RawCell",RENDERED_CLASS="jp-mod-rendered",NO_OUTPUTS_CLASS="jp-mod-noOutputs",RENDER_TIMEOUT=1e3,CONTENTS_MIME_RICH="application/x-jupyter-icontentsrich";class Cell extends Widget{constructor(e){var t,r,s,n;super(),this.prompt="",this._displayChanged=new Signal(this),this._scrollRequested=new Signal(this),this._scrollHandlerExtension=EditorView.scrollHandler.of((e,t,r)=>{const s=null!==this._inViewport&&!this._inViewport;return this._scrollRequested.emit({defaultPrevented:s,scrollWithinCell:()=>{e.dispatch({effects:EditorView.scrollIntoView(t,r)})}}),s}),this._editorConfig={},this._editorExtensions=[],this._inputHidden=!1,this._inViewportChanged=new Signal(this),this._readOnly=!1,this._ready=new PromiseDelegate,this._resizeDebouncer=new Debouncer(()=>{this._displayChanged.emit()},0),this._syncCollapse=!1,this._syncEditable=!1,this.addClass(CELL_CLASS);const i=this._model=e.model;this.contentFactory=e.contentFactory,this.layout=null!==(t=e.layout)&&void 0!==t?t:new PanelLayout,this.translator=null!==(r=e.translator)&&void 0!==r?r:nullTranslator,this._editorConfig={searchWithCM:!1,...e.editorConfig},this._editorExtensions=null!==(s=e.editorExtensions)&&void 0!==s?s:[],this._editorExtensions.push(this._scrollHandlerExtension),this._placeholder=!0,this._inViewport=null,this.placeholder=null===(n=e.placeholder)||void 0===n||n,i.metadataChanged.connect(this.onMetadataChanged,this)}initializeState(){return this.loadCollapseState(),this.loadEditableState(),this}get displayChanged(){return this._displayChanged}get inViewport(){var e;return null!==(e=this._inViewport)&&void 0!==e&&e}set inViewport(e){this._inViewport!==e&&(this._inViewport=e,this._inViewportChanged.emit(this._inViewport))}get inViewportChanged(){return this._inViewportChanged}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder!==e&&!1===e&&(this.initializeDOM(),this._placeholder=e,this._ready.resolve())}get promptNode(){return this.placeholder?null:this._inputHidden?this._inputPlaceholder.node.firstElementChild:this._input.promptNode}get editorWidget(){var e,t;return null!==(t=null===(e=this._input)||void 0===e?void 0:e.editorWidget)&&void 0!==t?t:null}get editor(){var e,t;return null!==(t=null===(e=this._input)||void 0===e?void 0:e.editor)&&void 0!==t?t:null}get editorConfig(){return this._editorConfig}get headings(){return new Array}async getHeadings(){return[]}get model(){return this._model}get inputArea(){return this._input}get readOnly(){return this._readOnly}set readOnly(e){e!==this._readOnly&&(this._readOnly=e,this.syncEditable&&this.saveEditableState(),this.update())}isPlaceholder(){return this.placeholder}saveEditableState(){const{sharedModel:e}=this.model,t=e.getMetadata("editable");this.readOnly&&!1===t||!this.readOnly&&void 0===t||(this.readOnly?e.setMetadata("editable",!1):e.deleteMetadata("editable"))}loadEditableState(){this.readOnly=!1===this.model.sharedModel.getMetadata("editable")}get ready(){return this._ready.promise}setPrompt(e){return this._setPrompt(e)}_setPrompt(e){var t;this.prompt=e,null===(t=this._input)||void 0===t||t.setPrompt(e)}get inputHidden(){return this._inputHidden}set inputHidden(e){var t;if(this._inputHidden!==e){if(!this.placeholder){const r=this._inputWrapper.layout;e?(this._input.parent=null,this._inputPlaceholder&&(this._inputPlaceholder.text=null===(t=this.model.sharedModel.getSource().split("\n"))||void 0===t?void 0:t[0]),r.addWidget(this._inputPlaceholder)):(this._inputPlaceholder.parent=null,r.addWidget(this._input))}this._inputHidden=e,this.syncCollapse&&this.saveCollapseState(),this.handleInputHidden(e)}}saveCollapseState(){const e={...this.model.getMetadata("jupyter")};this.inputHidden&&!0===e.source_hidden||!this.inputHidden&&void 0===e.source_hidden||(this.inputHidden?e.source_hidden=!0:delete e.source_hidden,0===Object.keys(e).length?this.model.deleteMetadata("jupyter"):this.model.setMetadata("jupyter",e))}loadCollapseState(){var e;const t=null!==(e=this.model.getMetadata("jupyter"))&&void 0!==e?e:{};this.inputHidden=!!t.source_hidden}handleInputHidden(e){}get syncCollapse(){return this._syncCollapse}set syncCollapse(e){this._syncCollapse!==e&&(this._syncCollapse=e,e&&this.loadCollapseState())}get syncEditable(){return this._syncEditable}set syncEditable(e){this._syncEditable!==e&&(this._syncEditable=e,e&&this.loadEditableState())}clone(){return new(0,this.constructor)({model:this.model,contentFactory:this.contentFactory,placeholder:!1,translator:this.translator})}dispose(){this.isDisposed||(this._resizeDebouncer.dispose(),this._input=null,this._model=null,this._inputWrapper=null,this._inputPlaceholder=null,super.dispose())}updateEditorConfig(e){this._editorConfig={...this._editorConfig,...e},this.editor&&this.editor.setBaseOptions(this._editorConfig)}get scrollRequested(){return this._scrollRequested}initializeDOM(){if(!this.placeholder)return;const e=this.contentFactory,t=this._model,r=e.createCellHeader();r.addClass(CELL_HEADER_CLASS),this.layout.addWidget(r);const s=this._inputWrapper=new Panel;s.addClass(CELL_INPUT_WRAPPER_CLASS);const n=new InputCollapser;n.addClass(CELL_INPUT_COLLAPSER_CLASS);const i=this._input=new InputArea({model:t,contentFactory:e,editorOptions:this.getEditorOptions()});i.addClass(CELL_INPUT_AREA_CLASS),s.addWidget(n),s.addWidget(i),this.layout.addWidget(s),this._inputPlaceholder=new InputPlaceholder({callback:()=>{this.inputHidden=!this.inputHidden},text:i.model.sharedModel.getSource().split("\n")[0],translator:this.translator}),i.model.contentChanged.connect((e,t)=>{var r;this._inputPlaceholder&&this.inputHidden&&(this._inputPlaceholder.text=null===(r=e.sharedModel.getSource().split("\n"))||void 0===r?void 0:r[0])}),this.inputHidden&&(i.parent=null,s.layout.addWidget(this._inputPlaceholder));const o=this.contentFactory.createCellFooter();o.addClass(CELL_FOOTER_CLASS),this.layout.addWidget(o)}getEditorOptions(){return{config:this.editorConfig,extensions:this._editorExtensions}}onBeforeAttach(e){this.placeholder&&(this.placeholder=!1)}onAfterAttach(e){this.update()}onActivateRequest(e){var t;null===(t=this.editor)||void 0===t||t.focus()}onResize(e){this._resizeDebouncer.invoke()}onUpdateRequest(e){var t,r;this._model&&(null===(t=this.editor)||void 0===t?void 0:t.getOption("readOnly"))!==this._readOnly&&(null===(r=this.editor)||void 0===r||r.setOption("readOnly",this._readOnly))}onContentChanged(){var e;this.inputHidden&&this._inputPlaceholder&&(this._inputPlaceholder.text=null===(e=this.model.sharedModel.getSource().split("\n"))||void 0===e?void 0:e[0])}onMetadataChanged(e,t){switch(t.key){case"jupyter":this.syncCollapse&&this.loadCollapseState();break;case"editable":this.syncEditable&&this.loadEditableState()}}}!function(e){var t;(t=e.HeadingType||(e.HeadingType={}))[t.HTML=0]="HTML",t[t.Markdown=1]="Markdown";e.ContentFactory=class{constructor(e){this._editorFactory=e.editorFactory}get editorFactory(){return this._editorFactory}createCellHeader(){return new CellHeader}createCellFooter(){return new CellFooter}createInputPrompt(){return new InputPrompt}createOutputPrompt(){return new OutputPrompt}createStdin(e){return new Stdin(e)}}}(Cell||(Cell={}));class CodeCellLayout extends PanelLayout{onBeforeAttach(e){let t=!0;const r=this.parent.node.firstElementChild;for(const s of this)r&&(s.node===r?t=!1:(MessageLoop.sendMessage(s,e),t?this.parent.node.insertBefore(s.node,r):this.parent.node.appendChild(s.node),this.parent.isHidden||s.setFlag(Widget.Flag.IsVisible),MessageLoop.sendMessage(s,Widget.Msg.AfterAttach)))}onAfterDetach(e){for(const t of this)!t.hasClass(CELL_OUTPUT_WRAPPER_CLASS)&&t.node.isConnected&&(MessageLoop.sendMessage(t,Widget.Msg.BeforeDetach),this.parent.node.removeChild(t.node),MessageLoop.sendMessage(t,e))}}class CodeCell extends Cell{constructor(e){var t;super({layout:new CodeCellLayout,...e,placeholder:!0}),this._detectCaretMovementInOuput=e=>{const t=null!==this._inViewport&&!this._inViewport,r=e.target;if(!(r&&r instanceof HTMLElement))return;this._lastTarget&&(this._lastTarget.removeEventListener("selectionchange",this._lastOnCaretMovedHandler),document.removeEventListener("selectionchange",this._lastOnCaretMovedHandler));const s=()=>{this._scrollRequested.emit({scrollWithinCell:({scroller:e})=>{ElementExt.scrollIntoViewIfNeeded(e,r)},defaultPrevented:t})};this._lastTarget=r,this._lastOnCaretMovedHandler=s,r.addEventListener("selectionchange",s,{once:!0}),document.addEventListener("selectionchange",s,{once:!0}),setTimeout(()=>{r.removeEventListener("selectionchange",s),document.removeEventListener("selectionchange",s)},250)},this._headingsCache=null,this._outputHidden=!1,this._outputWrapper=null,this._outputPlaceholder=null,this._syncScrolled=!1,this._lastTarget=null,this._lastOutputHeight="",this.addClass(CODE_CELL_CLASS);const r=this.translator.load("jupyterlab"),s=this._rendermime=e.rendermime,n=this.contentFactory,i=this.model;this.maxNumberOutputs=e.maxNumberOutputs;const o=0===i.outputs.length?r.__("Code Cell Content"):r.__("Code Cell Content with Output");this.node.setAttribute("aria-label",o);const a=this._output=new OutputArea({model:this.model.outputs,rendermime:s,contentFactory:n,maxNumberOutputs:this.maxNumberOutputs,translator:this.translator,promptOverlay:!0,inputHistoryScope:e.inputHistoryScope,showInputPlaceholder:e.showInputPlaceholder});a.node.addEventListener("keydown",this._detectCaretMovementInOuput),a.addClass(CELL_OUTPUT_AREA_CLASS),a.toggleScrolling.connect(()=>{this.outputsScrolled=!this.outputsScrolled}),a.initialize.connect(()=>{this.updatePromptOverlayIcon()}),this.placeholder=null===(t=e.placeholder)||void 0===t||t,i.outputs.changed.connect(this.onOutputChanged,this),i.outputs.stateChanged.connect(this.onOutputChanged,this),i.stateChanged.connect(this.onStateChanged,this)}initializeDOM(){if(!this.placeholder)return;super.initializeDOM(),this._updatePrompt();const e=this._outputWrapper=new Panel;e.addClass(CELL_OUTPUT_WRAPPER_CLASS);const t=new OutputCollapser;t.addClass(CELL_OUTPUT_COLLAPSER_CLASS),e.addWidget(t),0===this.model.outputs.length&&this.addClass(NO_OUTPUTS_CLASS),this._output.outputLengthChanged.connect(this._outputLengthHandler,this),e.addWidget(this._output);const r=this.layout,s=new ResizeHandle(this.node);s.sizeChanged.connect(this._sizeChangedHandler,this),r.insertWidget(r.widgets.length-1,s),r.insertWidget(r.widgets.length-1,e),this.model.isDirty&&this.addClass(DIRTY_CLASS$2),this._outputPlaceholder=new OutputPlaceholder({callback:()=>{this.outputHidden=!this.outputHidden},text:this.getOutputPlaceholderText(),translator:this.translator});const n=e.layout;this.outputHidden&&(n.removeWidget(this._output),n.addWidget(this._outputPlaceholder),this.inputHidden&&!e.isHidden&&this._outputWrapper.hide());const i=this.translator.load("jupyterlab"),o=0===this.model.outputs.length?i.__("Code Cell Content"):i.__("Code Cell Content with Output");this.node.setAttribute("aria-label",o)}getOutputPlaceholderText(){var e;const t=this.model.outputs.get(0);if(!(null==t?void 0:t.data))return;const r=["text/html","image/svg+xml","application/pdf","text/markdown","text/plain","application/vnd.jupyter.stderr","application/vnd.jupyter.stdout","text"].find(e=>{const r=t.data[e];return"string"==(Array.isArray(r)?typeof r[0]:typeof r)}),s=t.data[null!=r?r:""];return void 0!==s?null===(e=Array.isArray(s)?s:null==s?void 0:s.split("\n"))||void 0===e?void 0:e.find(e=>""!==e):void 0}initializeState(){return super.initializeState(),this.loadScrolledState(),this._updatePrompt(),this}get headings(){var e;return null!==(e=this._headingsCache)&&void 0!==e?e:[]}async getHeadings(){if(!this._headingsCache){const e=[],t=this.model.outputs;for(let r=0;r<t.length;r++){const s=t.get(r);let n=null,i=null;if(Object.keys(s.data).forEach(e=>{!i&&isMarkdown(e)?i=e:!n&&isHTML(e)&&(n=e)}),n){let t=s.data[n];"string"!=typeof t&&(t=t.join("\n")),e.push(...getHTMLHeadings(this._rendermime.sanitizer.sanitize(t)).map(e=>({...e,outputIndex:r,type:Cell.HeadingType.HTML})))}else if(i){const t=await parseHeadings(s.data[i],this._rendermime.markdownParser);e.push(...t.map(e=>({...e,outputIndex:r,type:Cell.HeadingType.Markdown})))}}this._headingsCache=e}return[...this._headingsCache]}get outputArea(){return this._output}get outputHidden(){return this._outputHidden}set outputHidden(e){var t;if(this._outputHidden!==e){if(!this.placeholder){const r=this._outputWrapper.layout;e?(r.removeWidget(this._output),r.addWidget(this._outputPlaceholder),this.inputHidden&&!this._outputWrapper.isHidden&&this._outputWrapper.hide(),this._outputPlaceholder&&(this._outputPlaceholder.text=null!==(t=this.getOutputPlaceholderText())&&void 0!==t?t:"")):(this._outputWrapper.isHidden&&this._outputWrapper.show(),r.removeWidget(this._outputPlaceholder),r.addWidget(this._output))}this._outputHidden=e,this.syncCollapse&&this.saveCollapseState()}}saveCollapseState(){this.model.sharedModel.transact(()=>{super.saveCollapseState();const e=this.model.getMetadata("collapsed");this.outputHidden&&!0===e||!this.outputHidden&&void 0===e||(this.outputHidden?this.model.setMetadata("collapsed",!0):this.model.deleteMetadata("collapsed"))},!1,"silent-change")}loadCollapseState(){super.loadCollapseState(),this.outputHidden=!!this.model.getMetadata("collapsed")}get outputsScrolled(){return this._outputsScrolled}set outputsScrolled(e){this.toggleClass("jp-mod-outputsScrolled",e),this._outputsScrolled=e,this.syncScrolled&&this.saveScrolledState(),this.updatePromptOverlayIcon()}updatePromptOverlayIcon(){var e;const t=DOMUtils.findElement(this.node,"jp-OutputArea-promptOverlay");if(!t)return;if(t.clientHeight<=24)return void(null===(e=t.firstChild)||void 0===e||e.remove());let r;this._outputsScrolled?(expandIcon.element({container:t}),r="Expand Output"):(collapseIcon.element({container:t}),r="Collapse Output");const s=this.translator.load("jupyterlab");t.title=s.__(r)}saveScrolledState(){const e=this.model.getMetadata("scrolled");this.outputsScrolled&&!0===e||!this.outputsScrolled&&void 0===e||(this.outputsScrolled?this.model.setMetadata("scrolled",!0):(this.outputArea.node.style.height="",this.model.deleteMetadata("scrolled")))}loadScrolledState(){"auto"===this.model.getMetadata("scrolled")?this.outputsScrolled=!1:this.outputsScrolled=!!this.model.getMetadata("scrolled")}get syncScrolled(){return this._syncScrolled}set syncScrolled(e){this._syncScrolled!==e&&(this._syncScrolled=e,e&&this.loadScrolledState())}handleInputHidden(e){this.placeholder||(!e&&this._outputWrapper.isHidden?this._outputWrapper.show():e&&!this._outputWrapper.isHidden&&this._outputHidden&&this._outputWrapper.hide())}clone(){return new(0,this.constructor)({model:this.model,contentFactory:this.contentFactory,rendermime:this._rendermime,placeholder:!1,translator:this.translator})}cloneOutputArea(){return new SimplifiedOutputArea({model:this.model.outputs,contentFactory:this.contentFactory,rendermime:this._rendermime})}dispose(){this.isDisposed||(this._output.outputLengthChanged.disconnect(this._outputLengthHandler,this),this._output.node.removeEventListener("keydown",this._detectCaretMovementInOuput),this._rendermime=null,this._output=null,this._outputWrapper=null,this._outputPlaceholder=null,super.dispose())}onStateChanged(e,t){switch(t.name){case"executionCount":null!==t.newValue&&(this.model.executionState="idle"),this._updatePrompt();break;case"executionState":this._updatePrompt();break;case"isDirty":e.isDirty?this.addClass(DIRTY_CLASS$2):this.removeClass(DIRTY_CLASS$2)}}onOutputChanged(){var e;this._headingsCache=null,this._outputPlaceholder&&this.outputHidden&&(this._outputPlaceholder.text=null!==(e=this.getOutputPlaceholderText())&&void 0!==e?e:""),this.updatePromptOverlayIcon();const t=this.outputArea.node.style.height;0===this.model.outputs.length&&""!==t?(this._lastOutputHeight=t,this.outputArea.node.style.height=""):this.model.outputs.length>0&&""===t&&(this.outputArea.node.style.height=this._lastOutputHeight)}onMetadataChanged(e,t){switch(t.key){case"scrolled":this.syncScrolled&&this.loadScrolledState();break;case"collapsed":this.syncCollapse&&this.loadCollapseState()}super.onMetadataChanged(e,t)}_updatePrompt(){let e;e="running"==this.model.executionState?"*":`${this.model.executionCount||""}`,this._setPrompt(e)}_outputLengthHandler(e,t){const r=0===t;this.toggleClass(NO_OUTPUTS_CLASS,r);const s=this.translator.load("jupyterlab"),n=r?s.__("Code Cell Content"):s.__("Code Cell Content with Output");this.node.setAttribute("aria-label",n)}_sizeChangedHandler(e){this._displayChanged.emit()}}(CodeCell||(CodeCell={})).execute=async function(t,r,s){var n;const i=t.model,o=i.sharedModel.getSource();if(!o.trim()||!(null===(n=r.session)||void 0===n?void 0:n.kernel))return void i.sharedModel.transact(()=>{i.clearExecution()},!1);const a={cellId:i.sharedModel.getId()};s={...i.metadata,...s,...a};const{recordTiming:l}=s;let c;i.sharedModel.transact(()=>{i.clearExecution(),t.outputHidden=!1},!1,"silent-change"),i.executionState="running",i.trusted=!0;try{const e=OutputArea.execute(o,t.outputArea,r,s);if(l){const e=e=>{let t;switch(e.header.msg_type){case"status":t=`status.${e.content.execution_state}`;break;case"execute_input":t="execute_input";break;default:return!0}const r=e.header.date||/* @__PURE__ */(new Date).toISOString(),s=Object.assign({},i.getMetadata("execution"));return s[`iopub.${t}`]=r,i.setMetadata("execution",s),!0};t.outputArea.future.registerMessageHook(e)}else i.deleteMetadata("execution");c=t.outputArea.future;const n=await e;if(i.executionCount=n.content.execution_count,l){const e=Object.assign({},i.getMetadata("execution")),t=n.metadata.started;t&&(e["shell.execute_reply.started"]=t);const r=n.header.date;e["shell.execute_reply"]=r||/* @__PURE__ */(new Date).toISOString(),i.setMetadata("execution",e)}return n}catch(e){if(c&&!t.isDisposed&&t.outputArea.future===c&&(t.model.executionState="idle",l&&c.isDisposed)){const e=Object.assign({},i.getMetadata("execution"));e.execution_failed=/* @__PURE__ */(new Date).toISOString(),i.setMetadata("execution",e)}throw e}};class AttachmentsCell extends Cell{handleEvent(e){switch(e.type){case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e)}}getEditorOptions(){var e,t;const r=null!==(e=super.getEditorOptions())&&void 0!==e?e:{};return r.extensions=[...null!==(t=r.extensions)&&void 0!==t?t:[],EditorView.domEventHandlers({dragenter:e=>{e.preventDefault()},dragover:e=>{e.preventDefault()},drop:e=>{this._evtNativeDrop(e)},paste:e=>{this._evtPaste(e)}})],r}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("lm-dragover",this),t.addEventListener("lm-drop",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("lm-dragover",this),t.removeEventListener("lm-drop",this),super.onBeforeDetach(e)}_evtDragOver(e){some$1(imageRendererFactory.mimeTypes,t=>{if(!e.mimeData.hasData(CONTENTS_MIME_RICH))return!1;return e.mimeData.getData(CONTENTS_MIME_RICH).model.mimetype===t})&&(e.preventDefault(),e.stopPropagation(),e.dropAction=e.proposedAction)}_evtPaste(e){var t;const r=null===(t=this.model.getMetadata("editable"))||void 0===t||t;if(e.clipboardData&&r){const t=e.clipboardData.items;for(let r=0;r<t.length;r++){if("text/plain"===t[r].type){if(r<t.length-1&&"file"===t[r+1].kind)continue;t[r].getAsString(e=>{var t,r;null===(r=(t=this.editor).replaceSelection)||void 0===r||r.call(t,e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"))})}this._attachFiles(e.clipboardData.items)}}e.preventDefault()}_evtNativeDrop(e){e.dataTransfer&&this._attachFiles(e.dataTransfer.items),e.preventDefault()}_evtDrop(e){const t=e.mimeData.types().filter(t=>{if(t===CONTENTS_MIME_RICH){const t=e.mimeData.getData(CONTENTS_MIME_RICH);return-1!==imageRendererFactory.mimeTypes.indexOf(t.model.mimetype)}return-1!==imageRendererFactory.mimeTypes.indexOf(t)});if(0!==t.length)if(e.preventDefault(),e.stopPropagation(),"none"!==e.proposedAction){e.dropAction="copy";for(const r of t)if(r===CONTENTS_MIME_RICH){const{model:t,withContent:r}=e.mimeData.getData(CONTENTS_MIME_RICH);if("file"===t.type){const e=this._generateURI(t.name);this.updateCellSourceWithAttachment(t.name,e),r().then(t=>{this.model.attachments.set(e,{[t.mimetype]:t.content})})}}else{const t=this._generateURI();this.model.attachments.set(t,{[r]:e.mimeData.getData(r)}),this.updateCellSourceWithAttachment(t,t)}}else e.dropAction="none"}_attachFiles(e){for(let t=0;t<e.length;t++){const r=e[t];if("file"===r.kind){const e=r.getAsFile();e&&this._attachFile(e)}}}_attachFile(e){const t=new FileReader;t.onload=r=>{const{href:s,protocol:n}=libExports$2.URLExt.parse(t.result);if("data:"!==n)return;const i=/([\w+\/\+]+)?(?:;(charset=[\w\d-]*|base64))?,(.*)/.exec(s);if(!i||4!==i.length)return;const o=i[1],a=i[3],l={[o]:a},c=this._generateURI(e.name);o.startsWith("image/")&&(this.model.attachments.set(c,l),this.updateCellSourceWithAttachment(e.name,c))},t.onerror=t=>{console.error(`Failed to attach ${e.name}`+t)},t.readAsDataURL(e)}_generateURI(e=""){const t=e.lastIndexOf(".");return-1!==t?UUID.uuid4().concat(e.substring(t)):UUID.uuid4()}}class MarkdownCell extends AttachmentsCell{constructor(e){var t,r,s,n,i;super({...e,placeholder:!0}),this._headingsCache=null,this._headingCollapsedChanged=new Signal(this),this._prevText="",this._rendered=!0,this._renderedChanged=new Signal(this),this._showEditorForReadOnlyMarkdown=!0,this._cachedHeadingText="",this._headingResolved=!1,this.addClass(MARKDOWN_CELL_CLASS),this.model.contentChanged.connect(this.onContentChanged,this);const o=this.translator.load("jupyterlab");this.node.setAttribute("aria-label",o.__("Markdown Cell Content")),this._rendermime=e.rendermime.clone({resolver:new AttachmentsResolver({parent:null!==(t=e.rendermime.resolver)&&void 0!==t?t:void 0,model:this.model.attachments})}),this._renderer=this._rendermime.createRenderer("text/markdown"),this._renderer.addClass(MARKDOWN_OUTPUT_CLASS),this._headingCollapsed=null!==(r=this.model.getMetadata(MARKDOWN_HEADING_COLLAPSED))&&void 0!==r&&r,this._showEditorForReadOnlyMarkdown=null!==(s=e.showEditorForReadOnlyMarkdown)&&void 0!==s?s:MarkdownCell.defaultShowEditorForReadOnlyMarkdown,this.placeholder=null===(n=e.placeholder)||void 0===n||n,this._monitor=new libExports$2.ActivityMonitor({signal:this.model.contentChanged,timeout:RENDER_TIMEOUT}),this.ready.then(()=>{this.isDisposed||this._monitor.activityStopped.connect(()=>{this._rendered&&this.update()},this)}).catch(e=>{console.error("Failed to be ready",e)}),this._cachedHeadingText=this.model.sharedModel.getSource(),this._emptyPlaceholder=null!==(i=e.emptyPlaceholder)&&void 0!==i?i:o.__("Type Markdown and LaTeX: $ ^2 $")}get headingInfo(){const e=this.headings;if(e.length>0){const{text:t,level:r}=e.reduce((e,t)=>e.level<=t.level?e:t,e[0]);return{text:t,level:r}}return{text:"",level:-1}}get headings(){var e;return null!==(e=this._headingsCache)&&void 0!==e?e:[]}async getHeadings(){if(!this._headingsCache){const e=await parseHeadings(this.model.sharedModel.getSource(),this._rendermime.markdownParser);this._headingsCache=e.map(e=>({...e,type:Cell.HeadingType.Markdown})),this._headingResolved=!0,this.renderCollapseButtons()}return[...this._headingsCache]}get headingCollapsed(){return this._headingCollapsed}set headingCollapsed(e){var t;if(this._headingCollapsed!==e){this._headingCollapsed=e,e?this.model.setMetadata(MARKDOWN_HEADING_COLLAPSED,e):"undefined"!==this.model.getMetadata(MARKDOWN_HEADING_COLLAPSED)&&this.model.deleteMetadata(MARKDOWN_HEADING_COLLAPSED);const r=null===(t=this.inputArea)||void 0===t?void 0:t.promptNode.getElementsByClassName(HEADING_COLLAPSER_CLASS$1)[0];r&&(e?r.classList.add("jp-mod-collapsed"):r.classList.remove("jp-mod-collapsed")),this.renderCollapseButtons(this._renderer),this._headingCollapsedChanged.emit(this._headingCollapsed)}}get numberChildNodes(){return this._numberChildNodes}set numberChildNodes(e){this._numberChildNodes=e,this.renderCollapseButtons(this._renderer)}get headingCollapsedChanged(){return this._headingCollapsedChanged}get rendered(){return this._rendered}set rendered(e){this.readOnly&&!1===this._showEditorForReadOnlyMarkdown&&(e=!0),e!==this._rendered&&(this._rendered=e,this._handleRendered().then(()=>{this._displayChanged.emit(),this._renderedChanged.emit(this._rendered)}).catch(e=>{console.error("Failed to render",e)}))}get renderedChanged(){return this._renderedChanged}get showEditorForReadOnly(){return this._showEditorForReadOnlyMarkdown}set showEditorForReadOnly(e){this._showEditorForReadOnlyMarkdown=e,!1===e&&(this.rendered=!0)}get renderer(){return this._renderer}dispose(){this.isDisposed||(this._monitor.dispose(),super.dispose())}initializeDOM(){this.placeholder&&(super.initializeDOM(),this.renderCollapseButtons(this._renderer),this._handleRendered().catch(e=>{console.error("Failed to render",e)}))}maybeCreateCollapseButton(){var e;const{level:t}=this.headingInfo;if(t>0&&0==(null===(e=this.inputArea)||void 0===e?void 0:e.promptNode.getElementsByClassName(HEADING_COLLAPSER_CLASS$1).length)){let e=this.inputArea.promptNode.appendChild(document.createElement("button"));e.className=`jp-Button ${HEADING_COLLAPSER_CLASS$1}`,e.setAttribute("data-heading-level",t.toString()),this._headingCollapsed?e.classList.add("jp-mod-collapsed"):e.classList.remove("jp-mod-collapsed"),e.onclick=e=>{this.headingCollapsed=!this.headingCollapsed}}}maybeCreateOrUpdateExpandButton(){const e=this.node.getElementsByClassName(SHOW_HIDDEN_CELLS_CLASS);let t=this.translator.load("jupyterlab")._n("%1 cell hidden","%1 cells hidden",this._numberChildNodes);if(this.headingCollapsed&&this._numberChildNodes>0&&0==e.length){const e=document.createElement("button");e.className=`jp-mod-minimal jp-Button ${SHOW_HIDDEN_CELLS_CLASS}`,addIcon.render(e);const r=document.createElement("div");r.textContent=t,e.appendChild(r),e.onclick=()=>{this.headingCollapsed=!1},this.node.appendChild(e)}if(this.headingCollapsed&&this._numberChildNodes>0&&1==e.length&&(e[0].childNodes[1].textContent=t),!(this.headingCollapsed&&this._numberChildNodes>0))for(const r of e)this.node.removeChild(r)}onContentChanged(){super.onContentChanged();const e=this.model,t=e&&e.sharedModel.getSource();t!==this._cachedHeadingText&&(this._cachedHeadingText=t,this._headingsCache=null,this._headingResolved=!1)}renderCollapseButtons(e){this.node.classList.toggle(MARKDOWN_HEADING_COLLAPSED,this._headingCollapsed),this.maybeCreateCollapseButton(),this.maybeCreateOrUpdateExpandButton()}renderInput(e){this.addClass(RENDERED_CLASS),this.placeholder||this.isDisposed||(this.renderCollapseButtons(e),this.inputArea.renderInput(e))}showEditor(){if(this.removeClass(RENDERED_CLASS),!this.placeholder&&!this.isDisposed){this.inputArea.showEditor();let e=(this.model.sharedModel.getSource().match(/^#+/g)||[""])[0].length;e>0&&this.inputArea.editor.setCursorPosition({column:e+1,line:0},{scroll:!1})}}onUpdateRequest(e){this._handleRendered().catch(e=>{console.error("Failed to render",e)}),super.onUpdateRequest(e)}updateCellSourceWithAttachment(e,t){var r,s;const n=`![${e}](attachment:${null!=t?t:e})`;null===(s=null===(r=this.editor)||void 0===r?void 0:r.replaceSelection)||void 0===s||s.call(r,n)}async _handleRendered(){this._rendered?(await this._updateRenderedInput(),this._rendered&&this.renderInput(this._renderer)):this.showEditor()}_updateRenderedInput(){if(this.placeholder)return Promise.resolve();const e=this.model,t=e&&e.sharedModel.getSource()||this._emptyPlaceholder;if(t!==this._prevText){const e=new MimeModel({data:{"text/markdown":t}});return this._prevText=t,this._renderer.renderModel(e)}return Promise.resolve()}clone(){return new(0,this.constructor)({model:this.model,contentFactory:this.contentFactory,rendermime:this._rendermime,placeholder:!1,translator:this.translator})}get headingsResolved(){return this._headingResolved}}(MarkdownCell||(MarkdownCell={})).defaultShowEditorForReadOnlyMarkdown=!0;class RawCell extends Cell{constructor(e){super(e),this.addClass(RAW_CELL_CLASS);const t=this.translator.load("jupyterlab");this.node.setAttribute("aria-label",t.__("Raw Cell Content"))}clone(){return new(0,this.constructor)({model:this.model,contentFactory:this.contentFactory,placeholder:!1,translator:this.translator})}}async function runCell({cell:e,notebook:t,notebookConfig:r,onCellExecuted:s,onCellExecutionScheduled:n,sessionContext:i,sessionDialogs:o,translator:a}){var l;const c=(a=null!=a?a:nullTranslator).load("jupyterlab");switch(e.model.type){case"markdown":e.rendered=!0,e.inputHidden=!1,s({cell:e,success:!0});break;case"code":if(i){if(i.isTerminating){await showDialog({title:c.__("Kernel Terminating"),body:c.__("The kernel for %1 appears to be terminating. You can not run any cell for now.",null===(l=i.session)||void 0===l?void 0:l.path),buttons:[Dialog.okButton()]});break}if(i.pendingInput)return await showDialog({title:c.__("Cell not executed due to pending input"),body:c.__("The cell has not been executed to avoid kernel deadlock as there is another pending input! Type your input in the input box, press Enter and try again."),buttons:[Dialog.okButton()]}),!1;if(i.hasNoKernel){await i.startKernel()&&o&&await o.selectKernel(i)}if(i.hasNoKernel)return e.model.sharedModel.transact(()=>{e.model.clearExecution()}),!0;const a=t.deletedCells;n({cell:e});let h=!1;try{const s=await CodeCell.execute(e,i,{deletedCells:a,recordTiming:r.recordTiming});a.splice(0,a.length),h=(()=>{if(e.isDisposed)return!1;if(!s)return!0;if("ok"===s.content.status){const r=s.content;return r.payload&&r.payload.length&&handlePayload(r,t,e),!0}throw new KernelError(s.content)})()}catch(d){if(!e.isDisposed&&!d.message.startsWith("Canceled"))throw s({cell:e,success:!1,error:d}),d;h=!1}return h&&s({cell:e,success:!0}),h}e.model.sharedModel.transact(()=>{e.model.clearExecution()},!1)}return Promise.resolve(!0)}function handlePayload(e,t,r){var s;const n=null===(s=e.payload)||void 0===s?void 0:s.filter(e=>"set_next_input"===e.source)[0];if(!n)return;const i=n.text;if(n.replace)return void r.model.sharedModel.setSource(i);const o=t.sharedModel,a=findIndex(t.cells,e=>e===r.model);-1===a?o.insertCell(o.cells.length,{cell_type:"code",source:i,metadata:{trusted:!1}}):o.insertCell(a+1,{cell_type:"code",source:i,metadata:{trusted:!1}})}const JUPYTER_CELL_MIME$1="application/vnd.jupyter.cells";class KernelError extends Error{constructor(e){const t=e,r=t.ename,s=t.evalue;super(`KernelReplyNotOK: ${r} ${s}`),this.errorName=r,this.errorValue=s,this.traceback=t.traceback,Object.setPrototypeOf(this,KernelError.prototype)}}class NotebookActions{static get executed(){return Private$1.executed}static get executionScheduled(){return Private$1.executionScheduled}static get selectionExecuted(){return Private$1.selectionExecuted}static get outputCleared(){return Private$1.outputCleared}constructor(){}}var Private$1;function createReadonlyLabel(e,t){var r;let s=nullTranslator.load("jupyterlab");return ReactWidget.create(reactExports.createElement("div",null,reactExports.createElement("span",{className:"jp-ToolbarLabelComponent",title:s.__('Document is read-only. "Save" is disabled; use "Save as" instead')},s.__("%1 is read-only",null===(r=e.context.contentsModel)||void 0===r?void 0:r.type))))}!function(e){function t(e,t){if(!e.model||!e.activeCell)return;const r=Private$1.getState(e),s=e.widgets.findIndex(t=>e.isSelectedOrActive(t));let n=e.widgets.slice(s+1).findIndex(t=>!e.isSelectedOrActive(t));n>=0?n+=s+1:n=e.model.cells.length,t>0?e.moveCell(s,n,n-s):e.moveCell(s,s+t,n-s),Private$1.handleState(e,r,!0)}function r(e,t="below",r,s=!1){if(!e.model||!e.activeCell)return;const n=Private$1.getState(e),i=e.model;e.mode="command";let o=0;const a=e.activeCellIndex;i.sharedModel.transact(()=>{switch(t){case"below":o=e.activeCellIndex+1;break;case"belowSelected":e.widgets.forEach((t,r)=>{e.isSelectedOrActive(t)&&(o=r+1)});break;case"above":o=e.activeCellIndex;break;case"replace":{const t=[];e.widgets.forEach((r,s)=>{const n=!1!==r.model.sharedModel.getMetadata("deletable");e.isSelectedOrActive(r)&&n&&t.push(s)}),t.length>0&&t.reverse().forEach(e=>{i.sharedModel.deleteCell(e)}),o=t[0];break}}i.sharedModel.insertCells(o,r.map(t=>(t.id="code"===t.cell_type&&"cut"===e.lastClipboardInteraction&&"string"==typeof t.id?t.id:void 0,t)))}),e.activeCellIndex=a+r.length,e.deselectAll(),s&&(e.lastClipboardInteraction="paste"),Private$1.handleState(e,n,!0)}function s(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.widgets.forEach(t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.outputHidden=!0)}),Private$1.handleState(e,t,!0)}function n(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.widgets.forEach(t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.outputHidden=!1)}),Private$1.handleState(e,t)}function i(t,r,s){const n=findIndex(s.widgets,(e,r)=>t.model.id===e.model.id);if(-1===n)return-1;if(!s.widgets.length)return n+1;let o=e.getHeadingInfo(t);if(t.isHidden||!(t instanceof MarkdownCell)||!o.isHeading)return n+1;let a,l=!1,c=0;for(a=n+1;a<s.widgets.length;a++){let n=s.widgets[a],d=e.getHeadingInfo(n);const h=n.headingsResolved;if(-1===d.headingLevel&&!h){requestAnimationFrame(()=>{i(t,r,s)});break}if(d.isHeading&&d.headingLevel<=o.headingLevel){a-=1;break}l&&d.isHeading&&d.headingLevel<=c&&(l=!1),r||l?n.setHidden(!0):(d.collapsed&&d.isHeading&&(l=!0,c=d.headingLevel),n.setHidden(!1))}return a===s.widgets.length?t.numberChildNodes=a-n-1:t.numberChildNodes=a-n,e.setCellCollapse(t,r),a+1}function o(e){if(!(e instanceof MarkdownCell))return{isHeading:!1,headingLevel:7};let t=e.headingInfo.level;return{isHeading:t>0,headingLevel:t,collapsed:e.headingCollapsed}}async function a(e,t={waitUntilReady:!0,preventScroll:!1}){const{activeCell:r}=e,{waitUntilReady:s,preventScroll:n}=t;r&&(s&&await r.ready,e.isDisposed||r.isDisposed||r.node.focus({preventScroll:n}))}e.splitCell=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.mode="edit",e.deselectAll();const r=e.model,s=e.activeCellIndex,n=e.widgets[s],i=n.editor;if(!i)return;const o=i.getSelections(),a=n.model.sharedModel.getSource(),l=[0];let c=-1,d=-1;for(let y=0;y<o.length;y++)c=i.getOffsetAt(o[y].start),d=i.getOffsetAt(o[y].end),c<d?(l.push(c),l.push(d)):d<c?(l.push(d),l.push(c)):l.push(c);l.push(a.length);const{cell_type:h,metadata:u}=n.model.sharedModel.toJSON(),p=JSON.parse(JSON.stringify(null!=u?u:{}));"code"===h&&p.execution&&p.execution["iopub.execute_input"]&&!p.execution["shell.execute_reply"]&&delete p.execution;const g=l.slice(0,-2).map((e,t)=>({cell_type:h,metadata:JSON.parse(JSON.stringify(p)),source:a.slice(e,l[t+1]).replace(/^\n+/,"").replace(/\n+$/,""),outputs:void 0})),m=l[l.length-2],f=l[l.length-1],v=a.slice(m,f).replace(/^\n+/,"").replace(/\n+$/,"");let _;if(r.sharedModel.transact(()=>{if(g.length>0&&r.sharedModel.insertCells(s,g),n.model.sharedModel.setSource(v),n.model instanceof CodeCellModel){const e=n.model;"running"===e.executionState&&(e.isDirty=!0)}}),c!==d){let e=0;for(let t=0;t<l.length-1;t++)if(c>=l[t]&&c<l[t+1]){e=t;break}_=s+e}else _=s+g.length;e.activeCellIndex=_,e.scrollToItem(e.activeCellIndex).then(()=>{var t;null===(t=e.activeCell)||void 0===t||t.editor.focus()}).catch(e=>{}),Private$1.handleState(e,t)},e.mergeCells=function(e,t=!1,r=!0){if(!e.model||!e.activeCell)return;const s=Private$1.getState(e),n=[],i=[],o=e.model,a=o.cells,l=e.activeCell,c=e.activeCellIndex,d={};if(e.widgets.forEach((t,r)=>{if(e.isSelectedOrActive(t)){n.push(t.model.sharedModel.getSource()),r!==c&&i.push(r);const e=t.model;if(isRawCellModel(e)||isMarkdownCellModel(e))for(const t of e.attachments.keys)d[t]=e.attachments.get(t).toJSON()}}),1===n.length)if(!0===t){if(0===c)return;const e=a.get(c-1);n.unshift(e.sharedModel.getSource()),i.push(c-1)}else if(!1===t){if(c===a.length-1)return;const e=a.get(c+1);n.push(e.sharedModel.getSource()),i.push(c+1)}e.deselectAll();const h=l.model.sharedModel,{cell_type:u,metadata:p}=h.toJSON();"code"===h.cell_type&&(p.trusted=!0);const g={cell_type:u,metadata:p,source:n.join(r?"\n\n":"\n"),attachments:"markdown"===h.cell_type||"raw"===h.cell_type?d:void 0};o.sharedModel.transact(()=>{o.sharedModel.deleteCell(c),o.sharedModel.insertCell(c,g),i.sort((e,t)=>t-e).forEach(e=>{o.sharedModel.deleteCell(e)})}),l instanceof MarkdownCell&&(e.activeCell.rendered=!1),Private$1.handleState(e,s)},e.deleteCells=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);Private$1.deleteCells(e),Private$1.handleState(e,t,!0)},e.insertAbove=function(e){if(!e.model)return;const t=Private$1.getState(e),r=e.model,s=e.activeCell?e.activeCellIndex:0;r.sharedModel.insertCell(s,{cell_type:e.notebookConfig.defaultCell,metadata:"code"===e.notebookConfig.defaultCell?{trusted:!0}:{}}),e.activeCellIndex=s,e.deselectAll(),Private$1.handleState(e,t,!0)},e.insertBelow=function(e){if(!e.model)return;const t=Private$1.getState(e),r=e.model,s=e.activeCell?e.activeCellIndex+1:0;r.sharedModel.insertCell(s,{cell_type:e.notebookConfig.defaultCell,metadata:"code"===e.notebookConfig.defaultCell?{trusted:!0}:{}}),e.activeCellIndex=s,e.deselectAll(),Private$1.handleState(e,t,!0)},e.moveDown=function(e){t(e,1)},e.moveUp=function(e){t(e,-1)},e.changeCellType=function(e,t,r){if(!e.model||!e.activeCell)return;const s=Private$1.getState(e);Private$1.changeCellType(e,t,r),Private$1.handleState(e,s)},e.run=function(e,t,r,s){if(!e.model||!e.activeCell)return Promise.resolve(!1);const n=Private$1.getState(e),i=Private$1.runSelected(e,t,r,s);return Private$1.handleRunState(e,n),i},e.runCells=function(e,t,r,s,n){if(!e.model)return Promise.resolve(!1);const i=Private$1.getState(e),o=Private$1.runCells(e,t,r,s,n);return Private$1.handleRunState(e,i),o},e.runAndAdvance=async function(e,t,r,s){var n;if(!e.model||!e.activeCell)return Promise.resolve(!1);const i=Private$1.getState(e),o=Private$1.runSelected(e,t,r,s),a=e.model;return e.activeCellIndex===e.widgets.length-1?(a.sharedModel.insertCell(e.widgets.length,{cell_type:e.notebookConfig.defaultCell,metadata:"code"===e.notebookConfig.defaultCell?{trusted:!0}:{}}),e.activeCellIndex++,!1===(null===(n=e.activeCell)||void 0===n?void 0:n.inViewport)&&await libExports$2.signalToPromise(e.activeCell.inViewportChanged,200).catch(()=>{}),e.mode="edit"):e.activeCellIndex++,Private$1.handleRunState(e,i,"center"),o},e.runAndInsert=async function(e,t,r,s){var n;if(!e.model||!e.activeCell)return Promise.resolve(!1);const i=Private$1.getState(e),o=Private$1.runSelected(e,t,r,s);return e.model.sharedModel.insertCell(e.activeCellIndex+1,{cell_type:e.notebookConfig.defaultCell,metadata:"code"===e.notebookConfig.defaultCell?{trusted:!0}:{}}),e.activeCellIndex++,!1===(null===(n=e.activeCell)||void 0===n?void 0:n.inViewport)&&await libExports$2.signalToPromise(e.activeCell.inViewportChanged,200).catch(()=>{}),e.mode="edit",Private$1.handleRunState(e,i,"center"),o},e.runAll=function(e,t,r,s){if(!e.model||!e.activeCell)return Promise.resolve(!1);const n=Private$1.getState(e),i=e.widgets.length,o=Private$1.runCells(e,e.widgets,t,r,s);return e.activeCellIndex=i,e.deselectAll(),Private$1.handleRunState(e,n),o},e.renderAllMarkdown=function(e){if(!e.model||!e.activeCell)return Promise.resolve(!1);const t=e.activeCellIndex,r=Private$1.getState(e);if(e.widgets.forEach((t,r)=>{"markdown"===t.model.type&&(e.select(t),e.activeCellIndex=r)}),"markdown"!==e.activeCell.model.type)return Promise.resolve(!0);const s=Private$1.runSelected(e);return e.activeCellIndex=t,Private$1.handleRunState(e,r),s},e.runAllAbove=function(e,t,r,s){const{activeCell:n,activeCellIndex:i,model:o}=e;if(!o||!n||i<1)return Promise.resolve(!1);const a=Private$1.getState(e),l=Private$1.runCells(e,e.widgets.slice(0,e.activeCellIndex),t,r,s);return e.deselectAll(),Private$1.handleRunState(e,a),l},e.runAllBelow=function(e,t,r,s){if(!e.model||!e.activeCell)return Promise.resolve(!1);const n=Private$1.getState(e),i=e.widgets.length,o=Private$1.runCells(e,e.widgets.slice(e.activeCellIndex),t,r,s);return e.activeCellIndex=i,e.deselectAll(),Private$1.handleRunState(e,n),o},e.replaceSelection=function(e,t){var r,s,n;e.model&&(null===(r=e.activeCell)||void 0===r?void 0:r.editor)&&(null===(n=(s=e.activeCell.editor).replaceSelection)||void 0===n||n.call(s,t))},e.selectAbove=function(e){if(!e.model||!e.activeCell)return;const t=e.layout.footer;if(t&&document.activeElement===t.node)return t.node.blur(),void(e.mode="command");if(0===e.activeCellIndex)return;let r=e.activeCellIndex-1;for(;r>=0;){const t=e.widgets[r];if(!t.inputHidden&&!t.isHidden)break;r-=1}const s=Private$1.getState(e);e.activeCellIndex=r,e.deselectAll(),Private$1.handleState(e,s,!0)},e.selectBelow=function(e){if(!e.model||!e.activeCell)return;let t=e.widgets.length-1;for(;e.widgets[t].isHidden||e.widgets[t].inputHidden;)t-=1;if(e.activeCellIndex===t){const t=e.layout.footer;return void(null==t||t.node.focus())}let r=e.activeCellIndex+1;for(;r<t;){let t=e.widgets[r];if(!t.inputHidden&&!t.isHidden)break;r+=1}const s=Private$1.getState(e);e.activeCellIndex=r,e.deselectAll(),Private$1.handleState(e,s,!0)},e.insertSameLevelHeadingAbove=async function(e){if(!e.model||!e.activeCell)return;let t=Private$1.Headings.determineHeadingLevel(e.activeCell,e);-1==t?await Private$1.Headings.insertHeadingAboveCellIndex(0,1,e):await Private$1.Headings.insertHeadingAboveCellIndex(e.activeCellIndex,t,e)},e.insertSameLevelHeadingBelow=async function(e){if(!e.model||!e.activeCell)return;let t=Private$1.Headings.determineHeadingLevel(e.activeCell,e);t=t>-1?t:1;let r=Private$1.Headings.findLowerEqualLevelHeadingBelow(e.activeCell,e,!0);await Private$1.Headings.insertHeadingAboveCellIndex(-1==r?e.model.cells.length:r,t,e)},e.selectHeadingAboveOrCollapseHeading=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);let r=o(e.activeCell);if(r.isHeading&&!r.collapsed)i(e.activeCell,!0,e);else{let t=Private$1.Headings.findLowerEqualLevelParentHeadingAbove(e.activeCell,e,!0);t>-1&&(e.activeCellIndex=t)}e.deselectAll(),Private$1.handleState(e,t,!0)},e.selectHeadingBelowOrExpandHeading=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);let r=o(e.activeCell);if(r.isHeading&&r.collapsed)i(e.activeCell,!1,e);else{let t=Private$1.Headings.findHeadingBelow(e.activeCell,e,!0);t>-1&&(e.activeCellIndex=t)}e.deselectAll(),Private$1.handleState(e,t,!0)},e.extendSelectionAbove=function(e,t=!1){if(!e.model||!e.activeCell)return;if(0===e.activeCellIndex)return;const r=Private$1.getState(e);e.mode="command",t?e.extendContiguousSelectionTo(0):e.extendContiguousSelectionTo(e.activeCellIndex-1),Private$1.handleState(e,r,!0)},e.extendSelectionBelow=function(e,t=!1){if(!e.model||!e.activeCell)return;if(e.activeCellIndex===e.widgets.length-1)return;const r=Private$1.getState(e);e.mode="command",t?e.extendContiguousSelectionTo(e.widgets.length-1):e.extendContiguousSelectionTo(e.activeCellIndex+1),Private$1.handleState(e,r,!0)},e.selectAll=function(e){e.model&&e.activeCell&&e.widgets.forEach(t=>{e.select(t)})},e.deselectAll=function(e){e.model&&e.activeCell&&e.deselectAll()},e.copy=function(e){Private$1.copyOrCut(e,!1)},e.copyToSystemClipboard=async function(e){await Private$1.copyOrCutToSystemClipboard(e,!1)},e.cut=function(e){Private$1.copyOrCut(e,!0)},e.cutToSystemClipboard=async function(e){await Private$1.copyOrCutToSystemClipboard(e,!0)},e.paste=function(e,t="below"){const s=Clipboard.getInstance();if(!s.hasData(JUPYTER_CELL_MIME$1))return;r(e,t,s.getData(JUPYTER_CELL_MIME$1),!0),a(e)},e.pasteFromSystemClipboard=async function(e,t="below"){const s=SystemClipboard.getInstance(),n=await s.getData(JUPYTER_CELL_MIME$1);if(null==n)return;r(e,t,n,!0),a(e)},e.duplicate=function(e,t="below"){const s=Private$1.selectedCells(e);s&&0!==s.length&&r(e,t,s,!1)},e.undo=function(e){if(!e.model)return;const t=Private$1.getState(e);e.mode="command",e.model.sharedModel.undo(),e.deselectAll(),Private$1.handleState(e,t)},e.redo=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.mode="command",e.model.sharedModel.redo(),e.deselectAll(),Private$1.handleState(e,t)},e.toggleAllLineNumbers=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e),r=e.editorConfig,s=!(r.code.lineNumbers&&r.markdown.lineNumbers&&r.raw.lineNumbers),n={code:{...r.code,lineNumbers:s},markdown:{...r.markdown,lineNumbers:s},raw:{...r.raw,lineNumbers:s}};e.editorConfig=n,Private$1.handleState(e,t)},e.clearOutputs=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);let r=-1;for(const s of e.model.cells){const t=e.widgets[++r];e.isSelectedOrActive(t)&&"code"===s.type&&(s.sharedModel.transact(()=>{s.clearExecution(),t.outputHidden=!1},!1),Private$1.outputCleared.emit({notebook:e,cell:t}))}Private$1.handleState(e,t,!0)},e.clearAllOutputs=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);let r=-1;for(const s of e.model.cells){const t=e.widgets[++r];"code"===s.type&&(s.sharedModel.transact(()=>{s.clearExecution(),t.outputHidden=!1},!1),Private$1.outputCleared.emit({notebook:e,cell:t}))}Private$1.handleState(e,t,!0)},e.hideCode=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.widgets.forEach(t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.inputHidden=!0)}),Private$1.handleState(e,t)},e.showCode=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.widgets.forEach(t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.inputHidden=!1)}),Private$1.handleState(e,t)},e.hideAllCode=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.widgets.forEach(e=>{"code"===e.model.type&&(e.inputHidden=!0)}),Private$1.handleState(e,t)},e.showAllCode=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.widgets.forEach(e=>{"code"===e.model.type&&(e.inputHidden=!1)}),Private$1.handleState(e,t)},e.hideOutput=s,e.showOutput=n,e.toggleOutput=function(e){if(e.model&&e.activeCell){for(const t of e.widgets)if(e.isSelectedOrActive(t)&&"code"===t.model.type&&!1===t.outputHidden)return s(e);return n(e)}},e.hideAllOutputs=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.widgets.forEach(e=>{"code"===e.model.type&&(e.outputHidden=!0)}),Private$1.handleState(e,t,!0)},e.renderSideBySide=function(e){e.renderingLayout="side-by-side"},e.renderDefault=function(e){e.renderingLayout="default"},e.showAllOutputs=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.widgets.forEach(e=>{"code"===e.model.type&&(e.outputHidden=!1)}),Private$1.handleState(e,t)},e.enableOutputScrolling=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.widgets.forEach(t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.outputsScrolled=!0)}),Private$1.handleState(e,t,!0)},e.disableOutputScrolling=function(e){if(!e.model||!e.activeCell)return;const t=Private$1.getState(e);e.widgets.forEach(t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.outputsScrolled=!1)}),Private$1.handleState(e,t)},e.selectLastRunCell=function(e){let t=null,r=null;e.widgets.forEach((e,s)=>{if("code"===e.model.type){const n=e.model.getMetadata("execution");if(n&&JSONExt.isObject(n)&&void 0!==n["iopub.status.busy"]){const e=n["iopub.status.busy"].toString();if(e){const n=new Date(e);(!t||n>=t)&&(t=n,r=s)}}}}),null!==r&&(e.activeCellIndex=r)},e.setMarkdownHeader=function(e,t,r){if(!e.model||!e.activeCell)return;const s=Private$1.getState(e),n=e.model.cells;t=Math.min(Math.max(t,1),6),e.widgets.forEach((r,s)=>{e.isSelectedOrActive(r)&&Private$1.setMarkdownHeader(n.get(s),t)}),Private$1.changeCellType(e,"markdown",r),Private$1.handleState(e,s)},e.collapseAllHeadings=function(t){const r=Private$1.getState(t);for(const s of t.widgets)e.getHeadingInfo(s).isHeading&&(e.setHeadingCollapse(s,!0,t),e.setCellCollapse(s,!0));t.activeCellIndex=0,Private$1.handleState(t,r,!0)},e.expandAllHeadings=function(t){for(const r of t.widgets)e.getHeadingInfo(r).isHeading&&(e.setHeadingCollapse(r,!1,t),e.setCellCollapse(r,!1))},e.expandParent=function e(t,r){let s=function(e,t){const r=findIndex(t.widgets,(t,r)=>e.model.id===t.model.id);if(-1===r)return;if(r>=t.widgets.length)return;let s=o(t.widgets[r]);for(let n=r-1;n>=0;n--)if(n<t.widgets.length){let e=o(t.widgets[n]);if(e.isHeading&&e.headingLevel<s.headingLevel)return t.widgets[n]}}(t,r);s&&(o(s).collapsed||s.isHidden)&&(s.isHidden&&e(s,r),o(s).collapsed&&i(s,!1,r))},e.findNextParentHeading=function(e,t){let r=findIndex(t.widgets,(t,r)=>e.model.id===t.model.id);if(-1===r)return-1;let s=o(e);for(r+=1;r<t.widgets.length;r++){let e=o(t.widgets[r]);if(e.isHeading&&e.headingLevel<=s.headingLevel)return r}return t.widgets.length},e.setHeadingCollapse=i,e.toggleCurrentHeadingCollapse=function(t){if(!t.activeCell||void 0===t.activeCellIndex)return;let r=e.getHeadingInfo(t.activeCell);r.isHeading&&e.setHeadingCollapse(t.activeCell,!r.collapsed,t),t.scrollToItem(t.activeCellIndex).catch(e=>{})},e.setCellCollapse=function(e,t){e instanceof MarkdownCell?e.headingCollapsed=t:e.setHidden(t)},e.getHeadingInfo=o,e.trust=function(e,t){const r=(t=t||nullTranslator).load("jupyterlab");if(!e.model)return Promise.resolve();const s=every$2(e.model.cells,e=>e.trusted),n=reactExports.createElement("p",null,r.__("A trusted Jupyter notebook may execute hidden malicious code when you open it."),reactExports.createElement("br",null),r.__('Selecting "Trust" will re-render this notebook in a trusted state.'),reactExports.createElement("br",null),r.__("For more information, see")," ",reactExports.createElement("a",{href:"https://jupyter-server.readthedocs.io/en/stable/operators/security.html",target:"_blank",rel:"noopener noreferrer"},r.__("the Jupyter security documentation")),".");return s?showDialog({body:r.__("Notebook is already trusted"),buttons:[Dialog.okButton()]}).then(()=>{}):showDialog({body:n,title:r.__("Trust this notebook?"),buttons:[Dialog.cancelButton(),Dialog.warnButton({label:r.__("Trust"),ariaLabel:r.__("Confirm Trusting this notebook")})]}).then(t=>{if(t.button.accept&&e.model)for(const r of e.model.cells)r.trusted=!0})},e.focusActiveCell=a,e.accessPreviousHistory=async function(e){if(!e.notebookConfig.accessKernelHistory)return;const t=e.activeCell;if(t&&e.kernelHistory){const r=await e.kernelHistory.back(t);e.kernelHistory.updateEditor(t,r)}},e.accessNextHistory=async function(e){if(!e.notebookConfig.accessKernelHistory)return;const t=e.activeCell;if(t&&e.kernelHistory){const r=await e.kernelHistory.forward(t);e.kernelHistory.updateEditor(t,r)}}}(NotebookActions||(NotebookActions={})),function(e){function t(e){var t,r;return{wasFocused:e.node.contains(document.activeElement),activeCellId:null!==(r=null===(t=e.activeCell)||void 0===t?void 0:t.model.id)&&void 0!==r?r:null}}async function r(e,t,r=!1){const{activeCell:s,activeCellIndex:n}=e;r&&s&&await e.scrollToItem(n,"auto",0).catch(e=>{}),(t.wasFocused||"edit"===e.mode)&&e.activate()}function s(t,r,s,n,i){const o=r[r.length-1];t.mode="command";let a=!1;return Promise.all(r.map(r=>{if("code"===r.model.type&&t.notebookConfig.enableKernelInitNotification&&s&&"initializing"===s.kernelDisplayStatus&&!a){a=!0;const e=(i=i||nullTranslator).load("jupyterlab");return Notification.emit(e.__(`Kernel '${s.kernelDisplayName}' for '${s.path}' is still initializing. You can run code cells when the kernel has initialized.`),"warning",{autoClose:!1}),Promise.resolve(!1)}return"code"===r.model.type&&t.notebookConfig.enableKernelInitNotification&&a?Promise.resolve(!1):async function(t,r,s,n,i){e.executor||console.warn("Requesting cell execution without any cell executor defined. Falling back to default execution.");const o={cell:r,notebook:t.model,notebookConfig:t.notebookConfig,onCellExecuted:r=>{e.executed.emit({notebook:t,...r})},onCellExecutionScheduled:r=>{e.executionScheduled.emit({notebook:t,...r})},sessionContext:s,sessionDialogs:n,translator:i};return e.executor?e.executor.runCell(o):runCell(o)}(t,r,s,n,i)})).then(r=>!t.isDisposed&&(e.selectionExecuted.emit({notebook:t,lastCell:o}),t.update(),r.every(e=>e))).catch(s=>{if(!s.message.startsWith("KernelReplyNotOK"))throw s;return r.map(e=>{"code"===e.model.type&&null==e.model.executionCount&&(e.model.executionState="idle")}),e.selectionExecuted.emit({notebook:t,lastCell:o}),t.update(),!1})}function n(e){const t=e.model.sharedModel,r=[];e.mode="command",e.widgets.forEach((t,s)=>{var n;const i=!1!==t.model.getMetadata("deletable");e.isSelectedOrActive(t)&&i&&(r.push(s),null===(n=e.model)||void 0===n||n.deletedCells.push(t.model.id))}),r.length>0&&(t.transact(()=>{r.reverse().forEach(e=>{t.deleteCell(e)}),t.cells.length==r.length&&t.insertCell(0,{cell_type:e.notebookConfig.defaultCell,metadata:"code"===e.notebookConfig.defaultCell?{trusted:!0}:{}})}),e.activeCellIndex=r[0]-r.length+1),e.deselectAll()}e.executed=new Signal({}),e.executionScheduled=new Signal({}),e.selectionExecuted=new Signal({}),e.outputCleared=new Signal({}),e.getState=t,e.handleState=r,e.handleRunState=async function(e,t,r){const{activeCell:s,activeCellIndex:n}=e;s&&await e.scrollToItem(n,"smart",0,r).catch(e=>{}),(t.wasFocused||"edit"===e.mode)&&e.activate()},e.runCells=s,e.runSelected=function(e,t,r,n){e.mode="command";let i=e.activeCellIndex;const o=e.widgets.filter((t,r)=>{const s=e.isSelectedOrActive(t);return s&&(i=r),s});return e.activeCellIndex=i,e.deselectAll(),s(e,o,t,r,n)},e.selectedCells=function(e){return e.widgets.filter(t=>e.isSelectedOrActive(t)).map(e=>e.model.toJSON()).map(e=>(void 0!==e.metadata.deletable&&delete e.metadata.deletable,e))},e.copyOrCut=function(s,i){if(!s.model||!s.activeCell)return;const o=t(s),a=Clipboard.getInstance();s.mode="command",a.clear();const l=e.selectedCells(s);a.setData(JUPYTER_CELL_MIME$1,l),i?n(s):s.deselectAll(),s.lastClipboardInteraction=i?"cut":"copy",r(s,o)},e.copyOrCutToSystemClipboard=async function(s,i){if(!s.model||!s.activeCell)return;const o=t(s),a=SystemClipboard.getInstance();s.mode="command",a.clear();const l=e.selectedCells(s);await a.setData(JUPYTER_CELL_MIME$1,l),i?n(s):s.deselectAll(),s.lastClipboardInteraction=i?"cut":"copy",r(s,o)},e.changeCellType=function(e,t,r){const s=e.model.sharedModel;e.widgets.forEach((n,i)=>{if(e.isSelectedOrActive(n)){if("code"===n.model.type&&n.outputArea.pendingInput){const e=(r=r||nullTranslator).load("jupyterlab");return void showDialog({title:e.__("Cell type not changed due to pending input"),body:e.__("The cell type has not been changed to avoid kernel deadlock as this cell has pending input! Submit your pending input and try again."),buttons:[Dialog.okButton()]})}if(0==n.model.getMetadata("editable")){const e=(r=r||nullTranslator).load("jupyterlab");return void showDialog({title:e.__("Cell is read-only"),body:e.__("The cell is read-only, its type cannot be changed!"),buttons:[Dialog.okButton()]})}if(n.model.type!==t){const e=n.model.toJSON();s.transact(()=>{s.deleteCell(i),e.metadata.trusted="code"===t||void 0;const r=s.insertCell(i,{id:e.id,cell_type:t,source:e.source,metadata:e.metadata});e.attachments&&["markdown","raw"].includes(t)&&(r.attachments=e.attachments)})}"markdown"===t&&((n=e.widgets[i]).rendered=!1)}}),e.deselectAll()},e.deleteCells=n,e.setMarkdownHeader=function(e,t){let r=e.sharedModel.getSource();const s=Array(t+1).join("#")+" ",n=/^(#+\s*)|^(\s*)/.exec(r);n&&(r=r.slice(n[0].length)),e.sharedModel.setSource(s+r)},function(t){function r(e,t,r=!1,s=!1){let n=t.widgets.indexOf(e)-(r?1:0);for(;n>=0;){if(NotebookActions.getHeadingInfo(t.widgets[n]).isHeading)return s?n:t.widgets[n];n--}return s?-1:null}t.findParentHeading=r,t.findLowerEqualLevelParentHeadingAbove=function(t,r,s=!1){let n=e.Headings.determineHeadingLevel(t,r);-1==n&&(n=1);let i=r.widgets.indexOf(t)-1;for(;i>=0;){let e=r.widgets[i],t=NotebookActions.getHeadingInfo(e);if(t.isHeading&&t.headingLevel<=n)return s?i:e;i--}return s?-1:null},t.findLowerEqualLevelHeadingBelow=function(t,r,s=!1){let n=e.Headings.determineHeadingLevel(t,r);-1==n&&(n=1);let i=r.widgets.indexOf(t)+1;for(;i<r.widgets.length;){let e=r.widgets[i],t=NotebookActions.getHeadingInfo(e);if(t.isHeading&&t.headingLevel<=n)return s?i:e;i++}return s?-1:null},t.findHeadingBelow=function(e,t,r=!1){let s=t.widgets.indexOf(e)+1;for(;s<t.widgets.length;){let e=t.widgets[s];if(NotebookActions.getHeadingInfo(e).isHeading)return r?s:e;s++}return r?-1:null},t.determineHeadingLevel=function(e,t){let s=NotebookActions.getHeadingInfo(e);if(s.isHeading)return s.headingLevel;{let s=r(e,t,!0);return null==s?-1:NotebookActions.getHeadingInfo(s).headingLevel}},t.insertHeadingAboveCellIndex=async function(t,r,s){var n;r=Math.min(Math.max(r,1),6);const i=e.getState(s);s.model.sharedModel.insertCell(t,{cell_type:"markdown",source:"#".repeat(r)+" "}),s.activeCellIndex=t,!1===(null===(n=s.activeCell)||void 0===n?void 0:n.inViewport)&&await libExports$2.signalToPromise(s.activeCell.inViewportChanged,200).catch(()=>{}),s.deselectAll(),e.handleState(s,i,!0),s.mode="edit",s.widgets[t].setHidden(!1)}}(e.Headings||(e.Headings={}))}(Private$1||(Private$1={}));class DocumentModel extends CodeEditor.Model{constructor(e={}){var t;super({sharedModel:e.sharedModel}),this._defaultLang="",this._dirty=!1,this._readOnly=!1,this._contentChanged=new Signal(this),this._stateChanged=new Signal(this),this._defaultLang=null!==(t=e.languagePreference)&&void 0!==t?t:"",this._collaborationEnabled=!!e.collaborationEnabled,this.sharedModel.changed.connect(this._onStateChanged,this)}get contentChanged(){return this._contentChanged}get stateChanged(){return this._stateChanged}get dirty(){return this._dirty}set dirty(e){const t=this._dirty;e!==t&&(this._dirty=e,this.triggerStateChange({name:"dirty",oldValue:t,newValue:e}))}get readOnly(){return this._readOnly}set readOnly(e){if(e===this._readOnly)return;const t=this._readOnly;this._readOnly=e,this.triggerStateChange({name:"readOnly",oldValue:t,newValue:e})}get defaultKernelName(){return""}get defaultKernelLanguage(){return this._defaultLang}get collaborative(){return this._collaborationEnabled}toString(){return this.sharedModel.getSource()}fromString(e){this.sharedModel.setSource(e)}toJSON(){return JSON.parse(this.sharedModel.getSource()||"null")}fromJSON(e){this.fromString(JSON.stringify(e))}initialize(){}triggerStateChange(e){this._stateChanged.emit(e)}triggerContentChange(){this._contentChanged.emit(void 0),this.dirty=!0}_onStateChanged(e,t){t.sourceChange&&this.triggerContentChange(),t.stateChange&&t.stateChange.forEach(e=>{"dirty"===e.name?this.dirty=e.newValue:e.oldValue!==e.newValue&&this.triggerStateChange({newValue:void 0,oldValue:void 0,...e})})}}class ABCWidgetFactory{constructor(e){this._isDisposed=!1,this._widgetCreated=new Signal(this),this._translator=e.translator||nullTranslator,this._name=e.name,this._label=e.label||e.name,this._readOnly=void 0!==e.readOnly&&e.readOnly,this._defaultFor=e.defaultFor?e.defaultFor.slice():[],this._defaultRendered=(e.defaultRendered||[]).slice(),this._fileTypes=e.fileTypes.slice(),this._modelName=e.modelName||"text",this._preferKernel=!!e.preferKernel,this._canStartKernel=!!e.canStartKernel,this._shutdownOnClose=!!e.shutdownOnClose,this._autoStartDefault=!!e.autoStartDefault,this._toolbarFactory=e.toolbarFactory,this._contentProviderId=e.contentProviderId}get widgetCreated(){return this._widgetCreated}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,Signal.clearData(this))}get readOnly(){return this._readOnly}get name(){return this._name}get label(){return this._label}get fileTypes(){return this._fileTypes.slice()}get modelName(){return this._modelName}get defaultFor(){return this._defaultFor.slice()}get defaultRendered(){return this._defaultRendered.slice()}get preferKernel(){return this._preferKernel}get canStartKernel(){return this._canStartKernel}get translator(){return this._translator}get shutdownOnClose(){return this._shutdownOnClose}set shutdownOnClose(e){this._shutdownOnClose=e}get autoStartDefault(){return this._autoStartDefault}set autoStartDefault(e){this._autoStartDefault=e}createNew(e,t){var r;const s=this.createNewWidget(e,t);return setToolbar(s,null!==(r=this._toolbarFactory)&&void 0!==r?r:this.defaultToolbarFactory.bind(this)),this._widgetCreated.emit(s),s}get contentProviderId(){return this._contentProviderId}set contentProviderId(e){if(this._contentProviderId&&e!==this._contentProviderId)throw Error(`Cannot change content provider on factory with an existing provider: ${this._contentProviderId}`);this._contentProviderId=e}defaultToolbarFactory(e){return[]}}const DIRTY_CLASS$1="jp-mod-dirty";class DocumentWidget extends MainAreaWidget{constructor(e){var t;e.reveal=Promise.all([e.reveal,e.context.ready]),super(e),this._trans=(null!==(t=e.translator)&&void 0!==t?t:nullTranslator).load("jupyterlab"),this.context=e.context,this.context.pathChanged.connect(this._onPathChanged,this),this._onPathChanged(this.context,this.context.path),this.context.model.stateChanged.connect(this._onModelStateChanged,this),this.context.ready.then(()=>{this._handleDirtyState()}),this.title.changed.connect(this._onTitleChanged,this)}setFragment(e){}async _onTitleChanged(e){const t=this.title.label,r=this.context.localPath.split("/").pop()||this.context.localPath;if(t!==r){if(t.length>0&&!/[\/\\:]/.test(t)){const e=this.context.path;if(await this.context.rename(t),this.context.path!==e)return}this.title.label=r}}_onPathChanged(e,t){this.title.label=libExports$2.PathExt.basename(e.localPath),this.isUntitled=!1}_onModelStateChanged(e,t){var r;if("dirty"===t.name&&this._handleDirtyState(),!this.context.model.dirty&&!1===(null===(r=this.context.contentsModel)||void 0===r?void 0:r.writable)){const e=createReadonlyLabel(this);this.toolbar.insertBefore("kernelName","read-only-indicator",e)||this.toolbar.addItem("read-only-indicator",e)}}_handleDirtyState(){this.context.model.dirty&&!this.title.className.includes(DIRTY_CLASS$1)?this.title.className+=` ${DIRTY_CLASS$1}`:this.title.className=this.title.className.replace(DIRTY_CLASS$1,"")}}const DROP_TARGET_CLASS="jp-mod-dropTarget",DROP_SOURCE_CLASS="jp-mod-dropSource";function isInScrollingNotebook(e){if(!e)return!1;const t=e.closest(".jp-WindowedPanel-viewport");if(t&&"true"==t.dataset.isScrolling)return!0;const r=e.getRootNode();return!!(r&&r instanceof ShadowRoot&&isInScrollingNotebook(r.host))}function isCodeMirrorElement(e){return!!e&&!!e.closest(".cm-editor")}window.IntersectionObserver=class extends window.IntersectionObserver{constructor(e,t){super(e=>{this._delayCallbackInScrollingNotebook(e)},t),this.callback=e,this._delayCallbackInScrollingNotebook=e=>{const t=[],r=[];for(const s of e)isInScrollingNotebook(s.target)&&!isCodeMirrorElement(s.target)?t.push(s):r.push(s);r.length&&this.callback(r,this),t.length&&this._throttler.invoke(t)},this._throttler=new Throttler(e=>{this._delayCallbackInScrollingNotebook(e)},{limit:1e3,edge:"trailing"})}},window.ResizeObserver=class extends window.ResizeObserver{constructor(e){super(e=>{this._delayCallbackInScrollingNotebook(e)}),this.callback=e,this._delayCallbackInScrollingNotebook=e=>{const t=[],r=[];for(const s of e)isInScrollingNotebook(s.target)?t.push(s):r.push(s);r.length&&this.callback(r,this),t.length&&this._throttler.invoke(t)},this._throttler=new Throttler(e=>{this._delayCallbackInScrollingNotebook(e)},{limit:1e3,edge:"trailing"})}};class NotebookViewModel extends WindowedListModel{constructor(e,t){super(t),this.cells=e,this.estimateWidgetSize=e=>{const t=this.cells[e];if(!t)return console.warn(`estimateWidgetSize requested for cell ${e} in notebook with only ${this.cells.length} cells`),0;const r=t.model,s=this.cellsEstimatedHeight.get(r.id);if("number"==typeof s)return s;const n=r.sharedModel.getSource().split("\n").length;let i=0;if(r instanceof CodeCellModel&&!r.isDisposed)for(let o=0;o<r.outputs.length;o++){const e=r.outputs.get(o).data["text/plain"];"string"==typeof e?i+=e.split("\n").length:Array.isArray(e)&&(i+=e.join("").split("\n").length)}return NotebookViewModel.DEFAULT_EDITOR_LINE_HEIGHT*(n+i)+NotebookViewModel.DEFAULT_CELL_MARGIN},this.widgetRenderer=e=>this.cells[e],this.scrollDownThreshold=NotebookViewModel.DEFAULT_CELL_MARGIN/2+NotebookViewModel.DEFAULT_EDITOR_LINE_HEIGHT,this.scrollUpThreshold=NotebookViewModel.DEFAULT_CELL_MARGIN/2,this.cellsEstimatedHeight=/* @__PURE__ */new Map,this._emitEstimatedHeightChanged=new Debouncer(()=>{this._stateChanged.emit({name:"estimatedWidgetSize",newValue:null,oldValue:null})}),this._estimatedWidgetSize=NotebookViewModel.DEFAULT_CELL_SIZE}setEstimatedWidgetSize(e,t){null===t?this.cellsEstimatedHeight.has(e)&&this.cellsEstimatedHeight.delete(e):(this.cellsEstimatedHeight.set(e,t),this._emitEstimatedHeightChanged.invoke().catch(e=>{console.error("Fail to trigger an update following a estimated height update.",e)}))}}NotebookViewModel.DEFAULT_CELL_SIZE=39,NotebookViewModel.DEFAULT_EDITOR_LINE_HEIGHT=17,NotebookViewModel.DEFAULT_CELL_MARGIN=22;class NotebookWindowedLayout extends WindowedLayout{constructor(){super(...arguments),this._header=null,this._footer=null,this._willBeRemoved=null,this._topHiddenCodeCells=-1}get header(){return this._header}set header(e){var t;this._header&&this._header.isAttached&&Widget.detach(this._header),this._header=e,this._header&&(null===(t=this.parent)||void 0===t?void 0:t.isAttached)&&Widget.attach(this._header,this.parent.node)}get footer(){return this._footer}set footer(e){var t;this._footer&&this._footer.isAttached&&Widget.detach(this._footer),this._footer=e,this._footer&&(null===(t=this.parent)||void 0===t?void 0:t.isAttached)&&Widget.attach(this._footer,this.parent.outerNode)}get activeCell(){return this._activeCell}set activeCell(e){this._activeCell=e}dispose(){var e,t;this.isDisposed||(null===(e=this._header)||void 0===e||e.dispose(),null===(t=this._footer)||void 0===t||t.dispose(),super.dispose())}removeWidget(e){const t=this.widgets.indexOf(e);t>=0?this.removeWidgetAt(t):e===this._willBeRemoved&&this.parent&&this.detachWidget(t,e)}attachWidget(e,t){const r=t.isPlaceholder(),s=this._isSoftHidden(t);if(this.parent.isAttached&&!s&&MessageLoop.sendMessage(t,Widget.Msg.BeforeAttach),s&&this._toggleSoftVisibility(t,!0),!r&&t instanceof CodeCell&&t.node.parentElement)t.node.style.display="",this._topHiddenCodeCells=-1,this.parent.isAttached&&!t.isAttached&&t.setFlag(Widget.Flag.IsAttached);else if(!s){const e=this._findNearestChildBinarySearch(this.parent.viewportNode.childElementCount-1,0,parseInt(t.dataset.windowedListIndex,10)+1);let r=this.parent.viewportNode.children[e];this.parent.viewportNode.insertBefore(t.node,r),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterAttach)}t.inViewport=!0}detachWidget(e,t){if(t.inViewport=!1,t===this.activeCell&&t!==this._willBeRemoved)return void this._toggleSoftVisibility(t,!1);t.node.querySelector("defs,.myst")?this._toggleSoftVisibility(t,!1):(t instanceof CodeCell&&!t.node.classList.contains(DROP_SOURCE_CLASS)&&t!==this._willBeRemoved?(t.node.style.display="none",this._topHiddenCodeCells=-1):(this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.BeforeDetach),this.parent.viewportNode.removeChild(t.node),t.node.classList.remove(DROP_TARGET_CLASS)),this.parent.isAttached&&MessageLoop.sendMessage(t,Widget.Msg.AfterDetach))}moveWidget(e,t,r){if(this._topHiddenCodeCells<0){this._topHiddenCodeCells=0;for(let e=0;e<this.parent.viewportNode.children.length;e++){if("none"!=this.parent.viewportNode.children[e].style.display)break;this._topHiddenCodeCells++}}const s=this.parent.viewportNode.children[t+this._topHiddenCodeCells];e<t?s.insertAdjacentElement("afterend",r.node):s.insertAdjacentElement("beforebegin",r.node)}onAfterAttach(e){super.onAfterAttach(e),this._header&&!this._header.isAttached&&Widget.attach(this._header,this.parent.node,this.parent.node.firstElementChild),this._footer&&!this._footer.isAttached&&Widget.attach(this._footer,this.parent.outerNode)}onBeforeDetach(e){var t,r;(null===(t=this._header)||void 0===t?void 0:t.isAttached)&&Widget.detach(this._header),(null===(r=this._footer)||void 0===r?void 0:r.isAttached)&&Widget.detach(this._footer),super.onBeforeDetach(e)}onChildRemoved(e){this._willBeRemoved=e.child,super.onChildRemoved(e),this._willBeRemoved=null}_toggleSoftVisibility(e,t){t?(e.node.style.opacity="",e.node.style.height="",e.node.style.padding=""):(e.node.style.opacity="0",e.node.style.height="0",e.node.style.padding="0")}_isSoftHidden(e){return"0"===e.node.style.opacity}_findNearestChildBinarySearch(e,t,r){for(;t<=e;){const s=t+Math.floor((e-t)/2),n=parseInt(this.parent.viewportNode.children[s].dataset.windowedListIndex,10);if(n===r)return s;n<r?t=s+1:n>r&&(e=s-1)}return t>0?t:0}}const NOTEBOOK_FOOTER_CLASS="jp-Notebook-footer";class NotebookFooter extends Widget{constructor(e){super({node:document.createElement("button")}),this.notebook=e;const t=e.translator.load("jupyterlab");this.addClass(NOTEBOOK_FOOTER_CLASS),this.node.setAttribute("tabindex","-1"),this.node.innerText=t.__("Click to add a cell.")}handleEvent(e){switch(e.type){case"click":this.onClick();break;case"keydown":if("ArrowUp"===e.key){this.onArrowUp();break}}}onClick(){this.notebook.widgets.length>0&&(this.notebook.activeCellIndex=this.notebook.widgets.length-1),NotebookActions.insertBelow(this.notebook),NotebookActions.focusActiveCell(this.notebook)}onArrowUp(){}onAfterAttach(e){super.onAfterAttach(e),this.node.addEventListener("click",this),this.node.addEventListener("keydown",this)}onBeforeDetach(e){this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this),super.onBeforeDetach(e)}}const KERNEL_USER="jpKernelUser",CODE_RUNNER="jpCodeRunner",UNDOER="jpUndoer",NB_CLASS="jp-Notebook",NB_CELL_CLASS="jp-Notebook-cell",EDIT_CLASS="jp-mod-editMode",COMMAND_CLASS="jp-mod-commandMode",ACTIVE_CLASS="jp-mod-active",SELECTED_CLASS="jp-mod-selected",DIRTY_CLASS="jp-mod-dirty",OTHER_SELECTED_CLASS="jp-mod-multiSelected",UNCONFINED_CLASS="jp-mod-unconfined",READ_WRITE_CLASS="jp-mod-readWrite",DRAG_IMAGE_CLASS="jp-dragImage",SINGLE_DRAG_IMAGE_CLASS="jp-dragImage-singlePrompt",CELL_DRAG_CONTENT_CLASS="jp-dragImage-content",CELL_DRAG_PROMPT_CLASS="jp-dragImage-prompt",CELL_DRAG_MULTIPLE_BACK="jp-dragImage-multipleBack",JUPYTER_CELL_MIME="application/vnd.jupyter.cells",DRAG_THRESHOLD=5,MAXIMUM_TIME_REMAINING=50,HEADING_COLLAPSER_CLASS="jp-collapseHeadingButton",HEADING_COLLAPSER_VISBILITY_CONTROL_CLASS="jp-mod-showHiddenCellsButton",SIDE_BY_SIDE_CLASS="jp-mod-sideBySide";void 0===window.requestIdleCallback&&(window.requestIdleCallback=function(e){let t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},window.cancelIdleCallback=function(e){clearTimeout(e)});class StaticNotebook extends WindowedList{constructor(e){var t,r,s,n,i,o;const a=new Array,l="full"===(null!==(r=null===(t=e.notebookConfig)||void 0===t?void 0:t.windowingMode)&&void 0!==r?r:StaticNotebook.defaultNotebookConfig.windowingMode);super({model:new NotebookViewModel(a,{overscanCount:null!==(n=null===(s=e.notebookConfig)||void 0===s?void 0:s.overscanCount)&&void 0!==n?n:StaticNotebook.defaultNotebookConfig.overscanCount,windowingActive:l}),layout:new NotebookWindowedLayout,renderer:null!==(i=e.renderer)&&void 0!==i?i:WindowedList.defaultRenderer,scrollbar:!1}),this._cellCollapsed=new Signal(this),this._cellInViewportChanged=new Signal(this),this._renderingLayoutChanged=new Signal(this),this._contentVisibilityObserver=null,this.addClass(NB_CLASS),this.cellsArray=a,this._idleCallBack=null,this._editorConfig=StaticNotebook.defaultEditorConfig,this._notebookConfig=StaticNotebook.defaultNotebookConfig,this._mimetype=IEditorMimeTypeService.defaultMimeType,this._notebookModel=null,this._modelChanged=new Signal(this),this._modelContentChanged=new Signal(this),this.node.dataset[KERNEL_USER]="true",this.node.dataset[UNDOER]="true",this.node.dataset[CODE_RUNNER]="true",this.rendermime=e.rendermime,this.translator=e.translator||nullTranslator,this.contentFactory=e.contentFactory,this.editorConfig=e.editorConfig||StaticNotebook.defaultEditorConfig,this.notebookConfig=e.notebookConfig||StaticNotebook.defaultNotebookConfig,this._updateNotebookConfig(),this._mimetypeService=e.mimeTypeService,this.renderingLayout=null===(o=e.notebookConfig)||void 0===o?void 0:o.renderingLayout,this.kernelHistory=e.kernelHistory}get cellCollapsed(){return this._cellCollapsed}get cellInViewportChanged(){return this._cellInViewportChanged}get modelChanged(){return this._modelChanged}get modelContentChanged(){return this._modelContentChanged}get renderingLayoutChanged(){return this._renderingLayoutChanged}get model(){return this._notebookModel}set model(e){var t;if(e=e||null,this._notebookModel===e)return;const r=this._notebookModel;this._notebookModel=e,this._onModelChanged(r,e),this.onModelChanged(r,e),this._modelChanged.emit(void 0),this.viewModel.itemsList=null!==(t=null==e?void 0:e.cells)&&void 0!==t?t:null}get codeMimetype(){return this._mimetype}get widgets(){return this.cellsArray}get editorConfig(){return this._editorConfig}set editorConfig(e){this._editorConfig=e,this._updateEditorConfig()}get notebookConfig(){return this._notebookConfig}set notebookConfig(e){this._notebookConfig=e,this._updateNotebookConfig()}get renderingLayout(){return this._renderingLayout}set renderingLayout(e){var t;this._renderingLayout=e,"side-by-side"===this._renderingLayout?this.node.classList.add(SIDE_BY_SIDE_CLASS):this.node.classList.remove(SIDE_BY_SIDE_CLASS),this._renderingLayoutChanged.emit(null!==(t=this._renderingLayout)&&void 0!==t?t:"default")}dispose(){var e;this.isDisposed||(this._notebookModel=null,null===(e=this.layout.header)||void 0===e||e.dispose(),this._contentVisibilityObserver&&(this._contentVisibilityObserver.disconnect(),this._contentVisibilityObserver=null),super.dispose())}onBeforeDetach(e){this._contentVisibilityObserver&&(this._contentVisibilityObserver.disconnect(),this._contentVisibilityObserver=null),super.onBeforeDetach(e)}moveCell(e,t,r=1){if(!this.model)return;const s=Math.min(this.model.cells.length-1,Math.max(0,t));if(s===e)return;const n=new Array(r);let i=new Array(r);for(let o=0;o<r;o++){n[o]={};const t=this.widgets[e+o];if("markdown"===t.model.type)for(const e of["rendered","headingCollapsed"])n[o][e]=t[e];else if("code"===t.model.type){const e=t.model;i[o]=e.isDirty}}this.model.sharedModel.moveCells(e,s,r);for(let o=0;o<r;o++){const s=this.widgets[t+o],a=n[o];for(const e in a)s[e]=a[e];e>t?"code"===this.widgets[t+o].model.type&&(this.widgets[t+o].model.isDirty=i[o]):"code"===this.widgets[t+o-r+1].model.type&&(this.widgets[t+o-r+1].model.isDirty=i[o])}}renderCellOutputs(e){const t=this.viewModel.widgetRenderer(e);t instanceof CodeCell&&t.isPlaceholder()&&(t.dataset.windowedListIndex=`${e}`,this.layout.insertWidget(e,t),"full"===this.notebookConfig.windowingMode&&requestAnimationFrame(()=>{this.layout.removeWidget(t)}))}addHeader(){const e=this.translator.load("jupyterlab"),t=new Widget;t.node.textContent=e.__("The notebook is empty. Click the + button on the toolbar to add a new cell."),this.layout.header=t}removeHeader(){var e;null===(e=this.layout.header)||void 0===e||e.dispose(),this.layout.header=null}onModelChanged(e,t){}onModelContentChanged(e,t){this._modelContentChanged.emit(void 0)}onMetadataChanged(e,t){if("language_info"===t.key)this._updateMimetype()}onCellInserted(e,t){}onCellRemoved(e,t){}onUpdateRequest(e){"defer"===this.notebookConfig.windowingMode?this._runOnIdleTime():super.onUpdateRequest(e)}_onModelChanged(e,t){var r;if(e)for(e.contentChanged.disconnect(this.onModelContentChanged,this),e.metadataChanged.disconnect(this.onMetadataChanged,this),e.cells.changed.disconnect(this._onCellsChanged,this);this.cellsArray.length;)this._removeCell(0);if(!t)return void(this._mimetype=IEditorMimeTypeService.defaultMimeType);this._updateMimetype();const s=t.cells;null!==(r=t.collaborative)&&void 0!==r&&r||s.length||t.sharedModel.insertCell(0,{cell_type:this.notebookConfig.defaultCell,metadata:"code"===this.notebookConfig.defaultCell?{trusted:!0}:{}});let n=-1;for(const i of s)this._insertCell(++n,i);t.cells.changed.connect(this._onCellsChanged,this),t.metadataChanged.connect(this.onMetadataChanged,this),t.contentChanged.connect(this.onModelContentChanged,this)}_onCellsChanged(e,t){switch(this.removeHeader(),t.type){case"add":{let e=0;e=t.newIndex;for(const r of t.newValues)this._insertCell(e++,r);this._updateDataWindowedListIndex(t.newIndex,this.model.cells.length,t.newValues.length);break}case"remove":for(let e=t.oldValues.length;e>0;e--)this._removeCell(t.oldIndex);if(this._updateDataWindowedListIndex(t.oldIndex,this.model.cells.length+t.oldValues.length,-1*t.oldValues.length),!e.length){const e=this.model;requestAnimationFrame(()=>{!e||e.isDisposed||e.sharedModel.cells.length||e.sharedModel.insertCell(0,{cell_type:this.notebookConfig.defaultCell,metadata:"code"===this.notebookConfig.defaultCell?{trusted:!0}:{}})})}break;default:return}this.model.sharedModel.cells.length||this.addHeader(),this.update()}_insertCell(e,t){let r;switch(t.type){case"code":r=this._createCodeCell(t),r.model.mimeType=this._mimetype;break;case"markdown":r=this._createMarkdownCell(t),""===t.sharedModel.getSource()&&(r.rendered=!1);break;default:r=this._createRawCell(t)}r.inViewportChanged.connect(this._onCellInViewportChanged,this),r.addClass(NB_CELL_CLASS),ArrayExt.insert(this.cellsArray,e,r),this.onCellInserted(e,r),this._scheduleCellRenderOnIdle()}_createCodeCell(e){const t=this.rendermime,r={contentFactory:this.contentFactory,editorConfig:this.editorConfig.code,inputHistoryScope:this.notebookConfig.inputHistoryScope,showInputPlaceholder:this.notebookConfig.showInputPlaceholder,maxNumberOutputs:this.notebookConfig.maxNumberOutputs,model:e,placeholder:"none"!==this._notebookConfig.windowingMode,rendermime:t,translator:this.translator},s=this.contentFactory.createCodeCell(r);return s.syncCollapse=!0,s.syncEditable=!0,s.syncScrolled=!0,s.outputArea.inputRequested.connect((e,t)=>{this._onInputRequested(s).catch(e=>{console.error("Failed to scroll to cell requesting input.",e)}),t.disposed.connect(()=>{s.node.focus()})}),s}_createMarkdownCell(e){const t=this.rendermime,r={contentFactory:this.contentFactory,editorConfig:this.editorConfig.markdown,model:e,placeholder:"none"!==this._notebookConfig.windowingMode,rendermime:t,showEditorForReadOnlyMarkdown:this._notebookConfig.showEditorForReadOnlyMarkdown},s=this.contentFactory.createMarkdownCell(r);return s.syncCollapse=!0,s.syncEditable=!0,s.headingCollapsedChanged.connect(this._onCellCollapsed,this),s}_createRawCell(e){const t=this.contentFactory,r={editorConfig:this.editorConfig.raw,model:e,contentFactory:t,placeholder:"none"!==this._notebookConfig.windowingMode},s=this.contentFactory.createRawCell(r);return s.syncCollapse=!0,s.syncEditable=!0,s}_removeCell(e){const t=this.cellsArray[e];t.parent=null,ArrayExt.removeAt(this.cellsArray,e),this.onCellRemoved(e,t),t.dispose()}_updateMimetype(){var e;const t=null===(e=this._notebookModel)||void 0===e?void 0:e.getMetadata("language_info");if(t){this._mimetype=this._mimetypeService.getMimeTypeByLanguage(t);for(const e of this.widgets)"code"===e.model.type&&(e.model.mimeType=this._mimetype)}}_onCellCollapsed(e,t){e.getHeadings().then(()=>{NotebookActions.setHeadingCollapse(e,t,this),this._cellCollapsed.emit(e)}).catch(e=>{console.warn("Failed to resolve headings: ",e)})}_onCellInViewportChanged(e){this._cellInViewportChanged.emit(e)}async _onInputRequested(e){if(!e.inViewport){const t=this.widgets.findIndex(t=>t===e);if(t>=0){await this.scrollToItem(t);const r=e.node.querySelector(".jp-Stdin");r&&(ElementExt.scrollIntoViewIfNeeded(this.node,r),r.focus())}}}_scheduleCellRenderOnIdle(){"none"===this.notebookConfig.windowingMode||this.isDisposed||this._idleCallBack||(this._idleCallBack=requestIdleCallback(e=>{this._idleCallBack=null,this._runOnIdleTime(e.didTimeout?MAXIMUM_TIME_REMAINING:e.timeRemaining())},{timeout:3e3}))}_updateDataWindowedListIndex(e,t,r){for(let s=0;s<this.viewportNode.childElementCount;s++){const n=this.viewportNode.children[s],i=parseInt(n.dataset.windowedListIndex,10);i>=e&&i<t&&(n.dataset.windowedListIndex=`${i+r}`)}}_updateEditorConfig(){for(let e=0;e<this.widgets.length;e++){const t=this.widgets[e];let r={};switch(t.model.type){case"code":r=this._editorConfig.code;break;case"markdown":r=this._editorConfig.markdown;break;default:r=this._editorConfig.raw}t.updateEditorConfig({...r})}}async _runOnIdleTime(e=MAXIMUM_TIME_REMAINING){const t=Date.now();let r=0;for(;Date.now()-t<e&&r<this.cellsArray.length;){const e=this.cellsArray[r];if(e.isPlaceholder()&&["defer","full","contentVisibility"].includes(this.notebookConfig.windowingMode))if(await this._updateForDeferMode(e,r),"full"===this.notebookConfig.windowingMode)requestAnimationFrame(()=>{this.viewModel.setEstimatedWidgetSize(e.model.id,e.node.getBoundingClientRect().height),this.layout.removeWidget(e)});else if("contentVisibility"===this.notebookConfig.windowingMode){const t=e.node.getBoundingClientRect().height;this.viewModel.setEstimatedWidgetSize(e.model.id,t),e.node.style.containIntrinsicSize=`auto ${t}px`}r++}r<this.cellsArray.length?"defer"===this.notebookConfig.windowingMode&&this.viewportNode.clientHeight<this.node.clientHeight?await this._runOnIdleTime():this._scheduleCellRenderOnIdle():this._idleCallBack&&(window.cancelIdleCallback(this._idleCallBack),this._idleCallBack=null)}async _updateForDeferMode(e,t){e.dataset.windowedListIndex=`${t}`,this.layout.insertWidget(t,e),await e.ready}_updateNotebookConfig(){this.toggleClass("jp-mod-scrollPastEnd",this._notebookConfig.scrollPastEnd),this.toggleClass(HEADING_COLLAPSER_VISBILITY_CONTROL_CLASS,this._notebookConfig.showHiddenCellsButton);const e=this._notebookConfig.showEditorForReadOnlyMarkdown;if(void 0!==e)for(const r of this.cellsArray)"markdown"===r.model.type&&(r.showEditorForReadOnly=e);this.viewModel.windowingActive="full"===this._notebookConfig.windowingMode;const t="contentVisibility"===this._notebookConfig.windowingMode;this.viewportNode.classList.toggle("jp-content-visibility-mode",t),t?(requestAnimationFrame(()=>{this.cellsArray.forEach((e,t)=>{const r=this._viewModel.estimateWidgetSize(t);e.node.style.containIntrinsicSize=`auto ${r}px`})}),this._setupContentVisibilityObserver()):(this.cellsArray.forEach(e=>{e.node.style.removeProperty("contain-intrinsic-size"),e.node.style.removeProperty("content-visibility"),e.node.style.removeProperty("contain")}),this._contentVisibilityObserver&&(this._contentVisibilityObserver.disconnect(),this._contentVisibilityObserver=null))}onAfterAttach(e){super.onAfterAttach(e),"contentVisibility"===this._notebookConfig.windowingMode&&(this.viewportNode.classList.toggle("jp-content-visibility-mode",!0),requestAnimationFrame(()=>{this.cellsArray.forEach((e,t)=>{const r=this._viewModel.estimateWidgetSize(t);e.node.style.containIntrinsicSize=`auto ${r}px`,e.node.style.contentVisibility="auto",e.node.style.contain="layout style paint"})}),this._setupContentVisibilityObserver())}_setupContentVisibilityObserver(){var e;this._contentVisibilityObserver||(this._contentVisibilityObserver=new IntersectionObserver(e=>{for(const t of e){const e=t.target;t.isIntersecting?(e.style.contentVisibility="visible",e.style.contain="style"):(e.style.contentVisibility="auto",e.style.contain="layout style paint")}},{root:null,threshold:.1})),this.cellsArray.forEach(e=>this._contentVisibilityObserver.observe(e.node)),null===(e=this.model)||void 0===e||e.cells.changed.connect(()=>{requestAnimationFrame(()=>{this.cellsArray.forEach((e,t)=>{const r=this._viewModel.estimateWidgetSize(t);e.node.style.containIntrinsicSize=`auto ${r}px`,this._contentVisibilityObserver.observe(e.node)})})})}}!function(e){e.defaultEditorConfig={code:{lineNumbers:!1,lineWrap:!1,matchBrackets:!0,tabFocusable:!1},markdown:{lineNumbers:!1,lineWrap:!0,matchBrackets:!1,tabFocusable:!1},raw:{lineNumbers:!1,lineWrap:!0,matchBrackets:!1,tabFocusable:!1}},e.defaultNotebookConfig={enableKernelInitNotification:!1,showHiddenCellsButton:!0,scrollPastEnd:!0,defaultCell:"code",recordTiming:!1,inputHistoryScope:"global",maxNumberOutputs:50,showEditorForReadOnlyMarkdown:!0,disableDocumentWideUndoRedo:!0,autoRenderMarkdownCells:!1,renderingLayout:"default",sideBySideLeftMarginOverride:"10px",sideBySideRightMarginOverride:"10px",sideBySideOutputRatio:1,overscanCount:1,windowingMode:"contentVisibility",accessKernelHistory:!1,showInputPlaceholder:!0,showMinimap:!1};class t extends Cell.ContentFactory{createCodeCell(e){return new CodeCell(e).initializeState()}createMarkdownCell(e){return new MarkdownCell(e).initializeState()}createRawCell(e){return new RawCell(e).initializeState()}}e.ContentFactory=t}(StaticNotebook||(StaticNotebook={}));class ScrollbarItem{constructor(e){this.render=e=>{if(!this._element&&(this._element=this._createElement(),this._notebook.activeCellChanged.connect(this._updateActive),this._notebook.selectionChanged.connect(this._updateSelection),"code"===this._model.type)){const e=this._model;e.outputs.changed.connect(this._updatePrompt),e.stateChanged.connect(this._updateState)}this._model.type!=this._element.dataset.type&&(this._element.dataset.type=this._model.type);const t=this._model.sharedModel.source,r=t.length>1e4?t.substring(0,1e4):t;return r!==this._source.textContent&&(this._source.textContent=r),this._updateActive(),this._updateSelection(),this._updatePrompt(),this._updateDirty(),this._element},this.dispose=()=>{if(this._isDisposed=!0,this._notebook.activeCellChanged.disconnect(this._updateActive),this._notebook.selectionChanged.disconnect(this._updateSelection),"code"===this._model.type){const e=this._model;e.outputs&&(e.outputs.changed.disconnect(this._updatePrompt),e.stateChanged.disconnect(this._updateState))}},this._updateState=(e,t)=>{switch(t.name){case"executionCount":case"executionState":this._updatePrompt();break;case"isDirty":this._updateDirty()}},this._updatePrompt=()=>{if("code"!==this._model.type)return;const e=this._model;let t,r=!1;for(let n=0;n<e.outputs.length;n++){if("error"===e.outputs.get(n).type){r=!0;break}}let s="";r?(t="[!]",s="error"):t="running"==e.executionState?"[*]":e.executionCount?`[${e.executionCount}]`:"[ ]",this._executionIndicator.textContent!==t&&(this._executionIndicator.textContent=t),this._element.dataset.output!==s&&(this._element.dataset.output=s)},this._updateActive=()=>{var e;this._element||(this._element=this._createElement());const t=this._element,r=t.classList.contains(ACTIVE_CLASS);(null===(e=this._notebook.activeCell)||void 0===e?void 0:e.model)===this._model?r||t.classList.add(ACTIVE_CLASS):r&&(t.classList.remove(ACTIVE_CLASS),t.classList.remove(SELECTED_CLASS))},this._updateSelection=()=>{this._element||(this._element=this._createElement());const e=this._element,t=e.classList.contains(SELECTED_CLASS);this._notebook.selectedCells.some(e=>this._model===e.model)?t||e.classList.add(SELECTED_CLASS):t&&e.classList.remove(SELECTED_CLASS)},this._isDisposed=!1,this._element=null,this._model=e.model,this._notebook=e.notebook}get key(){return this._model.id}get isDisposed(){return!this._isDisposed&&this._model.isDisposed&&this.dispose(),this._isDisposed}_updateDirty(){if("code"!==this._model.type||!this._element)return;const e=this._model;this._element.classList.contains(DIRTY_CLASS)!==e.isDirty&&(e.isDirty?this._element.classList.add(DIRTY_CLASS):this._element.classList.remove(DIRTY_CLASS))}_createElement(){const e=document.createElement("li"),t=this._executionIndicator=document.createElement("div");t.className="jp-scrollbarItem-executionIndicator";const r=this._source=document.createElement("div");return r.className="jp-scrollbarItem-source",e.append(t),e.append(r),e}}class Notebook extends StaticNotebook{constructor(e){super({renderer:{createOuter:()=>document.createElement("div"),createViewport(){const e=document.createElement("div");return e.setAttribute("role","feed"),e.setAttribute("aria-label","Cells"),e},createScrollbar:()=>document.createElement("ol"),createScrollbarViewportIndicator:()=>document.createElement("div"),createScrollbarItem:(e,t,r)=>new ScrollbarItem({notebook:e,model:r})},...e}),this._activeCellIndex=-1,this._activeCell=null,this._mode="command",this._drag=null,this._dragData=null,this._selectData=null,this._mouseMode=null,this._activeCellChanged=new Signal(this),this._stateChanged=new Signal(this),this._selectionChanged=new Signal(this),this._cellsPasted=new Signal(this),this._localCopy=[],this._checkCacheOnNextResize=!1,this._lastClipboardInteraction=null,this._selectedCells=[],this.outerNode.setAttribute("data-lm-dragscroll","true"),this.activeCellChanged.connect(this._updateSelectedCells,this),this.jumped.connect((e,t)=>this.activeCellIndex=t),this.selectionChanged.connect(this._updateSelectedCells,this),this.addFooter()}get selectedCells(){return this._selectedCells}addFooter(){const e=new NotebookFooter(this);this.layout.footer=e}_onCellsChanged(e,t){var r,s;const n=null===(r=this.activeCell)||void 0===r?void 0:r.model.id;if(super._onCellsChanged(e,t),n){const e=null===(s=this.model)||void 0===s?void 0:s.sharedModel.cells.findIndex(e=>e.getId()===n);null!=e&&(this.activeCellIndex=e)}}get activeCellChanged(){return this._activeCellChanged}get stateChanged(){return this._stateChanged}get selectionChanged(){return this._selectionChanged}get cellsPasted(){return this._cellsPasted}get mode(){return this._mode}set mode(e){this.setMode(e)}setMode(e,t={}){var r;const s=null===(r=t.focus)||void 0===r||r,n=this.activeCell;if(n||(e="command"),e===this._mode)return void(s&&this._ensureFocus());this.update();const i=this._mode;if(this._mode=e,"edit"===e){for(const e of this.widgets)this.deselect(e);n instanceof MarkdownCell&&(n.rendered=!1),n.inputHidden=!1}else s&&NotebookActions.focusActiveCell(this,{waitUntilReady:!1,preventScroll:!0});this._stateChanged.emit({name:"mode",oldValue:i,newValue:e}),s&&this._ensureFocus()}get activeCellIndex(){return this.model&&this.widgets.length?this._activeCellIndex:-1}set activeCellIndex(e){var t,r;const s=this._activeCellIndex;this.model&&this.widgets.length?(e=Math.max(e,0),e=Math.min(e,this.widgets.length-1)):e=-1,this._activeCellIndex=e;const n=null!==(t=this.widgets[s])&&void 0!==t?t:null,i=null!==(r=this.widgets[e])&&void 0!==r?r:null;this.layout.activeCell=i;const o=i!==this._activeCell;o&&(this.update(),this._activeCell=i),(o||e!=s)&&this._activeCellChanged.emit(i),"edit"===this.mode&&(i instanceof MarkdownCell&&(i.rendered=!1),this.notebookConfig.autoRenderMarkdownCells&&o&&n instanceof MarkdownCell&&(n.rendered=!0)),this._ensureFocus(),e!==s&&(this._trimSelections(),this._stateChanged.emit({name:"activeCellIndex",oldValue:s,newValue:e}))}get activeCell(){return this._activeCell}get lastClipboardInteraction(){return this._lastClipboardInteraction}set lastClipboardInteraction(e){const t=SystemClipboard.getInstance(),r=this._lastClipboardInteraction;t.getData(JUPYTER_CELL_MIME).then(t=>{if(null!==t)if("copy"===e||"cut"===e)this._localCopy=t;else if("paste"===e){const e=t,s=ArrayExt.shallowEqual(e,this._localCopy,JSONExt.deepEqual);this._cellsPasted.emit({previousInteraction:s?r:null,cellCount:e.length})}}).catch(()=>{}),this._lastClipboardInteraction=e}dispose(){this.isDisposed||(this._activeCell=null,super.dispose())}moveCell(e,t,r=1){const s=e<=this.activeCellIndex&&this.activeCellIndex<e+r?this.activeCellIndex+t-e-(e>t?0:r-1):-1,n=this.widgets.slice(e,e+r).map(e=>this.isSelected(e));super.moveCell(e,t,r),s>=0&&(this.activeCellIndex=s),e>t?n.forEach((e,r)=>{e&&this.select(this.widgets[t+r])}):n.forEach((e,s)=>{e&&this.select(this.widgets[t-r+1+s])})}select(e){Private.selectedProperty.get(e)||(Private.selectedProperty.set(e,!0),this._selectionChanged.emit(void 0),this.update())}deselect(e){Private.selectedProperty.get(e)&&(Private.selectedProperty.set(e,!1),this._selectionChanged.emit(void 0),this.update())}isSelected(e){return Private.selectedProperty.get(e)}isSelectedOrActive(e){return e===this._activeCell||Private.selectedProperty.get(e)}deselectAll(){let e=!1;for(const t of this.widgets)Private.selectedProperty.get(t)&&(e=!0),Private.selectedProperty.set(t,!1);e&&this._selectionChanged.emit(void 0),this.activeCellIndex=this.activeCellIndex,this.update()}extendContiguousSelectionTo(e){let t,{head:r,anchor:s}=this.getContiguousSelection();if(null===s||null===r){if(e===this.activeCellIndex)return;r=this.activeCellIndex,s=this.activeCellIndex}if(this.activeCellIndex=e,(e=this.activeCellIndex)===s)return void this.deselectAll();let n=!1;if(r<e)for(r<s&&(Private.selectedProperty.set(this.widgets[r],!1),n=!0),t=r+1;t<e;t++)t!==s&&(Private.selectedProperty.set(this.widgets[t],!Private.selectedProperty.get(this.widgets[t])),n=!0);else if(e<r)for(s<r&&(Private.selectedProperty.set(this.widgets[r],!1),n=!0),t=e+1;t<r;t++)t!==s&&(Private.selectedProperty.set(this.widgets[t],!Private.selectedProperty.get(this.widgets[t])),n=!0);Private.selectedProperty.get(this.widgets[s])||(n=!0),Private.selectedProperty.set(this.widgets[s],!0),Private.selectedProperty.get(this.widgets[e])||(n=!0),Private.selectedProperty.set(this.widgets[e],!0),n&&this._selectionChanged.emit(void 0)}getContiguousSelection(){const e=this.widgets,t=ArrayExt.findFirstIndex(e,e=>this.isSelected(e));if(-1===t)return{head:null,anchor:null};const r=ArrayExt.findLastIndex(e,e=>this.isSelected(e),-1,t);for(let n=t;n<=r;n++)if(!this.isSelected(e[n]))throw new Error("Selection not contiguous");const s=this.activeCellIndex;if(t!==s&&r!==s)throw new Error("Active cell not at endpoint of selection");return t===s?{head:t,anchor:r}:{head:r,anchor:t}}async scrollToCell(e,t="auto"){try{await this.scrollToItem(this.widgets.findIndex(t=>t===e),t)}catch(r){}this.deselectAll(),this.select(e),e.activate()}_parseFragment(e){const t=e.slice(1);if(!t)return;const r=t.split("=");return 1===r.length?{kind:"legacy",value:t}:{kind:r[0],value:r.slice(1).join("=")}}async setFragment(e){const t=this._parseFragment(e);if(!t)return;let r;switch(t.kind){case"heading":r=await this._findHeading(t.value);break;case"cell-id":r=this._findCellById(t.value);break;case"legacy":r=await this._findLegacy(t.value);break;default:console.warn(`Unknown target type for URI fragment ${e}, interpreting as a heading`),r=await this._findLegacy(t.kind+"="+t.value)}if(null==r)return;let{cell:s,element:n}=r;s.inViewport||await this.scrollToCell(s,"center"),null==n&&(n=s.node),n.scrollIntoView()}handleEvent(e){if(this.model)switch(e.type){case"contextmenu":e.eventPhase===Event.CAPTURING_PHASE&&this._evtContextMenuCapture(e);break;case"mousedown":e.eventPhase===Event.CAPTURING_PHASE?this._evtMouseDownCapture(e):e.defaultPrevented||this._evtMouseDown(e);break;case"mouseup":e.currentTarget===document&&this._evtDocumentMouseup(e);break;case"mousemove":e.currentTarget===document&&this._evtDocumentMousemove(e);break;case"keydown":this._ensureFocus(!0);break;case"dblclick":this._evtDblClick(e);break;case"focusin":this._evtFocusIn(e);break;case"focusout":this._evtFocusOut(e);break;case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;default:super.handleEvent(e)}}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("contextmenu",this,!0),t.addEventListener("mousedown",this,!0),t.addEventListener("mousedown",this),t.addEventListener("keydown",this),t.addEventListener("dblclick",this),t.addEventListener("focusin",this),t.addEventListener("focusout",this),t.addEventListener("lm-dragenter",this,!0),t.addEventListener("lm-dragleave",this,!0),t.addEventListener("lm-dragover",this,!0),t.addEventListener("lm-drop",this,!0)}onBeforeDetach(e){const t=this.node;t.removeEventListener("contextmenu",this,!0),t.removeEventListener("mousedown",this,!0),t.removeEventListener("mousedown",this),t.removeEventListener("keydown",this),t.removeEventListener("dblclick",this),t.removeEventListener("focusin",this),t.removeEventListener("focusout",this),t.removeEventListener("lm-dragenter",this,!0),t.removeEventListener("lm-dragleave",this,!0),t.removeEventListener("lm-dragover",this,!0),t.removeEventListener("lm-drop",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),super.onBeforeDetach(e)}onAfterShow(e){super.onAfterShow(e),this._checkCacheOnNextResize=!0}onResize(e){var t;if(!this._checkCacheOnNextResize)return super.onResize(e);super.onResize(e),this._checkCacheOnNextResize=!1;const r=this._cellLayoutStateCache,s=parseInt(this.node.style.width,10);if(!r||s!==r.width){this._cellLayoutStateCache={width:s};for(const e of this.widgets)e instanceof Cell&&e.inViewport&&(null===(t=e.editorWidget)||void 0===t||t.update())}}onBeforeHide(e){super.onBeforeHide(e);const t=parseInt(this.node.style.width,10);this._cellLayoutStateCache={width:t}}onActivateRequest(e){super.onActivateRequest(e),this._ensureFocus(!0)}onUpdateRequest(e){super.onUpdateRequest(e);const t=this.activeCell;"edit"===this.mode?(this.addClass(EDIT_CLASS),this.removeClass(COMMAND_CLASS)):(this.addClass(COMMAND_CLASS),this.removeClass(EDIT_CLASS));let r=0;for(const s of this.widgets)s===t?(t.addClass(ACTIVE_CLASS),t.addClass(SELECTED_CLASS),t.node.tabIndex=0):(s.node.tabIndex=-1,s.removeClass(ACTIVE_CLASS),s.removeClass(OTHER_SELECTED_CLASS)),this.isSelectedOrActive(s)?(s.addClass(SELECTED_CLASS),r++):s.removeClass(SELECTED_CLASS);t&&r>1&&t.addClass(OTHER_SELECTED_CLASS)}onCellInserted(e,t){t.ready.then(()=>{t.isDisposed||t.editor.edgeRequested.connect(this._onEdgeRequest,this)}),t.scrollRequested.connect((e,r)=>{if(t!==this.activeCell)return;if(!r.defaultPrevented)return;const s=this.outerNode;if(t.inViewport)return r.scrollWithinCell({scroller:s});this.scrollToItem(this.activeCellIndex).then(()=>{t.ready.then(()=>{r.scrollWithinCell({scroller:s})})}).catch(e=>{})}),this.activeCellIndex=e<=this.activeCellIndex?this.activeCellIndex+1:this.activeCellIndex}onCellRemoved(e,t){this.activeCellIndex=e<=this.activeCellIndex?this.activeCellIndex-1:this.activeCellIndex,this.isSelected(t)&&this._selectionChanged.emit(void 0)}onModelChanged(e,t){super.onModelChanged(e,t),this.activeCellIndex=0}_onEdgeRequest(e,t){this.setMode("edit",{focus:!1});const r=this.activeCellIndex;if("top"===t){if(this.activeCellIndex--,this.activeCellIndex<r){const e=this.activeCell.editor;if(e){const t=e.lineCount-1;e.setCursorPosition({line:t,column:0})}}}else if("bottom"===t&&(this.activeCellIndex++,this.activeCellIndex>r)){const e=this.activeCell.editor;e&&e.setCursorPosition({line:0,column:0})}this.mode="edit"}_ensureFocus(e=!1){var t,r;const s=this.layout.footer;if(s&&document.activeElement===s.node)return;const n=this.activeCell;"edit"===this.mode&&n&&!0!==(null===(t=n.editor)||void 0===t?void 0:t.hasFocus())&&(n.inViewport?null===(r=n.editor)||void 0===r||r.focus():this.scrollToItem(this.activeCellIndex).then(()=>{n.ready.then(()=>{var e;null===(e=n.editor)||void 0===e||e.focus()})}).catch(e=>{})),e&&n&&!n.node.contains(document.activeElement)&&NotebookActions.focusActiveCell(this,{preventScroll:!0})}_findCell(e){let t=e;for(;t&&t!==this.node;){if(t.classList.contains(NB_CELL_CLASS)){const e=ArrayExt.findFirstIndex(this.widgets,e=>e.node===t);if(-1!==e)return e;break}t=t.parentElement}return-1}_findEventTargetAndCell(e){let t=e.target,r=this._findCell(t);return-1===r&&(t=document.elementFromPoint(e.clientX,e.clientY),r=this._findCell(t)),[t,r]}async _findHeading(e){var t;for(let r=0;r<this.widgets.length;r++){const s=this.widgets[r];if("raw"!==s.model.type&&("markdown"!==s.model.type||s.rendered))for(const r of s.headings){let n="";switch(r.type){case Cell.HeadingType.HTML:n=r.id;break;case Cell.HeadingType.Markdown:{const e=r;n=await getHeadingId(this.rendermime.markdownParser,e.raw,e.level,this.rendermime.sanitizer)}}if(n===e){const e=null!==(t=this.rendermime.sanitizer.allowNamedProperties)&&void 0!==t&&t?"id":"data-jupyter-id";return{cell:s,element:this.node.querySelector(`h${r.level}[${e}="${CSS.escape(n)}"]`)}}}}return null}_findCellById(e){for(let t=0;t<this.widgets.length;t++){const r=this.widgets[t];if(r.model.id===e)return{cell:r}}return null}async _findLegacy(e){var t;for(let r=0;r<this.widgets.length;r++){const s=this.widgets[r];if("raw"===s.model.type||"markdown"===s.model.type&&!s.rendered)continue;const n=null!==(t=this.rendermime.sanitizer.allowNamedProperties)&&void 0!==t&&t?"id":"data-jupyter-id",i=s.node.querySelector(`[${n}="${CSS.escape(e)}"]`);if(null!==i)return{cell:s,element:i}}return null}_evtContextMenuCapture(e){var t;if(e.shiftKey)return;const[r,s]=this._findEventTargetAndCell(e),n=this.widgets[s];n&&(null===(t=n.editorWidget)||void 0===t?void 0:t.node.contains(r))&&e.preventDefault()}_evtMouseDownCapture(e){var t;const{button:r,shiftKey:s}=e,[n,i]=this._findEventTargetAndCell(e),o=this.widgets[i];2===r&&!s&&o&&(null===(t=o.editorWidget)||void 0===t?void 0:t.node.contains(n))&&(this.mode="command",e.preventDefault())}_evtMouseDown(t){var r,s,n;const{button:i,shiftKey:o}=t;if(0!==i&&2!==i)return;if(o&&2===i)return;const[a,l]=this._findEventTargetAndCell(t),c=this.widgets[l];let d;if(d=c?(null===(r=c.editorWidget)||void 0===r?void 0:r.node.contains(a))?"input":(null===(s=c.promptNode)||void 0===s?void 0:s.contains(a))?"prompt":"cell":"notebook","input"!==d&&(this.mode="command"),"notebook"===d)this.deselectAll();else if("prompt"===d||"cell"===d){const r=""!==(null!==(n=window.getSelection())&&void 0!==n?n:"").toString();if(0!==i||!o||r||["INPUT","OPTION"].includes(a.tagName))0!==i||o?2===i&&(this.isSelectedOrActive(c)||(this.deselectAll(),this.activeCellIndex=l),t.preventDefault()):("prompt"===d&&(this._dragData={pressX:t.clientX,pressY:t.clientY,index:l},this._mouseMode="couldDrag",document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),t.preventDefault()),this.isSelectedOrActive(c)||(this.deselectAll(),this.activeCellIndex=l));else{t.preventDefault();try{this.extendContiguousSelectionTo(l)}catch(e){return console.error(e),void this.deselectAll()}this._mouseMode="select",this._selectData={startedOnActiveCell:l==this.activeCellIndex,startingCellIndex:this.activeCellIndex},document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0)}}else"input"===d&&(2!==i||this.isSelectedOrActive(c)||(this.deselectAll(),this.activeCellIndex=l));this._ensureFocus(!0)}_evtDocumentMouseup(e){const[,t]=this._findEventTargetAndCell(e);let r=!0;if("select"===this._mouseMode&&this._selectData){const{startedOnActiveCell:e,startingCellIndex:s}=this._selectData;e&&t===s&&(r=!1),this._selectData=null}r&&(e.preventDefault(),e.stopPropagation()),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),"couldDrag"===this._mouseMode&&(this.deselectAll(),this.activeCellIndex=t,this.activeCell.node.contains(document.activeElement)||NotebookActions.focusActiveCell(this)),this._mouseMode=null}_evtDocumentMousemove(e){switch(e.preventDefault(),e.stopPropagation(),this._mouseMode){case"select":{const t=e.target,r=this._findCell(t);-1!==r&&this.extendContiguousSelectionTo(r);break}case"couldDrag":{const t=this._dragData,r=Math.abs(e.clientX-t.pressX),s=Math.abs(e.clientY-t.pressY);(r>=DRAG_THRESHOLD||s>=DRAG_THRESHOLD)&&(this._mouseMode=null,this._startDrag(t.index,e.clientX,e.clientY));break}}}_evtDragEnter(e){if(!e.mimeData.hasData(JUPYTER_CELL_MIME))return;e.preventDefault(),e.stopPropagation();const t=e.target,r=this._findCell(t);if(-1===r)return;this.cellsArray[r].node.classList.add(DROP_TARGET_CLASS)}_evtDragLeave(e){if(!e.mimeData.hasData(JUPYTER_CELL_MIME))return;e.preventDefault(),e.stopPropagation();const t=this.node.getElementsByClassName(DROP_TARGET_CLASS);t.length&&t[0].classList.remove(DROP_TARGET_CLASS)}_evtDragOver(e){if(!e.mimeData.hasData(JUPYTER_CELL_MIME))return;e.preventDefault(),e.stopPropagation(),e.dropAction=e.proposedAction;const t=this.node.getElementsByClassName(DROP_TARGET_CLASS);t.length&&t[0].classList.remove(DROP_TARGET_CLASS);const r=e.target,s=this._findCell(r);if(-1===s)return;this.cellsArray[s].node.classList.add(DROP_TARGET_CLASS)}_evtDrop(e){if(!e.mimeData.hasData(JUPYTER_CELL_MIME))return;if(e.preventDefault(),e.stopPropagation(),"none"===e.proposedAction)return void(e.dropAction="none");let t=e.target;for(;t&&t.parentElement;){if(t.classList.contains(DROP_TARGET_CLASS)){t.classList.remove(DROP_TARGET_CLASS);break}t=t.parentElement}const r=this.model,s=e.source;if(s===this){e.dropAction="move";const r=e.mimeData.getData("internal:cells"),n=r[r.length-1];if(n instanceof MarkdownCell&&n.headingCollapsed){const e=NotebookActions.findNextParentHeading(n,s);if(e>0){const t=findIndex(s.widgets,e=>n.model.id===e.model.id);r.push(...s.widgets.slice(t+1,e))}}let i=ArrayExt.firstIndexOf(this.widgets,r[0]),o=this._findCell(t);if(-1!==o&&o>i?o-=1:-1===o&&(o=this.widgets.length-1),o>=i&&o<i+r.length)return;this.moveCell(i,o,r.length)}else{e.dropAction="copy";let s=this._findCell(t);-1===s&&(s=this.widgets.length);const n=s,i=e.mimeData.getData(JUPYTER_CELL_MIME);r.sharedModel.insertCells(s,i),this.deselectAll(),this.activeCellIndex=n,this.extendContiguousSelectionTo(s-1)}NotebookActions.focusActiveCell(this)}_startDrag(e,t,r){var s;const n=this.model.cells,i=[],o=[];let a=-1;for(const u of this.widgets){const e=n.get(++a);this.isSelectedOrActive(u)&&(u.addClass(DROP_SOURCE_CLASS),i.push(e.toJSON()),o.push(u))}const l=this.activeCell;let c,d=null;if("code"===(null==l?void 0:l.model.type)){const e=l.model.executionCount;c=" ",e&&(c=e.toString())}else c="";d=Private.createDragImage(i.length,c,null!==(s=null==l?void 0:l.model.sharedModel.getSource().split("\n")[0].slice(0,26))&&void 0!==s?s:""),this._drag=new Drag({mimeData:new MimeData,dragImage:d,supportedActions:"copy-move",proposedAction:"copy",source:this}),this._drag.mimeData.setData(JUPYTER_CELL_MIME,i),this._drag.mimeData.setData("internal:cells",o);const h=o.map(e=>e.model.sharedModel.getSource()).join("\n");this._drag.mimeData.setData("text/plain",h),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),this._mouseMode=null,this._drag.start(t,r).then(e=>{if(!this.isDisposed){this._drag=null;for(const e of o)e.removeClass(DROP_SOURCE_CLASS)}})}_updateReadWrite(){const e=DOMUtils.hasActiveEditableElement(this.node);this.node.classList.contains(READ_WRITE_CLASS)!==e&&this.node.classList.toggle(READ_WRITE_CLASS,e)}_evtFocusIn(e){var t,r;this._updateReadWrite();const s=e.target,n=this._findCell(s);if(-1!==n){const e=this.widgets[n];e.editorWidget&&!e.editorWidget.node.contains(s)&&this.setMode("command",{focus:!1}),this.activeCellIndex=n;const r=null===(t=e.editorWidget)||void 0===t?void 0:t.node;(null==r?void 0:r.contains(s))&&this.setMode("edit",{focus:!1})}else{this.setMode("command",{focus:!1}),e.preventDefault();const t=e.relatedTarget;this._activeCell&&!this._activeCell.node.contains(t)?this._activeCell.ready.then(()=>{var e;null===(e=this._activeCell)||void 0===e||e.node.focus({preventScroll:!0})}).catch(()=>{var e;null===(e=this.layout.footer)||void 0===e||e.node.focus({preventScroll:!0})}):null===(r=this.layout.footer)||void 0===r||r.node.focus({preventScroll:!0})}}_evtFocusOut(e){var t;const r=e.relatedTarget;if(!r)return void this._updateReadWrite();const s=this._findCell(r);if(-1!==s){if(null===(t=this.widgets[s].editorWidget)||void 0===t?void 0:t.node.contains(r))return}"command"!==this.mode&&this.setMode("command",{focus:!1}),this._updateReadWrite()}_evtDblClick(e){const t=this.model;if(!t)return;this.deselectAll();const[r,s]=this._findEventTargetAndCell(e);if(!e.target.classList.contains(HEADING_COLLAPSER_CLASS)&&-1!==s)if(this.activeCellIndex=s,"markdown"===t.cells.get(s).type){this.widgets[s].rendered=!1}else"img"===r.localName&&r.classList.toggle(UNCONFINED_CLASS)}_trimSelections(){for(let e=0;e<this.widgets.length;e++)if(e!==this._activeCellIndex){const t=this.widgets[e];!t.model.isDisposed&&t.editor&&t.model.selections.delete(t.editor.uuid)}}_updateSelectedCells(){this._selectedCells=this.widgets.filter(e=>this.isSelectedOrActive(e)),this.kernelHistory&&this.kernelHistory.reset()}}var Private;!function(e){class t extends StaticNotebook.ContentFactory{}e.ContentFactory=t}(Notebook||(Notebook={})),function(e){e.selectedProperty=new AttachedProperty({name:"selected",create:()=>!1});e.NotebookPanelLayout=class extends PanelLayout{onUpdateRequest(e){}},e.createDragImage=function(e,t,r){return e>1?""!==t?VirtualDOM.realize(h.div(h.div({className:DRAG_IMAGE_CLASS},h.span({className:CELL_DRAG_PROMPT_CLASS},"["+t+"]:"),h.span({className:CELL_DRAG_CONTENT_CLASS},r)),h.div({className:CELL_DRAG_MULTIPLE_BACK},""))):VirtualDOM.realize(h.div(h.div({className:DRAG_IMAGE_CLASS},h.span({className:CELL_DRAG_PROMPT_CLASS}),h.span({className:CELL_DRAG_CONTENT_CLASS},r)),h.div({className:CELL_DRAG_MULTIPLE_BACK},""))):""!==t?VirtualDOM.realize(h.div(h.div({className:`${DRAG_IMAGE_CLASS} ${SINGLE_DRAG_IMAGE_CLASS}`},h.span({className:CELL_DRAG_PROMPT_CLASS},"["+t+"]:"),h.span({className:CELL_DRAG_CONTENT_CLASS},r)))):VirtualDOM.realize(h.div(h.div({className:`${DRAG_IMAGE_CLASS} ${SINGLE_DRAG_IMAGE_CLASS}`},h.span({className:CELL_DRAG_PROMPT_CLASS}),h.span({className:CELL_DRAG_CONTENT_CLASS},r))))}}(Private||(Private={}));const NOTEBOOK_PANEL_CLASS="jp-NotebookPanel",NOTEBOOK_PANEL_TOOLBAR_CLASS="jp-NotebookPanel-toolbar",NOTEBOOK_PANEL_NOTEBOOK_CLASS="jp-NotebookPanel-notebook";class NotebookPanel extends DocumentWidget{constructor(e){super(e),this._autorestarting=!1,this.addClass(NOTEBOOK_PANEL_CLASS),this.toolbar.addClass(NOTEBOOK_PANEL_TOOLBAR_CLASS),this.content.addClass(NOTEBOOK_PANEL_NOTEBOOK_CLASS),this.content.model=this.context.model,this.context.sessionContext.kernelChanged.connect(this._onKernelChanged,this),this.context.sessionContext.statusChanged.connect(this._onSessionStatusChanged,this),this.context.saveState.connect(this._onSave,this),this.revealed.then(()=>{if(!this.isDisposed&&1===this.content.widgets.length){const e=this.content.widgets[0].model;"code"===e.type&&""===e.sharedModel.getSource()&&(this.content.mode="edit")}})}_onSave(e,t){if("started"===t&&this.model)for(const r of this.model.cells)if(isMarkdownCellModel(r))for(const e of r.attachments.keys)r.sharedModel.getSource().includes(e)||r.attachments.remove(e)}get sessionContext(){return this.context.sessionContext}get model(){return this.content.model}setConfig(e){this.content.editorConfig=e.editorConfig,this.content.notebookConfig=e.notebookConfig;const t=this.context.sessionContext.kernelPreference;this.context.sessionContext.kernelPreference={...t,shutdownOnDispose:e.kernelShutdown,autoStartDefault:e.autoStartDefault}}setFragment(e){this.context.ready.then(()=>{this.content.setFragment(e)})}dispose(){this.content.dispose(),super.dispose()}[Printing.symbol](){return async()=>{this.context.model.dirty&&!this.context.model.readOnly&&await this.context.save(),await Printing.printURL(libExports$2.PageConfig.getNBConvertURL({format:"html",download:!1,path:this.context.path}))}}onBeforeHide(e){super.onBeforeHide(e),this.content.isParentHidden=!0}onBeforeShow(e){this.content.isParentHidden=!1,super.onBeforeShow(e)}_onKernelChanged(e,t){if(!this.model||!t.newValue)return;const{newValue:r}=t;r.info.then(e=>{var t;this.model&&(null===(t=this.context.sessionContext.session)||void 0===t?void 0:t.kernel)===r&&this._updateLanguage(e.language_info)}),this._updateSpec(r)}_onSessionStatusChanged(e,t){var r;"autorestarting"!==t||this._autorestarting?"restarting"===t||(this._autorestarting=!1):(showDialog({title:this._trans.__("Kernel Restarting"),body:this._trans.__("The kernel for %1 appears to have died. It will restart automatically.",null===(r=this.sessionContext.session)||void 0===r?void 0:r.path),buttons:[Dialog.okButton({label:this._trans.__("Ok")})]}),this._autorestarting=!0)}_updateLanguage(e){this.model.setMetadata("language_info",e)}async _updateSpec(e){const t=await e.spec;this.isDisposed||this.model.setMetadata("kernelspec",{name:e.name,display_name:null==t?void 0:t.display_name,language:null==t?void 0:t.language})}}!function(e){class t extends Notebook.ContentFactory{createNotebook(e){return new Notebook(e)}}e.ContentFactory=t,e.IContentFactory=new Token("@jupyterlab/notebook:IContentFactory","A factory object that creates new notebooks.\n    Use this if you want to create and host notebooks in your own UI elements.")}(NotebookPanel||(NotebookPanel={}));class NotebookSearchProvider extends SearchProvider{constructor(e,t=nullTranslator){super(e),this.translator=t,this._textSelection=null,this._currentProviderIndex=null,this._delayedActiveCellChangeHandler=null,this._onSelection=!1,this._selectedCells=1,this._selectedLines=0,this._query=null,this._searchProviders=[],this._editorSelectionsObservable=null,this._selectionSearchMode="cells",this._selectionLock=!1,this._searchActive=!1,this._handleHighlightsAfterActiveCellChange=this._handleHighlightsAfterActiveCellChange.bind(this),this.widget.model.cells.changed.connect(this._onCellsChanged,this),this.widget.content.activeCellChanged.connect(this._onActiveCellChanged,this),this.widget.content.selectionChanged.connect(this._onCellSelectionChanged,this),this.widget.content.stateChanged.connect(this._onNotebookStateChanged,this),this._observeActiveCell(),this._filtersChanged.connect(this._setEnginesSelectionSearchMode,this)}_onNotebookStateChanged(e,t){"mode"===t.name&&window.setTimeout(()=>{var e;"command"===t.newValue&&(null===(e=document.activeElement)||void 0===e?void 0:e.closest(".jp-DocumentSearch-overlay"))||(this._updateSelectionMode(),this._filtersChanged.emit())},0)}static isApplicable(e){return e instanceof NotebookPanel}static createNew(e,t){return new NotebookSearchProvider(e,t)}get currentMatchIndex(){let e=0,t=!1;for(let r=0;r<this._searchProviders.length;r++){const s=this._searchProviders[r];if(this._currentProviderIndex==r){const r=s.currentMatchIndex;if(null===r)return null;e+=r,t=!0;break}e+=s.matchesCount}return t?e:null}get matchesCount(){return this._searchProviders.reduce((e,t)=>e+t.matchesCount,0)}get isReadOnly(){var e,t,r;return null!==(r=null===(t=null===(e=this.widget)||void 0===e?void 0:e.content.model)||void 0===t?void 0:t.readOnly)&&void 0!==r&&r}get replaceOptionsSupport(){return{preserveCase:!0}}getSelectionState(){const e="cells"===this._selectionSearchMode,t=e?this._selectedCells:this._selectedLines;return t>1?"multiple":1!==t||e?"none":"single"}dispose(){var e;if(this.isDisposed)return;this.widget.content.activeCellChanged.disconnect(this._onActiveCellChanged,this),null===(e=this.widget.model)||void 0===e||e.cells.changed.disconnect(this._onCellsChanged,this),this.widget.content.stateChanged.disconnect(this._onNotebookStateChanged,this),this.widget.content.selectionChanged.disconnect(this._onCellSelectionChanged,this),this._stopObservingLastCell(),super.dispose();const t=this.widget.content.activeCellIndex;this.endQuery().then(()=>{this.widget.isDisposed||(this.widget.content.activeCellIndex=t)}).catch(e=>{console.error(`Fail to end search query in notebook:\n${e}`)})}getFilters(){const e=this.translator.load("jupyterlab");return{output:{title:e.__("Search Cell Outputs"),description:e.__("Search in the cell outputs."),disabledDescription:e.__("Search in the cell outputs (not available when replace options are shown)."),default:!1,supportReplace:!1},selection:{title:"cells"===this._selectionSearchMode?e._n("Search in %1 Selected Cell","Search in %1 Selected Cells",this._selectedCells):e._n("Search in %1 Selected Line","Search in %1 Selected Lines",this._selectedLines),description:e.__("Search only in the selected cells or text (depending on edit/command mode)."),default:!1,supportReplace:!0}}}_updateSelectionMode(){this._selectionLock||(this._selectionSearchMode=1===this._selectedCells&&"edit"===this.widget.content.mode&&0!==this._selectedLines?"text":"cells")}getInitialQuery(){var e;return(null===(e=window.getSelection())||void 0===e?void 0:e.toString())||""}async clearHighlight(){this._selectionLock=!0,null!==this._currentProviderIndex&&this._currentProviderIndex<this._searchProviders.length&&(await this._searchProviders[this._currentProviderIndex].clearHighlight(),this._currentProviderIndex=null),this._selectionLock=!1}async highlightNext(e=!0,t){const r=await this._stepNext(!1,e,t);return null!=r?r:void 0}async highlightPrevious(e=!0,t){const r=await this._stepNext(!0,e,t);return null!=r?r:void 0}async startQuery(e,t){if(!this.widget)return;await this.endQuery(),this._searchActive=!0;let r=this.widget.content.widgets;this._query=e,this._filters={output:!1,selection:!1,...null!=t?t:{}},this._onSelection=this._filters.selection;const s=this.widget.content.activeCellIndex;return this._searchProviders=await Promise.all(r.map(async(t,r)=>{const n=createCellSearchProvider(t);return await n.setIsActive(!this._filters.selection||this.widget.content.isSelectedOrActive(t)),this._onSelection&&"text"===this._selectionSearchMode&&r===s&&this._textSelection&&await n.setSearchSelection(this._textSelection),await n.startQuery(e,this._filters),n})),this._currentProviderIndex=s,await this.highlightNext(!0,{from:"selection-start",scroll:!1,select:!1}),Promise.resolve()}async endQuery(){await Promise.all(this._searchProviders.map(e=>e.endQuery().then(()=>{e.dispose()}))),this._searchActive=!1,this._searchProviders.length=0,this._currentProviderIndex=null}async replaceCurrentMatch(e,t=!0,r){let s=!1;const n=async(e=!1)=>{var r;const s=null===(r=this.widget)||void 0===r?void 0:r.content.activeCell;"markdown"===(null==s?void 0:s.model.type)&&s.rendered&&(s.rendered=!1,e&&await this.highlightNext(t))};if(null!==this._currentProviderIndex){await n();const i=this._searchProviders[this._currentProviderIndex];s=await i.replaceCurrentMatch(e,!1,r),null===i.currentMatchIndex&&await this.highlightNext(t,{from:"previous-match"})}return await n(!0),s}async replaceAllMatches(e,t){return(await Promise.all(this._searchProviders.map(r=>r.replaceAllMatches(e,t)))).includes(!0)}async validateFilter(e,t){if("output"!==e)return t;if(t&&this.widget.content.widgets.some(e=>e instanceof CodeCell&&e.isPlaceholder())){const e=this.translator.load("jupyterlab");if(!(await showDialog({title:e.__("Confirmation"),body:e.__("Searching outputs requires you to run all cells and render their outputs. Are you sure you want to search in the cell outputs?"),buttons:[Dialog.cancelButton({label:e.__("Cancel")}),Dialog.okButton({label:e.__("Ok")})]})).button.accept)return!1;this.widget.content.widgets.forEach((e,t)=>{e instanceof CodeCell&&e.isPlaceholder()&&this.widget.content.renderCellOutputs(t)})}return t}_addCellProvider(e){var t,r;const s=this.widget.content.widgets[e],n=createCellSearchProvider(s);ArrayExt.insert(this._searchProviders,e,n),n.setIsActive(!(null!==(r=null===(t=this._filters)||void 0===t?void 0:t.selection)&&void 0!==r&&r)||this.widget.content.isSelectedOrActive(s)).then(()=>{this._searchActive&&n.startQuery(this._query,this._filters)})}_removeCellProvider(e){const t=ArrayExt.removeAt(this._searchProviders,e);null==t||t.dispose()}async _onCellsChanged(e,t){switch(t.type){case"add":t.newValues.forEach((e,r)=>{this._addCellProvider(t.newIndex+r)});break;case"move":ArrayExt.move(this._searchProviders,t.oldIndex,t.newIndex);break;case"remove":for(let e=0;e<t.oldValues.length;e++)this._removeCellProvider(t.oldIndex);break;case"set":t.newValues.forEach((e,r)=>{this._addCellProvider(t.newIndex+r),this._removeCellProvider(t.newIndex+r+1)});break;case"clear":for(let e=this._searchProviders.length-1;e>=0;e--)this._removeCellProvider(e)}this._stateChanged.emit()}async _stepNext(e=!1,t=!1,r){var s;const n=async e=>{var t;if(!(null===(t=null==r?void 0:r.scroll)||void 0===t||t))return;if(this._selectionLock=!0,this.widget.content.activeCellIndex!==this._currentProviderIndex&&(this.widget.content.activeCellIndex=this._currentProviderIndex),-1===this.widget.content.activeCellIndex)return console.warn("No active cell (no cells or no model), aborting search"),void(this._selectionLock=!1);const s=this.widget.content.activeCell;if(!s.inViewport)try{await this.widget.content.scrollToItem(this._currentProviderIndex)}catch(i){}if(s.inputHidden&&(s.inputHidden=!1),!s.inViewport)return void(this._selectionLock=!1);await s.ready;const n=s.editor;n.revealPosition(n.getPositionAt(e.position)),this._selectionLock=!1};if(null===this._currentProviderIndex&&(this._currentProviderIndex=this.widget.content.activeCellIndex),e&&"command"===this.widget.content.mode){this._searchProviders[this._currentProviderIndex].getCurrentMatch()||(this._currentProviderIndex-=1),t&&(this._currentProviderIndex=(this._currentProviderIndex+this._searchProviders.length)%this._searchProviders.length)}const i="previous-match"===(null!==(s=null==r?void 0:r.from)&&void 0!==s?s:"")&&null===this._searchProviders[this._currentProviderIndex].currentMatchIndex,o=this._currentProviderIndex;i&&this._searchProviders[this._currentProviderIndex].clearHighlight(),t&&i&&this._currentProviderIndex+1>=this._searchProviders.length?this._currentProviderIndex=0:this._currentProviderIndex+=i?1:0;do{const s=this._searchProviders[this._currentProviderIndex],i=e?await s.highlightPrevious(!1,r):await s.highlightNext(!1,r);if(i)return await n(i),i;this._currentProviderIndex=this._currentProviderIndex+(e?-1:1),t&&(this._currentProviderIndex=(this._currentProviderIndex+this._searchProviders.length)%this._searchProviders.length)}while(t?this._currentProviderIndex!==o:0<=this._currentProviderIndex&&this._currentProviderIndex<this._searchProviders.length);if(t){const t=this._searchProviders[o],s=e?await t.highlightPrevious(!1,r):await t.highlightNext(!1,r);if(s)return await n(s),s}return this._currentProviderIndex=null,null}async _onActiveCellChanged(){null!==this._delayedActiveCellChangeHandler&&(clearTimeout(this._delayedActiveCellChangeHandler),this._delayedActiveCellChangeHandler=null),this.widget.content.activeCellIndex!==this._currentProviderIndex&&(this._delayedActiveCellChangeHandler=window.setTimeout(()=>{this.delayedActiveCellChangeHandlerReady=this._handleHighlightsAfterActiveCellChange()},0)),this._observeActiveCell()}async _handleHighlightsAfterActiveCellChange(){if(this._onSelection){const e=null!==this._currentProviderIndex&&this._currentProviderIndex<this.widget.content.widgets.length?this.widget.content.widgets[this._currentProviderIndex]:null;e&&this.widget.content.isSelectedOrActive(e)||(await this._updateCellSelection(),await this.clearHighlight(),this._currentProviderIndex=this.widget.content.activeCellIndex)}await this._ensureCurrentMatch()}async _ensureCurrentMatch(){if(null!==this._currentProviderIndex){const e=this._searchProviders[this._currentProviderIndex];if(!e)return;!e.getCurrentMatch()&&this.matchesCount&&await this.highlightNext(!0,{from:"start",scroll:!1,select:!1})}}_observeActiveCell(){var e;const t=null===(e=this.widget.content.activeCell)||void 0===e?void 0:e.editor;t&&(this._stopObservingLastCell(),t.model.selections.changed.connect(this._setSelectedLines,this),this._editorSelectionsObservable=t.model.selections)}_stopObservingLastCell(){this._editorSelectionsObservable&&this._editorSelectionsObservable.changed.disconnect(this._setSelectedLines,this)}_setSelectedLines(){var e;const t=null===(e=this.widget.content.activeCell)||void 0===e?void 0:e.editor;if(!t)return;const r=t.getSelection(),{start:s,end:n}=r,i=n.line===s.line&&n.column===s.column?0:n.line-s.line+1;this._textSelection=r,i!==this._selectedLines&&(this._selectedLines=i,this._updateSelectionMode()),this._filtersChanged.emit()}async _setEnginesSelectionSearchMode(){let e;e=!!this._onSelection&&"text"===this._selectionSearchMode,this._selectionLock||await Promise.all(this._searchProviders.map((t,r)=>{const s=this.widget.content.activeCellIndex===r;return t.setProtectSelection(s&&this._onSelection),t.setSearchSelection(s&&e?this._textSelection:null)}))}async _onCellSelectionChanged(){if(null!==this._delayedActiveCellChangeHandler&&(clearTimeout(this._delayedActiveCellChangeHandler),this._delayedActiveCellChangeHandler=null),await this._updateCellSelection(),null===this._currentProviderIndex){const e=this.widget.content.widgets.findIndex(e=>this.widget.content.isSelectedOrActive(e));this._currentProviderIndex=e}await this._ensureCurrentMatch()}async _updateCellSelection(){const e=this.widget.content.widgets;let t=0;await Promise.all(e.map(async(e,r)=>{const s=this._searchProviders[r],n=this.widget.content.isSelectedOrActive(e);n&&(t+=1),s&&this._onSelection&&await s.setIsActive(n)})),t!==this._selectedCells&&(this._selectedCells=t,this._updateSelectionMode()),this._filtersChanged.emit()}}class NotebookPanelProvider{_panel=null;_context=null;setPanel(e,t){this._panel=e,this._context=t}getPanel(){return this._panel}getContext(){return this._context}}const NotebookCommandIds={changeCellTypeToCode:"notebook-cell:change-cell-to-code",changeCellTypeToMarkdown:"notebook-cell:change-cell-to-markdown",changeCellTypeToRaw:"notebook-cell:change-cell-to-raw",commandMode:"notebook:command-mode",deleteCells:"notebook-cells:delete",editMode:"notebook:edit-mode",extendAbove:"notebook-cells:extend-above",extendBelow:"notebook-cells:extend-below",extendBottom:"notebook-cells:extend-bottom",extendTop:"notebook-cells:extend-top",findNext:"documentsearch:find-next",findPrevious:"documentsearch:find-previous",insertAbove:"notebook-cells:insert-above",insertBelow:"notebook-cells:insert-below",interrupt:"notebook:interrupt-kernel",invoke:"completer:invoke",invokeNotebook:"completer:invoke-notebook",merge:"notebook-cells:merge",redo:"notebook-cells:redo",restart:"notebook:restart-kernel",run:"notebook:run-cell",runAll:"notebook:run-all",runAndAdvance:"notebook-cells:run-and-advance",save:"notebook:save",select:"completer:select",selectAbove:"notebook:move-cursor-up",selectBelow:"notebook:move-cursor-down",selectNotebook:"completer:select-notebook",split:"notebook-cells:split",startSearch:"documentsearch:start-search",switchKernel:"notebook:switch-kernel",undo:"notebook-cells:undo"};function addNotebookCommands(e,t,r,s,n){const i=new DisposableSet;let o;n&&(i.add(e.addCommand(NotebookCommandIds.save,{label:"Save",execute:()=>{r.currentWidget?.context.save()}})),i.add(e.addKeyBinding({selector:".jp-Notebook",keys:["Accel S"],command:NotebookCommandIds.save}))),i.add(e.addCommand(NotebookCommandIds.invoke,{label:"Completer: Invoke",execute:()=>t.invoke()})),i.add(e.addCommand(NotebookCommandIds.select,{label:"Completer: Select",execute:()=>t.completer.selectActive()})),i.add(e.addCommand(NotebookCommandIds.invokeNotebook,{label:"Invoke Notebook",execute:()=>{if("code"===r.currentWidget?.content.activeCell?.model.type)return e.execute(NotebookCommandIds.invoke)}})),i.add(e.addCommand(NotebookCommandIds.selectNotebook,{label:"Select Notebook",execute:()=>{if("code"===r.currentWidget?.content.activeCell?.model.type)return e.execute(NotebookCommandIds.select)}})),i.add(e.addCommand(NotebookCommandIds.startSearch,{label:"Find",execute:()=>{if(r.currentWidget){if(!o){const t=new NotebookSearchProvider(r.currentWidget,nullTranslator),s=new SearchDocumentModel(t,500);o=new SearchDocumentView(s),o.closed.connect(()=>{r.currentWidget?.isDisposed||r.currentWidget?.activate()}),o.disposed.connect(()=>{r.currentWidget?.isDisposed||r.currentWidget?.activate(),e.notifyCommandChanged()}),r.currentWidget?.disposed.connect(()=>{o?.dispose(),s.dispose(),t.dispose()})}}else o=void 0;o&&r.currentWidget&&!o.isAttached&&(Widget.attach(o,r.currentWidget?.node),o.node.style.top=`${r.currentWidget?.toolbar.node.getBoundingClientRect().height+r.currentWidget?.contentHeader.node.getBoundingClientRect().height}px`,o.model.searchExpression&&o.model.refresh()),o?.focusSearchInput()}})),i.add(e.addCommand(NotebookCommandIds.findNext,{label:"Find Next",isEnabled:()=>!!o,execute:async()=>{o&&await o.model.highlightNext()}})),i.add(e.addCommand(NotebookCommandIds.findPrevious,{label:"Find Previous",isEnabled:()=>!!o,execute:async()=>{o&&await o.model.highlightPrevious()}})),i.add(e.addCommand(NotebookCommandIds.interrupt,{label:"Interrupt",execute:async()=>r.currentWidget?.context.sessionContext.session?.kernel?.interrupt()}));const a=new SessionContextDialogs;i.add(e.addCommand(NotebookCommandIds.restart,{label:"Restart Kernel",execute:()=>{r.currentWidget&&a.restart(r.currentWidget.context.sessionContext)}})),i.add(e.addCommand(NotebookCommandIds.switchKernel,{label:"Switch Kernel",execute:()=>{r.currentWidget&&a.selectKernel(r.currentWidget.context.sessionContext)}})),i.add(e.addCommand(NotebookCommandIds.runAndAdvance,{label:"Run and Advance",execute:()=>{const e=s.getPanel(),t=s.getContext();if(!e||!t)return Promise.resolve();const r=t.sessionContext,n=r.session?.kernel;return(!n||"starting"!==n.status&&"restarting"!==n.status&&"autorestarting"!==n.status)&&r.isReady&&n?NotebookActions.runAndAdvance(e.content,r):Promise.resolve()}})),i.add(e.addCommand(NotebookCommandIds.run,{label:"Run",execute:()=>{const e=s.getPanel(),t=s.getContext();if(!e||!t)return Promise.resolve();const r=t.sessionContext,n=r.session?.kernel;return(!n||"starting"!==n.status&&"restarting"!==n.status&&"autorestarting"!==n.status)&&r.isReady&&n?NotebookActions.run(e.content,r):Promise.resolve()}})),i.add(e.addCommand(NotebookCommandIds.runAll,{label:"Run all",execute:()=>{const e=s.getPanel(),t=s.getContext();if(!e||!t)return Promise.resolve();const r=t.sessionContext,n=r.session?.kernel;return(!n||"starting"!==n.status&&"restarting"!==n.status&&"autorestarting"!==n.status)&&r.isReady&&n?NotebookActions.runAll(e.content,r):Promise.resolve()}})),i.add(e.addCommand(NotebookCommandIds.deleteCells,{label:"Delete Cells",execute:()=>r.currentWidget?NotebookActions.deleteCells(r.currentWidget.content):void 0})),i.add(e.addCommand(NotebookCommandIds.insertAbove,{label:"Insert Above",execute:e=>{const{cellType:t}=e??{},s=r.currentWidget?.content;s&&(NotebookActions.insertAbove(s),t&&NotebookActions.changeCellType(s,t))}})),i.add(e.addCommand(NotebookCommandIds.insertBelow,{label:"Insert Below",execute:e=>{const{cellType:t}=e??{},s=r.currentWidget?.content;s&&(NotebookActions.insertBelow(s),t&&NotebookActions.changeCellType(s,t))}})),i.add(e.addCommand(NotebookCommandIds.editMode,{label:"Edit Mode",execute:()=>{r.currentWidget&&(r.currentWidget.content.mode="edit")}})),i.add(e.addCommand(NotebookCommandIds.commandMode,{label:"Command Mode",execute:()=>{r.currentWidget&&(r.currentWidget.content.mode="command")}})),i.add(e.addCommand(NotebookCommandIds.selectBelow,{label:"Select Below",execute:()=>r.currentWidget?NotebookActions.selectBelow(r.currentWidget.content):void 0})),i.add(e.addCommand(NotebookCommandIds.selectAbove,{label:"Select Above",execute:()=>r.currentWidget?NotebookActions.selectAbove(r.currentWidget.content):void 0})),i.add(e.addCommand(NotebookCommandIds.extendAbove,{label:"Extend Above",execute:()=>r.currentWidget?NotebookActions.extendSelectionAbove(r.currentWidget.content):void 0})),i.add(e.addCommand(NotebookCommandIds.extendTop,{label:"Extend to Top",execute:()=>r.currentWidget?NotebookActions.extendSelectionAbove(r.currentWidget.content,!0):void 0})),i.add(e.addCommand(NotebookCommandIds.extendBelow,{label:"Extend Below",execute:()=>r.currentWidget?NotebookActions.extendSelectionBelow(r.currentWidget.content):void 0})),i.add(e.addCommand(NotebookCommandIds.extendBottom,{label:"Extend to Bottom",execute:()=>r.currentWidget?NotebookActions.extendSelectionBelow(r.currentWidget.content,!0):void 0})),i.add(e.addCommand(NotebookCommandIds.merge,{label:"Merge Cells",execute:()=>r.currentWidget?NotebookActions.mergeCells(r.currentWidget.content):void 0})),i.add(e.addCommand(NotebookCommandIds.split,{label:"Split Cell",execute:()=>r.currentWidget?NotebookActions.splitCell(r.currentWidget.content):void 0})),i.add(e.addCommand(NotebookCommandIds.undo,{label:"Undo",execute:()=>{const e=r.currentWidget?.content.activeCell;if(e){const t=e.model.sharedModel;t.undoManager?t.undoManager.undo():NotebookActions.undo(r.currentWidget.content)}}})),i.add(e.addCommand(NotebookCommandIds.redo,{label:"Redo",execute:()=>{const e=r.currentWidget?.content.activeCell;if(e){const t=e.model.sharedModel;t.undoManager?t.undoManager.redo():NotebookActions.redo(r.currentWidget.content)}}})),i.add(e.addCommand(NotebookCommandIds.changeCellTypeToCode,{label:"Change Cell Type to Code",execute:e=>r.currentWidget?NotebookActions.changeCellType(r.currentWidget.content,"code"):void 0})),i.add(e.addCommand(NotebookCommandIds.changeCellTypeToMarkdown,{label:"Change Cell Type to Markdown",execute:e=>r.currentWidget?NotebookActions.changeCellType(r.currentWidget.content,"markdown"):void 0})),i.add(e.addCommand(NotebookCommandIds.changeCellTypeToRaw,{label:"Change Cell Type to Raw",execute:e=>r.currentWidget?NotebookActions.changeCellType(r.currentWidget.content,"raw"):void 0})),i.add(e.addCommand("run-selected-codecell",{label:"Run Cell",execute:e=>{const t=r.currentWidget;if(t){const{context:e,content:r}=t;NotebookActions.run(r,e.sessionContext)}},isEnabled:function(){return null!==r.currentWidget}}));return[{selector:".jp-Notebook.jp-mod-editMode .jp-mod-completer-enabled",keys:["Tab"],command:NotebookCommandIds.invokeNotebook},{selector:".jp-mod-completer-active",keys:["Enter"],command:NotebookCommandIds.selectNotebook},{selector:".jp-Notebook",keys:["Ctrl Enter"],command:NotebookCommandIds.run},{selector:".jp-Notebook",keys:["Shift Enter"],command:NotebookCommandIds.runAndAdvance},{selector:".jp-Notebook",keys:["Accel F"],command:NotebookCommandIds.startSearch},{selector:".jp-Notebook.jp-mod-commandMode :focus",keys:["D","D"],command:NotebookCommandIds.deleteCells},{selector:".jp-Notebook",keys:["Accel G"],command:NotebookCommandIds.findNext},{selector:".jp-Notebook",keys:["Accel Shift G"],command:NotebookCommandIds.findPrevious},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["I","I"],command:NotebookCommandIds.interrupt},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["0","0"],command:NotebookCommandIds.restart},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["Enter"],command:NotebookCommandIds.editMode},{selector:".jp-Notebook.jp-mod-editMode",keys:["Escape"],command:NotebookCommandIds.commandMode},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["Shift M"],command:NotebookCommandIds.merge},{selector:".jp-Notebook.jp-mod-editMode",keys:["Ctrl Shift -"],command:NotebookCommandIds.split},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["J"],command:NotebookCommandIds.selectBelow},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["ArrowDown"],command:NotebookCommandIds.selectBelow},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["A"],command:NotebookCommandIds.insertAbove},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["B"],command:NotebookCommandIds.insertBelow},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["K"],command:NotebookCommandIds.selectAbove},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["ArrowUp"],command:NotebookCommandIds.selectAbove},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["Shift K"],command:NotebookCommandIds.extendAbove},{selector:".jp-Notebook.jp-mod-commandMode :focus:not(:read-write)",keys:["Shift J"],command:NotebookCommandIds.extendBelow},{selector:".jp-Notebook",keys:["Ctrl Z"],command:NotebookCommandIds.undo},{selector:".jp-Notebook",keys:["Ctrl Y"],command:NotebookCommandIds.redo},{selector:".jp-Notebook.jp-mod-commandMode :focus",keys:["M"],command:NotebookCommandIds.changeCellTypeToMarkdown},{selector:".jp-Notebook.jp-mod-commandMode :focus",keys:["R"],command:NotebookCommandIds.changeCellTypeToRaw},{selector:".jp-Notebook.jp-mod-commandMode :focus",keys:["Y"],command:NotebookCommandIds.changeCellTypeToCode}].forEach(t=>i.add(e.addKeyBinding(t))),i}const notebookStore=createStore((e,t)=>({notebooks:/* @__PURE__ */new Map,setNotebooks:t=>e(e=>({notebooks:t})),selectNotebook:e=>t().notebooks.get(e),selectNotebookAdapter2:e=>{const r=t().notebooks.get(e);if(r)return r.adapter},insertCell:(e,r,s,n)=>{const i="object"==typeof e?e:{id:e,type:r,index:s,source:n};t().notebooks.get(i.id)?.adapter?.insertCell(i.type,i.index,i.source)},insertCells:(e,r,s)=>{const n="object"==typeof e?e:{id:e,cells:r,index:s};t().notebooks.get(n.id)?.adapter?.insertCells(n.cells,n.index)},deleteCell:(e,r)=>{const s="object"==typeof e?e:{id:e,index:r};t().notebooks.get(s.id)?.adapter?.deleteCell(s.index)},updateCell:(e,r,s)=>{const n="object"==typeof e?e:{id:e,index:r,source:s};t().notebooks.get(n.id)?.adapter?.updateCell(n.index,n.source)},readCell:(e,r,s)=>{const n="object"==typeof e?e:{id:e,index:r,includeOutputs:s};return t().notebooks.get(n.id)?.adapter?.getCell(n.index,n.includeOutputs??!0)},readAllCells:(e,r)=>{const s="object"==typeof e?e:{id:e,format:r};return t().notebooks.get(s.id)?.adapter?.readAllCells(s.format)??[]},executeCode:async(e,r)=>{const s="object"==typeof e?e:{id:e,code:r};return await(t().notebooks.get(s.id)?.adapter?.executeCode(s.code))??{success:!1,error:"Adapter not found"}},runCell:async e=>{const r="object"==typeof e?e:{id:e},s=t().notebooks.get(r.id)?.adapter;if(s)return await s.runCell()},runAllCells:e=>{const r="object"==typeof e?e:{id:e};t().notebooks.get(r.id)?.adapter?.runAllCells()},clearAllOutputs:e=>{t().notebooks.get(e)?.adapter?.clearAllOutputs()},run:e=>{t().notebooks.get(e)?.adapter?.runCell()},runAll:e=>{t().notebooks.get(e)?.adapter?.runAllCells()},interrupt:e=>{t().notebooks.get(e)?.adapter?.commands.execute(NotebookCommandIds.interrupt)},insertAbove:(e,r,s)=>{t().notebooks.get(e)?.adapter?.setDefaultCellType(r),t().notebooks.get(e)?.adapter?.insertAbove(s)},insertBelow:(e,r,s)=>{t().notebooks.get(e)?.adapter?.setDefaultCellType(r),t().notebooks.get(e)?.adapter?.insertBelow(s)},delete:e=>{t().notebooks.get(e)?.adapter?.deleteCell()},changeCellType:(e,r)=>{t().notebooks.get(e)?.adapter?.changeCellType(r)},undo:e=>{t().notebooks.get(e)?.adapter?.undo()},redo:e=>{t().notebooks.get(e)?.adapter?.redo()},reset:()=>e(e=>({notebooks:/* @__PURE__ */new Map})),selectNotebookAdapter:e=>{const r=t().notebooks.get(e);if(r)return r.adapter},selectNotebookModel:e=>{if(t().notebooks.get(e))return{model:t().notebooks.get(e)?.model,changed:t().notebooks.get(e)?.model?.contentChanged}},selectTocModel:e=>t().notebooks.get(e)?.tocModel,selectKernelStatus:e=>t().notebooks.get(e)?.kernelStatus,selectActiveCell:e=>t().notebooks.get(e)?.activeCell,selectNotebookPortals:e=>t().notebooks.get(e)?.portals,selectSaveRequest:e=>t().notebooks.get(e)?.saveRequest,selectNotebookPortalDisplay:e=>t().notebooks.get(e)?.portalDisplay,save:r=>{t().notebooks.get(r.id)?.adapter?.commands.execute(NotebookCommandIds.save);const s=t().notebooks,n=s.get(r.id);n&&(n.saveRequest=r.date,e(e=>({notebooks:s})))},update:r=>{const s=t().notebooks,n=s.get(r.id);n?n.adapter=r.state.adapter:s.set(r.id,{adapter:r.state.adapter,portals:[]}),e(e=>({notebooks:s}))},activeCellChange:r=>{const s=t().notebooks,n=s.get(r.id);n&&(n.activeCell=r.cellModel,e(e=>({notebooks:s})))},changeModel:r=>{const s=t().notebooks,n=s.get(r.id);n&&(n.model=r.notebookModel,e(e=>({notebooks:s})))},changeTocModel:r=>{const s=t().notebooks,n=s.get(r.id);n&&(n.tocModel=r.tocModel,e(e=>({notebooks:s})))},changeNotebook:r=>{const s=t().notebooks,n=s.get(r.id);n&&(n.notebookChange=r.notebookChange,e(e=>({notebooks:s})))},changeKernel:r=>{const s=t().notebooks,n=s.get(r.id);n&&(n.adapter?.assignKernel(r.kernel),e(e=>({notebooks:s})))},changeKernelStatus:r=>{const s=t().notebooks,n=s.get(r.id);n&&(n.kernelStatus=r.kernelStatus,e(e=>({notebooks:s})))},addPortals:r=>{const s=t().notebooks,n=s.get(r.id);n&&(n.portals=n.portals.concat(r.portals),e(e=>({notebooks:s})))},dispose:r=>{t().setPortalDisplay({id:r,portalDisplay:void 0});const s=t().notebooks;s.get(r)&&s.delete(r),e(e=>({notebooks:s}))},setPortals:r=>{const s=t().notebooks,n=s.get(r.id);n&&(n.portals=r.portals,e(e=>({notebooks:s})))},setPortalDisplay:r=>{const s=t().notebooks,n=s.get(r.id);n&&(n.portalDisplay=r.portalDisplay,e(e=>({notebooks:s})))}})),outputsStore=createStore((e,t)=>({outputs:/* @__PURE__ */new Map,getAdapter:e=>t().outputs.get(e)?.adapter,getInput:e=>t().outputs.get(e)?.input,getModel:e=>t().outputs.get(e)?.model,getDataset:e=>t().outputs.get(e)?.dataset,getExecuteRequest:e=>t().outputs.get(e)?.code,getGradeSuccess:e=>t().outputs.get(e)?.gradeSuccess,setOutputs:(t,r)=>e(e=>({outputs:r})),setAdapter:(r,s)=>{const n=t().outputs,i=n.get(r);i?i.adapter=s:n.set(r,{adapter:s}),e(e=>({outputs:n}))},setDataset:(r,s)=>{const n=t().outputs,i=n.get(r);i?i.dataset=s:n.set(r,{dataset:s}),e(e=>({outputs:n}))},setExecuteRequest:(r,s)=>{const n=t().outputs,i=n.get(r);i?i.code=s:n.set(r,{code:s}),e(e=>({outputs:n}))},setModel:(r,s)=>{const n=t().outputs,i=n.get(r);i?i.model=s:n.set(r,{model:s}),e(e=>({outputs:n}))},setInput:(r,s)=>{const n=t().outputs,i=n.get(r);i?i.input=s:n.set(r,{input:s}),e(e=>({outputs:n}))},setGradeSuccess:(r,s)=>{const n=t().outputs,i=n.get(r);i?i.gradeSuccess=s:n.set(r,{gradeSuccess:s}),e(e=>({outputs:n}))}}));function useOutputsStore(e){return useStore(outputsStore,e)}const terminalStore=createStore((e,t)=>({dark:!1,adapter:void 0,setDark:t=>e(e=>({dark:t})),setAdapter:t=>e(e=>({adapter:t}))}));function useTerminalStore(e){return useStore(terminalStore,e)}const jupyterReactStore=createStore((e,t)=>({collaborative:!1,version:"",jupyterLabAdapter:void 0,jupyterConfig:void 0,kernelIsLoading:!0,kernel:void 0,serviceManager:void 0,serverSettings:void 0,cellsStore:cellsStore.getState(),consoleStore:consoleStore.getState(),notebookStore:notebookStore.getState(),outputStore:outputsStore.getState(),terminalStore:terminalStore.getState(),colormode:"light",setJupyterLabAdapter:t=>{e(e=>({jupyterLabAdapter:t}))},setJupyterConfig:t=>{e(e=>({jupyterConfig:t}))},setServiceManager:t=>{e(e=>({serviceManager:t}))},setVersion:r=>{r&&!t().version&&e(e=>({version:r}))},setColormode:t=>{setupPrimerPortals(t),e(e=>({colormode:t}))}}));function useJupyterReactStore(e){return useStore(jupyterReactStore,e)}function useJupyterReactStoreFromProps(e){const{defaultKernelName:t=DEFAULT_KERNEL_NAME,initCode:r="",jupyterServerToken:s=e.serviceManager?.serverSettings.token,jupyterServerUrl:n=e.serviceManager?.serverSettings.baseUrl,lite:i=!1,serverless:o,serviceManager:a,startDefaultKernel:l=!1,terminals:c=!1,useRunningKernelId:d=e.useRunningKernelId,useRunningKernelIndex:h=e.useRunningKernelIndex||-1}=e,u=reactExports.useMemo(()=>{const e=loadJupyterConfig({collaborative:!1,lite:i,jupyterServerUrl:n,jupyterServerToken:s,terminals:c});return jupyterReactStore.getState().setJupyterConfig(e),e},[]),[p,g]=reactExports.useState(a),[m,f]=reactExports.useState(),[v,_]=reactExports.useState(l||h>-1);return reactExports.useEffect(()=>{a&&(console.log("Setting Service Manager from props",a),g(a),jupyterReactStore.getState().setServiceManager(a))},[a]),reactExports.useEffect(()=>{if(o){const e=new ServiceManagerLess;return g(e),void jupyterReactStore.getState().setServiceManager(e)}if(!p){if(i)return void createLiteServiceManager(i).then(e=>{jupyterReactStore.getState().setServiceManager(e),g(e)});const e=createServerSettings(u.jupyterServerUrl,u.jupyterServerToken);ensureJupyterAuth(e).then(t=>{if(!t){const e=getJupyterServerUrl()+"/login?next="+window.location;console.warn("You need to authenticate on the Jupyter Server URL",e)}if(d&&h>-1)throw new Error("You can not ask for useRunningKernelId and useRunningKernelIndex at the same time.");if(l&&(d||h>-1))throw new Error("You can not ask for startDefaultKernel and (useRunningKernelId or useRunningKernelIndex) at the same time.");const r=new libExports$3.ServiceManager({serverSettings:e});g(r),jupyterReactStore.getState().setServiceManager(r)})}},[i,o,n]),reactExports.useEffect(()=>{console.log("Checking kernels for the new Service Manager:",p),p?.kernels.ready.then(async()=>{if(console.log("Jupyter Kernel Manager is ready",p.kernels),h>-1){await p.sessions.refreshRunning();const t=Array.from(p.kernels.running())[h],s=new Kernel({kernelManager:p.kernels,kernelName:t.name,kernelSpecName:t.name,kernelModel:t,kernelspecsManager:p.kernelspecs,sessionManager:p.sessions});if(r)try{await(s.execute(r)?.done)}catch(e){console.error("Failed to execute the initial code",e)}f(s),jupyterReactStore.getState().kernel=s,_(!1),jupyterReactStore.getState().kernelIsLoading=!1}else if(l){console.log("Starting the default Jupyter Kernel",t);const s=new Kernel({kernelName:t,kernelSpecName:t,kernelManager:p.kernels,kernelspecsManager:p.kernelspecs,sessionManager:p.sessions});s.ready.then(async()=>{if(console.log("The default Jupyter Kernel is ready",t),r)try{await(s.execute(r)?.done)}catch(e){console.error("Failed to execute the initial code",e)}f(s),jupyterReactStore.getState().kernel=s,_(!1),jupyterReactStore.getState().kernelIsLoading=!1})}})},[p]),useStore(jupyterReactStore)}const JupyterReactColormodeContext=reactExports.createContext(void 0);function JupyterReactTheme(e){const{children:t,colormode:r="light",loadJupyterLabCss:s=!0,theme:n=jupyterLabTheme,...i}=e,{colormode:o,jupyterLabAdapter:a}=useJupyterReactStore(),[l,c]=reactExports.useState(r),[d,h]=reactExports.useState(void 0);return reactExports.useEffect(()=>{const{insideJupyterLab:e}=loadJupyterConfig();h(e)},[]),reactExports.useEffect(()=>{o!==l&&c(o)},[o,d]),reactExports.useEffect(()=>{if(void 0!==d){let e=function({matches:e}){},t=function(e){const t=e.theme&&!e.isLight(e.theme)?"dark":"light";c(t),setupPrimerPortals(t)};if(!d)return e({matches:window.matchMedia("(prefers-color-scheme: dark)").matches}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)};{const e=a?.service("@jupyterlab/apputils-extension:themes");if(e)return t(e),e.themeChanged.connect(t),()=>{e.themeChanged.disconnect(t)}}}},[d,a]),void 0!==d?jsxRuntimeExports.jsxs(JupyterReactColormodeContext.Provider,{value:l,children:[s&&jsxRuntimeExports.jsx(JupyterLabCss,{colormode:l}),jsxRuntimeExports.jsx(ThemeProvider,{colorMode:l,theme:n,dayScheme:"light",nightScheme:"dark",children:jsxRuntimeExports.jsx(BaseStyles,{style:{backgroundColor:"var(--bgColor-default)",color:"var(--fgColor-default)",fontSize:"var(--text-body-size-medium)"},...i,children:t})})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}export{find$1 as $,ElementExt as A,renderText as B,CodeMirrorEditor as C,VDomRenderer as D,EditorLanguageRegistry as E,stopIcon as F,refreshIcon as G,SessionContextDialogs as H,IEditorMimeTypeService as I,JupyterReactTheme as J,ReactWidget as K,ToolbarButtonComponent as L,MimeModel as M,LabIcon as N,OutputAreaModel as O,PromiseDelegate as P,circleIcon as Q,RenderedJavaScript as R,Sanitizer as S,ToolbarButton as T,UseSignal as U,VDomModel as V,Widget as W,offlineBoltIcon as X,circleEmptyIcon as Y,Toolbar$1 as Z,SessionContext as _,EditorExtensionRegistry as a,requireIsArray as a$,CommandRegistry as a0,runIcon as a1,BoxPanel as a2,cellsStore as a3,useCellsStore as a4,VirtualDOM as a5,h as a6,PanelLayout as a7,ObservableList as a8,Panel as a9,WidgetTracker as aA,ABCWidgetFactory as aB,StaticNotebook as aC,NotebookPanel as aD,kernelIcon as aE,NotebookActions as aF,NotebookCommandIds as aG,DisposableSet as aH,NotebookPanelProvider as aI,addNotebookCommands as aJ,notebookStore as aK,requireSerialize as aL,requireMessages as aM,mockSocketExports as aN,ObservableMap as aO,ArrayExt as aP,commonjsRequire as aQ,useOutputsStore as aR,classes as aS,jupyterHighlightStyle as aT,require_MapCache as aU,require_Symbol as aV,require_Uint8Array as aW,requireEq as aX,require_getAllKeys as aY,require_Stack as aZ,require_getTag as a_,SplitPanel as aa,isCodeCellModel as ab,Drag as ac,MimeData as ad,DOMUtils as ae,MainAreaWidget as af,UUID as ag,consoleIcon as ah,Token as ai,useConsoleStore as aj,libExports$3 as ak,Platform as al,useTerminalStore as am,createRelativePositionFromTypeIndex as an,createRelativePositionFromJSON as ao,createAbsolutePositionFromRelativePosition as ap,YDocument as aq,createCellModelFromSharedType as ar,createCell as as,YMap as at,MINOR_VERSION as au,MAJOR_VERSION as av,showDialog as aw,Dialog as ax,DisposableDelegate as ay,showErrorMessage as az,Printing as b,requireIsBuffer as b0,requireIsTypedArray as b1,requireIsObjectLike as b2,requireIsPlainObject as b3,requireParseSrcset as b4,requirePostcss as b5,requireLib as b6,requireEscapeStringRegexp as b7,TabBar as b8,each as b9,newUuid as c,RawCell as d,Cell as e,RawCellModel as f,createStandaloneCell as g,MarkdownCell as h,MarkdownCellModel as i,CodeCell as j,CodeCellModel as k,libExports$2 as l,EditorThemeRegistry as m,nullTranslator as n,OutputArea as o,MessageLoop as p,COMPLETER_ENABLED_CLASS as q,COMPLETER_ACTIVE_CLASS as r,standardRendererFactories as s,Signal as t,useJupyterReactStoreFromProps as u,COMPLETER_LINE_BEGINNING_CLASS as v,Message as w,JSONExt as x,ybinding as y,StringExt as z};
//# sourceMappingURL=JupyterReactTheme-CX3WbnDJ.js.map
