/*
 * Copyright (c) 2021-2023 Datalayer, Inc.
 *
 * MIT License
 */

/**
 * Tool definition for executing code directly in kernel
 *
 * @module tools/definitions/executeCode
 */

import type { ToolDefinition } from '../core';
import { zodToToolParameters } from '../core/zodUtils';
import { executeCodeParamsSchema } from '../schemas/executeCode';

/**
 * Tool definition for executing code directly in the kernel
 *
 * Executes code without creating or modifying blocks in the document.
 */
export const executeCodeTool: ToolDefinition = {
  name: 'datalayer_executeCode_lexical',
  displayName: 'Execute Code in Kernel (Lexical)',
  toolReferenceName: 'executeCode',
  description:
    required: ['code'],
  },

  operation: 'executeCode',

  config: {
    confirmationMessage: (params: { code: string }) =>
      `Execute code: ${params.code.substring(0, 50)}${params.code.length > 50 ? '...' : ''}?`,
    invocationMessage: () => 'Executing code in kernel',
    requiresConfirmation: false,
    canBeReferencedInPrompt: true,
    priority: 'high',
  },

  tags: ['lexical', 'kernel', 'execute', 'code', 'inspection'],
};
